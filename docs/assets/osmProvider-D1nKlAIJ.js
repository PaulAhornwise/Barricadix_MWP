const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-Cb2LkSoU.js","assets/main-ez1ojIn0.css"])))=>i.map(i=>d[i]);
import{_ as t}from"./main-Cb2LkSoU.js";const e={id:"osm",supports:()=>!0,async fetchRoadNetwork(e){const{fetchOsmBundleForPolygon:o}=await t(async()=>{const{fetchOsmBundleForPolygon:t}=await import("./main-Cb2LkSoU.js").then(t=>t.o);return{fetchOsmBundleForPolygon:t}},__vite__mapDeps([0,1])),r=function(t){let e;if("features"in t&&t.features.length>0)e=t.features[0].geometry.coordinates[0];else{if(!("geometry"in t))throw new Error("Invalid polygon format for OSM provider");e=t.geometry.coordinates[0]}return e.map(t=>({lat:t[1],lng:t[0]}))}(e);try{const t=await o(r),e=[],n=[],a=new Map;let s=1;return t.ways.forEach(t=>{const o=[];(t.nodes||[]).forEach(t=>{if(!t)return;const r=`${t.lat.toFixed(7)},${t.lon.toFixed(7)}`;let n=a.get(r);n||(n={id:s++,lat:t.lat,lon:t.lon},a.set(r,n),e.push(n)),o.push(n.id)}),o.length>1&&n.push({id:t.id,nodeIds:o,tags:t.tags||{}})}),{nodes:e,ways:n,calming:t.calming||[]}}catch(n){throw new Error(`OSM request failed: ${n instanceof Error?n.message:"Unknown error"}`)}},makeBasemapLayer:()=>L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors"})};export{e as osmProvider};
