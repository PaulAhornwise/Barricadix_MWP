/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let e,t;function n(n,r,i){var o,a,s;if(!(null===(o=n.httpOptions)||void 0===o?void 0:o.baseUrl)){const o={geminiUrl:e,vertexUrl:t};return n.vertexai?null!==(a=o.vertexUrl)&&void 0!==a?a:r:null!==(s=o.geminiUrl)&&void 0!==s?s:i}return n.httpOptions.baseUrl}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class r{}function i(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return null!=e?String(e):""}throw new Error(`Key '${n}' not found in valueMap.`)})}function o(e,t,n){for(let a=0;a<t.length-1;a++){const r=t[a];if(r.endsWith("[]")){const i=r.slice(0,-2);if(!(i in e)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${r}`);e[i]=Array.from({length:n.length},()=>({}))}if(Array.isArray(e[i])){const r=e[i];if(Array.isArray(n))for(let e=0;e<r.length;e++){o(r[e],t.slice(a+1),n[e])}else for(const e of r)o(e,t.slice(a+1),n)}return}if(r.endsWith("[0]")){const i=r.slice(0,-3);i in e||(e[i]=[{}]);return void o(e[i][0],t.slice(a+1),n)}e[r]&&"object"==typeof e[r]||(e[r]={}),e=e[r]}const r=t[t.length-1],i=e[r];if(void 0!==i){if(!n||"object"==typeof n&&0===Object.keys(n).length)return;if(n===i)return;if("object"!=typeof i||"object"!=typeof n||null===i||null===n)throw new Error(`Cannot set value for an existing key. Key: ${r}`);Object.assign(i,n)}else e[r]=n}function a(e,t){try{if(1===t.length&&"_self"===t[0])return e;for(let n=0;n<t.length;n++){if("object"!=typeof e||null===e)return;const r=t[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const r=e[i];if(!Array.isArray(r))return;return r.map(e=>a(e,t.slice(n+1)))}return}e=e[r]}return e}catch(n){if(n instanceof TypeError)return;throw n}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s(e,t){if(!t||"string"!=typeof t)throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return`publishers/google/models/${t}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function l(e,t){const n=s(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function u(e,t){return Array.isArray(t)?t.map(t=>c(e,t)):[c(e,t)]}function c(e,t){if("object"==typeof t&&null!==t)return t;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof t)}function d(e,t){if(null==t)throw new Error("PartUnion is required");if("object"==typeof t)return t;if("string"==typeof t)return{text:t};throw new Error("Unsupported part type: "+typeof t)}function p(e,t){if(null==t||Array.isArray(t)&&0===t.length)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>d(0,e)):[d(0,t)]}function h(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function f(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function m(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function g(e,t){if(null==t)throw new Error("ContentUnion is required");return h(t)?t:{role:"user",parts:p(0,t)}}function y(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const t=g(0,e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){const e=g(0,t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>g(0,e)):[g(0,t)]}function v(e,t){if(null==t||Array.isArray(t)&&0===t.length)throw new Error("contents are required");if(!Array.isArray(t)){if(f(t)||m(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[g(0,t)]}const n=[],r=[],i=h(t[0]);for(const o of t){const e=h(o);if(e!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)n.push(o);else{if(f(o)||m(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(o)}}return i||n.push({role:"user",parts:p(0,r)}),n}function b(e,t){return t}function S(e,t){if("object"==typeof t)return t;if("string"==typeof t)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error("Unsupported speechConfig type: "+typeof t)}function w(e,t){return t}function E(e,t){if(!Array.isArray(t))throw new Error("tool is required and must be an array of Tools");return t}function k(e,t){if("string"!=typeof t)throw new Error("name must be a string");return function(e,t,n,r=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}(e,t,"cachedContents")}function T(e,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function C(e,t){if("string"!=typeof t)throw new Error("fromImageBytes must be a string");return t}function A(e,t){if("string"!=typeof t)throw new Error("fromName must be a string");return t.startsWith("files/")?t.split("files/")[1]:t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["videoMetadata"]))throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const i=a(t,["codeExecutionResult"]);null!=i&&o(n,["codeExecutionResult"],i);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const p=a(t,["text"]);return null!=p&&o(n,["text"],p),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function P(e,t){const n={},r=a(t,["dynamicRetrievalConfig"]);return null!=r&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["dynamicThreshold"]);return null!=i&&o(n,["dynamicThreshold"],i),n}(0,r)),n}function I(e,t){const n={},r=a(t,["functionCallingConfig"]);return null!=r&&o(n,["functionCallingConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["allowedFunctionNames"]);return null!=i&&o(n,["allowedFunctionNames"],i),n}(0,r)),n}function _(e,t,n){const r=a(t,["ttl"]);void 0!==n&&null!=r&&o(n,["ttl"],r);const i=a(t,["expireTime"]);void 0!==n&&null!=i&&o(n,["expireTime"],i);const s=a(t,["displayName"]);void 0!==n&&null!=s&&o(n,["displayName"],s);const l=a(t,["contents"]);if(void 0!==n&&null!=l){let e=v(0,l);Array.isArray(e)&&(e=e.map(e=>x(0,e))),o(n,["contents"],e)}const u=a(t,["systemInstruction"]);void 0!==n&&null!=u&&o(n,["systemInstruction"],x(0,g(0,u)));const c=a(t,["tools"]);if(void 0!==n&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const r=a(t,["googleSearchRetrieval"]);null!=r&&o(n,["googleSearchRetrieval"],P(0,r));const i=a(t,["codeExecution"]);null!=i&&o(n,["codeExecution"],i);const s=a(t,["functionDeclarations"]);return null!=s&&o(n,["functionDeclarations"],s),n}(0,e))),o(n,["tools"],e)}const d=a(t,["toolConfig"]);return void 0!==n&&null!=d&&o(n,["toolConfig"],I(0,d)),{}}function O(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","name"],k(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const r=a(t,["ttl"]);void 0!==n&&null!=r&&o(n,["ttl"],r);const i=a(t,["expireTime"]);return void 0!==n&&null!=i&&o(n,["expireTime"],i),{}}(0,i,n)),n}function M(e,t){const n={},r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const r=a(t,["pageSize"]);void 0!==n&&null!=r&&o(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);return void 0!==n&&null!=i&&o(n,["_query","pageToken"],i),{}}(0,r,n)),n}function D(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["videoMetadata"]);null!=r&&o(n,["videoMetadata"],r);const i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const p=a(t,["inlineData"]);null!=p&&o(n,["inlineData"],p);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function N(e,t){const n={},r=a(t,["dynamicRetrievalConfig"]);return null!=r&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["dynamicThreshold"]);return null!=i&&o(n,["dynamicThreshold"],i),n}(0,r)),n}function R(e,t){const n={},r=a(t,["functionCallingConfig"]);return null!=r&&o(n,["functionCallingConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["allowedFunctionNames"]);return null!=i&&o(n,["allowedFunctionNames"],i),n}(0,r)),n}function z(e,t,n){const r=a(t,["ttl"]);void 0!==n&&null!=r&&o(n,["ttl"],r);const i=a(t,["expireTime"]);void 0!==n&&null!=i&&o(n,["expireTime"],i);const s=a(t,["displayName"]);void 0!==n&&null!=s&&o(n,["displayName"],s);const l=a(t,["contents"]);if(void 0!==n&&null!=l){let e=v(0,l);Array.isArray(e)&&(e=e.map(e=>D(0,e))),o(n,["contents"],e)}const u=a(t,["systemInstruction"]);void 0!==n&&null!=u&&o(n,["systemInstruction"],D(0,g(0,u)));const c=a(t,["tools"]);if(void 0!==n&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["retrieval"]);null!=r&&o(n,["retrieval"],r),null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const i=a(t,["googleSearchRetrieval"]);null!=i&&o(n,["googleSearchRetrieval"],N(0,i));const s=a(t,["codeExecution"]);null!=s&&o(n,["codeExecution"],s);const l=a(t,["functionDeclarations"]);return null!=l&&o(n,["functionDeclarations"],l),n}(0,e))),o(n,["tools"],e)}const d=a(t,["toolConfig"]);return void 0!==n&&null!=d&&o(n,["toolConfig"],R(0,d)),{}}function B(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","name"],k(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const r=a(t,["ttl"]);void 0!==n&&null!=r&&o(n,["ttl"],r);const i=a(t,["expireTime"]);return void 0!==n&&null!=i&&o(n,["expireTime"],i),{}}(0,i,n)),n}function F(e,t){const n={},r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const r=a(t,["pageSize"]);void 0!==n&&null!=r&&o(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);return void 0!==n&&null!=i&&o(n,["_query","pageToken"],i),{}}(0,r,n)),n}function V(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["displayName"]);null!=i&&o(n,["displayName"],i);const s=a(t,["model"]);null!=s&&o(n,["model"],s);const l=a(t,["createTime"]);null!=l&&o(n,["createTime"],l);const u=a(t,["updateTime"]);null!=u&&o(n,["updateTime"],u);const c=a(t,["expireTime"]);null!=c&&o(n,["expireTime"],c);const d=a(t,["usageMetadata"]);return null!=d&&o(n,["usageMetadata"],d),n}function U(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["displayName"]);null!=i&&o(n,["displayName"],i);const s=a(t,["model"]);null!=s&&o(n,["model"],s);const l=a(t,["createTime"]);null!=l&&o(n,["createTime"],l);const u=a(t,["updateTime"]);null!=u&&o(n,["updateTime"],u);const c=a(t,["expireTime"]);null!=c&&o(n,["expireTime"],c);const d=a(t,["usageMetadata"]);return null!=d&&o(n,["usageMetadata"],d),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
var j,$,q,H,G,W,K,Y,Q,J,X,Z,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,de,pe,he,fe,me,ge,ye,ve,be,Se,we,Ee,ke,Te,Ce,Ae,xe,Pe,Ie,_e,Oe,Le,Me,De,Ne,Re,ze,Be,Fe,Ve,Ue,je,$e,qe,He,Ge,We,Ke,Ye,Qe,Je,Xe,Ze;($=j||(j={})).PAGED_ITEM_BATCH_JOBS="batchJobs",$.PAGED_ITEM_MODELS="models",$.PAGED_ITEM_TUNING_JOBS="tuningJobs",$.PAGED_ITEM_FILES="files",$.PAGED_ITEM_CACHED_CONTENTS="cachedContents";class et{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};o=n?"object"==typeof n?Object.assign({},n):n:{config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=null!==(i=null===(r=o.config)||void 0===r?void 0:r.pageSize)&&void 0!==i?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(H=q||(q={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",H.OUTCOME_OK="OUTCOME_OK",H.OUTCOME_FAILED="OUTCOME_FAILED",H.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(W=G||(G={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",W.PYTHON="PYTHON",(Y=K||(K={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",Y.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",Y.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",Y.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",Y.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",Y.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(J=Q||(Q={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",J.SEVERITY="SEVERITY",J.PROBABILITY="PROBABILITY",(Z=X||(X={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",Z.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Z.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Z.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Z.BLOCK_NONE="BLOCK_NONE",Z.OFF="OFF",(te=ee||(ee={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",te.MODE_DYNAMIC="MODE_DYNAMIC",(re=ne||(ne={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",re.STRING="STRING",re.NUMBER="NUMBER",re.INTEGER="INTEGER",re.BOOLEAN="BOOLEAN",re.ARRAY="ARRAY",re.OBJECT="OBJECT",(oe=ie||(ie={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",oe.STOP="STOP",oe.MAX_TOKENS="MAX_TOKENS",oe.SAFETY="SAFETY",oe.RECITATION="RECITATION",oe.LANGUAGE="LANGUAGE",oe.OTHER="OTHER",oe.BLOCKLIST="BLOCKLIST",oe.PROHIBITED_CONTENT="PROHIBITED_CONTENT",oe.SPII="SPII",oe.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",oe.IMAGE_SAFETY="IMAGE_SAFETY",(se=ae||(ae={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",se.NEGLIGIBLE="NEGLIGIBLE",se.LOW="LOW",se.MEDIUM="MEDIUM",se.HIGH="HIGH",(ue=le||(le={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",ue.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",ue.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",ue.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",ue.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(de=ce||(ce={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",de.SAFETY="SAFETY",de.OTHER="OTHER",de.BLOCKLIST="BLOCKLIST",de.PROHIBITED_CONTENT="PROHIBITED_CONTENT",(he=pe||(pe={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",he.ON_DEMAND="ON_DEMAND",he.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(me=fe||(fe={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",me.TEXT="TEXT",me.IMAGE="IMAGE",me.AUDIO="AUDIO",(ye=ge||(ge={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",ye.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",ye.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",ye.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(be=ve||(ve={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",be.JOB_STATE_QUEUED="JOB_STATE_QUEUED",be.JOB_STATE_PENDING="JOB_STATE_PENDING",be.JOB_STATE_RUNNING="JOB_STATE_RUNNING",be.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",be.JOB_STATE_FAILED="JOB_STATE_FAILED",be.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",be.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",be.JOB_STATE_PAUSED="JOB_STATE_PAUSED",be.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",be.JOB_STATE_UPDATING="JOB_STATE_UPDATING",be.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(we=Se||(Se={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",we.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",we.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",we.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",we.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",we.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",we.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(ke=Ee||(Ee={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",ke.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",ke.BALANCED="BALANCED",ke.PRIORITIZE_COST="PRIORITIZE_COST",(Ce=Te||(Te={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Ce.MODE_DYNAMIC="MODE_DYNAMIC",(xe=Ae||(Ae={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",xe.AUTO="AUTO",xe.ANY="ANY",xe.NONE="NONE",(Ie=Pe||(Pe={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Ie.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Ie.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Ie.BLOCK_NONE="BLOCK_NONE",(Oe=_e||(_e={})).DONT_ALLOW="DONT_ALLOW",Oe.ALLOW_ADULT="ALLOW_ADULT",Oe.ALLOW_ALL="ALLOW_ALL",(Me=Le||(Le={})).auto="auto",Me.en="en",Me.ja="ja",Me.ko="ko",Me.hi="hi",(Ne=De||(De={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",Ne.PROCESSING="PROCESSING",Ne.ACTIVE="ACTIVE",Ne.FAILED="FAILED",(ze=Re||(Re={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",ze.UPLOADED="UPLOADED",ze.GENERATED="GENERATED",(Fe=Be||(Be={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",Fe.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",Fe.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",Fe.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",Fe.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(Ue=Ve||(Ve={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",Ue.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",Ue.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",Ue.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",($e=je||(je={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",$e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",$e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",$e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(He=qe||(qe={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",He.TEXT="TEXT",He.IMAGE="IMAGE",He.VIDEO="VIDEO",He.AUDIO="AUDIO",He.DOCUMENT="DOCUMENT",(We=Ge||(Ge={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",We.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",We.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(Ye=Ke||(Ke={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",Ye.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",Ye.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(Je=Qe||(Qe={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",Je.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",Je.NO_INTERRUPTION="NO_INTERRUPTION",(Ze=Xe||(Xe={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",Ze.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",Ze.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT";class tt{get text(){var e,t,n,r,i,o,a,s;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length;let l="",u=!1;const c=[];for(const d of null!==(s=null===(a=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)&&void 0!==s?s:[]){for(const[e,t]of Object.entries(d))"text"===e||"thought"===e||null===t&&void 0===t||c.push(e);if("string"==typeof d.text){if("boolean"==typeof d.thought&&d.thought)continue;u=!0,l+=d.text}}return c.length,u?l:void 0}get data(){var e,t,n,r,i,o,a,s;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length;let l="";const u=[];for(const c of null!==(s=null===(a=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)&&void 0!==s?s:[]){for(const[e,t]of Object.entries(c))"inlineData"===e||null===t&&void 0===t||u.push(e);c.inlineData&&"string"==typeof c.inlineData.data&&(l+=atob(c.inlineData.data))}return u.length,l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,r,i,o,a,s;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length;const l=null===(s=null===(a=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);return 0!==(null==l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,r,i,o,a,s,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length;const u=null===(s=null===(a=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);return 0!==(null==u?void 0:u.length)?null===(l=null==u?void 0:u[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,r,i,o,a,s,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length;const u=null===(s=null===(a=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);return 0!==(null==u?void 0:u.length)?null===(l=null==u?void 0:u[0])||void 0===l?void 0:l.output:void 0}}class nt{}class rt{}class it{}class ot{}class at{}class st{}class lt{}class ut{}class ct{}class dt{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class pt{}class ht{}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ft extends r{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new et(j.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,n,r,s;let u,c="",d={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["model"],l(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],z(0,i,n)),n}(this.apiClient,e);return c=i("cachedContents",r._url),d=r._query,delete r.config,delete r._url,delete r._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),u.then(e=>U(this.apiClient,e))}{const t=function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["model"],l(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],_(0,i,n)),n}(this.apiClient,e);return c=i("cachedContents",t._url),d=t._query,delete t.config,delete t._url,delete t._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),u.then(e=>V(this.apiClient,e))}}async get(e){var t,n,r,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","name"],k(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return u=i("{name}",r._url),c=r._query,delete r.config,delete r._url,delete r._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>U(this.apiClient,e))}{const t=function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","name"],k(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return u=i("{name}",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>V(this.apiClient,e))}}async delete(e){var t,n,r,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","name"],k(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return u=i("{name}",r._url),c=r._query,delete r.config,delete r._url,delete r._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(()=>{const e={},t=new lt;return Object.assign(t,e),t})}{const t=function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","name"],k(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return u=i("{name}",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(()=>{const e={},t=new lt;return Object.assign(t,e),t})}}async update(e){var t,n,r,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const r=B(this.apiClient,e);return s=i("{name}",r._url),l=r._query,delete r.config,delete r._url,delete r._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>U(this.apiClient,e))}{const t=O(this.apiClient,e);return s=i("{name}",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>V(this.apiClient,e))}}async listInternal(e){var t,n,r,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const r=F(this.apiClient,e);return u=i("cachedContents",r._url),c=r._query,delete r.config,delete r._url,delete r._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},r=a(t,["nextPageToken"]);null!=r&&o(n,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>U(0,e))),o(n,["cachedContents"],e)}return n}(this.apiClient,e),n=new ut;return Object.assign(n,t),n})}{const t=M(this.apiClient,e);return u=i("cachedContents",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},r=a(t,["nextPageToken"]);null!=r&&o(n,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>V(0,e))),o(n,["cachedContents"],e)}return n}(this.apiClient,e),n=new ut;return Object.assign(n,t),n})}}}function mt(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(e){return this instanceof gt?(this.v=e,this):new gt(e)}function yt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{(n=i[e](t)).value instanceof gt?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function vt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=mt(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function bt(e){var t;if(null==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&St(n)}function St(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts){if(void 0===t||0===Object.keys(t).length)return!1;if(void 0!==t.text&&""===t.text)return!1}return!0}"function"==typeof SuppressedError&&SuppressedError;class wt{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Et(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class Et{constructor(e,t,n,r={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length){if("user"!==e[0].role)throw new Error("History must start with a user turn.");for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error(`Role must be user or model, but got ${t.role}.`)}}(i)}async sendMessage(e){var t;await this.sendPromise;const n=g(this.apiClient,e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t;const i=null===(t=null===(e=(await r).candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,o=i?[i]:[];this.recordHistory(n,o)})(),await this.sendPromise,r}async sendMessageStream(e){var t;await this.sendPromise;const n=g(this.apiClient,e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,n)}getHistory(e=!1){return e?function(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let r=0,i=e[0];for(;r<n;)if("user"===e[r].role)i=e[r],r++;else{const o=[];let a=!0;for(;r<n&&"model"===e[r].role;)o.push(e[r]),a&&!St(e[r])&&(a=!1),r++;a&&(t.push(i),t.push(...o))}return t}(this.history):this.history}processStreamResponse(e,t){var n,r;return yt(this,arguments,function*(){var i,o,a,s;const l=[];try{for(var u,c=!0,d=vt(e);!(i=(u=yield gt(d.next())).done);c=!0){s=u.value,c=!1;const e=s;if(bt(e)){const t=null===(r=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===r?void 0:r.content;void 0!==t&&l.push(t)}yield yield gt(e)}}catch(p){o={error:p}}finally{try{c||i||!(a=d.return)||(yield gt(a.call(d)))}finally{if(o)throw o.error}}this.recordHistory(t,l)})}recordHistory(e,t){let n=[];t.length>0&&t.every(e=>"model"===e.role)?n=t:n.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...n)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kt(e,t){const n={},r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const r=a(t,["pageSize"]);void 0!==n&&null!=r&&o(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);return void 0!==n&&null!=i&&o(n,["_query","pageToken"],i),{}}(0,r,n)),n}function Tt(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["displayName"]);null!=i&&o(n,["displayName"],i);const s=a(t,["mimeType"]);null!=s&&o(n,["mimeType"],s);const l=a(t,["sizeBytes"]);null!=l&&o(n,["sizeBytes"],l);const u=a(t,["createTime"]);null!=u&&o(n,["createTime"],u);const c=a(t,["expirationTime"]);null!=c&&o(n,["expirationTime"],c);const d=a(t,["updateTime"]);null!=d&&o(n,["updateTime"],d);const p=a(t,["sha256Hash"]);null!=p&&o(n,["sha256Hash"],p);const h=a(t,["uri"]);null!=h&&o(n,["uri"],h);const f=a(t,["downloadUri"]);null!=f&&o(n,["downloadUri"],f);const m=a(t,["state"]);null!=m&&o(n,["state"],m);const g=a(t,["source"]);null!=g&&o(n,["source"],g);const y=a(t,["videoMetadata"]);null!=y&&o(n,["videoMetadata"],y);const v=a(t,["error"]);return null!=v&&o(n,["error"],function(e,t){const n={},r=a(t,["details"]);null!=r&&o(n,["details"],r);const i=a(t,["message"]);null!=i&&o(n,["message"],i);const s=a(t,["code"]);return null!=s&&o(n,["code"],s),n}(0,v)),n}function Ct(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["displayName"]);null!=i&&o(n,["displayName"],i);const s=a(t,["mimeType"]);null!=s&&o(n,["mimeType"],s);const l=a(t,["sizeBytes"]);null!=l&&o(n,["sizeBytes"],l);const u=a(t,["createTime"]);null!=u&&o(n,["createTime"],u);const c=a(t,["expirationTime"]);null!=c&&o(n,["expirationTime"],c);const d=a(t,["updateTime"]);null!=d&&o(n,["updateTime"],d);const p=a(t,["sha256Hash"]);null!=p&&o(n,["sha256Hash"],p);const h=a(t,["uri"]);null!=h&&o(n,["uri"],h);const f=a(t,["downloadUri"]);null!=f&&o(n,["downloadUri"],f);const m=a(t,["state"]);null!=m&&o(n,["state"],m);const g=a(t,["source"]);null!=g&&o(n,["source"],g);const y=a(t,["videoMetadata"]);null!=y&&o(n,["videoMetadata"],y);const v=a(t,["error"]);return null!=v&&o(n,["error"],function(e,t){const n={},r=a(t,["details"]);null!=r&&o(n,["details"],r);const i=a(t,["message"]);null!=i&&o(n,["message"],i);const s=a(t,["code"]);return null!=s&&o(n,["code"],s),n}(0,v)),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class At extends r{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new et(j.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>Ct(this.apiClient,e))}async listInternal(e){var t,n;let r,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kt(this.apiClient,e);return s=i("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e,t){const n={},r=a(t,["nextPageToken"]);null!=r&&o(n,["nextPageToken"],r);const i=a(t,["files"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Ct(0,e))),o(n,["files"],e)}return n}(this.apiClient,e),n=new ct;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let r,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=function(e,t){const n={},r=a(t,["file"]);null!=r&&o(n,["file"],Tt(0,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return s=i("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(()=>{const e={},t=new pt;return Object.assign(t,e),t})}}async get(e){var t,n;let r,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","file"],A(0,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return s=i("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>Ct(this.apiClient,e))}}async delete(e){var t,n;let r,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","file"],A(0,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return s=i("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(()=>{const e={},t=new ht;return Object.assign(t,e),t})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xt(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["videoMetadata"]))throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const i=a(t,["codeExecutionResult"]);null!=i&&o(n,["codeExecutionResult"],i);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const p=a(t,["text"]);return null!=p&&o(n,["text"],p),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function Pt(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["videoMetadata"]);null!=r&&o(n,["videoMetadata"],r);const i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const p=a(t,["inlineData"]);null!=p&&o(n,["inlineData"],p);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function It(e,t){const n={},r=a(t,["dynamicRetrievalConfig"]);return null!=r&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["dynamicThreshold"]);return null!=i&&o(n,["dynamicThreshold"],i),n}(0,r)),n}function _t(e,t){const n={},r=a(t,["dynamicRetrievalConfig"]);return null!=r&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["dynamicThreshold"]);return null!=i&&o(n,["dynamicThreshold"],i),n}(0,r)),n}function Ot(e,t){const n={},r=a(t,["automaticActivityDetection"]);null!=r&&o(n,["automaticActivityDetection"],function(e,t){const n={},r=a(t,["disabled"]);null!=r&&o(n,["disabled"],r);const i=a(t,["startOfSpeechSensitivity"]);null!=i&&o(n,["startOfSpeechSensitivity"],i);const s=a(t,["endOfSpeechSensitivity"]);null!=s&&o(n,["endOfSpeechSensitivity"],s);const l=a(t,["prefixPaddingMs"]);null!=l&&o(n,["prefixPaddingMs"],l);const u=a(t,["silenceDurationMs"]);return null!=u&&o(n,["silenceDurationMs"],u),n}(0,r));const i=a(t,["activityHandling"]);null!=i&&o(n,["activityHandling"],i);const s=a(t,["turnCoverage"]);return null!=s&&o(n,["turnCoverage"],s),n}function Lt(e,t){const n={},r=a(t,["automaticActivityDetection"]);null!=r&&o(n,["automaticActivityDetection"],function(e,t){const n={},r=a(t,["disabled"]);null!=r&&o(n,["disabled"],r);const i=a(t,["startOfSpeechSensitivity"]);null!=i&&o(n,["startOfSpeechSensitivity"],i);const s=a(t,["endOfSpeechSensitivity"]);null!=s&&o(n,["endOfSpeechSensitivity"],s);const l=a(t,["prefixPaddingMs"]);null!=l&&o(n,["prefixPaddingMs"],l);const u=a(t,["silenceDurationMs"]);return null!=u&&o(n,["silenceDurationMs"],u),n}(0,r));const i=a(t,["activityHandling"]);null!=i&&o(n,["activityHandling"],i);const s=a(t,["turnCoverage"]);return null!=s&&o(n,["turnCoverage"],s),n}function Mt(e,t){const n={},r=a(t,["triggerTokens"]);null!=r&&o(n,["triggerTokens"],r);const i=a(t,["slidingWindow"]);return null!=i&&o(n,["slidingWindow"],function(e,t){const n={},r=a(t,["targetTokens"]);return null!=r&&o(n,["targetTokens"],r),n}(0,i)),n}function Dt(e,t){const n={},r=a(t,["triggerTokens"]);null!=r&&o(n,["triggerTokens"],r);const i=a(t,["slidingWindow"]);return null!=i&&o(n,["slidingWindow"],function(e,t){const n={},r=a(t,["targetTokens"]);return null!=r&&o(n,["targetTokens"],r),n}(0,i)),n}function Nt(e,t,n){const r=a(t,["generationConfig"]);void 0!==n&&null!=r&&o(n,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);void 0!==n&&null!=i&&o(n,["setup","generationConfig","responseModalities"],i);const s=a(t,["temperature"]);void 0!==n&&null!=s&&o(n,["setup","generationConfig","temperature"],s);const l=a(t,["topP"]);void 0!==n&&null!=l&&o(n,["setup","generationConfig","topP"],l);const u=a(t,["topK"]);void 0!==n&&null!=u&&o(n,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);void 0!==n&&null!=c&&o(n,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);void 0!==n&&null!=d&&o(n,["setup","generationConfig","mediaResolution"],d);const p=a(t,["seed"]);void 0!==n&&null!=p&&o(n,["setup","generationConfig","seed"],p);const h=a(t,["speechConfig"]);void 0!==n&&null!=h&&o(n,["setup","generationConfig","speechConfig"],h);const f=a(t,["systemInstruction"]);void 0!==n&&null!=f&&o(n,["setup","systemInstruction"],xt(0,g(0,f)));const m=a(t,["tools"]);if(void 0!==n&&null!=m){let e=E(0,m);Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const r=a(t,["googleSearchRetrieval"]);null!=r&&o(n,["googleSearchRetrieval"],It(0,r));const i=a(t,["codeExecution"]);null!=i&&o(n,["codeExecution"],i);const s=a(t,["functionDeclarations"]);return null!=s&&o(n,["functionDeclarations"],s),n}(0,w(0,e)))),o(n,["setup","tools"],e)}const y=a(t,["sessionResumption"]);if(void 0!==n&&null!=y&&o(n,["setup","sessionResumption"],function(e,t){const n={},r=a(t,["handle"]);if(null!=r&&o(n,["handle"],r),void 0!==a(t,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return n}(0,y)),void 0!==a(t,["inputAudioTranscription"]))throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const v=a(t,["outputAudioTranscription"]);void 0!==n&&null!=v&&o(n,["setup","outputAudioTranscription"],{});const b=a(t,["realtimeInputConfig"]);void 0!==n&&null!=b&&o(n,["setup","realtimeInputConfig"],Ot(0,b));const S=a(t,["contextWindowCompression"]);return void 0!==n&&null!=S&&o(n,["setup","contextWindowCompression"],Mt(0,S)),{}}function Rt(e,t,n){const r=a(t,["generationConfig"]);void 0!==n&&null!=r&&o(n,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);void 0!==n&&null!=i&&o(n,["setup","generationConfig","responseModalities"],i);const s=a(t,["temperature"]);void 0!==n&&null!=s&&o(n,["setup","generationConfig","temperature"],s);const l=a(t,["topP"]);void 0!==n&&null!=l&&o(n,["setup","generationConfig","topP"],l);const u=a(t,["topK"]);void 0!==n&&null!=u&&o(n,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);void 0!==n&&null!=c&&o(n,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);void 0!==n&&null!=d&&o(n,["setup","generationConfig","mediaResolution"],d);const p=a(t,["seed"]);void 0!==n&&null!=p&&o(n,["setup","generationConfig","seed"],p);const h=a(t,["speechConfig"]);void 0!==n&&null!=h&&o(n,["setup","generationConfig","speechConfig"],h);const f=a(t,["systemInstruction"]);void 0!==n&&null!=f&&o(n,["setup","systemInstruction"],Pt(0,g(0,f)));const m=a(t,["tools"]);if(void 0!==n&&null!=m){let e=E(0,m);Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["retrieval"]);null!=r&&o(n,["retrieval"],r),null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const i=a(t,["googleSearchRetrieval"]);null!=i&&o(n,["googleSearchRetrieval"],_t(0,i));const s=a(t,["codeExecution"]);null!=s&&o(n,["codeExecution"],s);const l=a(t,["functionDeclarations"]);return null!=l&&o(n,["functionDeclarations"],l),n}(0,w(0,e)))),o(n,["setup","tools"],e)}const y=a(t,["sessionResumption"]);void 0!==n&&null!=y&&o(n,["setup","sessionResumption"],function(e,t){const n={},r=a(t,["handle"]);null!=r&&o(n,["handle"],r);const i=a(t,["transparent"]);return null!=i&&o(n,["transparent"],i),n}(0,y));const v=a(t,["inputAudioTranscription"]);void 0!==n&&null!=v&&o(n,["setup","inputAudioTranscription"],{});const b=a(t,["outputAudioTranscription"]);void 0!==n&&null!=b&&o(n,["setup","outputAudioTranscription"],{});const S=a(t,["realtimeInputConfig"]);void 0!==n&&null!=S&&o(n,["setup","realtimeInputConfig"],Lt(0,S));const k=a(t,["contextWindowCompression"]);return void 0!==n&&null!=k&&o(n,["setup","contextWindowCompression"],Dt(0,k)),{}}function zt(e,t){const n={},r=a(t,["media"]);null!=r&&o(n,["mediaChunks"],u(e,r));const i=a(t,["audio"]);null!=i&&o(n,["audio"],function(e,t){const n=c(0,t);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}(0,i));const s=a(t,["audioStreamEnd"]);null!=s&&o(n,["audioStreamEnd"],s);const l=a(t,["video"]);null!=l&&o(n,["video"],function(e,t){const n=c(0,t);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}(0,l));const d=a(t,["text"]);null!=d&&o(n,["text"],d);null!=a(t,["activityStart"])&&o(n,["activityStart"],{});return null!=a(t,["activityEnd"])&&o(n,["activityEnd"],{}),n}function Bt(e,t){const n={},r=a(t,["media"]);if(null!=r&&o(n,["mediaChunks"],u(e,r)),void 0!==a(t,["audio"]))throw new Error("audio parameter is not supported in Vertex AI.");const i=a(t,["audioStreamEnd"]);if(null!=i&&o(n,["audioStreamEnd"],i),void 0!==a(t,["video"]))throw new Error("video parameter is not supported in Vertex AI.");if(void 0!==a(t,["text"]))throw new Error("text parameter is not supported in Vertex AI.");null!=a(t,["activityStart"])&&o(n,["activityStart"],{});return null!=a(t,["activityEnd"])&&o(n,["activityEnd"],{}),n}function Ft(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const i=a(t,["codeExecutionResult"]);null!=i&&o(n,["codeExecutionResult"],i);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const p=a(t,["text"]);return null!=p&&o(n,["text"],p),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function Vt(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["videoMetadata"]);null!=r&&o(n,["videoMetadata"],r);const i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const p=a(t,["inlineData"]);null!=p&&o(n,["inlineData"],p);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function Ut(e,t){const n={},r=a(t,["text"]);null!=r&&o(n,["text"],r);const i=a(t,["finished"]);return null!=i&&o(n,["finished"],i),n}function jt(e,t){const n={},r=a(t,["text"]);null!=r&&o(n,["text"],r);const i=a(t,["finished"]);return null!=i&&o(n,["finished"],i),n}function $t(e,t){const n={},r=a(t,["functionCalls"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["id"]);null!=r&&o(n,["id"],r);const i=a(t,["args"]);null!=i&&o(n,["args"],i);const s=a(t,["name"]);return null!=s&&o(n,["name"],s),n}(0,e))),o(n,["functionCalls"],e)}return n}function qt(e,t){const n={},r=a(t,["functionCalls"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["args"]);null!=r&&o(n,["args"],r);const i=a(t,["name"]);return null!=i&&o(n,["name"],i),n}(0,e))),o(n,["functionCalls"],e)}return n}function Ht(e,t){const n={},r=a(t,["modality"]);null!=r&&o(n,["modality"],r);const i=a(t,["tokenCount"]);return null!=i&&o(n,["tokenCount"],i),n}function Gt(e,t){const n={},r=a(t,["modality"]);null!=r&&o(n,["modality"],r);const i=a(t,["tokenCount"]);return null!=i&&o(n,["tokenCount"],i),n}function Wt(e,t){const n={};null!=a(t,["setupComplete"])&&o(n,["setupComplete"],{});const r=a(t,["serverContent"]);null!=r&&o(n,["serverContent"],function(e,t){const n={},r=a(t,["modelTurn"]);null!=r&&o(n,["modelTurn"],Ft(0,r));const i=a(t,["turnComplete"]);null!=i&&o(n,["turnComplete"],i);const s=a(t,["interrupted"]);null!=s&&o(n,["interrupted"],s);const l=a(t,["groundingMetadata"]);null!=l&&o(n,["groundingMetadata"],l);const u=a(t,["generationComplete"]);null!=u&&o(n,["generationComplete"],u);const c=a(t,["inputTranscription"]);null!=c&&o(n,["inputTranscription"],Ut(0,c));const d=a(t,["outputTranscription"]);return null!=d&&o(n,["outputTranscription"],Ut(0,d)),n}(0,r));const i=a(t,["toolCall"]);null!=i&&o(n,["toolCall"],$t(0,i));const s=a(t,["toolCallCancellation"]);null!=s&&o(n,["toolCallCancellation"],function(e,t){const n={},r=a(t,["ids"]);return null!=r&&o(n,["ids"],r),n}(0,s));const l=a(t,["usageMetadata"]);null!=l&&o(n,["usageMetadata"],function(e,t){const n={},r=a(t,["promptTokenCount"]);null!=r&&o(n,["promptTokenCount"],r);const i=a(t,["cachedContentTokenCount"]);null!=i&&o(n,["cachedContentTokenCount"],i);const s=a(t,["responseTokenCount"]);null!=s&&o(n,["responseTokenCount"],s);const l=a(t,["toolUsePromptTokenCount"]);null!=l&&o(n,["toolUsePromptTokenCount"],l);const u=a(t,["thoughtsTokenCount"]);null!=u&&o(n,["thoughtsTokenCount"],u);const c=a(t,["totalTokenCount"]);null!=c&&o(n,["totalTokenCount"],c);const d=a(t,["promptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>Ht(0,e))),o(n,["promptTokensDetails"],e)}const p=a(t,["cacheTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>Ht(0,e))),o(n,["cacheTokensDetails"],e)}const h=a(t,["responseTokensDetails"]);if(null!=h){let e=h;Array.isArray(e)&&(e=e.map(e=>Ht(0,e))),o(n,["responseTokensDetails"],e)}const f=a(t,["toolUsePromptTokensDetails"]);if(null!=f){let e=f;Array.isArray(e)&&(e=e.map(e=>Ht(0,e))),o(n,["toolUsePromptTokensDetails"],e)}return n}(0,l));const u=a(t,["goAway"]);null!=u&&o(n,["goAway"],function(e,t){const n={},r=a(t,["timeLeft"]);return null!=r&&o(n,["timeLeft"],r),n}(0,u));const c=a(t,["sessionResumptionUpdate"]);return null!=c&&o(n,["sessionResumptionUpdate"],function(e,t){const n={},r=a(t,["newHandle"]);null!=r&&o(n,["newHandle"],r);const i=a(t,["resumable"]);null!=i&&o(n,["resumable"],i);const s=a(t,["lastConsumedClientMessageIndex"]);return null!=s&&o(n,["lastConsumedClientMessageIndex"],s),n}(0,c)),n}function Kt(e,t){const n={};null!=a(t,["setupComplete"])&&o(n,["setupComplete"],{});const r=a(t,["serverContent"]);null!=r&&o(n,["serverContent"],function(e,t){const n={},r=a(t,["modelTurn"]);null!=r&&o(n,["modelTurn"],Vt(0,r));const i=a(t,["turnComplete"]);null!=i&&o(n,["turnComplete"],i);const s=a(t,["interrupted"]);null!=s&&o(n,["interrupted"],s);const l=a(t,["groundingMetadata"]);null!=l&&o(n,["groundingMetadata"],l);const u=a(t,["generationComplete"]);null!=u&&o(n,["generationComplete"],u);const c=a(t,["inputTranscription"]);null!=c&&o(n,["inputTranscription"],jt(0,c));const d=a(t,["outputTranscription"]);return null!=d&&o(n,["outputTranscription"],jt(0,d)),n}(0,r));const i=a(t,["toolCall"]);null!=i&&o(n,["toolCall"],qt(0,i));const s=a(t,["toolCallCancellation"]);null!=s&&o(n,["toolCallCancellation"],function(e,t){const n={},r=a(t,["ids"]);return null!=r&&o(n,["ids"],r),n}(0,s));const l=a(t,["usageMetadata"]);null!=l&&o(n,["usageMetadata"],function(e,t){const n={},r=a(t,["promptTokenCount"]);null!=r&&o(n,["promptTokenCount"],r);const i=a(t,["cachedContentTokenCount"]);null!=i&&o(n,["cachedContentTokenCount"],i);const s=a(t,["candidatesTokenCount"]);null!=s&&o(n,["responseTokenCount"],s);const l=a(t,["toolUsePromptTokenCount"]);null!=l&&o(n,["toolUsePromptTokenCount"],l);const u=a(t,["thoughtsTokenCount"]);null!=u&&o(n,["thoughtsTokenCount"],u);const c=a(t,["totalTokenCount"]);null!=c&&o(n,["totalTokenCount"],c);const d=a(t,["promptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>Gt(0,e))),o(n,["promptTokensDetails"],e)}const p=a(t,["cacheTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>Gt(0,e))),o(n,["cacheTokensDetails"],e)}const h=a(t,["candidatesTokensDetails"]);if(null!=h){let e=h;Array.isArray(e)&&(e=e.map(e=>Gt(0,e))),o(n,["responseTokensDetails"],e)}const f=a(t,["toolUsePromptTokensDetails"]);if(null!=f){let e=f;Array.isArray(e)&&(e=e.map(e=>Gt(0,e))),o(n,["toolUsePromptTokensDetails"],e)}const m=a(t,["trafficType"]);return null!=m&&o(n,["trafficType"],m),n}(0,l));const u=a(t,["goAway"]);null!=u&&o(n,["goAway"],function(e,t){const n={},r=a(t,["timeLeft"]);return null!=r&&o(n,["timeLeft"],r),n}(0,u));const c=a(t,["sessionResumptionUpdate"]);return null!=c&&o(n,["sessionResumptionUpdate"],function(e,t){const n={},r=a(t,["newHandle"]);null!=r&&o(n,["newHandle"],r);const i=a(t,["resumable"]);null!=i&&o(n,["resumable"],i);const s=a(t,["lastConsumedClientMessageIndex"]);return null!=s&&o(n,["lastConsumedClientMessageIndex"],s),n}(0,c)),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yt(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["videoMetadata"]))throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const i=a(t,["codeExecutionResult"]);null!=i&&o(n,["codeExecutionResult"],i);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const p=a(t,["text"]);return null!=p&&o(n,["text"],p),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function Qt(e,t){const n={},r=a(t,["dynamicRetrievalConfig"]);return null!=r&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["dynamicThreshold"]);return null!=i&&o(n,["dynamicThreshold"],i),n}(0,r)),n}function Jt(e,t){const n={},r=a(t,["functionCallingConfig"]);return null!=r&&o(n,["functionCallingConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["allowedFunctionNames"]);return null!=i&&o(n,["allowedFunctionNames"],i),n}(0,r)),n}function Xt(e,t){const n={},r=a(t,["prebuiltVoiceConfig"]);return null!=r&&o(n,["prebuiltVoiceConfig"],function(e,t){const n={},r=a(t,["voiceName"]);return null!=r&&o(n,["voiceName"],r),n}(0,r)),n}function Zt(e,t,n){const r={},i=a(t,["systemInstruction"]);void 0!==n&&null!=i&&o(n,["systemInstruction"],Yt(0,g(0,i)));const s=a(t,["temperature"]);null!=s&&o(r,["temperature"],s);const l=a(t,["topP"]);null!=l&&o(r,["topP"],l);const u=a(t,["topK"]);null!=u&&o(r,["topK"],u);const c=a(t,["candidateCount"]);null!=c&&o(r,["candidateCount"],c);const d=a(t,["maxOutputTokens"]);null!=d&&o(r,["maxOutputTokens"],d);const p=a(t,["stopSequences"]);null!=p&&o(r,["stopSequences"],p);const h=a(t,["responseLogprobs"]);null!=h&&o(r,["responseLogprobs"],h);const f=a(t,["logprobs"]);null!=f&&o(r,["logprobs"],f);const m=a(t,["presencePenalty"]);null!=m&&o(r,["presencePenalty"],m);const y=a(t,["frequencyPenalty"]);null!=y&&o(r,["frequencyPenalty"],y);const v=a(t,["seed"]);null!=v&&o(r,["seed"],v);const T=a(t,["responseMimeType"]);null!=T&&o(r,["responseMimeType"],T);const C=a(t,["responseSchema"]);if(null!=C&&o(r,["responseSchema"],b(0,C)),void 0!==a(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==a(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=a(t,["safetySettings"]);if(void 0!==n&&null!=A){let e=A;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["category"]);null!=r&&o(n,["category"],r);const i=a(t,["threshold"]);return null!=i&&o(n,["threshold"],i),n}(0,e))),o(n,["safetySettings"],e)}const x=a(t,["tools"]);if(void 0!==n&&null!=x){let e=E(0,x);Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const r=a(t,["googleSearchRetrieval"]);null!=r&&o(n,["googleSearchRetrieval"],Qt(0,r));const i=a(t,["codeExecution"]);null!=i&&o(n,["codeExecution"],i);const s=a(t,["functionDeclarations"]);return null!=s&&o(n,["functionDeclarations"],s),n}(0,w(0,e)))),o(n,["tools"],e)}const P=a(t,["toolConfig"]);if(void 0!==n&&null!=P&&o(n,["toolConfig"],Jt(0,P)),void 0!==a(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const I=a(t,["cachedContent"]);void 0!==n&&null!=I&&o(n,["cachedContent"],k(e,I));const _=a(t,["responseModalities"]);null!=_&&o(r,["responseModalities"],_);const O=a(t,["mediaResolution"]);null!=O&&o(r,["mediaResolution"],O);const L=a(t,["speechConfig"]);if(null!=L&&o(r,["speechConfig"],function(e,t){const n={},r=a(t,["voiceConfig"]);null!=r&&o(n,["voiceConfig"],Xt(0,r));const i=a(t,["languageCode"]);return null!=i&&o(n,["languageCode"],i),n}(0,S(0,L))),void 0!==a(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=a(t,["thinkingConfig"]);return null!=M&&o(r,["thinkingConfig"],function(e,t){const n={},r=a(t,["includeThoughts"]);null!=r&&o(n,["includeThoughts"],r);const i=a(t,["thinkingBudget"]);return null!=i&&o(n,["thinkingBudget"],i),n}(0,M)),r}function en(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["contents"]);if(null!=i){let e=v(0,i);Array.isArray(e)&&(e=e.map(e=>Yt(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["generationConfig"],Zt(e,l,n)),n}function tn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["contents"]);null!=i&&o(n,["requests[]","content"],y(e,i));const l=a(t,["config"]);null!=l&&o(n,["config"],function(e,t,n){const r=a(t,["taskType"]);void 0!==n&&null!=r&&o(n,["requests[]","taskType"],r);const i=a(t,["title"]);void 0!==n&&null!=i&&o(n,["requests[]","title"],i);const s=a(t,["outputDimensionality"]);if(void 0!==n&&null!=s&&o(n,["requests[]","outputDimensionality"],s),void 0!==a(t,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==a(t,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(0,l,n));const u=a(t,["model"]);return void 0!==u&&o(n,["requests[]","model"],s(e,u)),n}function nn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["prompt"]);null!=i&&o(n,["instances[0]","prompt"],i);const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t,n){if(void 0!==a(t,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==a(t,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);void 0!==n&&null!=r&&o(n,["parameters","sampleCount"],r);const i=a(t,["aspectRatio"]);void 0!==n&&null!=i&&o(n,["parameters","aspectRatio"],i);const s=a(t,["guidanceScale"]);if(void 0!==n&&null!=s&&o(n,["parameters","guidanceScale"],s),void 0!==a(t,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const l=a(t,["safetyFilterLevel"]);void 0!==n&&null!=l&&o(n,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);void 0!==n&&null!=u&&o(n,["parameters","personGeneration"],u);const c=a(t,["includeSafetyAttributes"]);void 0!==n&&null!=c&&o(n,["parameters","includeSafetyAttributes"],c);const d=a(t,["includeRaiReason"]);void 0!==n&&null!=d&&o(n,["parameters","includeRaiReason"],d);const p=a(t,["language"]);void 0!==n&&null!=p&&o(n,["parameters","language"],p);const h=a(t,["outputMimeType"]);void 0!==n&&null!=h&&o(n,["parameters","outputOptions","mimeType"],h);const f=a(t,["outputCompressionQuality"]);if(void 0!==n&&null!=f&&o(n,["parameters","outputOptions","compressionQuality"],f),void 0!==a(t,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==a(t,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(0,l,n)),n}function rn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","name"],s(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const r=a(t,["displayName"]);void 0!==n&&null!=r&&o(n,["displayName"],r);const i=a(t,["description"]);return void 0!==n&&null!=i&&o(n,["description"],i),{}}(0,i,n)),n}function on(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["contents"]);if(null!=i){let e=v(0,i);Array.isArray(e)&&(e=e.map(e=>Yt(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t){if(void 0!==a(t,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==a(t,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==a(t,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.");return{}}(0,l)),n}function an(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["prompt"]);null!=i&&o(n,["instances[0]","prompt"],i);const l=a(t,["image"]);null!=l&&o(n,["instances[0]","image"],function(e,t){const n={};if(void 0!==a(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const r=a(t,["imageBytes"]);null!=r&&o(n,["bytesBase64Encoded"],C(0,r));const i=a(t,["mimeType"]);return null!=i&&o(n,["mimeType"],i),n}(0,l));const u=a(t,["config"]);return null!=u&&o(n,["config"],function(e,t,n){const r=a(t,["numberOfVideos"]);if(void 0!==n&&null!=r&&o(n,["parameters","sampleCount"],r),void 0!==a(t,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==a(t,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const i=a(t,["durationSeconds"]);if(void 0!==n&&null!=i&&o(n,["parameters","durationSeconds"],i),void 0!==a(t,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["aspectRatio"]);if(void 0!==n&&null!=s&&o(n,["parameters","aspectRatio"],s),void 0!==a(t,["resolution"]))throw new Error("resolution parameter is not supported in Gemini API.");const l=a(t,["personGeneration"]);if(void 0!==n&&null!=l&&o(n,["parameters","personGeneration"],l),void 0!==a(t,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);if(void 0!==n&&null!=u&&o(n,["parameters","negativePrompt"],u),void 0!==a(t,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(0,u,n)),n}function sn(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["videoMetadata"]);null!=r&&o(n,["videoMetadata"],r);const i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const p=a(t,["inlineData"]);null!=p&&o(n,["inlineData"],p);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function ln(e,t){const n={},r=a(t,["dynamicRetrievalConfig"]);return null!=r&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["dynamicThreshold"]);return null!=i&&o(n,["dynamicThreshold"],i),n}(0,r)),n}function un(e,t){const n={},r=a(t,["retrieval"]);null!=r&&o(n,["retrieval"],r);null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const i=a(t,["googleSearchRetrieval"]);null!=i&&o(n,["googleSearchRetrieval"],ln(0,i));const s=a(t,["codeExecution"]);null!=s&&o(n,["codeExecution"],s);const l=a(t,["functionDeclarations"]);return null!=l&&o(n,["functionDeclarations"],l),n}function cn(e,t){const n={},r=a(t,["functionCallingConfig"]);return null!=r&&o(n,["functionCallingConfig"],function(e,t){const n={},r=a(t,["mode"]);null!=r&&o(n,["mode"],r);const i=a(t,["allowedFunctionNames"]);return null!=i&&o(n,["allowedFunctionNames"],i),n}(0,r)),n}function dn(e,t){const n={},r=a(t,["prebuiltVoiceConfig"]);return null!=r&&o(n,["prebuiltVoiceConfig"],function(e,t){const n={},r=a(t,["voiceName"]);return null!=r&&o(n,["voiceName"],r),n}(0,r)),n}function pn(e,t,n){const r={},i=a(t,["systemInstruction"]);void 0!==n&&null!=i&&o(n,["systemInstruction"],sn(0,g(0,i)));const s=a(t,["temperature"]);null!=s&&o(r,["temperature"],s);const l=a(t,["topP"]);null!=l&&o(r,["topP"],l);const u=a(t,["topK"]);null!=u&&o(r,["topK"],u);const c=a(t,["candidateCount"]);null!=c&&o(r,["candidateCount"],c);const d=a(t,["maxOutputTokens"]);null!=d&&o(r,["maxOutputTokens"],d);const p=a(t,["stopSequences"]);null!=p&&o(r,["stopSequences"],p);const h=a(t,["responseLogprobs"]);null!=h&&o(r,["responseLogprobs"],h);const f=a(t,["logprobs"]);null!=f&&o(r,["logprobs"],f);const m=a(t,["presencePenalty"]);null!=m&&o(r,["presencePenalty"],m);const y=a(t,["frequencyPenalty"]);null!=y&&o(r,["frequencyPenalty"],y);const v=a(t,["seed"]);null!=v&&o(r,["seed"],v);const T=a(t,["responseMimeType"]);null!=T&&o(r,["responseMimeType"],T);const C=a(t,["responseSchema"]);null!=C&&o(r,["responseSchema"],b(0,C));const A=a(t,["routingConfig"]);null!=A&&o(r,["routingConfig"],A);const x=a(t,["modelSelectionConfig"]);null!=x&&o(r,["modelConfig"],function(e,t){const n={},r=a(t,["featureSelectionPreference"]);return null!=r&&o(n,["featureSelectionPreference"],r),n}(0,x));const P=a(t,["safetySettings"]);if(void 0!==n&&null!=P){let e=P;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["method"]);null!=r&&o(n,["method"],r);const i=a(t,["category"]);null!=i&&o(n,["category"],i);const s=a(t,["threshold"]);return null!=s&&o(n,["threshold"],s),n}(0,e))),o(n,["safetySettings"],e)}const I=a(t,["tools"]);if(void 0!==n&&null!=I){let e=E(0,I);Array.isArray(e)&&(e=e.map(e=>un(0,w(0,e)))),o(n,["tools"],e)}const _=a(t,["toolConfig"]);void 0!==n&&null!=_&&o(n,["toolConfig"],cn(0,_));const O=a(t,["labels"]);void 0!==n&&null!=O&&o(n,["labels"],O);const L=a(t,["cachedContent"]);void 0!==n&&null!=L&&o(n,["cachedContent"],k(e,L));const M=a(t,["responseModalities"]);null!=M&&o(r,["responseModalities"],M);const D=a(t,["mediaResolution"]);null!=D&&o(r,["mediaResolution"],D);const N=a(t,["speechConfig"]);null!=N&&o(r,["speechConfig"],function(e,t){const n={},r=a(t,["voiceConfig"]);null!=r&&o(n,["voiceConfig"],dn(0,r));const i=a(t,["languageCode"]);return null!=i&&o(n,["languageCode"],i),n}(0,S(0,N)));const R=a(t,["audioTimestamp"]);null!=R&&o(r,["audioTimestamp"],R);const z=a(t,["thinkingConfig"]);return null!=z&&o(r,["thinkingConfig"],function(e,t){const n={},r=a(t,["includeThoughts"]);null!=r&&o(n,["includeThoughts"],r);const i=a(t,["thinkingBudget"]);return null!=i&&o(n,["thinkingBudget"],i),n}(0,z)),r}function hn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["contents"]);if(null!=i){let e=v(0,i);Array.isArray(e)&&(e=e.map(e=>sn(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["generationConfig"],pn(e,l,n)),n}function fn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["contents"]);null!=i&&o(n,["instances[]","content"],y(e,i));const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t,n){const r=a(t,["taskType"]);void 0!==n&&null!=r&&o(n,["instances[]","task_type"],r);const i=a(t,["title"]);void 0!==n&&null!=i&&o(n,["instances[]","title"],i);const s=a(t,["outputDimensionality"]);void 0!==n&&null!=s&&o(n,["parameters","outputDimensionality"],s);const l=a(t,["mimeType"]);void 0!==n&&null!=l&&o(n,["instances[]","mimeType"],l);const u=a(t,["autoTruncate"]);return void 0!==n&&null!=u&&o(n,["parameters","autoTruncate"],u),{}}(0,l,n)),n}function mn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["prompt"]);null!=i&&o(n,["instances[0]","prompt"],i);const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t,n){const r=a(t,["outputGcsUri"]);void 0!==n&&null!=r&&o(n,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);void 0!==n&&null!=i&&o(n,["parameters","negativePrompt"],i);const s=a(t,["numberOfImages"]);void 0!==n&&null!=s&&o(n,["parameters","sampleCount"],s);const l=a(t,["aspectRatio"]);void 0!==n&&null!=l&&o(n,["parameters","aspectRatio"],l);const u=a(t,["guidanceScale"]);void 0!==n&&null!=u&&o(n,["parameters","guidanceScale"],u);const c=a(t,["seed"]);void 0!==n&&null!=c&&o(n,["parameters","seed"],c);const d=a(t,["safetyFilterLevel"]);void 0!==n&&null!=d&&o(n,["parameters","safetySetting"],d);const p=a(t,["personGeneration"]);void 0!==n&&null!=p&&o(n,["parameters","personGeneration"],p);const h=a(t,["includeSafetyAttributes"]);void 0!==n&&null!=h&&o(n,["parameters","includeSafetyAttributes"],h);const f=a(t,["includeRaiReason"]);void 0!==n&&null!=f&&o(n,["parameters","includeRaiReason"],f);const m=a(t,["language"]);void 0!==n&&null!=m&&o(n,["parameters","language"],m);const g=a(t,["outputMimeType"]);void 0!==n&&null!=g&&o(n,["parameters","outputOptions","mimeType"],g);const y=a(t,["outputCompressionQuality"]);void 0!==n&&null!=y&&o(n,["parameters","outputOptions","compressionQuality"],y);const v=a(t,["addWatermark"]);void 0!==n&&null!=v&&o(n,["parameters","addWatermark"],v);const b=a(t,["enhancePrompt"]);return void 0!==n&&null!=b&&o(n,["parameters","enhancePrompt"],b),{}}(0,l,n)),n}function gn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const r=a(t,["displayName"]);void 0!==n&&null!=r&&o(n,["displayName"],r);const i=a(t,["description"]);return void 0!==n&&null!=i&&o(n,["description"],i),{}}(0,i,n)),n}function yn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["contents"]);if(null!=i){let e=v(0,i);Array.isArray(e)&&(e=e.map(e=>sn(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t,n){const r=a(t,["systemInstruction"]);void 0!==n&&null!=r&&o(n,["systemInstruction"],sn(0,g(0,r)));const i=a(t,["tools"]);if(void 0!==n&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>un(0,e))),o(n,["tools"],e)}const s=a(t,["generationConfig"]);return void 0!==n&&null!=s&&o(n,["generationConfig"],s),{}}(0,l,n)),n}function vn(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["prompt"]);null!=i&&o(n,["instances[0]","prompt"],i);const l=a(t,["image"]);null!=l&&o(n,["instances[0]","image"],function(e,t){const n={},r=a(t,["gcsUri"]);null!=r&&o(n,["gcsUri"],r);const i=a(t,["imageBytes"]);null!=i&&o(n,["bytesBase64Encoded"],C(0,i));const s=a(t,["mimeType"]);return null!=s&&o(n,["mimeType"],s),n}(0,l));const u=a(t,["config"]);return null!=u&&o(n,["config"],function(e,t,n){const r=a(t,["numberOfVideos"]);void 0!==n&&null!=r&&o(n,["parameters","sampleCount"],r);const i=a(t,["outputGcsUri"]);void 0!==n&&null!=i&&o(n,["parameters","storageUri"],i);const s=a(t,["fps"]);void 0!==n&&null!=s&&o(n,["parameters","fps"],s);const l=a(t,["durationSeconds"]);void 0!==n&&null!=l&&o(n,["parameters","durationSeconds"],l);const u=a(t,["seed"]);void 0!==n&&null!=u&&o(n,["parameters","seed"],u);const c=a(t,["aspectRatio"]);void 0!==n&&null!=c&&o(n,["parameters","aspectRatio"],c);const d=a(t,["resolution"]);void 0!==n&&null!=d&&o(n,["parameters","resolution"],d);const p=a(t,["personGeneration"]);void 0!==n&&null!=p&&o(n,["parameters","personGeneration"],p);const h=a(t,["pubsubTopic"]);void 0!==n&&null!=h&&o(n,["parameters","pubsubTopic"],h);const f=a(t,["negativePrompt"]);void 0!==n&&null!=f&&o(n,["parameters","negativePrompt"],f);const m=a(t,["enhancePrompt"]);return void 0!==n&&null!=m&&o(n,["parameters","enhancePrompt"],m),{}}(0,u,n)),n}function bn(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const i=a(t,["codeExecutionResult"]);null!=i&&o(n,["codeExecutionResult"],i);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const p=a(t,["text"]);return null!=p&&o(n,["text"],p),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function Sn(e,t){const n={},r=a(t,["content"]);null!=r&&o(n,["content"],bn(0,r));const i=a(t,["citationMetadata"]);null!=i&&o(n,["citationMetadata"],function(e,t){const n={},r=a(t,["citationSources"]);return null!=r&&o(n,["citations"],r),n}(0,i));const s=a(t,["tokenCount"]);null!=s&&o(n,["tokenCount"],s);const l=a(t,["finishReason"]);null!=l&&o(n,["finishReason"],l);const u=a(t,["avgLogprobs"]);null!=u&&o(n,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);null!=c&&o(n,["groundingMetadata"],c);const d=a(t,["index"]);null!=d&&o(n,["index"],d);const p=a(t,["logprobsResult"]);null!=p&&o(n,["logprobsResult"],p);const h=a(t,["safetyRatings"]);return null!=h&&o(n,["safetyRatings"],h),n}function wn(e,t){const n={},r=a(t,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Sn(0,e))),o(n,["candidates"],e)}const i=a(t,["modelVersion"]);null!=i&&o(n,["modelVersion"],i);const s=a(t,["promptFeedback"]);null!=s&&o(n,["promptFeedback"],s);const l=a(t,["usageMetadata"]);return null!=l&&o(n,["usageMetadata"],l),n}function En(e,t){const n={},r=a(t,["embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["values"]);return null!=r&&o(n,["values"],r),n}(0,e))),o(n,["embeddings"],e)}return null!=a(t,["metadata"])&&o(n,["metadata"],{}),n}function kn(e,t){const n={},r=a(t,["safetyAttributes","categories"]);null!=r&&o(n,["categories"],r);const i=a(t,["safetyAttributes","scores"]);null!=i&&o(n,["scores"],i);const s=a(t,["contentType"]);return null!=s&&o(n,["contentType"],s),n}function Tn(e,t){const n={},r=a(t,["_self"]);null!=r&&o(n,["image"],function(e,t){const n={},r=a(t,["bytesBase64Encoded"]);null!=r&&o(n,["imageBytes"],C(0,r));const i=a(t,["mimeType"]);return null!=i&&o(n,["mimeType"],i),n}(0,r));const i=a(t,["raiFilteredReason"]);null!=i&&o(n,["raiFilteredReason"],i);const s=a(t,["_self"]);return null!=s&&o(n,["safetyAttributes"],kn(0,s)),n}function Cn(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["displayName"]);null!=i&&o(n,["displayName"],i);const s=a(t,["description"]);null!=s&&o(n,["description"],s);const l=a(t,["version"]);null!=l&&o(n,["version"],l);const u=a(t,["_self"]);null!=u&&o(n,["tunedModelInfo"],function(e,t){const n={},r=a(t,["baseModel"]);null!=r&&o(n,["baseModel"],r);const i=a(t,["createTime"]);null!=i&&o(n,["createTime"],i);const s=a(t,["updateTime"]);return null!=s&&o(n,["updateTime"],s),n}(0,u));const c=a(t,["inputTokenLimit"]);null!=c&&o(n,["inputTokenLimit"],c);const d=a(t,["outputTokenLimit"]);null!=d&&o(n,["outputTokenLimit"],d);const p=a(t,["supportedGenerationMethods"]);return null!=p&&o(n,["supportedActions"],p),n}function An(e,t){const n={},r=a(t,["_self"]);return null!=r&&o(n,["video"],function(e,t){const n={},r=a(t,["video","uri"]);null!=r&&o(n,["uri"],r);const i=a(t,["video","encodedVideo"]);null!=i&&o(n,["videoBytes"],C(0,i));const s=a(t,["encoding"]);return null!=s&&o(n,["mimeType"],s),n}(0,r)),n}function xn(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["metadata"]);null!=i&&o(n,["metadata"],i);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);null!=l&&o(n,["error"],l);const u=a(t,["response","generateVideoResponse"]);return null!=u&&o(n,["response"],function(e,t){const n={},r=a(t,["generatedSamples"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>An(0,e))),o(n,["generatedVideos"],e)}const i=a(t,["raiMediaFilteredCount"]);null!=i&&o(n,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return null!=s&&o(n,["raiMediaFilteredReasons"],s),n}(0,u)),n}function Pn(e,t){const n={},r=a(t,["parts"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["videoMetadata"]);null!=r&&o(n,["videoMetadata"],r);const i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const p=a(t,["inlineData"]);null!=p&&o(n,["inlineData"],p);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const i=a(t,["role"]);return null!=i&&o(n,["role"],i),n}function In(e,t){const n={},r=a(t,["content"]);null!=r&&o(n,["content"],Pn(0,r));const i=a(t,["citationMetadata"]);null!=i&&o(n,["citationMetadata"],function(e,t){const n={},r=a(t,["citations"]);return null!=r&&o(n,["citations"],r),n}(0,i));const s=a(t,["finishMessage"]);null!=s&&o(n,["finishMessage"],s);const l=a(t,["finishReason"]);null!=l&&o(n,["finishReason"],l);const u=a(t,["avgLogprobs"]);null!=u&&o(n,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);null!=c&&o(n,["groundingMetadata"],c);const d=a(t,["index"]);null!=d&&o(n,["index"],d);const p=a(t,["logprobsResult"]);null!=p&&o(n,["logprobsResult"],p);const h=a(t,["safetyRatings"]);return null!=h&&o(n,["safetyRatings"],h),n}function _n(e,t){const n={},r=a(t,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>In(0,e))),o(n,["candidates"],e)}const i=a(t,["createTime"]);null!=i&&o(n,["createTime"],i);const s=a(t,["responseId"]);null!=s&&o(n,["responseId"],s);const l=a(t,["modelVersion"]);null!=l&&o(n,["modelVersion"],l);const u=a(t,["promptFeedback"]);null!=u&&o(n,["promptFeedback"],u);const c=a(t,["usageMetadata"]);return null!=c&&o(n,["usageMetadata"],c),n}function On(e,t){const n={},r=a(t,["values"]);null!=r&&o(n,["values"],r);const i=a(t,["statistics"]);return null!=i&&o(n,["statistics"],function(e,t){const n={},r=a(t,["truncated"]);null!=r&&o(n,["truncated"],r);const i=a(t,["token_count"]);return null!=i&&o(n,["tokenCount"],i),n}(0,i)),n}function Ln(e,t){const n={},r=a(t,["predictions[]","embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>On(0,e))),o(n,["embeddings"],e)}const i=a(t,["metadata"]);return null!=i&&o(n,["metadata"],function(e,t){const n={},r=a(t,["billableCharacterCount"]);return null!=r&&o(n,["billableCharacterCount"],r),n}(0,i)),n}function Mn(e,t){const n={},r=a(t,["safetyAttributes","categories"]);null!=r&&o(n,["categories"],r);const i=a(t,["safetyAttributes","scores"]);null!=i&&o(n,["scores"],i);const s=a(t,["contentType"]);return null!=s&&o(n,["contentType"],s),n}function Dn(e,t){const n={},r=a(t,["_self"]);null!=r&&o(n,["image"],function(e,t){const n={},r=a(t,["gcsUri"]);null!=r&&o(n,["gcsUri"],r);const i=a(t,["bytesBase64Encoded"]);null!=i&&o(n,["imageBytes"],C(0,i));const s=a(t,["mimeType"]);return null!=s&&o(n,["mimeType"],s),n}(0,r));const i=a(t,["raiFilteredReason"]);null!=i&&o(n,["raiFilteredReason"],i);const s=a(t,["_self"]);null!=s&&o(n,["safetyAttributes"],Mn(0,s));const l=a(t,["prompt"]);return null!=l&&o(n,["enhancedPrompt"],l),n}function Nn(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["displayName"]);null!=i&&o(n,["displayName"],i);const s=a(t,["description"]);null!=s&&o(n,["description"],s);const l=a(t,["versionId"]);null!=l&&o(n,["version"],l);const u=a(t,["deployedModels"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["endpoint"]);null!=r&&o(n,["name"],r);const i=a(t,["deployedModelId"]);return null!=i&&o(n,["deployedModelId"],i),n}(0,e))),o(n,["endpoints"],e)}const c=a(t,["labels"]);null!=c&&o(n,["labels"],c);const d=a(t,["_self"]);return null!=d&&o(n,["tunedModelInfo"],function(e,t){const n={},r=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);null!=r&&o(n,["baseModel"],r);const i=a(t,["createTime"]);null!=i&&o(n,["createTime"],i);const s=a(t,["updateTime"]);return null!=s&&o(n,["updateTime"],s),n}(0,d)),n}function Rn(e,t){const n={},r=a(t,["_self"]);return null!=r&&o(n,["video"],function(e,t){const n={},r=a(t,["gcsUri"]);null!=r&&o(n,["uri"],r);const i=a(t,["bytesBase64Encoded"]);null!=i&&o(n,["videoBytes"],C(0,i));const s=a(t,["mimeType"]);return null!=s&&o(n,["mimeType"],s),n}(0,r)),n}function zn(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["metadata"]);null!=i&&o(n,["metadata"],i);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);null!=l&&o(n,["error"],l);const u=a(t,["response"]);return null!=u&&o(n,["response"],function(e,t){const n={},r=a(t,["videos"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Rn(0,e))),o(n,["generatedVideos"],e)}const i=a(t,["raiMediaFilteredCount"]);null!=i&&o(n,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return null!=s&&o(n,["raiMediaFilteredReasons"],s),n}(0,u)),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n,r,i;const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const d=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${this.apiClient.getApiKey()}`}let p=()=>{};const h=new Promise(e=>{p=e}),f=e.callbacks,m=this.apiClient,g={onopen:function(){var e;null===(e=null==f?void 0:f.onopen)||void 0===e||e.call(f),p({})},onmessage:e=>{!async function(e,t,n){let r,i;i=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),r=e.isVertexAI()?Kt(0,i):Wt(0,i),t(r)}(m,f.onmessage,e)},onerror:null!==(t=null==f?void 0:f.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==f?void 0:f.onclose)&&void 0!==n?n:function(e){}},y=this.webSocketFactory.create(c,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(d),g);y.connect(),await h;let v=s(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){v=`projects/${this.apiClient.getProject()}/locations/${this.apiClient.getLocation()}/`+v}let b={};this.apiClient.isVertexAI()&&void 0===(null===(r=e.config)||void 0===r?void 0:r.responseModalities)&&(void 0===e.config?e.config={responseModalities:[fe.AUDIO]}:e.config.responseModalities=[fe.AUDIO]),null===(i=e.config)||void 0===i||i.generationConfig;const S={model:v,config:e.config,callbacks:e.callbacks};return b=this.apiClient.isVertexAI()?function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["setup","model"],s(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],Rt(0,i,n)),n}(this.apiClient,S):function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["setup","model"],s(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],Nt(0,i,n)),n}(this.apiClient,S),delete b.config,y.send(JSON.stringify(b)),new Vn(y,this.apiClient)}}const Fn={turnComplete:!0};class Vn{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let r=[];try{r=v(0,t.turns),r=e.isVertexAI()?r.map(e=>sn(0,e)):r.map(e=>Yt(0,e))}catch(n){throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const r of n){if("object"!=typeof r||null===r||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Fn),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:Bt(this.apiClient,e)}:{realtimeInput:zt(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}class Un extends r{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e),this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n;const r=[];if(null==e?void 0:e.generatedImages)for(const o of e.generatedImages)o&&(null==o?void 0:o.safetyAttributes)&&"Positive Prompt"===(null===(t=null==o?void 0:o.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null==o?void 0:o.safetyAttributes:r.push(o);let i;return i=n?{generatedImages:r,positivePromptSafetyAttributes:n}:{generatedImages:r},i})}async generateContentInternal(e){var t,n,r,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const r=hn(this.apiClient,e);return s=i("{model}:generateContent",r._url),l=r._query,delete r.config,delete r._url,delete r._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>{const t=_n(this.apiClient,e),n=new tt;return Object.assign(n,t),n})}{const t=en(this.apiClient,e);return s=i("{model}:generateContent",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>{const t=wn(this.apiClient,e),n=new tt;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,r,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const r=hn(this.apiClient,e);s=i("{model}:streamGenerateContent?alt=sse",r._url),l=r._query,delete r.config,delete r._url,delete r._query;const o=this.apiClient;return a=o.requestStream({path:s,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),a.then(function(e){return yt(this,arguments,function*(){var t,n,r,i;try{for(var o,a=!0,s=vt(e);!(t=(o=yield gt(s.next())).done);a=!0){i=o.value,a=!1;const e=i,t=_n(0,yield gt(e.json())),n=new tt;Object.assign(n,t),yield yield gt(n)}}catch(l){n={error:l}}finally{try{a||t||!(r=s.return)||(yield gt(r.call(s)))}finally{if(n)throw n.error}}})})}{const t=en(this.apiClient,e);s=i("{model}:streamGenerateContent?alt=sse",t._url),l=t._query,delete t.config,delete t._url,delete t._query;const n=this.apiClient;return a=n.requestStream({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}),a.then(function(e){return yt(this,arguments,function*(){var t,n,r,i;try{for(var o,a=!0,s=vt(e);!(t=(o=yield gt(s.next())).done);a=!0){i=o.value,a=!1;const e=i,t=wn(0,yield gt(e.json())),n=new tt;Object.assign(n,t),yield yield gt(n)}}catch(l){n={error:l}}finally{try{a||t||!(r=s.return)||(yield gt(r.call(s)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,r,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const r=fn(this.apiClient,e);return s=i("{model}:predict",r._url),l=r._query,delete r.config,delete r._url,delete r._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>{const t=Ln(this.apiClient,e),n=new nt;return Object.assign(n,t),n})}{const t=tn(this.apiClient,e);return s=i("{model}:batchEmbedContents",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>{const t=En(this.apiClient,e),n=new nt;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,r,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const r=mn(this.apiClient,e);return u=i("{model}:predict",r._url),c=r._query,delete r.config,delete r._url,delete r._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},r=a(t,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Dn(0,e))),o(n,["generatedImages"],e)}const i=a(t,["positivePromptSafetyAttributes"]);return null!=i&&o(n,["positivePromptSafetyAttributes"],Mn(0,i)),n}(this.apiClient,e),n=new rt;return Object.assign(n,t),n})}{const t=nn(this.apiClient,e);return u=i("{model}:predict",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},r=a(t,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Tn(0,e))),o(n,["generatedImages"],e)}const i=a(t,["positivePromptSafetyAttributes"]);return null!=i&&o(n,["positivePromptSafetyAttributes"],kn(0,i)),n}(this.apiClient,e),n=new rt;return Object.assign(n,t),n})}}async get(e){var t,n,r,l;let u,c="",d={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","name"],s(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return c=i("{name}",r._url),d=r._query,delete r.config,delete r._url,delete r._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),u.then(e=>Nn(this.apiClient,e))}{const t=function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","name"],s(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return c=i("{name}",t._url),d=t._query,delete t.config,delete t._url,delete t._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(l=e.config)||void 0===l?void 0:l.abortSignal}).then(e=>e.json()),u.then(e=>Cn(this.apiClient,e))}}async update(e){var t,n,r,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const r=gn(this.apiClient,e);return s=i("{model}",r._url),l=r._query,delete r.config,delete r._url,delete r._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>Nn(this.apiClient,e))}{const t=rn(this.apiClient,e);return s=i("{name}",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>Cn(this.apiClient,e))}}async delete(e){var t,n,r,l;let u,c="",d={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","name"],s(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return c=i("{name}",r._url),d=r._query,delete r.config,delete r._url,delete r._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),u.then(()=>{const e={},t=new it;return Object.assign(t,e),t})}{const t=function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","name"],s(e,r));const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return c=i("{name}",t._url),d=t._query,delete t.config,delete t._url,delete t._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(l=e.config)||void 0===l?void 0:l.abortSignal}).then(e=>e.json()),u.then(()=>{const e={},t=new it;return Object.assign(t,e),t})}}async countTokens(e){var t,n,r,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const r=yn(this.apiClient,e);return u=i("{model}:countTokens",r._url),c=r._query,delete r.config,delete r._url,delete r._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},r=a(t,["totalTokens"]);return null!=r&&o(n,["totalTokens"],r),n}(this.apiClient,e),n=new ot;return Object.assign(n,t),n})}{const t=on(this.apiClient,e);return u=i("{model}:countTokens",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},r=a(t,["totalTokens"]);null!=r&&o(n,["totalTokens"],r);const i=a(t,["cachedContentTokenCount"]);return null!=i&&o(n,["cachedContentTokenCount"],i),n}(this.apiClient,e),n=new ot;return Object.assign(n,t),n})}}async computeTokens(e){var t,n;let r,l="",u={};if(this.apiClient.isVertexAI()){const c=function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["_url","model"],s(e,r));const i=a(t,["contents"]);if(null!=i){let e=v(0,i);Array.isArray(e)&&(e=e.map(e=>sn(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["config"],l),n}(this.apiClient,e);return l=i("{model}:computeTokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e,t){const n={},r=a(t,["tokensInfo"]);return null!=r&&o(n,["tokensInfo"],r),n}(this.apiClient,e),n=new at;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,r,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const r=vn(this.apiClient,e);return s=i("{model}:predictLongRunning",r._url),l=r._query,delete r.config,delete r._url,delete r._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>zn(this.apiClient,e))}{const t=an(this.apiClient,e);return s=i("{model}:predictLongRunning",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>xn(this.apiClient,e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jn(e,t){const n={},r=a(t,["_self"]);return null!=r&&o(n,["video"],function(e,t){const n={},r=a(t,["video","uri"]);null!=r&&o(n,["uri"],r);const i=a(t,["video","encodedVideo"]);null!=i&&o(n,["videoBytes"],C(0,i));const s=a(t,["encoding"]);return null!=s&&o(n,["mimeType"],s),n}(0,r)),n}function $n(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["metadata"]);null!=i&&o(n,["metadata"],i);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);null!=l&&o(n,["error"],l);const u=a(t,["response","generateVideoResponse"]);return null!=u&&o(n,["response"],function(e,t){const n={},r=a(t,["generatedSamples"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>jn(0,e))),o(n,["generatedVideos"],e)}const i=a(t,["raiMediaFilteredCount"]);null!=i&&o(n,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return null!=s&&o(n,["raiMediaFilteredReasons"],s),n}(0,u)),n}function qn(e,t){const n={},r=a(t,["_self"]);return null!=r&&o(n,["video"],function(e,t){const n={},r=a(t,["gcsUri"]);null!=r&&o(n,["uri"],r);const i=a(t,["bytesBase64Encoded"]);null!=i&&o(n,["videoBytes"],C(0,i));const s=a(t,["mimeType"]);return null!=s&&o(n,["mimeType"],s),n}(0,r)),n}function Hn(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["metadata"]);null!=i&&o(n,["metadata"],i);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);null!=l&&o(n,["error"],l);const u=a(t,["response"]);return null!=u&&o(n,["response"],function(e,t){const n={},r=a(t,["videos"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>qn(0,e))),o(n,["generatedVideos"],e)}const i=a(t,["raiMediaFilteredCount"]);null!=i&&o(n,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return null!=s&&o(n,["raiMediaFilteredReasons"],s),n}(0,u)),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gn extends r{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;return n&&"httpOptions"in n&&(r=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}})}return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,r,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=a(t,["operationName"]);null!=r&&o(n,["_url","operationName"],r);const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return u=i("{operationName}",r._url),c=r._query,delete r.config,delete r._url,delete r._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>Hn(this.apiClient,e))}{const t=function(e,t){const n={},r=a(t,["operationName"]);null!=r&&o(n,["_url","operationName"],r);const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return u=i("{operationName}",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>$n(this.apiClient,e))}}async fetchPredictVideosOperationInternal(e){var t,n;let r,s="",l={};if(this.apiClient.isVertexAI()){const u=function(e,t){const n={},r=a(t,["operationName"]);null!=r&&o(n,["operationName"],r);const i=a(t,["resourceName"]);null!=i&&o(n,["_url","resourceName"],i);const s=a(t,["config"]);return null!=s&&o(n,["config"],s),n}(this.apiClient,e);return s=i("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>Hn(this.apiClient,e))}throw new Error("This method is only supported by the Vertex AI.")}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Kn extends Error{constructor(e,t){super(e,t?{cause:t}:{cause:(new Error).stack}),this.message=e,this.name="ClientError"}}class Yn extends Error{constructor(e,t){super(e,t?{cause:t}:{cause:(new Error).stack}),this.message=e,this.name="ServerError"}}class Qn{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",this.getProject()||this.getLocation()?(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(r.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(r.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];n&&r.push(this.getBaseResourcePath()),""!==e&&r.push(e);return new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let i={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(t))"object"==typeof i?n[r]=Object.assign(Object.assign({},n[r]),i):void 0!==i&&(n[r]=i);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);r.searchParams.has("alt")&&"sse"===r.searchParams.get("alt")||r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const r=new AbortController,i=r.signal;t.timeout&&(null==t?void 0:t.timeout)>0&&setTimeout(()=>r.abort(),t.timeout),n&&n.addEventListener("abort",()=>{r.abort()}),e.signal=i}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Jn(e),new dt(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Jn(e),this.processStreamResponse(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}processStreamResponse(e){var t;return yt(this,arguments,function*(){const n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:o,value:a}=yield gt(n.read());if(o){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const s=r.decode(a);try{const e=JSON.parse(s);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,r=t.code,i=`got status: ${n}. ${JSON.stringify(e)}`;if(r>=400&&r<500){throw new Kn(i)}if(r>=500&&r<600){throw new Yn(i)}}}catch(i){const e=i;if("ClientError"===e.name||"ServerError"===e.name)throw i}t+=s;let l=t.match(Wn);for(;l;){const n=l[1];try{const r=new Response(n,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield gt(new dt(r)),t=t.slice(l[0].length),l=t.match(Wn)}catch(i){throw new Error(`exception parsing stream chunk ${n}. ${i}`)}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw new Error(`exception ${e} sending request`)})}getDefaultHeaders(){const e={},t="google-genai-sdk/0.12.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e["x-goog-api-client"]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,r]of Object.entries(e.headers))t.append(n,r);e.timeout&&e.timeout>0&&t.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const r={};null!=t&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);r.sizeBytes=String(o.size);const a=null!==(n=null==t?void 0:t.mimeType)&&void 0!==n?n:o.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const s=await this.fetchUploadUrl(r,t);return i.upload(e,s,this)}async fetchUploadUrl(e,t){var n;let r={};r=(null==t?void 0:t.httpOptions)?t.httpOptions:{apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},a=await this.request({path:i("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:r});if(!a||!(null==a?void 0:a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const s=null===(n=null==a?void 0:a.headers)||void 0===n?void 0:n["x-goog-upload-url"];if(void 0===s)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return s}}async function Jn(e){var t;if(void 0===e)throw new Yn("response is undefined");if(!e.ok){const n=e.status,r=e.statusText;let i;i=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const o=`got status: ${n} ${r}. ${JSON.stringify(i)}`;if(n>=400&&n<500){throw new Kn(o)}if(n>=500&&n<600){throw new Yn(o)}throw new Error(o)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xn(e,t){const n={},r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const r=a(t,["pageSize"]);void 0!==n&&null!=r&&o(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);void 0!==n&&null!=i&&o(n,["_query","pageToken"],i);const s=a(t,["filter"]);return void 0!==n&&null!=s&&o(n,["_query","filter"],s),{}}(0,r,n)),n}function Zn(e,t){const n={};if(void 0!==a(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const r=a(t,["examples"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},r=a(t,["textInput"]);null!=r&&o(n,["textInput"],r);const i=a(t,["output"]);return null!=i&&o(n,["output"],i),n}(0,e))),o(n,["examples","examples"],e)}return n}function er(e,t){const n={},r=a(t,["baseModel"]);null!=r&&o(n,["baseModel"],r);const i=a(t,["trainingDataset"]);null!=i&&o(n,["tuningTask","trainingData"],Zn(0,i));const s=a(t,["config"]);return null!=s&&o(n,["config"],function(e,t,n){const r={};if(void 0!==a(t,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const i=a(t,["tunedModelDisplayName"]);if(void 0!==n&&null!=i&&o(n,["displayName"],i),void 0!==a(t,["description"]))throw new Error("description parameter is not supported in Gemini API.");const s=a(t,["epochCount"]);void 0!==n&&null!=s&&o(n,["tuningTask","hyperparameters","epochCount"],s);const l=a(t,["learningRateMultiplier"]);if(null!=l&&o(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),void 0!==a(t,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const u=a(t,["batchSize"]);void 0!==n&&null!=u&&o(n,["tuningTask","hyperparameters","batchSize"],u);const c=a(t,["learningRate"]);return void 0!==n&&null!=c&&o(n,["tuningTask","hyperparameters","learningRate"],c),r}(0,s,n)),n}function tr(e,t){const n={},r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const r=a(t,["pageSize"]);void 0!==n&&null!=r&&o(n,["_query","pageSize"],r);const i=a(t,["pageToken"]);void 0!==n&&null!=i&&o(n,["_query","pageToken"],i);const s=a(t,["filter"]);return void 0!==n&&null!=s&&o(n,["_query","filter"],s),{}}(0,r,n)),n}function nr(e,t,n){const r=a(t,["validationDataset"]);void 0!==n&&null!=r&&o(n,["supervisedTuningSpec"],function(e,t){const n={},r=a(t,["gcsUri"]);return null!=r&&o(n,["validationDatasetUri"],r),n}(0,r));const i=a(t,["tunedModelDisplayName"]);void 0!==n&&null!=i&&o(n,["tunedModelDisplayName"],i);const s=a(t,["description"]);void 0!==n&&null!=s&&o(n,["description"],s);const l=a(t,["epochCount"]);void 0!==n&&null!=l&&o(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const u=a(t,["learningRateMultiplier"]);void 0!==n&&null!=u&&o(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=a(t,["adapterSize"]);if(void 0!==n&&null!=c&&o(n,["supervisedTuningSpec","hyperParameters","adapterSize"],c),void 0!==a(t,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==a(t,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");return{}}function rr(e,t){const n={},r=a(t,["baseModel"]);null!=r&&o(n,["baseModel"],r);const i=a(t,["trainingDataset"]);null!=i&&o(n,["supervisedTuningSpec","trainingDatasetUri"],function(e,t,n){const r=a(t,["gcsUri"]);if(void 0!==n&&null!=r&&o(n,["supervisedTuningSpec","trainingDatasetUri"],r),void 0!==a(t,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.");return{}}(0,i,n));const s=a(t,["config"]);return null!=s&&o(n,["config"],nr(0,s,n)),n}function ir(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["state"]);null!=i&&o(n,["state"],T(0,i));const s=a(t,["createTime"]);null!=s&&o(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);null!=l&&o(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);null!=u&&o(n,["endTime"],u);const c=a(t,["updateTime"]);null!=c&&o(n,["updateTime"],c);const d=a(t,["description"]);null!=d&&o(n,["description"],d);const p=a(t,["baseModel"]);null!=p&&o(n,["baseModel"],p);const h=a(t,["_self"]);null!=h&&o(n,["tunedModel"],function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["model"],r);const i=a(t,["name"]);return null!=i&&o(n,["endpoint"],i),n}(0,h));const f=a(t,["distillationSpec"]);null!=f&&o(n,["distillationSpec"],f);const m=a(t,["experiment"]);null!=m&&o(n,["experiment"],m);const g=a(t,["labels"]);null!=g&&o(n,["labels"],g);const y=a(t,["pipelineJob"]);null!=y&&o(n,["pipelineJob"],y);const v=a(t,["tunedModelDisplayName"]);return null!=v&&o(n,["tunedModelDisplayName"],v),n}function or(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["state"]);null!=i&&o(n,["state"],T(0,i));const s=a(t,["createTime"]);null!=s&&o(n,["createTime"],s);const l=a(t,["startTime"]);null!=l&&o(n,["startTime"],l);const u=a(t,["endTime"]);null!=u&&o(n,["endTime"],u);const c=a(t,["updateTime"]);null!=c&&o(n,["updateTime"],c);const d=a(t,["error"]);null!=d&&o(n,["error"],d);const p=a(t,["description"]);null!=p&&o(n,["description"],p);const h=a(t,["baseModel"]);null!=h&&o(n,["baseModel"],h);const f=a(t,["tunedModel"]);null!=f&&o(n,["tunedModel"],function(e,t){const n={},r=a(t,["model"]);null!=r&&o(n,["model"],r);const i=a(t,["endpoint"]);return null!=i&&o(n,["endpoint"],i),n}(0,f));const m=a(t,["supervisedTuningSpec"]);null!=m&&o(n,["supervisedTuningSpec"],m);const g=a(t,["tuningDataStats"]);null!=g&&o(n,["tuningDataStats"],g);const y=a(t,["encryptionSpec"]);null!=y&&o(n,["encryptionSpec"],y);const v=a(t,["partnerModelTuningSpec"]);null!=v&&o(n,["partnerModelTuningSpec"],v);const b=a(t,["distillationSpec"]);null!=b&&o(n,["distillationSpec"],b);const S=a(t,["experiment"]);null!=S&&o(n,["experiment"],S);const w=a(t,["labels"]);null!=w&&o(n,["labels"],w);const E=a(t,["pipelineJob"]);null!=E&&o(n,["pipelineJob"],E);const k=a(t,["tunedModelDisplayName"]);return null!=k&&o(n,["tunedModelDisplayName"],k),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ar extends r{constructor(e){super(),this.apiClient=e,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new et(j.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const t=await this.tuneMldevInternal(e);let n="";void 0!==t.metadata&&void 0!==t.metadata.tunedModel?n=t.metadata.tunedModel:void 0!==t.name&&t.name.includes("/operations/")&&(n=t.name.split("/operations/")[0]);return{name:n,state:ve.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","name"],r);const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return u=i("{name}",r._url),c=r._query,delete r.config,delete r._url,delete r._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>or(this.apiClient,e))}{const t=function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["_url","name"],r);const i=a(t,["config"]);return null!=i&&o(n,["config"],i),n}(this.apiClient,e);return u=i("{name}",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>ir(this.apiClient,e))}}async listInternal(e){var t,n,r,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const r=tr(this.apiClient,e);return u=i("tuningJobs",r._url),c=r._query,delete r.config,delete r._url,delete r._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},r=a(t,["nextPageToken"]);null!=r&&o(n,["nextPageToken"],r);const i=a(t,["tuningJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>or(0,e))),o(n,["tuningJobs"],e)}return n}(this.apiClient,e),n=new st;return Object.assign(n,t),n})}{const t=Xn(this.apiClient,e);return u=i("tunedModels",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},r=a(t,["nextPageToken"]);null!=r&&o(n,["nextPageToken"],r);const i=a(t,["tunedModels"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>ir(0,e))),o(n,["tuningJobs"],e)}return n}(this.apiClient,e),n=new st;return Object.assign(n,t),n})}}async tuneInternal(e){var t,n;let r,o="",a={};if(this.apiClient.isVertexAI()){const s=rr(this.apiClient,e);return o=i("tuningJobs",s._url),a=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>or(this.apiClient,e))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=er(this.apiClient,e);return s=i("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>function(e,t){const n={},r=a(t,["name"]);null!=r&&o(n,["name"],r);const i=a(t,["metadata"]);null!=i&&o(n,["metadata"],i);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);return null!=l&&o(n,["error"],l),n}(this.apiClient,e))}}}class sr{async upload(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r,i;let o=0,a=0,s=new dt(new Response),l="upload";for(o=e.size;a<o;){const i=Math.min(8388608,o-a),u=e.slice(a,a+i);if(a+i>=o&&(l+=", finalize"),s=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(i)}}}),a+=i,"active"!==(null===(r=null==s?void 0:s.headers)||void 0===r?void 0:r["x-goog-upload-status"]))break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(null==s?void 0:s.json());if("final"!==(null===(i=null==s?void 0:s.headers)||void 0===i?void 0:i["x-goog-upload-status"]))throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}(e,t,n)}async stat(e){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lr{create(e,t,n){return new ur(e,t,n)}}class ur{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cr="x-goog-api-key";class dr{constructor(e){this.apiKey=e}async addAuthHeaders(e){null===e.get(cr)&&e.append(cr,this.apiKey)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pr{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const r=n(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new dr(this.apiKey);this.apiClient=new Qn({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:"gl-node/web",uploader:new sr}),this.models=new Un(this.apiClient),this.live=new Bn(this.apiClient,i,new lr),this.chats=new wt(this.models,this.apiClient),this.caches=new ft(this.apiClient),this.files=new At(this.apiClient),this.operations=new Gn(this.apiClient),this.tunings=new ar(this.apiClient)}}var hr,fr,mr={exports:{}},gr={};function yr(){if(hr)return gr;hr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,f={};function m(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var v=y.prototype=new g;v.constructor=y,h(v,m.prototype),v.isPureReactComponent=!0;var b=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function E(t,n,r,i,o,a){return r=a.ref,{$$typeof:e,type:t,key:n,ref:void 0!==r?r:null,props:a}}function k(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var T=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function A(){}function x(n,r,i,o,a){var s=typeof n;"undefined"!==s&&"boolean"!==s||(n=null);var l,u,p=!1;if(null===n)p=!0;else switch(s){case"bigint":case"string":case"number":p=!0;break;case"object":switch(n.$$typeof){case e:case t:p=!0;break;case c:return x((p=n._init)(n._payload),r,i,o,a)}}if(p)return a=a(n),p=""===o?"."+C(n,0):o,b(a)?(i="",null!=p&&(i=p.replace(T,"$&/")+"/"),x(a,r,i,"",function(e){return e})):null!=a&&(k(a)&&(l=a,u=i+(null==a.key||n&&n.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+p,a=E(l.type,u,void 0,0,0,l.props)),r.push(a)),1;p=0;var h,f=""===o?".":o+":";if(b(n))for(var m=0;m<n.length;m++)p+=x(o=n[m],r,i,s=f+C(o,m),a);else if("function"==typeof(m=null===(h=n)||"object"!=typeof h?null:"function"==typeof(h=d&&h[d]||h["@@iterator"])?h:null))for(n=m.call(n),m=0;!(o=n.next()).done;)p+=x(o=o.value,r,i,s=f+C(o,m++),a);else if("object"===s){if("function"==typeof n.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),r,i,o,a);throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return p}function P(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function O(){}return gr.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},gr.Component=m,gr.Fragment=n,gr.Profiler=i,gr.PureComponent=y,gr.StrictMode=r,gr.Suspense=l,gr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,gr.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},gr.cache=function(e){return function(){return e.apply(null,arguments)}},gr.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=h({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!w.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return E(e.type,i,void 0,0,0,r)},gr.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},gr.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return E(e,o,void 0,0,0,i)},gr.createRef=function(){return{current:null}},gr.forwardRef=function(e){return{$$typeof:s,render:e}},gr.isValidElement=k,gr.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:I}},gr.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},gr.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(O,_)}catch(o){_(o)}finally{S.T=t}},gr.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},gr.use=function(e){return S.H.use(e)},gr.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},gr.useCallback=function(e,t){return S.H.useCallback(e,t)},gr.useContext=function(e){return S.H.useContext(e)},gr.useDebugValue=function(){},gr.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},gr.useEffect=function(e,t,n){var r=S.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},gr.useId=function(){return S.H.useId()},gr.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},gr.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},gr.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},gr.useMemo=function(e,t){return S.H.useMemo(e,t)},gr.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},gr.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},gr.useRef=function(e){return S.H.useRef(e)},gr.useState=function(e){return S.H.useState(e)},gr.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},gr.useTransition=function(){return S.H.useTransition()},gr.version="19.1.1",gr}function vr(){return fr||(fr=1,mr.exports=yr()),mr.exports}var br,Sr,wr=vr(),Er={exports:{}},kr={};var Tr=(Sr||(Sr=1,Er.exports=function(){if(br)return kr;br=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==n.key&&(i=""+n.key),"key"in n)for(var o in r={},n)"key"!==o&&(r[o]=n[o]);else r=n;return n=r.ref,{$$typeof:e,type:t,key:i,ref:void 0!==n?n:null,props:r}}return kr.Fragment=t,kr.jsx=n,kr.jsxs=n,kr}()),Er.exports);const Cr=wr.createContext({});function Ar(e){const t=wr.useRef(null);return null===t.current&&(t.current=e()),t.current}const xr="undefined"!=typeof window,Pr=xr?wr.useLayoutEffect:wr.useEffect,Ir=wr.createContext(null);function _r(e,t){-1===e.indexOf(t)&&e.push(t)}function Or(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Lr=(e,t,n)=>n>t?t:n<e?e:n;const Mr={},Dr=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Nr(e){return"object"==typeof e&&null!==e}const Rr=e=>/^0[^.\s]+$/u.test(e);function zr(e){let t;return()=>(void 0===t&&(t=e()),t)}const Br=e=>e,Fr=(e,t)=>n=>t(e(n)),Vr=(...e)=>e.reduce(Fr),Ur=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class jr{constructor(){this.subscriptions=[]}add(e){return _r(this.subscriptions,e),()=>Or(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $r=e=>1e3*e,qr=e=>e/1e3;function Hr(e,t){return t?e*(1e3/t):0}const Gr=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Wr(e,t,n,r){if(e===t&&n===r)return Br;const i=t=>function(e,t,n,r,i){let o,a,s=0;do{a=t+(n-t)/2,o=Gr(a,r,i)-e,o>0?n=a:t=a}while(Math.abs(o)>1e-7&&++s<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:Gr(i(e),t,r)}const Kr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Yr=e=>t=>1-e(1-t),Qr=Wr(.33,1.53,.69,.99),Jr=Yr(Qr),Xr=Kr(Jr),Zr=e=>(e*=2)<1?.5*Jr(e):.5*(2-Math.pow(2,-10*(e-1))),ei=e=>1-Math.sin(Math.acos(e)),ti=Yr(ei),ni=Kr(ei),ri=Wr(.42,0,1,1),ii=Wr(0,0,.58,1),oi=Wr(.42,0,.58,1),ai=e=>Array.isArray(e)&&"number"==typeof e[0],si={linear:Br,easeIn:ri,easeInOut:oi,easeOut:ii,circIn:ei,circInOut:ni,circOut:ti,backIn:Jr,backInOut:Xr,backOut:Qr,anticipate:Zr},li=e=>{if(ai(e)){e.length;const[t,n,r,i]=e;return Wr(t,n,r,i)}return"string"==typeof e?si[e]:e},ui=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ci(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=ui.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function s(t){o.has(t)&&(l.schedule(t),e()),t(a)}const l={schedule:(e,i=!1,a=!1)=>{const s=a&&r?t:n;return i&&o.add(e),s.has(e)||s.add(e),e},cancel:e=>{n.delete(e),o.delete(e)},process:e=>{a=e,r?i=!0:(r=!0,[t,n]=[n,t],t.forEach(s),t.clear(),r=!1,i&&(i=!1,l.process(e)))}};return l}(o),e),{}),{setup:s,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:p,render:h,postRender:f}=a,m=()=>{const o=Mr.useManualTiming?i.timestamp:performance.now();n=!1,Mr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(o-i.timestamp,40),1)),i.timestamp=o,i.isProcessing=!0,s.process(i),l.process(i),u.process(i),c.process(i),d.process(i),p.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))};return{schedule:ui.reduce((t,o)=>{const s=a[o];return t[o]=(t,o=!1,a=!1)=>(n||(n=!0,r=!0,i.isProcessing||e(m)),s.schedule(t,o,a)),t},{}),cancel:e=>{for(let t=0;t<ui.length;t++)a[ui[t]].cancel(e)},state:i,steps:a}}const{schedule:di,cancel:pi,state:hi,steps:fi}=ci("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Br,!0);let mi;function gi(){mi=void 0}const yi={now:()=>(void 0===mi&&yi.set(hi.isProcessing||Mr.useManualTiming?hi.timestamp:performance.now()),mi),set:e=>{mi=e,queueMicrotask(gi)}},vi=e=>t=>"string"==typeof t&&t.startsWith(e),bi=vi("--"),Si=vi("var(--"),wi=e=>!!Si(e)&&Ei.test(e.split("/*")[0].trim()),Ei=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ki={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Ti={...ki,transform:e=>Lr(0,1,e)},Ci={...ki,default:1},Ai=e=>Math.round(1e5*e)/1e5,xi=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Pi=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ii=(e,t)=>n=>Boolean("string"==typeof n&&Pi.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),_i=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[i,o,a,s]=r.match(xi);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},Oi={...ki,transform:e=>Math.round((e=>Lr(0,255,e))(e))},Li={test:Ii("rgb","red"),parse:_i("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Oi.transform(e)+", "+Oi.transform(t)+", "+Oi.transform(n)+", "+Ai(Ti.transform(r))+")"};const Mi={test:Ii("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Li.transform},Di=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Ni=Di("deg"),Ri=Di("%"),zi=Di("px"),Bi=Di("vh"),Fi=Di("vw"),Vi=(()=>({...Ri,parse:e=>Ri.parse(e)/100,transform:e=>Ri.transform(100*e)}))(),Ui={test:Ii("hsl","hue"),parse:_i("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ri.transform(Ai(t))+", "+Ri.transform(Ai(n))+", "+Ai(Ti.transform(r))+")"},ji={test:e=>Li.test(e)||Mi.test(e)||Ui.test(e),parse:e=>Li.test(e)?Li.parse(e):Ui.test(e)?Ui.parse(e):Mi.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Li.transform(e):Ui.transform(e),getAnimatableNone:e=>{const t=ji.parse(e);return t.alpha=0,ji.transform(t)}},$i=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const qi="number",Hi="color",Gi=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wi(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=t.replace(Gi,e=>(ji.test(e)?(r.color.push(o),i.push(Hi),n.push(ji.parse(e))):e.startsWith("var(")?(r.var.push(o),i.push("var"),n.push(e)):(r.number.push(o),i.push(qi),n.push(parseFloat(e))),++o,"${}")).split("${}");return{values:n,split:a,indexes:r,types:i}}function Ki(e){return Wi(e).values}function Yi(e){const{split:t,types:n}=Wi(e),r=t.length;return e=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],void 0!==e[o]){const t=n[o];i+=t===qi?Ai(e[o]):t===Hi?ji.transform(e[o]):e[o]}return i}}const Qi=e=>"number"==typeof e?0:ji.test(e)?ji.getAnimatableNone(e):e;const Ji={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(xi))?void 0:t.length)||0)+((null==(n=e.match($i))?void 0:n.length)||0)>0},parse:Ki,createTransformer:Yi,getAnimatableNone:function(e){const t=Ki(e);return Yi(e)(t.map(Qi))}};function Xi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Zi(e,t){return n=>n>0?t:e}const eo=(e,t,n)=>e+(t-e)*n,to=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},no=[Mi,Li,Ui];function ro(e){const t=(n=e,no.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===Ui&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,o=0,a=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;i=Xi(s,r,e+1/3),o=Xi(s,r,e),a=Xi(s,r,e-1/3)}else i=o=a=n;return{red:Math.round(255*i),green:Math.round(255*o),blue:Math.round(255*a),alpha:r}}(r)),r}const io=(e,t)=>{const n=ro(e),r=ro(t);if(!n||!r)return Zi(e,t);const i={...n};return e=>(i.red=to(n.red,r.red,e),i.green=to(n.green,r.green,e),i.blue=to(n.blue,r.blue,e),i.alpha=eo(n.alpha,r.alpha,e),Li.transform(i))},oo=new Set(["none","hidden"]);function ao(e,t){return n=>eo(e,t,n)}function so(e){return"number"==typeof e?ao:"string"==typeof e?wi(e)?Zi:ji.test(e)?io:co:Array.isArray(e)?lo:"object"==typeof e?ji.test(e)?io:uo:Zi}function lo(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>so(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function uo(e,t){const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=so(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const co=(e,t)=>{const n=Ji.createTransformer(t),r=Wi(e),i=Wi(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?oo.has(e)&&!i.values.length||oo.has(t)&&!r.values.length?function(e,t){return oo.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Vr(lo(function(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],a=e.indexes[o][r[o]],s=e.values[a]??0;n[i]=s,r[o]++}return n}(r,i),i.values),n):Zi(e,t)};function po(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return eo(e,t,n);return so(e)(e,t)}const ho=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>di.update(t,e),stop:()=>pi(t),now:()=>hi.isProcessing?hi.timestamp:yi.now()}},fo=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let o=0;o<i;o++)r+=Math.round(1e4*e(o/(i-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},mo=2e4;function go(e){let t=0;let n=e.next(t);for(;!n.done&&t<mo;)t+=50,n=e.next(t);return t>=mo?1/0:t}function yo(e,t,n){const r=Math.max(t-5,0);return Hr(n-e(r),t-r)}const vo=100,bo=10,So=1,wo=0,Eo=800,ko=.3,To=.3,Co={granular:.01,default:2},Ao={granular:.005,default:.5},xo=.01,Po=10,Io=.05,_o=1,Oo=.001;function Lo({duration:e=Eo,bounce:t=ko,velocity:n=wo,mass:r=So}){let i,o,a=1-t;a=Lr(Io,_o,a),e=Lr(xo,Po,qr(e)),a<1?(i=t=>{const r=t*a,i=r*e,o=r-n,s=Do(t,a),l=Math.exp(-i);return Oo-o/s*l},o=t=>{const r=t*a*e,o=r*n+n,s=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-r),u=Do(Math.pow(t,2),a);return(-i(t)+Oo>0?-1:1)*((o-s)*l)/u}):(i=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,o=t=>Math.exp(-t*e)*(e*e*(n-t)));const s=function(e,t,n){let r=n;for(let i=1;i<Mo;i++)r-=e(r)/t(r);return r}(i,o,5/e);if(e=$r(e),isNaN(s))return{stiffness:vo,damping:bo,duration:e};{const t=Math.pow(s,2)*r;return{stiffness:t,damping:2*a*Math.sqrt(r*t),duration:e}}}const Mo=12;function Do(e,t){return e*Math.sqrt(1-t*t)}const No=["duration","bounce"],Ro=["stiffness","damping","mass"];function zo(e,t){return t.some(t=>void 0!==e[t])}function Bo(e=To,t=ko){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:l,damping:u,mass:c,duration:d,velocity:p,isResolvedFromDuration:h}=function(e){let t={velocity:wo,stiffness:vo,damping:bo,mass:So,isResolvedFromDuration:!1,...e};if(!zo(e,Ro)&&zo(e,No))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,o=2*Lr(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:So,stiffness:i,damping:o}}else{const n=Lo(e);t={...t,...n,mass:So},t.isResolvedFromDuration=!0}return t}({...n,velocity:-qr(n.velocity||0)}),f=p||0,m=u/(2*Math.sqrt(l*c)),g=a-o,y=qr(Math.sqrt(l/c)),v=Math.abs(g)<5;let b;if(r||(r=v?Co.granular:Co.default),i||(i=v?Ao.granular:Ao.default),m<1){const e=Do(y,m);b=t=>{const n=Math.exp(-m*y*t);return a-n*((f+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>a-Math.exp(-y*e)*(g+(f+y*g)*e);else{const e=y*Math.sqrt(m*m-1);b=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return a-n*((f+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const S={calculatedDuration:h&&d||null,next:e=>{const t=b(e);if(h)s.done=e>=d;else{let n=0===e?f:0;m<1&&(n=0===e?$r(f):yo(b,e,t));const o=Math.abs(n)<=r,l=Math.abs(a-t)<=i;s.done=o&&l}return s.value=s.done?a:t,s},toString:()=>{const e=Math.min(go(S),mo),t=fo(t=>S.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return S}function Fo({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],p={done:!1,value:d},h=e=>void 0===s?l:void 0===l||Math.abs(s-e)<Math.abs(l-e)?s:l;let f=n*t;const m=d+f,g=void 0===a?m:a(m);g!==m&&(f=g-d);const y=e=>-f*Math.exp(-e/r),v=e=>g+y(e),b=e=>{const t=y(e),n=v(e);p.done=Math.abs(t)<=u,p.value=p.done?g:n};let S,w;const E=e=>{var t;(t=p.value,void 0!==s&&t<s||void 0!==l&&t>l)&&(S=e,w=Bo({keyframes:[p.value,h(p.value)],velocity:yo(v,e,p.value),damping:i,stiffness:o,restDelta:u,restSpeed:c}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==S||(t=!0,b(e),E(e)),void 0!==S&&e>=S?w.next(e-S):(!t&&b(e),p)}}}function Vo(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(t.length,1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=function(e,t,n){const r=[],i=n||Mr.mix||po,o=e.length-1;for(let a=0;a<o;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Br:t;n=Vr(e,n)}r.push(n)}return r}(t,r,i),l=s.length,u=n=>{if(a&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=Ur(e[r],e[r+1],n);return s[r](i)};return n?t=>u(Lr(e[0],e[o-1],t)):u}function Uo(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Ur(0,t,r);e.push(eo(n,1,i))}}(t,e.length-1),t}function jo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(li):li(r),o={done:!1,value:t[0]},a=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:Uo(t),e),s=Vo(a,t,{ease:Array.isArray(i)?i:(l=t,u=i,l.map(()=>u||oi).splice(0,l.length-1))});var l,u;return{calculatedDuration:e,next:t=>(o.value=s(t),o.done=t>=e,o)}}Bo.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(go(r),mo);return{type:"keyframes",ease:e=>r.next(i*e).value/t,duration:qr(i)}}(e,100,Bo);return e.ease=t.ease,e.duration=$r(t.duration),e.type="keyframes",e};const $o=e=>null!==e;function qo(e,{repeat:t,repeatType:n="loop"},r,i=1){const o=e.filter($o),a=i<0||t&&"loop"!==n&&t%2==1?0:o.length-1;return a&&void 0!==r?r:o[a]}const Ho={decay:Fo,inertia:Fo,tween:jo,keyframes:jo,spring:Bo};function Go(e){"string"==typeof e.type&&(e.type=Ho[e.type])}class Wo{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Ko=e=>e/100;class Yo extends Wo{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==yi.now()&&this.tick(yi.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Go(e);const{type:t=jo,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const s=t||jo;s!==jo&&"number"!=typeof a[0]&&(this.mixKeyframes=Vr(Ko,po(a[0],a[1])),a=[0,100]);const l=s({...e,keyframes:a});"mirror"===i&&(this.mirroredGenerator=s({...e,keyframes:[...a].reverse(),velocity:-o})),null===l.calculatedDuration&&(l.calculatedDuration=go(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:s}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:u,repeat:c,repeatType:d,repeatDelay:p,type:h,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,b=n;if(c){const e=Math.min(this.currentTime,r)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,c+1);Boolean(t%2)&&("reverse"===d?(n=1-n,p&&(n-=p/a)):"mirror"===d&&(b=o)),v=Lr(0,1,n)*a}const S=y?{done:!1,value:u[0]}:b.next(v);i&&(S.value=i(S.value));let{done:w}=S;y||null===s||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const E=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return E&&h!==Fo&&(S.value=qo(u,this.options,m,this.speed)),f&&f(S.value),E&&this.finish(),S}then(e,t){return this.finished.then(e,t)}get duration(){return qr(this.calculatedDuration)}get time(){return qr(this.currentTime)}set time(e){var t;e=$r(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(yi.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=qr(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=ho,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=r??i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(yi.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const Qo=e=>180*e/Math.PI,Jo=e=>{const t=Qo(Math.atan2(e[1],e[0]));return Zo(t)},Xo={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Jo,rotateZ:Jo,skewX:e=>Qo(Math.atan(e[1])),skewY:e=>Qo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Zo=e=>((e%=360)<0&&(e+=360),e),ea=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ta=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),na={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ea,scaleY:ta,scale:e=>(ea(e)+ta(e))/2,rotateX:e=>Zo(Qo(Math.atan2(e[6],e[5]))),rotateY:e=>Zo(Qo(Math.atan2(-e[2],e[0]))),rotateZ:Jo,rotate:Jo,skewX:e=>Qo(Math.atan(e[4])),skewY:e=>Qo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ra(e){return e.includes("scale")?1:0}function ia(e,t){if(!e||"none"===e)return ra(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=na,i=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Xo,i=t}if(!i)return ra(t);const o=r[t],a=i[1].split(",").map(oa);return"function"==typeof o?o(a):a[o]}function oa(e){return parseFloat(e.trim())}const aa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sa=(()=>new Set(aa))(),la=e=>e===ki||e===zi,ua=new Set(["x","y","z"]),ca=aa.filter(e=>!ua.has(e));const da={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ia(t,"x"),y:(e,{transform:t})=>ia(t,"y")};da.translateX=da.x,da.translateY=da.y;const pa=new Set;let ha=!1,fa=!1,ma=!1;function ga(){if(fa){const e=Array.from(pa).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return ca.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var r;null==(r=e.getValue(t))||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}fa=!1,ha=!1,pa.forEach(e=>e.complete(ma)),pa.clear()}function ya(){pa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(fa=!0)})}class va{constructor(e,t,n,r,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(pa.add(this),ha||(ha=!0,di.read(ya),di.resolveKeyframes(ga))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const i=null==r?void 0:r.get(),o=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,o);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=o),r&&void 0===i&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),pa.delete(this)}cancel(){"scheduled"===this.state&&(pa.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const ba=zr(()=>void 0!==window.ScrollTimeline),Sa={};function wa(e,t){const n=zr(e);return()=>Sa[t]??n()}const Ea=wa(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),ka=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ta={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ka([0,.65,.55,1]),circOut:ka([.55,0,1,.45]),backIn:ka([.31,.01,.66,-.59]),backOut:ka([.33,1.53,.69,.99])};function Ca(e,t){return e?"function"==typeof e?Ea()?fo(e,t):"ease-out":ai(e)?ka(e):Array.isArray(e)?e.map(e=>Ca(e,t)||Ta.easeOut):Ta[e]:void 0}function Aa(e,t,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const d=Ca(s,i);Array.isArray(d)&&(c.easing=d);const p={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:"reverse"===a?"alternate":"normal"};u&&(p.pseudoElement=u);return e.animate(c,p)}function xa(e){return"function"==typeof e&&"applyToOptions"in e}class Pa extends Wo{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:s}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=o,this.options=e,e.type;const l=function({type:e,...t}){return xa(e)&&Ea()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=Aa(t,n,r,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=qo(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==s||s(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const n=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return qr(Number(n))}get time(){return qr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=$r(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&(null==(n=this.animation.effect)||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&ba()?(this.animation.timeline=e,Br):t(this)}}const Ia={anticipate:Zr,backInOut:Xr,circInOut:ni};function _a(e){"string"==typeof e.ease&&e.ease in Ia&&(e.ease=Ia[e.ease])}class Oa extends Pa{constructor(e){_a(e),Go(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:i,...o}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new Yo({...o,autoplay:!1}),s=$r(this.finishedTime??this.time);t.setWithVelocity(a.sample(s-10).value,a.sample(s).value,10),a.stop()}}const La=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!Ji.test(e)&&"0"!==e||e.startsWith("url(")));function Ma(e){e.duration=0,e.type}const Da=new Set(["opacity","clipPath","filter","transform"]),Na=zr(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Ra extends Wo{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:s,motionValue:l,element:u,...c}){var d;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=yi.now();const p={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:o,name:s,motionValue:l,element:u,...c},h=(null==u?void 0:u.KeyframeResolver)||va;this.keyframeResolver=new h(a,(e,t,n)=>this.onKeyframesResolved(e,t,p,!n),s,l,u),null==(d=this.keyframeResolver)||d.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:s,isHandoff:l,onUpdate:u}=n;this.resolvedAt=yi.now(),function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],a=La(i,t),s=La(o,t);return!(!a||!s)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||xa(n))&&r)}(e,i,o,a)||(!Mr.instantAnimations&&s||null==u||u(qo(e,n,t)),e[0]=e[e.length-1],Ma(n),n.repeat=0);const c={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:a,type:s}=e;if(!((null==(t=null==n?void 0:n.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return Na()&&r&&Da.has(r)&&("transform"!==r||!u)&&!l&&!i&&"mirror"!==o&&0!==a&&"inertia"!==s}(c)?new Oa({...c,element:c.motionValue.owner.current}):new Yo(c);d.finished.then(()=>this.notifyFinished()).catch(Br),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),ma=!0,ya(),ga(),ma=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const za=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ba(e,t,n=1){const[r,i]=function(e){const t=za.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const e=o.trim();return Dr(e)?parseFloat(e):e}return wi(i)?Ba(i,t,n+1):i}function Fa(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const Va=new Set(["width","height","top","left","right","bottom",...aa]),Ua=e=>t=>t.test(e),ja=[ki,zi,Ri,Ni,Fi,Bi,{test:e=>"auto"===e,parse:e=>e}],$a=e=>ja.find(Ua(e));function qa(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||Rr(e))}const Ha=new Set(["brightness","contrast","saturate","opacity"]);function Ga(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(xi)||[];if(!r)return e;const i=n.replace(r,"");let o=Ha.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const Wa=/\b([a-z-]*)\(.*?\)/gu,Ka={...Ji,getAnimatableNone:e=>{const t=e.match(Wa);return t?t.map(Ga).join(" "):e}},Ya={...ki,transform:Math.round},Qa={borderWidth:zi,borderTopWidth:zi,borderRightWidth:zi,borderBottomWidth:zi,borderLeftWidth:zi,borderRadius:zi,radius:zi,borderTopLeftRadius:zi,borderTopRightRadius:zi,borderBottomRightRadius:zi,borderBottomLeftRadius:zi,width:zi,maxWidth:zi,height:zi,maxHeight:zi,top:zi,right:zi,bottom:zi,left:zi,padding:zi,paddingTop:zi,paddingRight:zi,paddingBottom:zi,paddingLeft:zi,margin:zi,marginTop:zi,marginRight:zi,marginBottom:zi,marginLeft:zi,backgroundPositionX:zi,backgroundPositionY:zi,...{rotate:Ni,rotateX:Ni,rotateY:Ni,rotateZ:Ni,scale:Ci,scaleX:Ci,scaleY:Ci,scaleZ:Ci,skew:Ni,skewX:Ni,skewY:Ni,distance:zi,translateX:zi,translateY:zi,translateZ:zi,x:zi,y:zi,z:zi,perspective:zi,transformPerspective:zi,opacity:Ti,originX:Vi,originY:Vi,originZ:zi},zIndex:Ya,fillOpacity:Ti,strokeOpacity:Ti,numOctaves:Ya},Ja={...Qa,color:ji,backgroundColor:ji,outlineColor:ji,fill:ji,stroke:ji,borderColor:ji,borderTopColor:ji,borderRightColor:ji,borderBottomColor:ji,borderLeftColor:ji,filter:Ka,WebkitFilter:Ka},Xa=e=>Ja[e];function Za(e,t){let n=Xa(e);return n!==Ka&&(n=Ji),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const es=new Set(["auto","none","0"]);class ts extends va{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let n=e[s];if("string"==typeof n&&(n=n.trim(),wi(n))){const r=Ba(n,t.current);void 0!==r&&(e[s]=r),s===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Va.has(n)||2!==e.length)return;const[r,i]=e,o=$a(r),a=$a(i);if(o!==a)if(la(o)&&la(a))for(let s=0;s<e.length;s++){const t=e[s];"string"==typeof t&&(e[s]=parseFloat(t))}else da[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||qa(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"==typeof t&&!es.has(t)&&Wi(t).values.length&&(r=e[i]),i++}if(r&&n)for(const o of t)e[o]=Za(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=da[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=da[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}const ns=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function rs(e){return Nr(e)&&"offsetHeight"in e}class is{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const n=yi.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=yi.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new jr);const n=this.events[e].add(t);return"change"===e?()=>{n(),di.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=yi.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Hr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function os(e,t){return new is(e,t)}const{schedule:as}=ci(queueMicrotask,!1),ss={x:!1,y:!1};function ls(){return ss.x||ss.y}function us(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const r=(null==n?void 0:n[e])??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function cs(e){return!("touch"===e.pointerType||ls())}const ds=(e,t)=>!!t&&(e===t||ds(e,t.parentElement)),ps=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,hs=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const fs=new WeakSet;function ms(e){return t=>{"Enter"===t.key&&e(t)}}function gs(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function ys(e){return ps(e)&&!ls()}function vs(e,t,n={}){const[r,i,o]=us(e,n),a=e=>{const r=e.currentTarget;if(!ys(e))return;fs.add(r);const o=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",l),fs.has(r)&&fs.delete(r),ys(e)&&"function"==typeof o&&o(e,{success:t})},s=e=>{a(e,r===window||r===document||n.useGlobalTarget||ds(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",s,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),rs(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=ms(()=>{if(fs.has(n))return;gs(n,"down");const e=ms(()=>{gs(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>gs(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i)),t=e,hs.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),o}function bs(e){return Nr(e)&&"ownerSVGElement"in e}const Ss=e=>Boolean(e&&e.getVelocity),ws=[...ja,ji,Ji],Es=wr.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class ks extends wr.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=rs(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ts({children:e,isPresent:t,anchorX:n,root:r}){const i=wr.useId(),o=wr.useRef(null),a=wr.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=wr.useContext(Es);return wr.useInsertionEffect(()=>{const{width:e,height:l,top:u,left:c,right:d}=a.current;if(t||!o.current||!e||!l)return;const p="left"===n?`left: ${c}`:`right: ${d}`;o.current.dataset.motionPopId=i;const h=document.createElement("style");s&&(h.nonce=s);const f=r??document.head;return f.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${l}px !important;\n            ${p}px !important;\n            top: ${u}px !important;\n          }\n        `),()=>{f.contains(h)&&f.removeChild(h)}},[t]),Tr.jsx(ks,{isPresent:t,childRef:o,sizeRef:a,children:wr.cloneElement(e,{ref:o})})}const Cs=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:s,root:l})=>{const u=Ar(As),c=wr.useId();let d=!0,p=wr.useMemo(()=>(d=!1,{id:c,initial:t,isPresent:n,custom:i,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;r&&r()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[n,u,r]);return o&&d&&(p={...p}),wr.useMemo(()=>{u.forEach((e,t)=>u.set(t,!1))},[n]),wr.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),"popLayout"===a&&(e=Tr.jsx(Ts,{isPresent:n,anchorX:s,root:l,children:e})),Tr.jsx(Ir.Provider,{value:p,children:e})};function As(){return new Map}function xs(e=!0){const t=wr.useContext(Ir);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,o=wr.useId();wr.useEffect(()=>{if(e)return i(o)},[e]);const a=wr.useCallback(()=>e&&r&&r(o),[o,r,e]);return!n&&r?[!1,a]:[!0]}const Ps=e=>e.key||"";function Is(e){const t=[];return wr.Children.forEach(e,e=>{wr.isValidElement(e)&&t.push(e)}),t}const _s=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:s="left",root:l})=>{const[u,c]=xs(a),d=wr.useMemo(()=>Is(e),[e]),p=a&&!u?[]:d.map(Ps),h=wr.useRef(!0),f=wr.useRef(d),m=Ar(()=>new Map),[g,y]=wr.useState(d),[v,b]=wr.useState(d);Pr(()=>{h.current=!1,f.current=d;for(let e=0;e<v.length;e++){const t=Ps(v[e]);p.includes(t)?m.delete(t):!0!==m.get(t)&&m.set(t,!1)}},[v,p.length,p.join("-")]);const S=[];if(d!==g){let e=[...d];for(let t=0;t<v.length;t++){const n=v[t],r=Ps(n);p.includes(r)||(e.splice(t,0,n),S.push(n))}return"wait"===o&&S.length&&(e=S),b(Is(e)),y(d),null}const{forceRender:w}=wr.useContext(Cr);return Tr.jsx(Tr.Fragment,{children:v.map(e=>{const g=Ps(e),y=!(a&&!u)&&(d===v||p.includes(g));return Tr.jsx(Cs,{isPresent:y,initial:!(h.current&&!n)&&void 0,custom:t,presenceAffectsLayout:i,mode:o,root:l,onExitComplete:y?void 0:()=>{if(!m.has(g))return;m.set(g,!0);let e=!0;m.forEach(t=>{t||(e=!1)}),e&&(null==w||w(),b(f.current),a&&(null==c||c()),r&&r())},anchorX:s,children:e},g)})})},Os=wr.createContext({strict:!1}),Ls={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ms={};for(const L in Ls)Ms[L]={isEnabled:e=>Ls[L].some(t=>!!e[t])};const Ds=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ns(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ds.has(e)}let Rs=e=>!Ns(e);try{"function"==typeof(zs=require("@emotion/is-prop-valid").default)&&(Rs=e=>e.startsWith("on")?!Ns(e):zs(e))}catch{}var zs;const Bs=wr.createContext({});function Fs(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function Vs(e){return"string"==typeof e||Array.isArray(e)}const Us=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],js=["initial",...Us];function $s(e){return Fs(e.animate)||js.some(t=>Vs(e[t]))}function qs(e){return Boolean($s(e)||e.variants)}function Hs(e){const{initial:t,animate:n}=function(e,t){if($s(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Vs(t)?t:void 0,animate:Vs(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,wr.useContext(Bs));return wr.useMemo(()=>({initial:t,animate:n}),[Gs(t),Gs(n)])}function Gs(e){return Array.isArray(e)?e.join(" "):e}const Ws={};function Ks(e,{layout:t,layoutId:n}){return sa.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!Ws[e]||"opacity"===e)}const Ys={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Qs=aa.length;function Js(e,t,n){const{style:r,vars:i,transformOrigin:o}=e;let a=!1,s=!1;for(const l in t){const e=t[l];if(sa.has(l))a=!0;else if(bi(l))i[l]=e;else{const t=ns(e,Qa[l]);l.startsWith("origin")?(s=!0,o[l]=t):r[l]=t}}if(t.transform||(a||n?r.transform=function(e,t,n){let r="",i=!0;for(let o=0;o<Qs;o++){const a=aa[o],s=e[a];if(void 0===s)continue;let l=!0;if(l="number"==typeof s?s===(a.startsWith("scale")?1:0):0===parseFloat(s),!l||n){const e=ns(s,Qa[a]);l||(i=!1,r+=`${Ys[a]||a}(${e}) `),n&&(t[a]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),s){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;r.transformOrigin=`${e} ${t} ${n}`}}const Xs=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Zs(e,t,n){for(const r in t)Ss(t[r])||Ks(r,n)||(e[r]=t[r])}function el(e,t){const n={};return Zs(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return wr.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return Js(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function tl(e,t){const n={},r=el(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const nl={offset:"stroke-dashoffset",array:"stroke-dasharray"},rl={offset:"strokeDashoffset",array:"strokeDasharray"};function il(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:a=0,...s},l,u,c){if(Js(e,s,u),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:p}=e;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=(null==c?void 0:c.transformBox)??"fill-box",delete d.transformBox),void 0!==t&&(d.x=t),void 0!==n&&(d.y=n),void 0!==r&&(d.scale=r),void 0!==i&&function(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?nl:rl;e[o.offset]=zi.transform(-r);const a=zi.transform(t),s=zi.transform(n);e[o.array]=`${a} ${s}`}(d,i,o,a,!1)}const ol=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),al=e=>"string"==typeof e&&"svg"===e.toLowerCase();function sl(e,t,n,r){const i=wr.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return il(n,t,al(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};Zs(t,e.style,e),i.style={...t,...i.style}}return i}const ll=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ul(e){return"string"==typeof e&&!e.includes("-")&&!!(ll.indexOf(e)>-1||/[A-Z]/u.test(e))}function cl(e,t,n,{latestValues:r},i,o=!1){const a=(ul(e)?sl:tl)(t,r,i,e),s=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"==typeof e.values||(Rs(i)||!0===n&&Ns(i)||!t&&!Ns(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(t,"string"==typeof e,o),l=e!==wr.Fragment?{...s,...a,ref:n}:{},{children:u}=t,c=wr.useMemo(()=>Ss(u)?u.get():u,[u]);return wr.createElement(e,{...l,children:c})}function dl(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function pl(e,t,n,r){if("function"==typeof t){const[i,o]=dl(r);t=t(void 0!==n?n:e.custom,i,o)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[i,o]=dl(r);t=t(void 0!==n?n:e.custom,i,o)}return t}function hl(e){return Ss(e)?e.get():e}function fl(e,t,n,r){const i={},o=r(e,{});for(const p in o)i[p]=hl(o[p]);let{initial:a,animate:s}=e;const l=$s(e),u=qs(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===s&&(s=t.animate));let c=!!n&&!1===n.initial;c=c||!1===a;const d=c?s:a;if(d&&"boolean"!=typeof d&&!Fs(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=pl(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[c?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}const ml=e=>(t,n)=>{const r=wr.useContext(Bs),i=wr.useContext(Ir),o=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:fl(n,r,i,e),renderState:t()}}(e,t,r,i);return n?o():Ar(o)};function gl(e,t,n){var r;const{style:i}=e,o={};for(const a in i)(Ss(i[a])||t.style&&Ss(t.style[a])||Ks(a,e)||void 0!==(null==(r=null==n?void 0:n.getValue(a))?void 0:r.liveStyle))&&(o[a]=i[a]);return o}const yl=ml({scrapeMotionValuesFromProps:gl,createRenderState:Xs});function vl(e,t,n){const r=gl(e,t,n);for(const i in e)if(Ss(e[i])||Ss(t[i])){r[-1!==aa.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}const bl=ml({scrapeMotionValuesFromProps:vl,createRenderState:ol}),Sl=Symbol.for("motionComponentSymbol");function wl(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function El(e,t,n){return wr.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):wl(n)&&(n.current=r))},[t])}const kl=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Tl="data-"+kl("framerAppearId"),Cl=wr.createContext({});function Al(e,t,n,r,i){var o,a;const{visualElement:s}=wr.useContext(Bs),l=wr.useContext(Os),u=wr.useContext(Ir),c=wr.useContext(Es).reducedMotion,d=wr.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:c}));const p=d.current,h=wr.useContext(Cl);!p||p.projection||!i||"html"!==p.type&&"svg"!==p.type||function(e,t,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:xl(e.parent)),e.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:Boolean(a)||s&&wl(s),visualElement:e,animationType:"string"==typeof o?o:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}(d.current,n,i,h);const f=wr.useRef(!1);wr.useInsertionEffect(()=>{p&&f.current&&p.update(n,u)});const m=n[Tl],g=wr.useRef(Boolean(m)&&!(null==(o=window.MotionHandoffIsComplete)?void 0:o.call(window,m))&&(null==(a=window.MotionHasOptimisedAnimation)?void 0:a.call(window,m)));return Pr(()=>{p&&(f.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),g.current&&p.animationState&&p.animationState.animateChanges())}),wr.useEffect(()=>{p&&(!g.current&&p.animationState&&p.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,m)}),g.current=!1),p.enteringChildren=void 0)}),p}function xl(e){if(e)return!1!==e.options.allowProjection?e.projection:xl(e.parent)}function Pl(e,{forwardMotionProps:t=!1}={},n,r){n&&function(e){for(const t in e)Ms[t]={...Ms[t],...e[t]}}(n);const i=ul(e)?bl:yl;function o(n,o){let a;const s={...wr.useContext(Es),...n,layoutId:Il(n)},{isStatic:l}=s,u=Hs(n),c=i(n,l);if(!l&&xr){wr.useContext(Os).strict;const t=function(e){const{drag:t,layout:n}=Ms;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(s);a=t.MeasureLayout,u.visualElement=Al(e,c,s,r,t.ProjectionNode)}return Tr.jsxs(Bs.Provider,{value:u,children:[a&&u.visualElement?Tr.jsx(a,{visualElement:u.visualElement,...s}):null,cl(e,n,El(c,u.visualElement,o),c,l,t)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const a=wr.forwardRef(o);return a[Sl]=e,a}function Il({layoutId:e}){const t=wr.useContext(Cr).id;return t&&void 0!==e?t+"-"+e:e}function _l(e,t){if("undefined"==typeof Proxy)return Pl;const n=new Map,r=(n,r)=>Pl(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,o)=>"create"===o?r:(n.has(o)||n.set(o,Pl(o,void 0,e,t)),n.get(o))})}function Ol({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Ll(e){return void 0===e||1===e}function Ml({scale:e,scaleX:t,scaleY:n}){return!Ll(e)||!Ll(t)||!Ll(n)}function Dl(e){return Ml(e)||Nl(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Nl(e){return Rl(e.x)||Rl(e.y)}function Rl(e){return e&&"0%"!==e}function zl(e,t,n){return n+t*(e-n)}function Bl(e,t,n,r,i){return void 0!==i&&(e=zl(e,i,r)),zl(e,n,r)+t}function Fl(e,t=0,n=1,r,i){e.min=Bl(e.min,t,n,r,i),e.max=Bl(e.max,t,n,r,i)}function Vl(e,{x:t,y:n}){Fl(e.x,t.translate,t.scale,t.originPoint),Fl(e.y,n.translate,n.scale,n.originPoint)}const Ul=.999999999999,jl=1.0000000000001;function $l(e,t){e.min=e.min+t,e.max=e.max+t}function ql(e,t,n,r,i=.5){Fl(e,t,n,eo(e.min,e.max,i),r)}function Hl(e,t){ql(e.x,t.x,t.scaleX,t.scale,t.originX),ql(e.y,t.y,t.scaleY,t.scale,t.originY)}function Gl(e,t){return Ol(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Wl=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Kl={current:null},Yl={current:!1};const Ql=new WeakMap;const Jl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Xl{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=va,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=yi.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,di.render(this.render,!1,!0))};const{latestValues:s,renderState:l}=o;this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=$s(t),this.isVariantNode=qs(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in c){const e=c[d];void 0!==s[d]&&Ss(e)&&e.set(s[d])}}mount(e){var t;this.current=e,Ql.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Yl.current||function(){if(Yl.current=!0,xr)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Kl.current=e.matches;e.addEventListener("change",t),t()}else Kl.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Kl.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),pi(this.notifyUpdate),pi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=sa.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&di.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Ms){const t=Ms[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Jl.length;n++){const t=Jl[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],o=n[r];if(Ss(i))e.addValue(r,i);else if(Ss(o))e.addValue(r,os(i,{owner:e}));else if(o!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,os(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=os(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return null!=n&&("string"==typeof n&&(Dr(n)||Rr(n))?n=parseFloat(n):(r=n,!ws.find(Ua(r))&&Ji.test(t)&&(n=Za(e,t))),this.setBaseTarget(e,Ss(n)?n.get():n)),Ss(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const i=pl(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);i&&(r=i[e])}if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Ss(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new jr),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){as.render(this.render)}}class Zl extends Xl{constructor(){super(...arguments),this.KeyframeResolver=ts}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ss(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function eu(e,{style:t,vars:n},r,i){const o=e.style;let a;for(a in t)o[a]=t[a];for(a in null==i||i.applyProjectionStyles(o,r),n)o.setProperty(a,n[a])}class tu extends Zl{constructor(){super(...arguments),this.type="html",this.renderInstance=eu}readValueFromInstance(e,t){var n,r;if(sa.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?ra(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ia(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),i=(bi(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Gl(e,t)}build(e,t,n){Js(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return gl(e,t,n)}}const nu=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class ru extends Zl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wl}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(sa.has(t)){const e=Xa(t);return e&&e.default||0}return t=nu.has(t)?t:kl(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return vl(e,t,n)}build(e,t,n){il(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){eu(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(nu.has(i)?i:kl(i),t.attrs[i])}(e,t,0,r)}mount(e){this.isSVGTag=al(e.tagName),super.mount(e)}}const iu=(e,t)=>ul(e)?new ru(t):new tu(t,{allowProjection:e!==wr.Fragment});function ou(e,t,n){const r=e.getProps();return pl(r,t,void 0!==n?n:r.custom,e)}const au=e=>Array.isArray(e);function su(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,os(n))}function lu(e){return au(e)?e[e.length-1]||0:e}function uu(e,t){const n=e.getValue("willChange");if(r=n,Boolean(Ss(r)&&r.add))return n.add(t);if(!n&&Mr.WillChange){const n=new Mr.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function cu(e){return e.props[Tl]}const du=e=>null!==e;const pu={type:"spring",stiffness:500,damping:25,restSpeed:10},hu={type:"keyframes",duration:.8},fu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mu=(e,{keyframes:t})=>t.length>2?hu:sa.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:pu:fu;const gu=(e,t,n,r={},i,o)=>a=>{const s=Fa(r,e)||{},l=s.delay||r.delay||0;let{elapsed:u=0}=r;u-=$r(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-u,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:o?void 0:i};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:l,elapsed:u,...c}){return!!Object.keys(c).length})(s)||Object.assign(c,mu(e,c)),c.duration&&(c.duration=$r(c.duration)),c.repeatDelay&&(c.repeatDelay=$r(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if((!1===c.type||0===c.duration&&!c.repeatDelay)&&(Ma(c),0===c.delay&&(d=!0)),(Mr.instantAnimations||Mr.skipAnimations)&&(d=!0,Ma(c),c.delay=0),c.allowFlatten=!s.type&&!s.ease,d&&!o&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const r=e.filter(du);return r[t&&"loop"!==n&&t%2==1?0:r.length-1]}(c.keyframes,s);if(void 0!==e)return void di.update(()=>{c.onUpdate(e),c.onComplete()})}return s.isSync?new Yo(c):new Ra(c)};function yu({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function vu(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...s}=t;r&&(o=r);const l=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const c in s){const t=e.getValue(c,e.latestValues[c]??null),r=s[c];if(void 0===r||u&&yu(u,c))continue;const i={delay:n,...Fa(o||{},c)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(r)&&r===a&&!i.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=cu(e);if(t){const e=window.MotionHandoffAnimation(t,c,di);null!==e&&(i.startTime=e,d=!0)}}uu(e,c),t.start(gu(c,t,r,e.shouldReduceMotion&&Va.has(c)?{type:!1}:i,e,d));const p=t.animation;p&&l.push(p)}return a&&Promise.all(l).then(()=>{di.update(()=>{a&&function(e,t){const n=ou(e,t);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o)su(e,a,lu(o[a]))}(e,a)})}),l}function bu(e,t,n,r=0,i=1){const o=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,s=(a-1)*r;return"function"==typeof n?n(o,a):1===i?o*r:s-o*r}function Su(e,t,n={}){var r;const i=ou(e,t,"exit"===n.type?null==(r=e.presenceContext)?void 0:r.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>Promise.all(vu(e,i,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:i=0,staggerChildren:a,staggerDirection:s}=o;return function(e,t,n=0,r=0,i=0,o=1,a){const s=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),s.push(Su(l,t,{...a,delay:n+("function"==typeof r?0:r)+bu(e.variantChildren,l,r,i,o)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(s)}(e,t,r,i,a,s,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[e,t]="beforeChildren"===l?[a,s]:[s,a];return e().then(()=>t())}return Promise.all([a(),s(n.delay)])}function wu(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Eu=js.length;function ku(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&ku(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Eu;n++){const r=js[n],i=e.props[r];(Vs(i)||!1===i)&&(t[r]=i)}return t}const Tu=[...Us].reverse(),Cu=Us.length;function Au(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>Su(e,t,n));r=Promise.all(i)}else if("string"==typeof t)r=Su(e,t,n);else{const i="function"==typeof t?ou(e,t,n.custom):t;r=Promise.all(vu(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function xu(e){let t=Au(e),n=_u(),r=!0;const i=t=>(n,r)=>{var i;const o=ou(e,r,"exit"===t?null==(i=e.presenceContext)?void 0:i.custom:void 0);if(o){const{transition:e,transitionEnd:t,...r}=o;n={...n,...r,...t}}return n};function o(o){const{props:a}=e,s=ku(e.parent)||{},l=[],u=new Set;let c={},d=1/0;for(let t=0;t<Cu;t++){const p=Tu[t],h=n[p],f=void 0!==a[p]?a[p]:s[p],m=Vs(f),g=p===o?h.isActive:null;!1===g&&(d=t);let y=f===s[p]&&f!==a[p]&&m;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),h.protectedKeys={...c},!h.isActive&&null===g||!f&&!h.prevProp||Fs(f)||"boolean"==typeof f)continue;const v=Pu(h.prevProp,f);let b=v||p===o&&h.isActive&&!y&&m||t>d&&m,S=!1;const w=Array.isArray(f)?f:[f];let E=w.reduce(i(p),{});!1===g&&(E={});const{prevResolvedValues:k={}}=h,T={...k,...E},C=t=>{b=!0,u.has(t)&&(S=!0,u.delete(t)),h.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in T){const t=E[e],n=k[e];if(c.hasOwnProperty(e))continue;let r=!1;r=au(t)&&au(n)?!wu(t,n):t!==n,r?null!=t?C(e):u.add(e):void 0!==t&&u.has(e)?C(e):h.protectedKeys[e]=!0}h.prevProp=f,h.prevResolvedValues=E,h.isActive&&(c={...c,...E}),r&&e.blockInitialAnimation&&(b=!1);const A=y&&v;b&&(!A||S)&&l.push(...w.map(t=>{const n={type:p};if("string"==typeof t&&r&&!A&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,i=ou(r,t);if(r.enteringChildren&&i){const{delayChildren:t}=i.transition||{};n.delay=bu(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(u.size){const t={};if("boolean"!=typeof a.initial){const n=ou(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}u.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=r??null}),l.push({animation:t})}let p=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(p=!1),r=!1,p?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null==(i=e.variantChildren)||i.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,r)}),n[t].isActive=r;const a=o(t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=_u(),r=!0}}}function Pu(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!wu(t,e)}function Iu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _u(){return{animate:Iu(!0),whileInView:Iu(),whileHover:Iu(),whileTap:Iu(),whileDrag:Iu(),whileFocus:Iu(),exit:Iu()}}class Ou{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Lu=0;const Mu={animation:{Feature:class extends Ou{constructor(e){super(e),e.animationState||(e.animationState=xu(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Fs(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends Ou{constructor(){super(...arguments),this.id=Lu++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function Du(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Nu(e){return{point:{x:e.pageX,y:e.pageY}}}function Ru(e,t,n,r){return Du(e,t,(e=>t=>ps(t)&&e(t,Nu(t)))(n),r)}function zu(e){return e.max-e.min}function Bu(e,t,n,r=.5){e.origin=r,e.originPoint=eo(t.min,t.max,e.origin),e.scale=zu(n)/zu(t),e.translate=eo(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Fu(e,t,n,r){Bu(e.x,t.x,n.x,r?r.originX:void 0),Bu(e.y,t.y,n.y,r?r.originY:void 0)}function Vu(e,t,n){e.min=n.min+t.min,e.max=e.min+zu(t)}function Uu(e,t,n){e.min=t.min-n.min,e.max=e.min+zu(t)}function ju(e,t,n){Uu(e.x,t.x,n.x),Uu(e.y,t.y,n.y)}function $u(e){return[e("x"),e("y")]}const qu=({current:e})=>e?e.ownerDocument.defaultView:null,Hu=(e,t)=>Math.abs(e-t);class Gu{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Yu(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Hu(e.x,t.x),r=Hu(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=hi;this.history.push({...r,timestamp:i});const{onStart:o,onMove:a}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Wu(t,this.transformPagePoint),di.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=Yu("pointercancel"===e.type?this.lastMoveEventInfo:Wu(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),r&&r(e,o)},!ps(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=r||window;const a=Wu(Nu(e),this.transformPagePoint),{point:s}=a,{timestamp:l}=hi;this.history=[{...s,timestamp:l}];const{onSessionStart:u}=t;u&&u(e,Yu(a,this.history)),this.removeListeners=Vr(Ru(this.contextWindow,"pointermove",this.handlePointerMove),Ru(this.contextWindow,"pointerup",this.handlePointerUp),Ru(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pi(this.updatePoint)}}function Wu(e,t){return t?{point:t(e.point)}:e}function Ku(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Yu({point:e},t){return{point:e,delta:Ku(e,Ju(t)),offset:Ku(e,Qu(t)),velocity:Xu(t,.1)}}function Qu(e){return e[0]}function Ju(e){return e[e.length-1]}function Xu(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Ju(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>$r(t)));)n--;if(!r)return{x:0,y:0};const o=qr(i.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Zu(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function ec(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const tc=.35;function nc(e,t,n){return{min:rc(e,t),max:rc(e,n)}}function rc(e,t){return"number"==typeof e?e:e[t]||0}const ic=new WeakMap;class oc{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new Gu(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Nu(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(o=n)||"y"===o?ss[o]?null:(ss[o]=!0,()=>{ss[o]=!1}):ss.x||ss.y?null:(ss.x=ss.y=!0,()=>{ss.x=ss.y=!1}),!this.openDragLock))return;var o;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$u(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Ri.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=zu(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&di.postRender(()=>i(e,t)),uu(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>$u(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:n,contextWindow:qu(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&di.postRender(()=>a(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!ac(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?eo(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?eo(n,e,r.max):Math.min(e,n)),e}(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,i=this.constraints;t&&wl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,{top:t,left:n,bottom:r,right:i}){return{x:Zu(e.x,n,i),y:Zu(e.y,t,r)}}(r.layoutBox,t),this.elastic=function(e=tc){return!1===e?e=0:!0===e&&(e=tc),{x:nc(e,"left","right"),y:nc(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$u(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!wl(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=Gl(e,n),{scroll:i}=t;return i&&($l(r.x,i.offset.x),$l(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:ec(e.x,t.x),y:ec(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=Ol(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},l=$u(a=>{if(!ac(a,t,this.currentDirection))return;let l=s&&s[a]||{};o&&(l={min:0,max:0});const u=r?200:1e6,c=r?40:1e7,d={type:"inertia",velocity:n?e[a]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,d)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return uu(this.visualElement,e),n.start(gu(e,n,0,t,this.visualElement,!1))}stopAnimation(){$u(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$u(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){$u(t=>{const{drag:n}=this.getProps();if(!ac(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[t];i.set(e[t]-eo(n,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!wl(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};$u(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=zu(e),i=zu(t);return i>r?n=Ur(t.min,t.max-r,e.min):r>i&&(n=Ur(e.min,e.max-i,t.min)),Lr(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),$u(t=>{if(!ac(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:o}=this.constraints[t];n.set(eo(i,o,r[t]))})}addListeners(){if(!this.visualElement.current)return;ic.set(this.visualElement,this);const e=Ru(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();wl(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),di.read(t);const i=Du(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&($u(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=tc,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ac(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const sc=e=>(t,n)=>{e&&di.postRender(()=>e(t,n))};const lc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function uc(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const cc={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!zi.test(e))return e;e=parseFloat(e)}return`${uc(e,t.target.x)}% ${uc(e,t.target.y)}%`}},dc={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Ji.parse(e);if(i.length>5)return r;const o=Ji.createTransformer(e),a="number"!=typeof i[0]?1:0,s=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=s,i[1+a]/=l;const u=eo(s,l,.5);return"number"==typeof i[2+a]&&(i[2+a]/=u),"number"==typeof i[3+a]&&(i[3+a]/=u),o(i)}};let pc=!1;class hc extends wr.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)Ws[t]=e[t],bi(t)&&(Ws[t].isCSSVariable=!0)}(mc),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),pc&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),lc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:o}=n;return o?(o.isPresent=i,pc=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||di.postRender(()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),as.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;pc=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function fc(e){const[t,n]=xs(),r=wr.useContext(Cr);return Tr.jsx(hc,{...e,layoutGroup:r,switchLayoutGroup:wr.useContext(Cl),isPresent:t,safeToRemove:n})}const mc={borderRadius:{...cc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cc,borderTopRightRadius:cc,borderBottomLeftRadius:cc,borderBottomRightRadius:cc,boxShadow:dc};const gc=(e,t)=>e.depth-t.depth;class yc{constructor(){this.children=[],this.isDirty=!1}add(e){_r(this.children,e),this.isDirty=!0}remove(e){Or(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gc),this.isDirty=!1,this.children.forEach(e)}}const vc=["TopLeft","TopRight","BottomLeft","BottomRight"],bc=vc.length,Sc=e=>"string"==typeof e?parseFloat(e):e,wc=e=>"number"==typeof e||zi.test(e);function Ec(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const kc=Cc(0,.5,ti),Tc=Cc(.5,.95,Br);function Cc(e,t,n){return r=>r<e?0:r>t?1:n(Ur(e,t,r))}function Ac(e,t){e.min=t.min,e.max=t.max}function xc(e,t){Ac(e.x,t.x),Ac(e.y,t.y)}function Pc(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ic(e,t,n,r,i){return e=zl(e-=t,1/n,r),void 0!==i&&(e=zl(e,1/i,r)),e}function _c(e,t,[n,r,i],o,a){!function(e,t=0,n=1,r=.5,i,o=e,a=e){Ri.test(t)&&(t=parseFloat(t),t=eo(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let s=eo(o.min,o.max,r);e===o&&(s-=t),e.min=Ic(e.min,t,n,s,i),e.max=Ic(e.max,t,n,s,i)}(e,t[n],t[r],t[i],t.scale,o,a)}const Oc=["x","scaleX","originX"],Lc=["y","scaleY","originY"];function Mc(e,t,n,r){_c(e.x,t,Oc,n?n.x:void 0,r?r.x:void 0),_c(e.y,t,Lc,n?n.y:void 0,r?r.y:void 0)}function Dc(e){return 0===e.translate&&1===e.scale}function Nc(e){return Dc(e.x)&&Dc(e.y)}function Rc(e,t){return e.min===t.min&&e.max===t.max}function zc(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Bc(e,t){return zc(e.x,t.x)&&zc(e.y,t.y)}function Fc(e){return zu(e.x)/zu(e.y)}function Vc(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Uc{constructor(){this.members=[]}add(e){_r(this.members,e),e.scheduleRender()}remove(e){if(Or(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const jc=["","X","Y","Z"];let $c=0;function qc(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Hc(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=cu(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",di,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Hc(r)}function Gc({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=$c++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Yc),this.nodes.forEach(nd),this.nodes.forEach(rd),this.nodes.forEach(Qc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new yc)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new jr),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=bs(t)&&!(bs(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:r,layout:i,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),e){let n,r=0;const i=()=>this.root.updateBlockedByResize=!1;di.read(()=>{r=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=yi.now(),r=({timestamp:i})=>{const o=i-n;o>=t&&(pi(r),e(o-t))};return di.setup(r,!0),()=>pi(r)}(i,250),lc.hasAnimatedSinceResize&&(lc.hasAnimatedSinceResize=!1,this.nodes.forEach(td)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&o&&(r||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||ud,{onLayoutAnimationStart:a,onLayoutAnimationComplete:s}=o.getProps(),l=!this.targetLayout||!Bc(this.targetLayout,r),u=!t&&n;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...Fa(i,"layout"),onPlay:a,onComplete:s};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,u)}else t||td(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(id),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Hc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Xc);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(Zc);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ed),this.nodes.forEach(Wc),this.nodes.forEach(Kc)):this.nodes.forEach(Zc),this.clearAllSnapshots();const e=yi.now();hi.delta=Lr(0,1e3/60,e-hi.timestamp),hi.timestamp=e,hi.isProcessing=!0,fi.update.process(hi),fi.preRender.process(hi),fi.render.process(hi),hi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,as.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Jc),this.sharedNodes.forEach(od)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,di.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){di.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||zu(this.snapshot.measuredBox.x)||zu(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Nc(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,o=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||Dl(this.latestValues)||o)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),pd((r=n).x),pd(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(fd))){const{scroll:e}=this.root;e&&($l(n.x,e.offset.x),$l(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(xc(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:i,options:o}=t;t!==this.root&&i&&o.layoutScroll&&(i.wasRoot&&xc(n,e),$l(n.x,i.offset.x),$l(n.y,i.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};xc(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Hl(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Dl(e.latestValues)&&Hl(n,e.latestValues)}return Dl(this.latestValues)&&Hl(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};xc(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Dl(e.latestValues))continue;Ml(e.latestValues)&&e.updateSnapshot();const r=Wl();xc(r,e.measurePageBox()),Mc(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Dl(this.latestValues)&&Mc(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:o}=this.options;if(this.layout&&(i||o)){if(this.resolvedRelativeTargetAt=hi.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ju(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),xc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var a,s,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,s=this.relativeTarget,l=this.relativeParent.target,Vu(a.x,s.x,l.x),Vu(a.y,s.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):xc(this.target,this.layout.layoutBox),Vl(this.target,this.targetDelta)):xc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ju(this.relativeTargetOrigin,this.target,e.target),xc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!Ml(this.parent.latestValues)&&!Nl(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===hi.timestamp&&(r=!1),r)return;const{layout:i,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!o)return;xc(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,s=this.treeScale.y;!function(e,t,n,r=!1){const i=n.length;if(!i)return;let o,a;t.x=t.y=1;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:i}=o.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Hl(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Vl(e,a)),r&&Dl(o.latestValues)&&Hl(e,o.latestValues))}t.x<jl&&t.x>Ul&&(t.x=1),t.y<jl&&t.y>Ul&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Pc(this.prevProjectionDelta.x,this.projectionDelta.x),Pc(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Fu(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===s&&Vc(this.projectionDelta.x,this.prevProjectionDelta.x)&&Vc(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,c=Boolean(s&&!u&&!0===this.options.crossfade&&!this.path.some(ld));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,p,h,f,m,g;ad(o.x,e.x,n),ad(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ju(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h=this.relativeTarget,f=this.relativeTargetOrigin,m=a,g=n,sd(h.x,f.x,m.x,g),sd(h.y,f.y,m.y,g),d&&(l=this.relativeTarget,p=d,Rc(l.x,p.x)&&Rc(l.y,p.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),xc(d,this.relativeTarget)),s&&(this.animationValues=i,function(e,t,n,r,i,o){i?(e.opacity=eo(0,n.opacity??1,kc(r)),e.opacityExit=eo(t.opacity??1,0,Tc(r))):o&&(e.opacity=eo(t.opacity??1,n.opacity??1,r));for(let a=0;a<bc;a++){const i=`border${vc[a]}Radius`;let o=Ec(t,i),s=Ec(n,i);void 0===o&&void 0===s||(o||(o=0),s||(s=0),0===o||0===s||wc(o)===wc(s)?(e[i]=Math.max(eo(Sc(o),Sc(s),r),0),(Ri.test(s)||Ri.test(o))&&(e[i]+="%")):e[i]=s)}(t.rotate||n.rotate)&&(e.rotate=eo(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n,r;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(r=null==(n=this.resumingFrom)?void 0:n.currentAnimation)||r.stop(),this.pendingAnimation&&(pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=di.update(()=>{lc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=os(0)),this.currentAnimation=function(e,t,n){const r=Ss(e)?e:os(e);return r.start(gu("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&hd(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=zu(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=zu(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}xc(t,n),Hl(t,i),Fu(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Uc);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&qc("z",e,r,this.animationValues);for(let i=0;i<jc.length;i++)qc(`rotate${jc[i]}`,e,r,this.animationValues),qc(`skew${jc[i]}`,e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=hl(null==t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=hl(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Dl(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let o=function(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y,a=(null==n?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:o,skewX:a,skewY:s}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),o&&(r+=`rotateY(${o}deg) `),a&&(r+=`skewX(${a}deg) `),s&&(r+=`skewY(${s}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return 1===s&&1===l||(r+=`scale(${s}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);n&&(o=n(i,o)),e.transform=o;const{x:a,y:s}=this.projectionDelta;e.transformOrigin=`${100*a.origin}% ${100*s.origin}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const l in Ws){if(void 0===i[l])continue;const{correct:t,applyTo:n,isCSSVariable:a}=Ws[l],s="none"===o?i[l]:t(i[l],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=s}else a?this.options.visualElement.renderState.vars[l]=s:e[l]=s}this.options.layoutId&&(e.pointerEvents=r===this?hl(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(Xc),this.root.sharedNodes.clear()}}}function Wc(e){e.updateLayout()}function Kc(e){var t;const n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;"size"===i?$u(e=>{const r=o?n.measuredBox[e]:n.layoutBox[e],i=zu(r);r.min=t[e].min,r.max=r.min+i}):hd(i,n.layoutBox,t)&&$u(r=>{const i=o?n.measuredBox[r]:n.layoutBox[r],a=zu(t[r]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Fu(a,t,n.layoutBox);const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o?Fu(s,e.applyTransform(r,!0),n.measuredBox):Fu(s,t,n.layoutBox);const l=!Nc(a);let u=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:o}=r;if(i&&o){const a={x:{min:0,max:0},y:{min:0,max:0}};ju(a,n.layoutBox,i.layoutBox);const s={x:{min:0,max:0},y:{min:0,max:0}};ju(s,t,o.layoutBox),Bc(a,s)||(u=!0),r.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:s,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Yc(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Qc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Jc(e){e.clearSnapshot()}function Xc(e){e.clearMeasurements()}function Zc(e){e.isLayoutDirty=!1}function ed(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function td(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function nd(e){e.resolveTargetDelta()}function rd(e){e.calcProjection()}function id(e){e.resetSkewAndRotation()}function od(e){e.removeLeadSnapshot()}function ad(e,t,n){e.translate=eo(t.translate,0,n),e.scale=eo(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function sd(e,t,n,r){e.min=eo(t.min,n.min,r),e.max=eo(t.max,n.max,r)}function ld(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const ud={duration:.45,ease:[.4,0,.1,1]},cd=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),dd=cd("applewebkit/")&&!cd("chrome/")?Math.round:Br;function pd(e){e.min=dd(e.min),e.max=dd(e.max)}function hd(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Fc(t),i=Fc(n),o=.2,!(Math.abs(r-i)<=o));var r,i,o}function fd(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const md=Gc({attachResizeListener:(e,t)=>Du(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gd={current:void 0},yd=Gc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!gd.current){const e=new md({});e.mount(window),e.setOptions({layoutScroll:!0}),gd.current=e}return gd.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),vd={pan:{Feature:class extends Ou{constructor(){super(...arguments),this.removePointerDownListener=Br}onPointerDown(e){this.session=new Gu(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qu(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:sc(e),onStart:sc(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&di.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=Ru(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Ou{constructor(e){super(e),this.removeGroupControls=Br,this.removeListeners=Br,this.controls=new oc(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Br}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:yd,MeasureLayout:fc}};function bd(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&di.postRender(()=>i(t,Nu(t)))}function Sd(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&di.postRender(()=>i(t,Nu(t)))}const wd=new WeakMap,Ed=new WeakMap,kd=e=>{const t=wd.get(e.target);t&&t(e)},Td=e=>{e.forEach(kd)};function Cd(e,t,n){const r=function({root:e,...t}){const n=e||document;Ed.has(n)||Ed.set(n,{});const r=Ed.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(Td,{root:e,...t})),r[i]}(t);return wd.set(e,n),r.observe(e),()=>{wd.delete(e),r.unobserve(e)}}const Ad={some:0,all:1};const xd=_l({...Mu,...{inView:{Feature:class extends Ou{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:Ad[r]};return Cd(this.node.current,o,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=t?n:r;o&&o(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Ou{mount(){const{current:e}=this.node;e&&(this.unmount=vs(e,(e,t)=>(Sd(this.node,t,"Start"),(e,{success:t})=>Sd(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Ou{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vr(Du(this.node.current,"focus",()=>this.onFocus()),Du(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Ou{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,i,o]=us(e,n),a=e=>{if(!cs(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const o=e=>{cs(e)&&(r(e),n.removeEventListener("pointerleave",o))};n.addEventListener("pointerleave",o,i)};return r.forEach(e=>{e.addEventListener("pointerenter",a,i)}),o}(e,(e,t)=>(bd(this.node,t,"Start"),e=>bd(this.node,e,"End"))))}unmount(){}}}},...vd,...{layout:{ProjectionNode:yd,MeasureLayout:fc}}},iu);function Pd(e,t){return t.split(".").reduce((e,t)=>e?e[t]:void 0,e)}function Id(e,t,n){const r=t.split("."),i=r.pop();let o=e;for(const a of r)"object"==typeof o[a]&&null!==o[a]||(o[a]={}),o=o[a];o[i]=n}function _d(e,t=[],n=.7){if(!t||0===t.length)return{ask:!0,reason:"missing"};const r=[...t].sort((e,t)=>t.confidence-e.confidence)[0];return r.confidence>=n?{value:r.value,ask:!1}:{value:r.value,ask:!0,reason:"low_confidence"}}function Od(e){if("undefined"!=typeof window&&window.t)try{const t=window.t(e);if(t&&t!==e)return t}catch(r){}const t={de:{"ai.chatbot.title":"Zufahrtsschutz-Assistent","ai.chatbot.welcome":"Willkommen zum Zufahrtsschutz-Assistenten. Ich stelle nur Fragen, die noch fehlen oder unsicher sind. Bereit?","ai.chatbot.assetQuestion":"Welche Schutzgüter möchten Sie absichern?","ai.chatbot.inputPlaceholder":"Antwort eingeben...","ai.chatbot.sendButton":"Senden","ai.chatbot.stakeholderQuestion":"Wer sind die relevanten Stakeholder (Behörden, Veranstalter, Betreiber)?","ai.chatbot.restRiskQuestion":"Welches akzeptable Restrisiko gilt?","ai.chatbot.operationalQuestion":"Betriebsanforderungen (mehrfach wählbar)","ai.chatbot.threatQuestion":"Welche Art fahrzeuggestützter Bedrohung ist zu erwarten?","ai.chatbot.vehicleTypesQuestion":"Welche Fahrzeugtypen sind relevant?","ai.chatbot.accessCorridorsQuestion":"Wo könnten Fahrzeuge eindringen? (Karte markieren oder beschreiben)","ai.chatbot.speedQuestion":"Maximale Zufahrtsgeschwindigkeit (km/h)","ai.chatbot.angleQuestion":"Wahrscheinlicher Anprallwinkel (°)","ai.chatbot.groundQuestion":"Untergrund/Fundamente am Standort","ai.chatbot.riskMatrixQuestion":"Risikobewertung: Eintrittswahrscheinlichkeit & Schadensausmaß","ai.chatbot.completionMessage":"Danke! Alle erforderlichen Angaben sind vorhanden. Möchten Sie den normkonformen PDF-Plan erzeugen?","ai.chatbot.infoPrefix":"Hinweis: ","ai.chatbot.assetQuestionInfo":"Grundlage für Schutzziel & Schutzklasse (DIN SPEC 91414-2 / ISO 22343-2)","ai.chatbot.restRiskQuestionInfo":"Steuert Schutzklasse/Sicherungsgrad (DIN SPEC 91414-2)","ai.chatbot.speedQuestionInfo":"Pflichtparameter für FSB-Performance (ISO 22343-2/-1)","ai.chatbot.angleQuestionInfo":"Pflichtparameter für FSB-Performance (ISO 22343-2/-1)","ai.chatbot.riskMatrixQuestionInfo":"Erzeugt Sicherungsgrad & Schutzklasse (DIN SPEC 91414-2)","ai.chatbot.assetOptions":"Menschenmenge,Gebäude,KRITIS-Prozess,Veranstaltungsfläche","ai.chatbot.assetPlaceholder":"z. B. Menschenmenge, Bühne","ai.chatbot.stakeholderOptions":"Behörden,Veranstalter,Betreiber","ai.chatbot.restRiskOptions":"niedrig,mittel,hoch","ai.chatbot.operationalOptions":"Feuerwehrzufahrt,Fluchtwege,Verkehrssicherheit,Betriebssicherheit","ai.chatbot.threatOptions":"intentional,unbeabsichtigt,beides","ai.chatbot.vehicleOptions":"PKW,Transporter,LKW,Bus","ai.chatbot.groundOptions":"Asphalt,Beton,Pflaster,Erde,Unbekannt","ai.chatbot.riskMatrixOptions":"EW:niedrig|SA:gering,EW:niedrig|SA:mittel,EW:mittel|SA:mittel,EW:hoch|SA:schwer","ai.chatbot.accessCorridorsPlaceholder":"Polyline/Polygon auswählen oder kurz beschreiben"},en:{"ai.chatbot.title":"Access Protection Assistant","ai.chatbot.welcome":"Welcome to the Access Protection Assistant. I only ask questions that are still missing or uncertain. Ready?","ai.chatbot.assetQuestion":"Which protective assets would you like to secure?","ai.chatbot.inputPlaceholder":"Enter answer...","ai.chatbot.sendButton":"Send","ai.chatbot.stakeholderQuestion":"Who are the relevant stakeholders (authorities, organizers, operators)?","ai.chatbot.restRiskQuestion":"What acceptable residual risk applies?","ai.chatbot.operationalQuestion":"Operational requirements (multiple choice)","ai.chatbot.threatQuestion":"What type of vehicle-based threat is expected?","ai.chatbot.vehicleTypesQuestion":"Which vehicle types are relevant?","ai.chatbot.accessCorridorsQuestion":"Where could vehicles penetrate? (Mark on map or describe)","ai.chatbot.speedQuestion":"Maximum access speed (km/h)","ai.chatbot.angleQuestion":"Probable impact angle (°)","ai.chatbot.groundQuestion":"Ground/foundations at the site","ai.chatbot.riskMatrixQuestion":"Risk assessment: probability of occurrence & extent of damage","ai.chatbot.completionMessage":"Thank you! All required information is available. Would you like to generate the standards-compliant PDF plan?","ai.chatbot.infoPrefix":"Note: ","ai.chatbot.assetQuestionInfo":"Basis for Protection Goal & Protection Class (DIN SPEC 91414-2 / ISO 22343-2)","ai.chatbot.restRiskQuestionInfo":"Controls Protection Class/Security Level (DIN SPEC 91414-2)","ai.chatbot.speedQuestionInfo":"Required parameter for FSB performance (ISO 22343-2/-1)","ai.chatbot.angleQuestionInfo":"Required parameter for FSB performance (ISO 22343-2/-1)","ai.chatbot.riskMatrixQuestionInfo":"Generates Security Level & Protection Class (DIN SPEC 91414-2)","ai.chatbot.assetOptions":"Crowd,Building,CRITIS Process,Event Area","ai.chatbot.assetPlaceholder":"e.g. crowd, stage","ai.chatbot.stakeholderOptions":"Authorities,Organizers,Operators","ai.chatbot.restRiskOptions":"low,medium,high","ai.chatbot.operationalOptions":"Fire Brigade Access,Escape Routes,Traffic Safety,Operational Safety","ai.chatbot.threatOptions":"intentional,unintentional,both","ai.chatbot.vehicleOptions":"Car,Van,Truck,Bus","ai.chatbot.groundOptions":"Asphalt,Concrete,Pavement,Earth,Unknown","ai.chatbot.riskMatrixOptions":"PO:low|SD:medium,PO:medium|SD:medium,PO:high|SD:severe","ai.chatbot.accessCorridorsPlaceholder":"Select polyline/polygon or describe briefly"}};let n="de";if("undefined"!=typeof window)if(window.currentLanguage)n=window.currentLanguage;else if(window.translations&&window.translations.currentLanguage)n=window.translations.currentLanguage;else{const e=document.querySelector('.lang-btn[data-lang="de"].active');if(document.querySelector('.lang-btn[data-lang="en"].active'))n="en";else if(e)n="de";else{document.querySelectorAll(".lang-btn").forEach((e,t)=>{})}}return t[n]&&t[n][e]?t[n][e]:e}function Ld({open:e,onToggle:t}){return Tr.jsx("button",{"aria-label":Od("ai.chatbot.title"),onClick:t,className:"zb-btn",children:Tr.jsx("span",{className:"text-xl",children:e?"×":"💬"})})}function Md({role:e,text:t}){const n="bot"===e;return Tr.jsx("div",{className:"zb-msg "+(n?"zb-msg-left":"zb-msg-right"),children:Tr.jsx("div",{className:"zb-bubble "+(n?"zb-bot":"zb-user"),children:t})})}function Dd({onSend:e}){const[t,n]=wr.useState("");return Tr.jsxs("div",{className:"zb-input",children:[Tr.jsx("input",{className:"zb-input-field",placeholder:Od("ai.chatbot.inputPlaceholder"),value:t,onChange:e=>n(e.target.value),onKeyDown:r=>{"Enter"===r.key&&t.trim()&&(e(t.trim()),n(""))}}),Tr.jsx("button",{className:"zb-input-send",onClick:()=>{t.trim()&&(e(t.trim()),n(""))},children:Od("ai.chatbot.sendButton")})]})}function Nd({planningState:e,setPlanningState:t,getCandidatesFor:n}){const[r,i]=wr.useState({}),o=e??r,a=t??(e=>i(t=>e(t)));window.planningState=o;const[s,l]=wr.useState(!0),[u,c]=wr.useState([]),[d,p]=wr.useState(null),[h,f]=wr.useState(!1),m=wr.useRef(null);function g(e){c(t=>[...t,{role:"bot",text:e}])}function y(e,t){c(n=>[...n,{role:"user",text:e,field:t}])}wr.useEffect(()=>{0===u.length&&g(Od("ai.chatbot.welcome"))},[]),wr.useEffect(()=>{u.length>0&&(m.current&&(m.current.scrollTop=m.current.scrollHeight),setTimeout(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},50))},[u.length]);const v=e=>{const t=Pd(o,e.field);if(null!=t&&""!==t)return{ask:!1,value:t};const r=n?n(e.field):[];return e.resolver?e.resolver(r):_d(e.field,r,.7)};function b(){for(const e of[{id:"schutzgueter",label:Od("ai.chatbot.assetQuestion"),field:"schutzgüter",type:"chips",options:Od("ai.chatbot.assetOptions").split(","),placeholder:Od("ai.chatbot.assetPlaceholder"),info:Od("ai.chatbot.assetQuestionInfo")},{id:"stakeholder",label:Od("ai.chatbot.stakeholderQuestion"),field:"stakeholder",type:"chips",options:Od("ai.chatbot.stakeholderOptions").split(",")},{id:"restrisiko",label:Od("ai.chatbot.restRiskQuestion"),field:"restrisiko.klasse",type:"select",options:Od("ai.chatbot.restRiskOptions").split(","),info:Od("ai.chatbot.restRiskQuestionInfo")},{id:"betrieb",label:Od("ai.chatbot.operationalQuestion"),field:"betrieb",type:"multiselect",options:Od("ai.chatbot.operationalOptions").split(",")},{id:"bedrohung",label:Od("ai.chatbot.threatQuestion"),field:"risiko.bedrohung.art",type:"select",options:Od("ai.chatbot.threatOptions").split(",")},{id:"fahrzeugtypen",label:Od("ai.chatbot.vehicleTypesQuestion"),field:"risiko.bedrohung.fahrzeugtypen",type:"chips",options:Od("ai.chatbot.vehicleOptions").split(",")},{id:"anfahrkorridore",label:Od("ai.chatbot.accessCorridorsQuestion"),field:"risiko.site.anfahrkorridore",type:"geo",placeholder:Od("ai.chatbot.accessCorridorsPlaceholder")},{id:"geschwindigkeit",label:Od("ai.chatbot.speedQuestion"),field:"risiko.dynamik.v_kmh",type:"number",info:Od("ai.chatbot.speedQuestionInfo"),resolver:e=>_d(0,e,.7)},{id:"winkel",label:Od("ai.chatbot.angleQuestion"),field:"risiko.dynamik.winkel_grad",type:"number",info:Od("ai.chatbot.angleQuestionInfo"),resolver:e=>_d(0,e,.7)},{id:"untergrund",label:Od("ai.chatbot.groundQuestion"),field:"risiko.site.untergrund",type:"select",options:Od("ai.chatbot.groundOptions").split(",")},{id:"risikomatrix",label:Od("ai.chatbot.riskMatrixQuestion"),field:"risiko.matrix",type:"select",options:Od("ai.chatbot.riskMatrixOptions").split(","),info:Od("ai.chatbot.riskMatrixQuestionInfo")}]){if(e.dependsOn){if(e.dependsOn.find(e=>!Pd(o,e)))continue}const t=v(e);if(t.ask)return e;void 0!==t.value&&a(n=>{const r={...n??{}};return Id(r,e.field,t.value),r})}return null}return wr.useEffect(()=>{if(h)return;if(d)return;const e=b();if(e){p(e);const t=e.label,n=e.info?Od("ai.chatbot.infoPrefix")+e.info:"";g(t+(n?`\n\n${n}`:""))}else!h&&u.length>0&&(g(Od("ai.chatbot.completionMessage")),f(!0))},[o,s,d,h]),wr.useEffect(()=>{const e=()=>{c([]),p(null),f(!1),setTimeout(()=>{g(Od("ai.chatbot.welcome"))},100)};window.addEventListener("languageChanged",e);const t=setInterval(()=>{const t=window.currentLanguage;t&&t!==window.lastChatbotLanguage&&(window.lastChatbotLanguage=t,e());const n=document.querySelector('.lang-btn[data-lang="de"].active');let r=null;document.querySelector('.lang-btn[data-lang="en"].active')?r="en":n&&(r="de"),r&&r!==window.lastChatbotDetectedLanguage&&(window.lastChatbotDetectedLanguage=r,e())},100);return()=>{window.removeEventListener("languageChanged",e),clearInterval(t)}},[]),Tr.jsxs(Tr.Fragment,{children:[Tr.jsx(Ld,{open:s,onToggle:()=>l(e=>!e)}),Tr.jsx(_s,{children:s&&Tr.jsxs(xd.aside,{initial:{x:380,opacity:0},animate:{x:0,opacity:1},exit:{x:380,opacity:0},transition:{type:"spring",stiffness:240,damping:28},className:"zb-panel","aria-label":"Zufahrtsschutz-Assistent Panel",children:[Tr.jsx("header",{className:"zb-header",children:Tr.jsx("div",{className:"zb-title",children:Od("ai.chatbot.title")})}),Tr.jsx("div",{className:"zb-messages",ref:m,children:u.map((e,t)=>Tr.jsx(Md,{role:e.role,text:e.text},t))}),Tr.jsx(Dd,{onSend:function(e){if(!d)return/^(ja|start|bereit|ok|okay|los)/i.test(e)&&(f(!1),p(null)),void y(e);y(e,d.field);let t=e;if("number"===d.type){const n=parseFloat(e.replace(",","."));t=isNaN(n)?void 0:n}else"chips"===d.type||"multiselect"===d.type?t=e.split(",").map(e=>e.trim()).filter(Boolean):"select"===d.type?t=e.trim():"bool"===d.type&&(t=/^(ja|true|y|yes)$/i.test(e));a(e=>{const n={...e??{}};return void 0!==t&&Id(n,d.field,t),n}),p(null)}})]})})]})}var Rd,zd,Bd={exports:{}},Fd={},Vd={exports:{}},Ud={};function jd(){return zd||(zd=1,Vd.exports=(Rd||(Rd=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>i(l,n))u<o&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<o&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,p=3,h=!1,f=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var i=n(u);null!==i;){if(null===i.callback)r(u);else{if(!(i.startTime<=e))break;r(u),i.sortIndex=i.expirationTime,t(l,i)}i=n(u)}}function w(e){if(m=!1,S(e),!f)if(null!==n(l))f=!0,k||(k=!0,E());else{var t=n(u);null!==t&&O(w,t.startTime-e)}}var E,k=!1,T=-1,C=5,A=-1;function x(){return!(!g&&e.unstable_now()-A<C)}function P(){if(g=!1,k){var t=e.unstable_now();A=t;var i=!0;try{e:{f=!1,m&&(m=!1,v(T),T=-1),h=!0;var o=p;try{t:{for(S(t),d=n(l);null!==d&&!(d.expirationTime>t&&x());){var a=d.callback;if("function"==typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof s){d.callback=s,S(t),i=!0;break t}d===n(l)&&r(l),S(t)}else r(l);d=n(l)}if(null!==d)i=!0;else{var c=n(u);null!==c&&O(w,c.startTime-t),i=!1}}break e}finally{d=null,p=o,h=!1}i=void 0}}finally{i?E():k=!1}}}if("function"==typeof b)E=function(){b(P)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,_=I.port2;I.port1.onmessage=P,E=function(){_.postMessage(null)}}else E=function(){y(P,0)};function O(t,n){T=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_scheduleCallback=function(r,i,o){var a=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:c++,callback:i,priorityLevel:r,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(r.sortIndex=o,t(u,r),null===n(l)&&r===n(u)&&(m?(v(T),T=-1):m=!0,O(w,o-a))):(r.sortIndex=s,t(l,r),f||h||(f=!0,k||(k=!0,E()))),r},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}(Ud)),Ud)),Vd.exports}var $d,qd,Hd,Gd,Wd={exports:{}},Kd={};function Yd(){if($d)return Kd;$d=1;var e=vr();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return Kd.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Kd.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},Kd.flushSync=function(e){var t=o.T,n=r.p;try{if(o.T=null,r.p=2,e)return e()}finally{o.T=t,r.p=n,r.d.f()}},Kd.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},Kd.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},Kd.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,i=a(n,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:s}):"script"===n&&r.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},Kd.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=a(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},Kd.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,i=a(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},Kd.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=a(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},Kd.requestFormReset=function(e){r.d.r(e)},Kd.unstable_batchedUpdates=function(e,t){return e(t)},Kd.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},Kd.useFormStatus=function(){return o.H.useHostTransitionStatus()},Kd.version="19.1.1",Kd}function Qd(){if(Hd)return Fd;Hd=1;var e=jd(),t=vr(),n=(qd||(qd=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),Wd.exports=Yd()),Wd.exports);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function a(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function s(e){if(o(e)!==e)throw Error(r(188))}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=l(e)))return t;e=e.sibling}return null}var u=Object.assign,c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function x(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=A&&e[A]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case h:return"Fragment";case m:return"Profiler";case f:return"StrictMode";case S:return"Suspense";case w:return"SuspenseList";case T:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case v:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return I(e(t))}catch(n){}}return null}var _=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},D=[],N=-1;function R(e){return{current:e}}function z(e){0>N||(e.current=D[N],D[N]=null,N--)}function B(e,t){N++,D[N]=e.current,e.current=t}var F=R(null),V=R(null),U=R(null),j=R(null);function $(e,t){switch(B(U,t),B(V,e),B(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?nd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=rd(t=nd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(F),B(F,e)}function q(){z(F),z(V),z(U)}function H(e){null!==e.memoizedState&&B(j,e);var t=F.current,n=rd(t,e.type);t!==n&&(B(V,e),B(F,n))}function G(e){V.current===e&&(z(F),z(V)),j.current===e&&(z(j),Xd._currentValue=M)}var W=Object.prototype.hasOwnProperty,K=e.unstable_scheduleCallback,Y=e.unstable_cancelCallback,Q=e.unstable_shouldYield,J=e.unstable_requestPaint,X=e.unstable_now,Z=e.unstable_getCurrentPriorityLevel,ee=e.unstable_ImmediatePriority,te=e.unstable_UserBlockingPriority,ne=e.unstable_NormalPriority,re=e.unstable_LowPriority,ie=e.unstable_IdlePriority,oe=e.log,ae=e.unstable_setDisableYieldValue,se=null,le=null;function ue(e){if("function"==typeof oe&&ae(e),le&&"function"==typeof le.setStrictMode)try{le.setStrictMode(se,e)}catch(t){}}var ce=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(de(e)/pe|0)|0},de=Math.log,pe=Math.LN2;var he=256,fe=4194304;function me(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ge(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=me(r):0!==(a&=s)?i=me(a):n||0!==(n=s&~e)&&(i=me(n)):0!==(s=r&~o)?i=me(s):0!==a?i=me(a):n||0!==(n=r&~e)&&(i=me(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&4194048&n)?t:i}function ye(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ve(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function be(){var e=he;return!(4194048&(he<<=1))&&(he=256),e}function Se(){var e=fe;return!(62914560&(fe<<=1))&&(fe=4194304),e}function we(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ee(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ce(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ce(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ce(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function xe(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:hp(e.type)}var Pe=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Pe,_e="__reactProps$"+Pe,Oe="__reactContainer$"+Pe,Le="__reactEvents$"+Pe,Me="__reactListeners$"+Pe,De="__reactHandles$"+Pe,Ne="__reactResources$"+Pe,Re="__reactMarker$"+Pe;function ze(e){delete e[Ie],delete e[_e],delete e[Le],delete e[Me],delete e[De]}function Be(e){var t=e[Ie];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Ie]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yd(e);null!==e;){if(n=e[Ie])return n;e=yd(e)}return t}n=(e=n).parentNode}return null}function Fe(e){if(e=e[Ie]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ve(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Ue(e){var t=e[Ne];return t||(t=e[Ne]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function je(e){e[Re]=!0}var $e=new Set,qe={};function He(e,t){Ge(e,t),Ge(e+"Capture",t)}function Ge(e,t){for(qe[e]=t,e=0;e<t.length;e++)$e.add(t[e])}var We,Ke,Ye=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qe={},Je={};function Xe(e,t,n){if(i=t,W.call(Je,i)||!W.call(Qe,i)&&(Ye.test(i)?Je[i]=!0:(Qe[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function Ze(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function et(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function tt(e){if(void 0===We)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);We=t&&t[1]||"",Ke=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+We+e+Ke}var nt=!1;function rt(e,t){if(!e||nt)return"";nt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"==typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{nt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?tt(n):""}function it(e){switch(e.tag){case 26:case 27:case 5:return tt(e.type);case 16:return tt("Lazy");case 13:return tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return rt(e.type,!1);case 11:return rt(e.type.render,!1);case 1:return rt(e.type,!0);case 31:return tt("Activity");default:return""}}function ot(e){try{var t="";do{t+=it(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function at(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function st(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function lt(e){e._valueTracker||(e._valueTracker=function(e){var t=st(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ut(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=st(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ct(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var dt=/[\n"\\]/g;function pt(e){return e.replace(dt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function ht(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+at(t)):e.value!==""+at(t)&&(e.value=""+at(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?mt(e,a,at(t)):null!=n?mt(e,a,at(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+at(s):e.removeAttribute("name")}function ft(e,t,n,r,i,o,a,s){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+at(n):"",t=null!=t?""+at(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function mt(e,t,n){"number"===t&&ct(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function gt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+at(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function yt(e,t,n){null==t||((t=""+at(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+at(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function vt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(r(92));if(_(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=at(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function bt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&wt(e,o,i)}else for(var a in t)t.hasOwnProperty(a)&&wt(e,a,t[a])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Ct.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var xt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,_t=null;function Ot(e){var t=Fe(e);if(t&&(e=t.stateNode)){var n=e[_e]||null;e:switch(e=t.stateNode,t.type){case"input":if(ht(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[_e]||null;if(!o)throw Error(r(90));ht(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&ut(i)}break e;case"textarea":yt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&gt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Mt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==It||null!==_t)&&(Fu(),It&&(t=It,e=_t,_t=It=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var i=n[_e]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var Nt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Rt=!1;if(Nt)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(zp){Rt=!1}var Bt=null,Ft=null,Vt=null;function Ut(){if(Vt)return Vt;var e,t,n=Ft,r=n.length,i="value"in Bt?Bt.value:Bt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Vt=i.slice(e,1<t?1-t:void 0)}function jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function $t(){return!0}function qt(){return!1}function Ht(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?$t:qt,this.isPropagationStopped=qt,this}return u(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=$t)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=$t)},persist:function(){},isPersistent:$t}),t}var Gt,Wt,Kt,Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=Ht(Yt),Jt=u({},Yt,{view:0,detail:0}),Xt=Ht(Jt),Zt=u({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kt&&(Kt&&"mousemove"===e.type?(Gt=e.screenX-Kt.screenX,Wt=e.screenY-Kt.screenY):Wt=Gt=0,Kt=e),Gt)},movementY:function(e){return"movementY"in e?e.movementY:Wt}}),en=Ht(Zt),tn=Ht(u({},Zt,{dataTransfer:0})),nn=Ht(u({},Jt,{relatedTarget:0})),rn=Ht(u({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0})),on=Ht(u({},Yt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),an=Ht(u({},Yt,{data:0})),sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},un={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=un[e])&&!!t[e]}function dn(){return cn}var pn=Ht(u({},Jt,{key:function(e){if(e.key){var t=sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ln[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dn,charCode:function(e){return"keypress"===e.type?jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),hn=Ht(u({},Zt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),fn=Ht(u({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dn})),mn=Ht(u({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0})),gn=Ht(u({},Zt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),yn=Ht(u({},Yt,{newState:0,oldState:0})),vn=[9,13,27,32],bn=Nt&&"CompositionEvent"in window,Sn=null;Nt&&"documentMode"in document&&(Sn=document.documentMode);var wn=Nt&&"TextEvent"in window&&!Sn,En=Nt&&(!bn||Sn&&8<Sn&&11>=Sn),kn=String.fromCharCode(32),Tn=!1;function Cn(e,t){switch(e){case"keyup":return-1!==vn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var xn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function _n(e,t,n,r){It?_t?_t.push(r):_t=[r]:It=r,0<(t=jc(t,"onChange")).length&&(n=new Qt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Ln=null;function Mn(e){Dc(e,0)}function Dn(e){if(ut(Ve(e)))return e}function Nn(e,t){if("change"===e)return t}var Rn=!1;if(Nt){var zn;if(Nt){var Bn="oninput"in document;if(!Bn){var Fn=document.createElement("div");Fn.setAttribute("oninput","return;"),Bn="function"==typeof Fn.oninput}zn=Bn}else zn=!1;Rn=zn&&(!document.documentMode||9<document.documentMode)}function Vn(){On&&(On.detachEvent("onpropertychange",Un),Ln=On=null)}function Un(e){if("value"===e.propertyName&&Dn(Ln)){var t=[];_n(t,Ln,e,Pt(e)),Mt(Mn,t)}}function jn(e,t,n){"focusin"===e?(Vn(),Ln=n,(On=t).attachEvent("onpropertychange",Un)):"focusout"===e&&Vn()}function $n(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dn(Ln)}function qn(e,t){if("click"===e)return Dn(t)}function Hn(e,t){if("input"===e||"change"===e)return Dn(t)}var Gn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Wn(e,t){if(Gn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!W.call(t,i)||!Gn(e[i],t[i]))return!1}return!0}function Kn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yn(e,t){var n,r=Kn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kn(r)}}function Qn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Jn(e){for(var t=ct((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ct((e=t.contentWindow).document)}return t}function Xn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Zn=Nt&&"documentMode"in document&&11>=document.documentMode,er=null,tr=null,nr=null,rr=!1;function ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;rr||null==er||er!==ct(r)||("selectionStart"in(r=er)&&Xn(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nr&&Wn(nr,r)||(nr=r,0<(r=jc(tr,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=er)))}function or(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ar={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},sr={},lr={};function ur(e){if(sr[e])return sr[e];if(!ar[e])return e;var t,n=ar[e];for(t in n)if(n.hasOwnProperty(t)&&t in lr)return sr[e]=n[t];return e}Nt&&(lr=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);var cr=ur("animationend"),dr=ur("animationiteration"),pr=ur("animationstart"),hr=ur("transitionrun"),fr=ur("transitionstart"),mr=ur("transitioncancel"),gr=ur("transitionend"),yr=new Map,br="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){yr.set(e,t),He(t,[e])}br.push("scrollEnd");var wr=new WeakMap;function Er(e,t){if("object"==typeof e&&null!==e){var n=wr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ot(t)},wr.set(e,t),t)}return{value:e,source:t,stack:ot(t)}}var kr=[],Tr=0,Cr=0;function Ar(){for(var e=Tr,t=Cr=Tr=0;t<e;){var n=kr[t];kr[t++]=null;var r=kr[t];kr[t++]=null;var i=kr[t];kr[t++]=null;var o=kr[t];if(kr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&_r(n,i,o)}}function xr(e,t,n,r){kr[Tr++]=e,kr[Tr++]=t,kr[Tr++]=n,kr[Tr++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Pr(e,t,n,r){return xr(e,t,n,r),Or(e)}function Ir(e,t){return xr(e,null,null,t),Or(e)}function _r(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-ce(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Or(e){if(50<_u)throw _u=0,Ou=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(e,t,n,r){return new Mr(e,t,n,r)}function Nr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rr(e,t){var n=e.alternate;return null===n?((n=Dr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,i,o,a){var s=0;if(i=e,"function"==typeof e)Nr(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,F.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Dr(31,n,t,o)).elementType=T,e.lanes=a,e;case h:return Fr(n.children,o,a,t);case f:s=8,o|=24;break;case m:return(e=Dr(12,n,t,2|o)).elementType=m,e.lanes=a,e;case S:return(e=Dr(13,n,t,o)).elementType=S,e.lanes=a,e;case w:return(e=Dr(19,n,t,o)).elementType=w,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case g:case v:s=10;break e;case y:s=9;break e;case b:s=11;break e;case E:s=14;break e;case k:s=16,i=null;break e}s=29,n=Error(r(130,null===e?"null":typeof e,"")),i=null}return(t=Dr(s,n,t,o)).elementType=e,t.type=i,t.lanes=a,t}function Fr(e,t,n,r){return(e=Dr(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Dr(6,e,null,t)).lanes=n,e}function Ur(e,t,n){return(t=Dr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var jr=[],$r=0,qr=null,Hr=0,Gr=[],Wr=0,Kr=null,Yr=1,Qr="";function Jr(e,t){jr[$r++]=Hr,jr[$r++]=qr,qr=e,Hr=t}function Xr(e,t,n){Gr[Wr++]=Yr,Gr[Wr++]=Qr,Gr[Wr++]=Kr,Kr=e;var r=Yr;e=Qr;var i=32-ce(r)-1;r&=~(1<<i),n+=1;var o=32-ce(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yr=1<<32-ce(t)+i|n<<i|r,Qr=o+e}else Yr=1<<o|n<<i|r,Qr=e}function Zr(e){null!==e.return&&(Jr(e,1),Xr(e,1,0))}function ei(e){for(;e===qr;)qr=jr[--$r],jr[$r]=null,Hr=jr[--$r],jr[$r]=null;for(;e===Kr;)Kr=Gr[--Wr],Gr[Wr]=null,Qr=Gr[--Wr],Gr[Wr]=null,Yr=Gr[--Wr],Gr[Wr]=null}var ti=null,ni=null,ri=!1,ii=null,oi=!1,ai=Error(r(519));function si(e){throw hi(Er(Error(r(418,"")),e)),ai}function li(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ie]=e,t[_e]=r,n){case"dialog":Nc("cancel",t),Nc("close",t);break;case"iframe":case"object":case"embed":Nc("load",t);break;case"video":case"audio":for(n=0;n<Lc.length;n++)Nc(Lc[n],t);break;case"source":Nc("error",t);break;case"img":case"image":case"link":Nc("error",t),Nc("load",t);break;case"details":Nc("toggle",t);break;case"input":Nc("invalid",t),ft(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),lt(t);break;case"select":Nc("invalid",t);break;case"textarea":Nc("invalid",t),vt(t,r.value,r.defaultValue,r.children),lt(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Kc(t.textContent,n)?(null!=r.popover&&(Nc("beforetoggle",t),Nc("toggle",t)),null!=r.onScroll&&Nc("scroll",t),null!=r.onScrollEnd&&Nc("scrollend",t),null!=r.onClick&&(t.onclick=Yc),t=!0):t=!1,t||si(e)}function ui(e){for(ti=e.return;ti;)switch(ti.tag){case 5:case 13:return void(oi=!1);case 27:case 3:return void(oi=!0);default:ti=ti.return}}function ci(e){if(e!==ti)return!1;if(!ri)return ui(e),ri=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||id(e.type,e.memoizedProps)),t=!t),t&&ni&&si(e),ui(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ni=md(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ni=null}}else 27===n?(n=ni,dd(e.type)?(e=gd,gd=null,ni=e):ni=n):ni=ti?md(e.stateNode.nextSibling):null;return!0}function di(){ni=ti=null,ri=!1}function pi(){var e=ii;return null!==e&&(null===yu?yu=e:yu.push.apply(yu,e),ii=null),e}function hi(e){null===ii?ii=[e]:ii.push(e)}var fi=R(null),mi=null,gi=null;function yi(e,t,n){B(fi,t._currentValue),t._currentValue=n}function vi(e){e._currentValue=fi.current,z(fi)}function bi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t,n,i){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){var s=o.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=o;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),bi(a.return,n,e),i||(s=null);break e}a=l.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(r(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),bi(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function wi(e,t,n,i){e=null;for(var o=t,a=!1;null!==o;){if(!a)if(524288&o.flags)a=!0;else if(262144&o.flags)break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(r(387));if(null!==(s=s.memoizedProps)){var l=o.type;Gn(o.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(o===j.current){if(null===(s=o.alternate))throw Error(r(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Xd):e=[Xd])}o=o.return}null!==e&&Si(t,e,n,i),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ki(e){mi=e,gi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ti(e){return Ai(mi,e)}function Ci(e,t){return null===mi&&ki(e),Ai(e,t)}function Ai(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===gi){if(null===e)throw Error(r(308));gi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else gi=gi.next=t;return n}var xi="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pi=e.unstable_scheduleCallback,Ii=e.unstable_NormalPriority,_i={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oi(){return{controller:new xi,data:new Map,refCount:0}}function Li(e){e.refCount--,0===e.refCount&&Pi(Ii,function(){e.controller.abort()})}var Mi=null,Di=0,Ni=0,Ri=null;function zi(){if(0===--Di&&null!==Mi){null!==Ri&&(Ri.status="fulfilled");var e=Mi;Mi=null,Ni=0,Ri=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bi=O.S;O.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Mi){var n=Mi=[];Di=0,Ni=xc(),Ri={status:"pending",value:void 0,then:function(e){n.push(e)}}}Di++,t.then(zi,zi)}(0,t),null!==Bi&&Bi(e,t)};var Fi=R(null);function Vi(){var e=Fi.current;return null!==e?e:tu.pooledCache}function Ui(e,t){B(Fi,null===t?Fi.current:t.pool)}function ji(){var e=Vi();return null===e?null:{parent:_i._currentValue,pool:e}}var $i=Error(r(460)),qi=Error(r(474)),Hi=Error(r(542)),Gi={then:function(){}};function Wi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ki(){}function Yi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ki,Ki),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw Xi(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ki,Ki);else{if(null!==(e=tu)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw Xi(e=t.reason),e}throw Qi=t,$i}}var Qi=null;function Ji(){if(null===Qi)throw Error(r(459));var e=Qi;return Qi=null,e}function Xi(e){if(e===$i||e===Hi)throw Error(r(483))}var Zi=!1;function eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function to(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function no(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ro(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&eu){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Or(e),_r(e,null,n),t}return xr(e,r,t,n),Or(e)}function io(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function oo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ao=!1;function so(){if(ao){if(null!==Ri)throw Ri}}function lo(e,t,n,r){ao=!1;var i=e.updateQueue;Zi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==o){var p=i.baseState;for(a=0,d=c=l=null,s=o;;){var h=-536870913&s.lane,f=h!==s.lane;if(f?(ru&h)===h:(r&h)===h){0!==h&&h===Ni&&(ao=!0),null!==d&&(d=d.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;h=t;var y=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){p=m.call(y,p,h);break e}p=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=g.payload)?m.call(y,p,h):m))break e;p=u({},p,h);break e;case 2:Zi=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=f,l=p):d=d.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===d&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null===o&&(i.shared.lanes=0),du|=a,e.lanes=a,e.memoizedState=p}}function uo(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function co(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)uo(n[e],t)}var po=R(null),ho=R(0);function fo(e,t){B(ho,e=uu),B(po,t),uu=e|t.baseLanes}function mo(){B(ho,uu),B(po,po.current)}function go(){uu=ho.current,z(po),z(ho)}var yo=0,vo=null,bo=null,So=null,wo=!1,Eo=!1,ko=!1,To=0,Co=0,Ao=null,xo=0;function Po(){throw Error(r(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gn(e[n],t[n]))return!1;return!0}function _o(e,t,n,r,i,o){return yo=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?qa:Ha,ko=!1,o=n(r,i),ko=!1,Eo&&(o=Lo(t,n,r,i)),Oo(e),o}function Oo(e){O.H=$a;var t=null!==bo&&null!==bo.next;if(yo=0,So=bo=vo=null,wo=!1,Co=0,Ao=null,t)throw Error(r(300));null===e||Cs||null!==(e=e.dependencies)&&Ei(e)&&(Cs=!0)}function Lo(e,t,n,i){vo=e;var o=0;do{if(Eo&&(Ao=null),Co=0,Eo=!1,25<=o)throw Error(r(301));if(o+=1,So=bo=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}O.H=Ga,a=t(n,i)}while(Eo);return a}function Mo(){var e=O.H,t=e.useState()[0];return t="function"==typeof t.then?Fo(t):t,e=e.useState()[0],(null!==bo?bo.memoizedState:null)!==e&&(vo.flags|=1024),t}function Do(){var e=0!==To;return To=0,e}function No(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ro(e){if(wo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}wo=!1}yo=0,So=bo=vo=null,Eo=!1,Co=To=0,Ao=null}function zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===So?vo.memoizedState=So=e:So=So.next=e,So}function Bo(){if(null===bo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=bo.next;var t=null===So?vo.memoizedState:So.next;if(null!==t)So=t,bo=e;else{if(null===e){if(null===vo.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(bo=e).memoizedState,baseState:bo.baseState,baseQueue:bo.baseQueue,queue:bo.queue,next:null},null===So?vo.memoizedState=So=e:So=So.next=e}return So}function Fo(e){var t=Co;return Co+=1,null===Ao&&(Ao=[]),e=Yi(Ao,e,t),t=vo,null===(null===So?t.memoizedState:So.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?qa:Ha),e}function Vo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Fo(e);if(e.$$typeof===v)return Ti(e)}throw Error(r(438,String(e)))}function Uo(e){var t=null,n=vo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=vo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},vo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function jo(e,t){return"function"==typeof t?t(e):t}function $o(e){return qo(Bo(),bo,e)}function qo(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var o=e.baseQueue,a=i.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}t.baseQueue=o=a,i.pending=null}if(a=e.baseState,null===o)e.memoizedState=a;else{var l=s=null,u=null,c=t=o.next,d=!1;do{var p=-536870913&c.lane;if(p!==c.lane?(ru&p)===p:(yo&p)===p){var h=c.revertLane;if(0===h)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===Ni&&(d=!0);else{if((yo&h)===h){c=c.next,h===Ni&&(d=!0);continue}p={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,s=a):u=u.next=p,vo.lanes|=h,du|=h}p=c.action,ko&&n(a,p),a=c.hasEagerState?c.eagerState:n(a,p)}else h={lane:p,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=a):u=u.next=h,vo.lanes|=p,du|=p;c=c.next}while(null!==c&&c!==t);if(null===u?s=a:u.next=l,!Gn(a,e.memoizedState)&&(Cs=!0,d&&null!==(n=Ri)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=u,i.lastRenderedState=a}return null===o&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ho(e){var t=Bo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);Gn(a,t.memoizedState)||(Cs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Go(e,t,n){var i=vo,o=Bo(),a=ri;if(a){if(void 0===n)throw Error(r(407));n=n()}else n=t();var s=!Gn((bo||o).memoizedState,n);if(s&&(o.memoizedState=n,Cs=!0),o=o.queue,ma(2048,8,Yo.bind(null,i,o,e),[e]),o.getSnapshot!==t||s||null!==So&&1&So.memoizedState.tag){if(i.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Ko.bind(null,i,o,n,t),null),null===tu)throw Error(r(349));a||124&yo||Wo(i,t,n)}return n}function Wo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ko(e,t,n,r){t.value=n,t.getSnapshot=r,Qo(t)&&Jo(e)}function Yo(e,t,n){return n(function(){Qo(t)&&Jo(e)})}function Qo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gn(e,n)}catch(r){return!0}}function Jo(e){var t=Ir(e,2);null!==t&&Du(t,e,2)}function Xo(e){var t=zo();if("function"==typeof e){var n=e;if(e=n(),ko){ue(!0);try{n()}finally{ue(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:e},t}function Zo(e,t,n,r){return e.baseState=n,qo(e,bo,"function"==typeof r?r:jo)}function ea(e,t,n,i,o){if(Va(e))throw Error(r(485));if(null!==(e=t.action)){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==O.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,ta(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ta(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=O.T,a={};O.T=a;try{var s=n(i,r),l=O.S;null!==l&&l(a,s),na(e,t,s)}catch(u){ia(e,t,u)}finally{O.T=o}}else try{na(e,t,o=n(i,r))}catch(c){ia(e,t,c)}}function na(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){ra(e,t,n)},function(n){return ia(e,t,n)}):ra(e,t,n)}function ra(e,t,n){t.status="fulfilled",t.value=n,oa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ta(e,n)))}function ia(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oa(t),t=t.next}while(t!==r)}e.action=null}function oa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function aa(e,t){return t}function sa(e,t){if(ri){var n=tu.formState;if(null!==n){e:{var r=vo;if(ri){if(ni){t:{for(var i=ni,o=oi;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=md(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ni=md(i.nextSibling),r="F!"===i.data;break e}}si(r)}r=!1}r&&(t=n[0])}}return(n=zo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:t},n.queue=r,n=za.bind(null,vo,r),r.dispatch=n,r=Xo(!1),o=Fa.bind(null,vo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=zo()).queue=i,n=ea.bind(null,vo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function la(e){return ua(Bo(),bo,e)}function ua(e,t,n){if(t=qo(e,t,aa)[0],e=$o(jo)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Fo(t)}catch(a){if(a===$i)throw Hi;throw a}else r=t;var i=(t=Bo()).queue,o=i.dispatch;return n!==t.memoizedState&&(vo.flags|=2048,pa(9,{destroy:void 0,resource:void 0},ca.bind(null,i,n),null)),[r,o,e]}function ca(e,t){e.action=t}function da(e){var t=Bo(),n=bo;if(null!==n)return ua(t,n,e);Bo(),t=t.memoizedState;var r=(n=Bo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=vo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},vo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ha(){return Bo().memoizedState}function fa(e,t,n,r){var i=zo();r=void 0===r?null:r,vo.flags|=e,i.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function ma(e,t,n,r){var i=Bo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==bo&&null!==r&&Io(r,bo.memoizedState.deps)?i.memoizedState=pa(t,o,n,r):(vo.flags|=e,i.memoizedState=pa(1|t,o,n,r))}function ga(e,t){fa(8390656,8,e,t)}function ya(e,t){ma(2048,8,e,t)}function va(e,t){return ma(4,2,e,t)}function ba(e,t){return ma(4,4,e,t)}function Sa(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function wa(e,t,n){n=null!=n?n.concat([e]):null,ma(4,4,Sa.bind(null,t,e),n)}function Ea(){}function ka(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ta(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Io(t,r[1]))return r[0];if(r=e(),ko){ue(!0);try{e()}finally{ue(!1)}}return n.memoizedState=[r,t],r}function Ca(e,t,n){return void 0===n||1073741824&yo?e.memoizedState=t:(e.memoizedState=n,e=Mu(),vo.lanes|=e,du|=e,n)}function Aa(e,t,n,r){return Gn(n,t)?n:null!==po.current?(e=Ca(e,n,r),Gn(e,t)||(Cs=!0),e):42&yo?(e=Mu(),vo.lanes|=e,du|=e,t):(Cs=!0,e.memoizedState=n)}function xa(e,t,n,r,i){var o=L.p;L.p=0!==o&&8>o?o:8;var a,s,l,u=O.T,c={};O.T=c,Fa(e,!1,t,n);try{var d=i(),p=O.S;if(null!==p&&p(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)Ba(e,t,(a=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l),Lu());else Ba(e,t,r,Lu())}catch(h){Ba(e,t,{then:function(){},status:"rejected",reason:h},Lu())}finally{L.p=o,O.T=u}}function Pa(){}function Ia(e,t,n,i){if(5!==e.tag)throw Error(r(476));var o=_a(e).queue;xa(e,o,t,M,null===n?Pa:function(){return Oa(e),n(i)})}function _a(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Oa(e){Ba(e,_a(e).next.queue,{},Lu())}function La(){return Ti(Xd)}function Ma(){return Bo().memoizedState}function Da(){return Bo().memoizedState}function Na(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lu(),r=ro(t,e=no(n),n);return null!==r&&(Du(r,t,n),io(r,t,n)),t={cache:Oi()},void(e.payload=t)}t=t.return}}function Ra(e,t,n){var r=Lu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Va(e)?Ua(t,n):null!==(n=Pr(e,t,n,r))&&(Du(n,e,r),ja(n,t,r))}function za(e,t,n){Ba(e,t,n,Lu())}function Ba(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Va(e))Ua(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Gn(s,a))return xr(e,t,i,0),null===tu&&Ar(),!1}catch(l){}if(null!==(n=Pr(e,t,i,r)))return Du(n,e,r),ja(n,t,r),!0}return!1}function Fa(e,t,n,i){if(i={lane:2,revertLane:xc(),action:i,hasEagerState:!1,eagerState:null,next:null},Va(e)){if(t)throw Error(r(479))}else null!==(t=Pr(e,n,i,2))&&Du(t,e,2)}function Va(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function Ua(e,t){Eo=wo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ja(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var $a={readContext:Ti,use:Vo,useCallback:Po,useContext:Po,useEffect:Po,useImperativeHandle:Po,useLayoutEffect:Po,useInsertionEffect:Po,useMemo:Po,useReducer:Po,useRef:Po,useState:Po,useDebugValue:Po,useDeferredValue:Po,useTransition:Po,useSyncExternalStore:Po,useId:Po,useHostTransitionStatus:Po,useFormState:Po,useActionState:Po,useOptimistic:Po,useMemoCache:Po,useCacheRefresh:Po},qa={readContext:Ti,use:Vo,useCallback:function(e,t){return zo().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:ga,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,fa(4194308,4,Sa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fa(4194308,4,e,t)},useInsertionEffect:function(e,t){fa(4,2,e,t)},useMemo:function(e,t){var n=zo();t=void 0===t?null:t;var r=e();if(ko){ue(!0);try{e()}finally{ue(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zo();if(void 0!==n){var i=n(t);if(ko){ue(!0);try{n(t)}finally{ue(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Ra.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zo().memoizedState=e},useState:function(e){var t=(e=Xo(e)).queue,n=za.bind(null,vo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return Ca(zo(),e,t)},useTransition:function(){var e=Xo(!1);return e=xa.bind(null,vo,e.queue,!0,!1),zo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=vo,o=zo();if(ri){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===tu)throw Error(r(349));124&ru||Wo(i,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,ga(Yo.bind(null,i,a,e),[e]),i.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Ko.bind(null,i,a,n,t),null),n},useId:function(){var e=zo(),t=tu.identifierPrefix;if(ri){var n=Qr;t="«"+t+"R"+(n=(Yr&~(1<<32-ce(Yr)-1)).toString(32)+n),0<(n=To++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=xo++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:La,useFormState:sa,useActionState:sa,useOptimistic:function(e){var t=zo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Fa.bind(null,vo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Uo,useCacheRefresh:function(){return zo().memoizedState=Na.bind(null,vo)}},Ha={readContext:Ti,use:Vo,useCallback:ka,useContext:Ti,useEffect:ya,useImperativeHandle:wa,useInsertionEffect:va,useLayoutEffect:ba,useMemo:Ta,useReducer:$o,useRef:ha,useState:function(){return $o(jo)},useDebugValue:Ea,useDeferredValue:function(e,t){return Aa(Bo(),bo.memoizedState,e,t)},useTransition:function(){var e=$o(jo)[0],t=Bo().memoizedState;return["boolean"==typeof e?e:Fo(e),t]},useSyncExternalStore:Go,useId:Ma,useHostTransitionStatus:La,useFormState:la,useActionState:la,useOptimistic:function(e,t){return Zo(Bo(),0,e,t)},useMemoCache:Uo,useCacheRefresh:Da},Ga={readContext:Ti,use:Vo,useCallback:ka,useContext:Ti,useEffect:ya,useImperativeHandle:wa,useInsertionEffect:va,useLayoutEffect:ba,useMemo:Ta,useReducer:Ho,useRef:ha,useState:function(){return Ho(jo)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Bo();return null===bo?Ca(n,e,t):Aa(n,bo.memoizedState,e,t)},useTransition:function(){var e=Ho(jo)[0],t=Bo().memoizedState;return["boolean"==typeof e?e:Fo(e),t]},useSyncExternalStore:Go,useId:Ma,useHostTransitionStatus:La,useFormState:da,useActionState:da,useOptimistic:function(e,t){var n=Bo();return null!==bo?Zo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:Da},Wa=null,Ka=0;function Ya(e){var t=Ka;return Ka+=1,null===Wa&&(Wa=[]),Yi(Wa,e,t)}function Qa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ja(e,t){if(t.$$typeof===c)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function Za(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Rr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===h?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===k&&Xa(i)===t.type)?(Qa(t=o(t,n.props),n),t.return=e,t):(Qa(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ur(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Fr(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return Qa(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Ur(t,e.mode,n)).return=e,t;case k:return m(e,t=(0,t._init)(t._payload),n)}if(_(t)||x(t))return(t=Fr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return m(e,Ya(t),n);if(t.$$typeof===v)return m(e,Ci(e,t),n);Ja(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===i?u(e,t,n,r):null;case p:return n.key===i?c(e,t,n,r):null;case k:return g(e,t,n=(i=n._init)(n._payload),r)}if(_(n)||x(n))return null!==i?null:f(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,Ya(n),r);if(n.$$typeof===v)return g(e,t,Ci(e,n),r);Ja(e,n)}return null}function y(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(_(r)||x(r))return f(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return y(e,t,n,Ya(r),i);if(r.$$typeof===v)return y(e,t,n,Ci(t,r),i);Ja(t,r)}return null}function b(l,u,c,f){if("object"==typeof c&&null!==c&&c.type===h&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case d:e:{for(var S=c.key;null!==u;){if(u.key===S){if((S=c.type)===h){if(7===u.tag){n(l,u.sibling),(f=o(u,c.props.children)).return=l,l=f;break e}}else if(u.elementType===S||"object"==typeof S&&null!==S&&S.$$typeof===k&&Xa(S)===u.type){n(l,u.sibling),Qa(f=o(u,c.props),c),f.return=l,l=f;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===h?((f=Fr(c.props.children,l.mode,f,c.key)).return=l,l=f):(Qa(f=Br(c.type,c.key,c.props,null,l.mode,f),c),f.return=l,l=f)}return s(l);case p:e:{for(S=c.key;null!==u;){if(u.key===S){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(f=o(u,c.children||[])).return=l,l=f;break e}n(l,u);break}t(l,u),u=u.sibling}(f=Ur(c,l.mode,f)).return=l,l=f}return s(l);case k:return b(l,u,c=(S=c._init)(c._payload),f)}if(_(c))return function(r,o,s,l){for(var u=null,c=null,d=o,p=o=0,h=null;null!==d&&p<s.length;p++){d.index>p?(h=d,d=null):h=d.sibling;var f=g(r,d,s[p],l);if(null===f){null===d&&(d=h);break}e&&d&&null===f.alternate&&t(r,d),o=a(f,o,p),null===c?u=f:c.sibling=f,c=f,d=h}if(p===s.length)return n(r,d),ri&&Jr(r,p),u;if(null===d){for(;p<s.length;p++)null!==(d=m(r,s[p],l))&&(o=a(d,o,p),null===c?u=d:c.sibling=d,c=d);return ri&&Jr(r,p),u}for(d=i(d);p<s.length;p++)null!==(h=y(d,r,p,s[p],l))&&(e&&null!==h.alternate&&d.delete(null===h.key?p:h.key),o=a(h,o,p),null===c?u=h:c.sibling=h,c=h);return e&&d.forEach(function(e){return t(r,e)}),ri&&Jr(r,p),u}(l,u,c,f);if(x(c)){if("function"!=typeof(S=x(c)))throw Error(r(150));return function(o,s,l,u){if(null==l)throw Error(r(151));for(var c=null,d=null,p=s,h=s=0,f=null,v=l.next();null!==p&&!v.done;h++,v=l.next()){p.index>h?(f=p,p=null):f=p.sibling;var b=g(o,p,v.value,u);if(null===b){null===p&&(p=f);break}e&&p&&null===b.alternate&&t(o,p),s=a(b,s,h),null===d?c=b:d.sibling=b,d=b,p=f}if(v.done)return n(o,p),ri&&Jr(o,h),c;if(null===p){for(;!v.done;h++,v=l.next())null!==(v=m(o,v.value,u))&&(s=a(v,s,h),null===d?c=v:d.sibling=v,d=v);return ri&&Jr(o,h),c}for(p=i(p);!v.done;h++,v=l.next())null!==(v=y(p,o,h,v.value,u))&&(e&&null!==v.alternate&&p.delete(null===v.key?h:v.key),s=a(v,s,h),null===d?c=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(o,e)}),ri&&Jr(o,h),c}(l,u,c=S.call(c),f)}if("function"==typeof c.then)return b(l,u,Ya(c),f);if(c.$$typeof===v)return b(l,u,Ci(l,c),f);Ja(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(f=o(u,c)).return=l,l=f):(n(l,u),(f=Vr(c,l.mode,f)).return=l,l=f),s(l)):n(l,u)}return function(e,t,n,r){try{Ka=0;var i=b(e,t,n,r);return Wa=null,i}catch(a){if(a===$i||a===Hi)throw a;var o=Dr(29,a,null,e.mode);return o.lanes=r,o.return=e,o}}}var es=Za(!0),ts=Za(!1),ns=R(null),rs=null;function is(e){var t=e.alternate;B(ls,1&ls.current),B(ns,e),null===rs&&(null===t||null!==po.current||null!==t.memoizedState)&&(rs=e)}function os(e){if(22===e.tag){if(B(ls,ls.current),B(ns,e),null===rs){var t=e.alternate;null!==t&&null!==t.memoizedState&&(rs=e)}}else as()}function as(){B(ls,ls.current),B(ns,ns.current)}function ss(e){z(ns),rs===e&&(rs=null),z(ls)}var ls=R(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||fd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function cs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:u({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ds={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lu(),i=no(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=ro(e,i,r))&&(Du(t,e,r),io(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lu(),i=no(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=ro(e,i,r))&&(Du(t,e,r),io(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lu(),r=no(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ro(e,r,n))&&(Du(t,e,n),io(t,e,n))}};function ps(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Wn(n,r)||!Wn(i,o))}function hs(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ds.enqueueReplaceState(t,t.state,null)}function fs(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=u({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ms="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function gs(e){ms(e)}function ys(e){}function vs(e){ms(e)}function bs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ss(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ws(e,t,n){return(n=no(n)).tag=3,n.payload={element:null},n.callback=function(){bs(e,t)},n}function Es(e){return(e=no(e)).tag=3,e}function ks(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){Ss(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Ss(t,n,r),"function"!=typeof i&&(null===Eu?Eu=new Set([this]):Eu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ts=Error(r(461)),Cs=!1;function As(e,t,n,r){t.child=null===e?ts(t,null,n,r):es(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return ki(t),r=_o(e,t,n,a,o,i),s=Do(),null===e||Cs?(ri&&s&&Zr(t),t.flags|=1,As(e,t,r,i),t.child):(No(e,t,i),Ws(e,t,i))}function Ps(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Nr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Is(e,t,o,r,i))}if(o=e.child,!Ks(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Wn)(a,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Rr(o,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Wn(o,r)&&e.ref===t.ref){if(Cs=!1,t.pendingProps=r=o,!Ks(e,i))return t.lanes=e.lanes,Ws(e,t,i);131072&e.flags&&(Cs=!0)}}return Ms(e,t,n,r,i)}function _s(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Os(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Os(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ui(0,null!==o?o.cachePool:null),null!==o?fo(t,o):mo(),os(t)}else null!==o?(Ui(0,o.cachePool),fo(t,o),as(),t.memoizedState=null):(null!==e&&Ui(0,null),mo(),as());return As(e,t,i,n),t.child}function Os(e,t,n,r){var i=Vi();return i=null===i?null:{parent:_i._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Ui(0,null),mo(),os(t),null!==e&&wi(e,t,r,!0),null}function Ls(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ms(e,t,n,r,i){return ki(t),n=_o(e,t,n,r,void 0,i),r=Do(),null===e||Cs?(ri&&r&&Zr(t),t.flags|=1,As(e,t,n,i),t.child):(No(e,t,i),Ws(e,t,i))}function Ds(e,t,n,r,i,o){return ki(t),t.updateQueue=null,n=Lo(t,r,n,i),Oo(e),r=Do(),null===e||Cs?(ri&&r&&Zr(t),t.flags|=1,As(e,t,n,o),t.child):(No(e,t,o),Ws(e,t,o))}function Ns(e,t,n,r,i){if(ki(t),null===t.stateNode){var o=Lr,a=n.contextType;"object"==typeof a&&null!==a&&(o=Ti(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ds,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},eo(t),a=n.contextType,o.context="object"==typeof a&&null!==a?Ti(a):Lr,o.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(cs(t,n,a,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(a=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&ds.enqueueReplaceState(o,o.state,null),lo(t,r,o,i),so(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=fs(n,s);o.props=l;var u=o.context,c=n.contextType;a=Lr,"object"==typeof c&&null!==c&&(a=Ti(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s||u!==a)&&hs(t,o,r,a),Zi=!1;var p=t.memoizedState;o.state=p,lo(t,r,o,i),so(),u=t.memoizedState,s||p!==u||Zi?("function"==typeof d&&(cs(t,n,d,r),u=t.memoizedState),(l=Zi||ps(t,n,l,r,p,u,a))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=a,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,to(e,t),c=fs(n,a=t.memoizedProps),o.props=c,d=t.pendingProps,p=o.context,u=n.contextType,l=Lr,"object"==typeof u&&null!==u&&(l=Ti(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||p!==l)&&hs(t,o,r,l),Zi=!1,p=t.memoizedState,o.state=p,lo(t,r,o,i),so();var h=t.memoizedState;a!==d||p!==h||Zi||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"==typeof s&&(cs(t,n,s,r),h=t.memoizedState),(c=Zi||ps(t,n,c,r,p,h,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Ls(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=es(t,e.child,null,i),t.child=es(t,null,n,i)):As(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Ws(e,t,i),e}function Rs(e,t,n,r){return di(),t.flags|=256,As(e,t,n,r),t.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bs(e){return{baseLanes:e,cachePool:ji()}}function Fs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=fu),e}function Vs(e,t,n){var i,o=t.pendingProps,a=!1,s=!!(128&t.flags);if((i=s)||(i=(null===e||null!==e.memoizedState)&&!!(2&ls.current)),i&&(a=!0,t.flags&=-129),i=!!(32&t.flags),t.flags&=-33,null===e){if(ri){if(a?is(t):as(),ri){var l,u=ni;if(l=u){e:{for(l=u,u=oi;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=md(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Kr?{id:Yr,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},(l=Dr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ti=t,ni=null,l=!0):l=!1}l||si(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return fd(u)?t.lanes=32:t.lanes=536870912,null;ss(t)}return u=o.children,o=o.fallback,a?(as(),u=js({mode:"hidden",children:u},a=t.mode),o=Fr(o,a,n,null),u.return=t,o.return=t,u.sibling=o,t.child=u,(a=t.child).memoizedState=Bs(n),a.childLanes=Fs(e,i,n),t.memoizedState=zs,o):(is(t),Us(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(is(t),t.flags&=-257,t=$s(e,t,n)):null!==t.memoizedState?(as(),t.child=e.child,t.flags|=128,t=null):(as(),a=o.fallback,u=t.mode,o=js({mode:"visible",children:o.children},u),(a=Fr(a,u,n,null)).flags|=2,o.return=t,a.return=t,o.sibling=a,t.child=o,es(t,e.child,null,n),(o=t.child).memoizedState=Bs(n),o.childLanes=Fs(e,i,n),t.memoizedState=zs,t=a);else if(is(t),fd(u)){if(i=u.nextSibling&&u.nextSibling.dataset)var c=i.dgst;i=c,(o=Error(r(419))).stack="",o.digest=i,hi({value:o,source:null,stack:null}),t=$s(e,t,n)}else if(Cs||wi(e,t,n,!1),i=0!==(n&e.childLanes),Cs||i){if(null!==(i=tu)&&(0!==(o=0!==((o=42&(o=n&-n)?1:Ce(o))&(i.suspendedLanes|n))?0:o)&&o!==l.retryLane))throw l.retryLane=o,Ir(e,o),Du(i,e,o),Ts;"$?"===u.data||Hu(),t=$s(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ni=md(u.nextSibling),ti=t,ri=!0,ii=null,oi=!1,null!==e&&(Gr[Wr++]=Yr,Gr[Wr++]=Qr,Gr[Wr++]=Kr,Yr=e.id,Qr=e.overflow,Kr=t),(t=Us(t,o.children)).flags|=4096);return t}return a?(as(),a=o.fallback,u=t.mode,c=(l=e.child).sibling,(o=Rr(l,{mode:"hidden",children:o.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?a=Rr(c,a):(a=Fr(a,u,n,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,null===(u=e.child.memoizedState)?u=Bs(n):(null!==(l=u.cachePool)?(c=_i._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=ji(),u={baseLanes:u.baseLanes|n,cachePool:l}),a.memoizedState=u,a.childLanes=Fs(e,i,n),t.memoizedState=zs,o):(is(t),e=(n=e.child).sibling,(n=Rr(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Us(e,t){return(t=js({mode:"visible",children:t},e.mode)).return=e,e.child=t}function js(e,t){return(e=Dr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function $s(e,t,n){return es(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),bi(e.return,t,n)}function Hs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(As(e,t,r.children,n),2&(r=ls.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qs(e,n,t);else if(19===e.tag)qs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(B(ls,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Hs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Hs(t,!0,n,null,o);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),du|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(wi(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Rr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function Ys(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Cs=!0;else{if(!(Ks(e,n)||128&t.flags))return Cs=!1,function(e,t,n){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),yi(0,_i,e.memoizedState.cache),di();break;case 27:case 5:H(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:yi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(is(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Vs(e,t,n):(is(t),null!==(e=Ws(e,t,n))?e.sibling:null);is(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(wi(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),B(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,_s(e,t,n);case 24:yi(0,_i,e.memoizedState.cache)}return Ws(e,t,n)}(e,t,n);Cs=!!(131072&e.flags)}else Cs=!1,ri&&1048576&t.flags&&Xr(t,Hr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,"function"!=typeof i){if(null!=i){if((o=i.$$typeof)===b){t.tag=11,t=xs(null,t,i,e,n);break e}if(o===E){t.tag=14,t=Ps(null,t,i,e,n);break e}}throw t=I(i)||i,Error(r(306,t,""))}Nr(i)?(e=fs(i,e),t.tag=1,t=Ns(null,t,i,e,n)):(t.tag=0,t=Ms(null,t,i,e,n))}return t;case 0:return Ms(e,t,t.type,t.pendingProps,n);case 1:return Ns(e,t,i=t.type,o=fs(i,t.pendingProps),n);case 3:e:{if($(t,t.stateNode.containerInfo),null===e)throw Error(r(387));i=t.pendingProps;var a=t.memoizedState;o=a.element,to(e,t),lo(t,i,null,n);var s=t.memoizedState;if(i=s.cache,yi(0,_i,i),i!==a.cache&&Si(t,[_i],n,!0),so(),i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,i,n);break e}if(i!==o){hi(o=Er(Error(r(424)),t)),t=Rs(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ni=md(e.firstChild),ti=t,ri=!0,ii=null,oi=!0,n=ts(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(di(),i===o){t=Ws(e,t,n);break e}As(e,t,i,n)}t=t.child}return t;case 26:return Ls(e,t),null===e?(n=Ad(t.type,null,t.pendingProps,null))?t.memoizedState=n:ri||(n=t.type,e=t.pendingProps,(i=td(U.current).createElement(n))[Ie]=t,i[_e]=e,Xc(i,n,e),je(i),t.stateNode=i):t.memoizedState=Ad(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return H(t),null===e&&ri&&(i=t.stateNode=vd(t.type,t.pendingProps,U.current),ti=t,oi=!0,o=ni,dd(t.type)?(gd=o,ni=md(i.firstChild)):ni=o),As(e,t,t.pendingProps.children,n),Ls(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ri&&((o=i=ni)&&(null!==(i=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Re])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=md(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,oi))?(t.stateNode=i,ti=t,ni=md(i.firstChild),oi=!1,o=!0):o=!1),o||si(t)),H(t),o=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,i=a.children,id(o,a)?i=null:null!==s&&id(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=_o(e,t,Mo,null,null,n),Xd._currentValue=o),Ls(e,t),As(e,t,i,n),t.child;case 6:return null===e&&ri&&((e=n=ni)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=md(e.nextSibling)))return null}return e}(n,t.pendingProps,oi))?(t.stateNode=n,ti=t,ni=null,e=!0):e=!1),e||si(t)),null;case 13:return Vs(e,t,n);case 4:return $(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=es(t,null,i,n):As(e,t,i,n),t.child;case 11:return xs(e,t,t.type,t.pendingProps,n);case 7:return As(e,t,t.pendingProps,n),t.child;case 8:case 12:return As(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,yi(0,t.type,i.value),As(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,ki(t),i=i(o=Ti(o)),t.flags|=1,As(e,t,i,n),t.child;case 14:return Ps(e,t,t.type,t.pendingProps,n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 19:return Gs(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=js(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Rr(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return _s(e,t,n);case 24:return ki(t),i=Ti(_i),null===e?(null===(o=Vi())&&(o=tu,a=Oi(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:i,cache:o},eo(t),yi(0,_i,o)):(0!==(e.lanes&n)&&(to(e,t),lo(t,null,null,n),so()),o=e.memoizedState,a=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),yi(0,_i,i)):(i=a.cache,yi(0,_i,i),i!==o.cache&&Si(t,[_i],n,!0))),As(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Qs(e){e.flags|=4}function Js(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Vd(t)){if(null!==(t=ns.current)&&((4194048&ru)===ru?null!==rs:(62914560&ru)!==ru&&!(536870912&ru)||t!==rs))throw Qi=Gi,qi;e.flags|=8192}}function Xs(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,mu|=t)}function Zs(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function el(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tl(e,t,n){var i=t.pendingProps;switch(ei(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return el(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),vi(_i),q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ci(t)?Qs(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,pi())),el(t),null;case 26:return n=t.memoizedState,null===e?(Qs(t),null!==n?(el(t),Js(t,n)):(el(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qs(t),el(t),Js(t,n)):(el(t),t.flags&=-16777217):(e.memoizedProps!==i&&Qs(t),el(t),t.flags&=-16777217),null;case 27:G(t),n=U.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Qs(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return el(t),null}e=F.current,ci(t)?li(t):(e=vd(o,i,n),t.stateNode=e,Qs(t))}return el(t),null;case 5:if(G(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Qs(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return el(t),null}if(e=F.current,ci(t))li(t);else{switch(o=td(U.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof i.is?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"==typeof i.is?o.createElement(n,{is:i.is}):o.createElement(n)}}e[Ie]=t,e[_e]=i;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Xc(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Qs(t)}}return el(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&Qs(t);else{if("string"!=typeof i&&null===t.stateNode)throw Error(r(166));if(e=U.current,ci(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(o=ti))switch(o.tag){case 27:case 5:i=o.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Kc(e.nodeValue,n)))||si(t)}else(e=td(e).createTextNode(i))[Ie]=t,t.stateNode=e}return el(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=ci(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[Ie]=t}else di(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;el(t),o=!1}else o=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(ss(t),t):(ss(t),null)}if(ss(t),128&t.flags)return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(o=i.alternate.memoizedState.cachePool.pool);var a=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Xs(t,t.updateQueue),el(t),null;case 4:return q(),null===e&&Bc(t.stateNode.containerInfo),el(t),null;case 10:return vi(t.type),el(t),null;case 19:if(z(ls),null===(o=t.memoizedState))return el(t),null;if(i=!!(128&t.flags),null===(a=o.rendering))if(i)Zs(o,!1);else{if(0!==cu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=us(e))){for(t.flags|=128,Zs(o,!1),e=a.updateQueue,t.updateQueue=e,Xs(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return B(ls,1&ls.current|2),t.child}e=e.sibling}null!==o.tail&&X()>Su&&(t.flags|=128,i=!0,Zs(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=us(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Xs(t,e),Zs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!ri)return el(t),null}else 2*X()-o.renderingStartTime>Su&&536870912!==n&&(t.flags|=128,i=!0,Zs(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=o.last)?e.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=X(),t.sibling=null,e=ls.current,B(ls,i?1&e|2:1&e),t):(el(t),null);case 22:case 23:return ss(t),go(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?!!(536870912&n)&&!(128&t.flags)&&(el(t),6&t.subtreeFlags&&(t.flags|=8192)):el(t),null!==(n=t.updateQueue)&&Xs(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&z(Fi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),vi(_i),el(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function nl(e,t){switch(ei(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vi(_i),q(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return G(t),null;case 13:if(ss(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));di()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(ls),null;case 4:return q(),null;case 10:return vi(t.type),null;case 22:case 23:return ss(t),go(),null!==e&&z(Fi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return vi(_i),null;default:return null}}function rl(e,t){switch(ei(t),t.tag){case 3:vi(_i),q();break;case 26:case 27:case 5:G(t);break;case 4:q();break;case 13:ss(t);break;case 19:z(ls);break;case 10:vi(t.type);break;case 22:case 23:ss(t),go(),null!==e&&z(Fi);break;case 24:vi(_i)}}function il(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(s){lc(t,t.return,s)}}function ol(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,u=s;try{u()}catch(c){lc(i,l,c)}}}r=r.next}while(r!==o)}}catch(c){lc(t,t.return,c)}}function al(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{co(t,n)}catch(r){lc(e,e.return,r)}}}function sl(e,t,n){n.props=fs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){lc(e,t,r)}}function ll(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(i){lc(e,t,i)}}function ul(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(i){lc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(o){lc(e,t,o)}else n.current=null}function cl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){lc(e,e.return,i)}}function dl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,a=null,s=null,l=null,u=null,c=null,d=null;for(f in n){var p=n[f];if(n.hasOwnProperty(f)&&null!=p)switch(f){case"checked":case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(f)||Qc(e,t,f,null,i,p)}}for(var h in i){var f=i[h];if(p=n[h],i.hasOwnProperty(h)&&(null!=f||null!=p))switch(h){case"type":a=f;break;case"name":o=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:f!==p&&Qc(e,t,h,f,i,p)}}return void ht(e,s,l,u,c,d,a,o);case"select":for(a in f=s=l=h=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":f=u;default:i.hasOwnProperty(a)||Qc(e,t,a,null,i,u)}for(o in i)if(a=i[o],u=n[o],i.hasOwnProperty(o)&&(null!=a||null!=u))switch(o){case"value":h=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==u&&Qc(e,t,o,a,i,u)}return t=l,n=s,i=f,void(null!=h?gt(e,!!n,h,!1):!!i!=!!n&&(null!=t?gt(e,!!n,t,!0):gt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=h=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Qc(e,t,l,null,i,o)}for(s in i)if(o=i[s],a=n[s],i.hasOwnProperty(s)&&(null!=o||null!=a))switch(s){case"value":h=o;break;case"defaultValue":f=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(r(91));break;default:o!==a&&Qc(e,t,s,o,i,a)}return void yt(e,h,f);case"option":for(var m in n)if(h=n[m],n.hasOwnProperty(m)&&null!=h&&!i.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Qc(e,t,m,null,i,h);for(u in i)if(h=i[u],f=n[u],i.hasOwnProperty(u)&&h!==f&&(null!=h||null!=f))if("selected"===u)e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h;else Qc(e,t,u,h,i,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)h=n[g],n.hasOwnProperty(g)&&null!=h&&!i.hasOwnProperty(g)&&Qc(e,t,g,null,i,h);for(c in i)if(h=i[c],f=n[c],i.hasOwnProperty(c)&&h!==f&&(null!=h||null!=f))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(r(137,t));break;default:Qc(e,t,c,h,i,f)}return;default:if(kt(t)){for(var y in n)h=n[y],n.hasOwnProperty(y)&&void 0!==h&&!i.hasOwnProperty(y)&&Jc(e,t,y,void 0,i,h);for(d in i)h=i[d],f=n[d],!i.hasOwnProperty(d)||h===f||void 0===h&&void 0===f||Jc(e,t,d,h,i,f);return}}for(var v in n)h=n[v],n.hasOwnProperty(v)&&null!=h&&!i.hasOwnProperty(v)&&Qc(e,t,v,null,i,h);for(p in i)h=i[p],f=n[p],!i.hasOwnProperty(p)||h===f||null==h&&null==f||Qc(e,t,p,h,i,f)}(i,e.type,n,t),i[_e]=t}catch(o){lc(e,e.return,o)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&dd(e.type)||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&dd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Yc));else if(4!==r&&(27===r&&dd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&dd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function gl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Xc(t,r,n),t[Ie]=e,t[_e]=n}catch(o){lc(e,e.return,o)}}var yl=!1,vl=!1,bl=!1,Sl="function"==typeof WeakSet?WeakSet:Set,wl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Nl(e,n),4&r&&il(5,n);break;case 1:if(Nl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){lc(n,n.return,a)}else{var i=fs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){lc(n,n.return,s)}}64&r&&al(n),512&r&&ll(n,n.return);break;case 3:if(Nl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{co(e,t)}catch(a){lc(n,n.return,a)}}break;case 27:null===t&&4&r&&gl(n);case 26:case 5:Nl(e,n),null===t&&4&r&&cl(n),512&r&&ll(n,n.return);break;case 12:Nl(e,n);break;case 13:Nl(e,n),4&r&&Pl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||vl,i=yl;var o=vl;yl=r,(vl=t)&&!o?zl(e,n,!!(8772&n.subtreeFlags)):Nl(e,n),yl=i,vl=o}break;case 30:break;default:Nl(e,n)}}function kl(e){var t=e.alternate;null!==t&&(e.alternate=null,kl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,Cl=!1;function Al(e,t,n){for(n=n.child;null!==n;)xl(e,t,n),n=n.sibling}function xl(e,t,n){if(le&&"function"==typeof le.onCommitFiberUnmount)try{le.onCommitFiberUnmount(se,n)}catch(o){}switch(n.tag){case 26:vl||ul(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:vl||ul(n,t);var r=Tl,i=Cl;dd(n.type)&&(Tl=n.stateNode,Cl=!1),Al(e,t,n),bd(n.stateNode),Tl=r,Cl=i;break;case 5:vl||ul(n,t);case 6:if(r=Tl,i=Cl,Tl=null,Al(e,t,n),Cl=i,null!==(Tl=r))if(Cl)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(n.stateNode)}catch(a){lc(n,t,a)}else try{Tl.removeChild(n.stateNode)}catch(a){lc(n,t,a)}break;case 18:null!==Tl&&(Cl?(pd(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Op(e)):pd(Tl,n.stateNode));break;case 4:r=Tl,i=Cl,Tl=n.stateNode.containerInfo,Cl=!0,Al(e,t,n),Tl=r,Cl=i;break;case 0:case 11:case 14:case 15:vl||ol(2,n,t),vl||ol(4,n,t),Al(e,t,n);break;case 1:vl||(ul(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&sl(n,t,r)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:vl=(r=vl)||null!==n.memoizedState,Al(e,t,n),vl=r;break;default:Al(e,t,n)}}function Pl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Op(e)}catch(n){lc(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){var r=hc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function _l(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var o=n[i],a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(dd(l.type)){Tl=l.stateNode,Cl=!1;break e}break;case 5:Tl=l.stateNode,Cl=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===Tl)throw Error(r(160));xl(a,s,o),Tl=null,Cl=!1,null!==(a=o.alternate)&&(a.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Ol=null;function Ll(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_l(t,e),Ml(e),4&i&&(ol(3,e,e.return),il(3,e),ol(5,e,e.return));break;case 1:_l(t,e),Ml(e),512&i&&(vl||null===n||ul(n,n.return)),64&i&&yl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var o=Ol;if(_l(t,e),Ml(e),512&i&&(vl||null===n||ul(n,n.return)),4&i){var a=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":(!(a=o.getElementsByTagName("title")[0])||a[Re]||a[Ie]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=o.createElement(i),o.head.insertBefore(a,o.querySelector("head > title"))),Xc(a,i,n),a[Ie]=e,je(a),i=a;break e;case"link":var s=zd("link","href",o).get(i+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((a=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}Xc(a=o.createElement(i),i,n),o.head.appendChild(a);break;case"meta":if(s=zd("meta","content",o).get(i+(n.content||"")))for(l=0;l<s.length;l++)if((a=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}Xc(a=o.createElement(i),i,n),o.head.appendChild(a);break;default:throw Error(r(468,i))}a[Ie]=e,je(a),i=a}e.stateNode=i}else Bd(o,e.type,e.stateNode);else e.stateNode=Ld(o,i,e.memoizedProps);else a!==i?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===i?Bd(o,e.type,e.stateNode):Ld(o,i,e.memoizedProps)):null===i&&null!==e.stateNode&&dl(e,e.memoizedProps,n.memoizedProps)}break;case 27:_l(t,e),Ml(e),512&i&&(vl||null===n||ul(n,n.return)),null!==n&&4&i&&dl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(_l(t,e),Ml(e),512&i&&(vl||null===n||ul(n,n.return)),32&e.flags){o=e.stateNode;try{bt(o,"")}catch(f){lc(e,e.return,f)}}4&i&&null!=e.stateNode&&dl(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&i&&(bl=!0);break;case 6:if(_l(t,e),Ml(e),4&i){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(f){lc(e,e.return,f)}}break;case 3:if(Rd=null,o=Ol,Ol=Ed(t.containerInfo),_l(t,e),Ol=o,Ml(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Op(t.containerInfo)}catch(f){lc(e,e.return,f)}bl&&(bl=!1,Dl(e));break;case 4:i=Ol,Ol=Ed(e.stateNode.containerInfo),_l(t,e),Ml(e),Ol=i;break;case 12:default:_l(t,e),Ml(e);break;case 13:_l(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(bu=X()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Il(e,i)));break;case 22:o=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=yl,d=vl;if(yl=c||o,vl=d||u,_l(t,e),vl=d,yl=c,Ml(e),8192&i)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||u||yl||vl||Rl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(a=u.stateNode,o)"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,h=null!=p&&p.hasOwnProperty("display")?p.display:null;l.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(f){lc(u,u.return,f)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(f){lc(u,u.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Il(e,n))));break;case 19:_l(t,e),Ml(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Il(e,i)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(pl(i)){n=i;break}i=i.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var o=n.stateNode;ml(e,hl(e),o);break;case 5:var a=n.stateNode;32&n.flags&&(bt(a,""),n.flags&=-33),ml(e,hl(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;fl(e,hl(e),s);break;default:throw Error(r(161))}}catch(l){lc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Nl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Rl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Rl(t);break;case 1:ul(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&sl(t,t.return,n),Rl(t);break;case 27:bd(t.stateNode);case 26:case 5:ul(t,t.return),Rl(t);break;case 22:null===t.memoizedState&&Rl(t);break;default:Rl(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:zl(i,o,n),il(4,o);break;case 1:if(zl(i,o,n),"function"==typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){lc(r,r.return,u)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)uo(l[i],s)}catch(u){lc(r,r.return,u)}}n&&64&a&&al(o),ll(o,o.return);break;case 27:gl(o);case 26:case 5:zl(i,o,n),n&&null===r&&4&a&&cl(o),ll(o,o.return);break;case 12:zl(i,o,n);break;case 13:zl(i,o,n),n&&4&a&&Pl(i,o);break;case 22:null===o.memoizedState&&zl(i,o,n),ll(o,o.return);break;case 30:break;default:zl(i,o,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Li(n))}function Fl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e))}function Vl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ul(e,t,n,r),t=t.sibling}function Ul(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Vl(e,t,n,r),2048&i&&il(9,t);break;case 1:case 13:default:Vl(e,t,n,r);break;case 3:Vl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e)));break;case 12:if(2048&i){Vl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){lc(t,t.return,l)}}else Vl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?Vl(e,t,n,r):$l(e,t):2&o._visibility?Vl(e,t,n,r):(o._visibility|=2,jl(e,t,n,r,!!(10256&t.subtreeFlags))),2048&i&&Bl(a,t);break;case 24:Vl(e,t,n,r),2048&i&&Fl(t.alternate,t)}}function jl(e,t,n,r,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:jl(o,a,s,l,i),il(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?jl(o,a,s,l,i):$l(o,a):(c._visibility|=2,jl(o,a,s,l,i)),i&&2048&u&&Bl(a.alternate,a);break;case 24:jl(o,a,s,l,i),i&&2048&u&&Fl(a.alternate,a);break;default:jl(o,a,s,l,i)}t=t.sibling}}function $l(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:$l(n,r),2048&i&&Bl(r.alternate,r);break;case 24:$l(n,r),2048&i&&Fl(r.alternate,r);break;default:$l(n,r)}t=t.sibling}}var ql=8192;function Hl(e){if(e.subtreeFlags&ql)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Hl(e),e.flags&ql&&null!==e.memoizedState&&function(e,t,n){if(null===Ud)throw Error(r(475));var i=Ud;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var o=xd(n.href),a=e.querySelector(Pd(o));if(a)return null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(i.count++,i=Gd.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=a,void je(a);a=e.ownerDocument||e,n=Id(n),(o=Sd.get(o))&&Dd(n,o),je(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Xc(a,"link",n),t.instance=a}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(i.count++,t=Gd.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ol,e.memoizedState,e.memoizedProps);break;case 5:default:Hl(e);break;case 3:case 4:var t=Ol;Ol=Ed(e.stateNode.containerInfo),Hl(e),Ol=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ql,ql=16777216,Hl(e),ql=t):Hl(e))}}function Wl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Kl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];wl=r,Jl(r,e)}Wl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 0:case 11:case 15:Kl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Kl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ql(e)):Kl(e)}}function Ql(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];wl=r,Jl(r,e)}Wl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Ql(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Ql(t));break;default:Ql(t)}e=e.sibling}}function Jl(e,t){for(;null!==wl;){var n=wl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Li(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,wl=r;else e:for(n=e;null!==wl;){var i=(r=wl).sibling,o=r.return;if(kl(r),r===n){wl=null;break e}if(null!==i){i.return=o,wl=i;break e}wl=o}}}var Xl={getCacheForType:function(e){var t=Ti(_i),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Zl="function"==typeof WeakMap?WeakMap:Map,eu=0,tu=null,nu=null,ru=0,iu=0,ou=null,au=!1,su=!1,lu=!1,uu=0,cu=0,du=0,pu=0,hu=0,fu=0,mu=0,gu=null,yu=null,vu=!1,bu=0,Su=1/0,wu=null,Eu=null,ku=0,Tu=null,Cu=null,Au=0,xu=0,Pu=null,Iu=null,_u=0,Ou=null;function Lu(){if(2&eu&&0!==ru)return ru&-ru;if(null!==O.T){return 0!==Ni?Ni:xc()}return xe()}function Mu(){0===fu&&(fu=536870912&ru&&!ri?536870912:be());var e=ns.current;return null!==e&&(e.flags|=32),fu}function Du(e,t,n){(e!==tu||2!==iu&&9!==iu)&&null===e.cancelPendingCommit||(Uu(e,0),Bu(e,ru,fu,!1)),Ee(e,n),2&eu&&e===tu||(e===tu&&(!(2&eu)&&(pu|=n),4===cu&&Bu(e,ru,fu,!1)),Sc(e))}function Nu(e,t,n){if(6&eu)throw Error(r(327));for(var i=!n&&!(124&t)&&0===(t&e.expiredLanes)||ye(e,t),o=i?function(e,t){var n=eu;eu|=2;var i=$u(),o=qu();tu!==e||ru!==t?(wu=null,Su=X()+500,Uu(e,t)):su=ye(e,t);e:for(;;)try{if(0!==iu&&null!==nu){t=nu;var a=ou;t:switch(iu){case 1:iu=0,ou=null,Ju(e,t,a,1);break;case 2:case 9:if(Wi(a)){iu=0,ou=null,Qu(t);break}t=function(){2!==iu&&9!==iu||tu!==e||(iu=7),Sc(e)},a.then(t,t);break e;case 3:iu=7;break e;case 4:iu=5;break e;case 7:Wi(a)?(iu=0,ou=null,Qu(t)):(iu=0,ou=null,Ju(e,t,a,7));break;case 5:var s=null;switch(nu.tag){case 26:s=nu.memoizedState;case 5:case 27:var l=nu;if(!s||Vd(s)){iu=0,ou=null;var u=l.sibling;if(null!==u)nu=u;else{var c=l.return;null!==c?(nu=c,Xu(c)):nu=null}break t}}iu=0,ou=null,Ju(e,t,a,5);break;case 6:iu=0,ou=null,Ju(e,t,a,6);break;case 8:Vu(),cu=6;break e;default:throw Error(r(462))}}Ku();break}catch(d){ju(e,d)}return gi=mi=null,O.H=i,O.A=o,eu=n,null!==nu?0:(tu=null,ru=0,Ar(),cu)}(e,t):Gu(e,t,!0),a=i;;){if(0===o){su&&!i&&Bu(e,t,0,!1);break}if(n=e.current.alternate,!a||zu(n)){if(2===o){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;o=gu;var u=l.current.memoizedState.isDehydrated;if(u&&(Uu(l,s).flags|=256),2!==(s=Gu(l,s,!1))){if(lu&&!u){l.errorRecoveryDisabledLanes|=a,pu|=a,o=4;break e}a=yu,yu=o,null!==a&&(null===yu?yu=a:yu.push.apply(yu,a))}o=s}if(a=!1,2!==o)continue}}if(1===o){Uu(e,0),Bu(e,t,0,!0);break}e:{switch(i=e,a=o){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Bu(i,t,fu,!au);break e;case 2:yu=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(o=bu+300-X())){if(Bu(i,t,fu,!au),0!==ge(i,0,!0))break e;i.timeoutHandle=ad(Ru.bind(null,i,n,yu,wu,vu,t,fu,pu,mu,au,a,2,-0,0),o)}else Ru(i,n,yu,wu,vu,t,fu,pu,mu,au,a,0,-0,0)}break}o=Gu(e,t,!1),a=!1}Sc(e)}function Ru(e,t,n,i,o,a,s,l,u,c,d,p,h,f){if(e.timeoutHandle=-1,(8192&(p=t.subtreeFlags)||!(16785408&~p))&&(Ud={stylesheets:null,count:0,unsuspend:$d},Gl(t),null!==(p=function(){if(null===Ud)throw Error(r(475));var e=Ud;return e.stylesheets&&0===e.count&&Qd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Qd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=p(ec.bind(null,e,t,a,n,i,o,s,l,u,d,1,h,f)),void Bu(e,a,s,!c);ec(e,t,a,n,i,o,s,l,u)}function zu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Gn(o(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bu(e,t,n,r){t&=~hu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-ce(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&ke(e,n,t)}function Fu(){return!!(6&eu)||(wc(0),!1)}function Vu(){if(null!==nu){if(0===iu)var e=nu.return;else gi=mi=null,Ro(e=nu),Wa=null,Ka=0,e=nu;for(;null!==e;)rl(e.alternate,e),e=e.return;nu=null}}function Uu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vu(),tu=e,nu=n=Rr(e.current,null),ru=t,iu=0,ou=null,au=!1,su=ye(e,t),lu=!1,mu=fu=hu=pu=du=cu=0,yu=gu=null,vu=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-ce(r),o=1<<i;t|=e[i],r&=~o}return uu=t,Ar(),n}function ju(e,t){vo=null,O.H=$a,t===$i||t===Hi?(t=Ji(),iu=3):t===qi?(t=Ji(),iu=4):iu=t===Ts?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,ou=t,null===nu&&(cu=1,bs(e,Er(t,e.current)))}function $u(){var e=O.H;return O.H=$a,null===e?$a:e}function qu(){var e=O.A;return O.A=Xl,e}function Hu(){cu=4,au||(4194048&ru)!==ru&&null!==ns.current||(su=!0),!(134217727&du)&&!(134217727&pu)||null===tu||Bu(tu,ru,fu,!1)}function Gu(e,t,n){var r=eu;eu|=2;var i=$u(),o=qu();tu===e&&ru===t||(wu=null,Uu(e,t)),t=!1;var a=cu;e:for(;;)try{if(0!==iu&&null!==nu){var s=nu,l=ou;switch(iu){case 8:Vu(),a=6;break e;case 3:case 2:case 9:case 6:null===ns.current&&(t=!0);var u=iu;if(iu=0,ou=null,Ju(e,s,l,u),n&&su){a=0;break e}break;default:u=iu,iu=0,ou=null,Ju(e,s,l,u)}}Wu(),a=cu;break}catch(c){ju(e,c)}return t&&e.shellSuspendCounter++,gi=mi=null,eu=r,O.H=i,O.A=o,null===nu&&(tu=null,ru=0,Ar()),a}function Wu(){for(;null!==nu;)Yu(nu)}function Ku(){for(;null!==nu&&!Q();)Yu(nu)}function Yu(e){var t=Ys(e.alternate,e,uu);e.memoizedProps=e.pendingProps,null===t?Xu(e):nu=t}function Qu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ds(n,t,t.pendingProps,t.type,void 0,ru);break;case 11:t=Ds(n,t,t.pendingProps,t.type.render,t.ref,ru);break;case 5:Ro(t);default:rl(n,t),t=Ys(n,t=nu=zr(t,uu),uu)}e.memoizedProps=e.pendingProps,null===t?Xu(e):nu=t}function Ju(e,t,n,i){gi=mi=null,Ro(t),Wa=null,Ka=0;var o=t.return;try{if(function(e,t,n,i,o){if(n.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=n.alternate)&&wi(t,n,o,!0),null!==(n=ns.current)){switch(n.tag){case 13:return null===rs?Hu():null===n.alternate&&0===cu&&(cu=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),uc(e,i,o)),!1;case 22:return n.flags|=65536,i===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),uc(e,i,o)),!1}throw Error(r(435,n.tag))}return uc(e,i,o),Hu(),!1}if(ri)return null!==(t=ns.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==ai&&hi(Er(e=Error(r(422),{cause:i}),n))):(i!==ai&&hi(Er(t=Error(r(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,i=Er(i,n),oo(e,o=ws(e.stateNode,i,o)),4!==cu&&(cu=2)),!1;var a=Error(r(520),{cause:i});if(a=Er(a,n),null===gu?gu=[a]:gu.push(a),4!==cu&&(cu=2),null===t)return!0;i=Er(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,oo(n,e=ws(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Eu&&Eu.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,ks(o=Es(o),e,n,i),oo(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,ru))return cu=1,bs(e,Er(n,e.current)),void(nu=null)}catch(a){if(null!==o)throw nu=o,a;return cu=1,bs(e,Er(n,e.current)),void(nu=null)}32768&t.flags?(ri||1===i?e=!0:su||536870912&ru?e=!1:(au=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=ns.current)&&13===i.tag&&(i.flags|=16384))),Zu(t,e)):Xu(t)}function Xu(e){var t=e;do{if(32768&t.flags)return void Zu(t,au);e=t.return;var n=tl(t.alternate,t,uu);if(null!==n)return void(nu=n);if(null!==(t=t.sibling))return void(nu=t);nu=t=e}while(null!==t);0===cu&&(cu=5)}function Zu(e,t){do{var n=nl(e.alternate,e);if(null!==n)return n.flags&=32767,void(nu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nu=e);nu=e=n}while(null!==e);cu=6,nu=null}function ec(e,t,n,i,o,a,s,l,u){e.cancelPendingCommit=null;do{oc()}while(0!==ku);if(6&eu)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-ce(n),d=1<<c;s[c]=0,l[c]=-1;var p=u[c];if(null!==p)for(u[c]=null,c=0;c<p.length;c++){var h=p[c];null!==h&&(h.lane&=-536870913)}n&=~d}0!==r&&ke(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,a|=Cr,s,l,u),e===tu&&(nu=tu=null,ru=0),Cu=t,Tu=e,Au=n,xu=a,Pu=o,Iu=i,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,K(ne,function(){return ac(),null})):(e.callbackNode=null,e.callbackPriority=0),i=!!(13878&t.flags),13878&t.subtreeFlags||i){i=O.T,O.T=null,o=L.p,L.p=2,s=eu,eu|=4;try{!function(e,t){if(e=e.containerInfo,Zc=ap,Xn(e=Jn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var o=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==n||0!==o&&3!==p.nodeType||(l=s+o),p!==a||0!==i&&3!==p.nodeType||(u=s+i),3===p.nodeType&&(s+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++c===o&&(l=s),h===a&&++d===i&&(u=s),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ed={focusedElem:e,selectionRange:n},ap=!1,wl=t;null!==wl;)if(e=(t=wl).child,1024&t.subtreeFlags&&null!==e)e.return=t,wl=e;else for(;null!==wl;){switch(a=(t=wl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,o=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var m=fs(n.type,o,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(m,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(y){lc(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))hd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,wl=e;break}wl=t.return}}(e,t)}finally{eu=s,L.p=o,O.T=i}}ku=1,tc(),nc(),rc()}}function tc(){if(1===ku){ku=0;var e=Tu,t=Cu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=eu;eu|=4;try{Ll(t,e);var o=ed,a=Jn(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&Qn(s.ownerDocument.documentElement,s)){if(null!==l&&Xn(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,p=d&&d.defaultView||window;if(p.getSelection){var h=p.getSelection(),f=s.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!h.extend&&m>g&&(a=g,g=m,m=a);var y=Yn(s,m),v=Yn(s,g);if(y&&v&&(1!==h.rangeCount||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),h.removeAllRanges(),m>g?(h.addRange(b),h.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),h.addRange(b))}}}}for(d=[],h=s;h=h.parentNode;)1===h.nodeType&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var S=d[s];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}ap=!!Zc,ed=Zc=null}finally{eu=i,L.p=r,O.T=n}}e.current=t,ku=2}}function nc(){if(2===ku){ku=0;var e=Tu,t=Cu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=eu;eu|=4;try{El(e,t.alternate,t)}finally{eu=i,L.p=r,O.T=n}}ku=3}}function rc(){if(4===ku||3===ku){ku=0,J();var e=Tu,t=Cu,n=Au,r=Iu;10256&t.subtreeFlags||10256&t.flags?ku=5:(ku=0,Cu=Tu=null,ic(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Eu=null),Ae(n),t=t.stateNode,le&&"function"==typeof le.onCommitFiberRoot)try{le.onCommitFiberRoot(se,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{O.T=t,L.p=i}}3&Au&&oc(),Sc(e),i=e.pendingLanes,4194090&n&&42&i?e===Ou?_u++:(_u=0,Ou=e):_u=0,wc(0)}}function ic(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Li(t)))}function oc(e){return tc(),nc(),rc(),ac()}function ac(){if(5!==ku)return!1;var e=Tu,t=xu;xu=0;var n=Ae(Au),i=O.T,o=L.p;try{L.p=32>n?32:n,O.T=null,n=Pu,Pu=null;var a=Tu,s=Au;if(ku=0,Cu=Tu=null,Au=0,6&eu)throw Error(r(331));var l=eu;if(eu|=4,Yl(a.current),Ul(a,a.current,s,n),eu=l,wc(0,!1),le&&"function"==typeof le.onPostCommitFiberRoot)try{le.onPostCommitFiberRoot(se,a)}catch(u){}return!0}finally{L.p=o,O.T=i,ic(e,t)}}function sc(e,t,n){t=Er(n,t),null!==(e=ro(e,t=ws(e.stateNode,t,2),2))&&(Ee(e,2),Sc(e))}function lc(e,t,n){if(3===e.tag)sc(e,e,n);else for(;null!==t;){if(3===t.tag){sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Eu||!Eu.has(r))){e=Er(n,e),null!==(r=ro(t,n=Es(2),2))&&(ks(n,r,t,e),Ee(r,2),Sc(r));break}}t=t.return}}function uc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Zl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(lu=!0,i.add(n),e=cc.bind(null,e,t,n),t.then(e,e))}function cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tu===e&&(ru&n)===n&&(4===cu||3===cu&&(62914560&ru)===ru&&300>X()-bu?!(2&eu)&&Uu(e,0):hu|=n,mu===ru&&(mu=0)),Sc(e)}function dc(e,t){0===t&&(t=Se()),null!==(e=Ir(e,t))&&(Ee(e,t),Sc(e))}function pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),dc(e,n)}function hc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),dc(e,n)}var fc=null,mc=null,gc=!1,yc=!1,vc=!1,bc=0;function Sc(e){e!==mc&&null===e.next&&(null===mc?fc=mc=e:mc=mc.next=e),yc=!0,gc||(gc=!0,ud(function(){6&eu?K(ee,Ec):kc()}))}function wc(e,t){if(!vc&&yc){vc=!0;do{for(var n=!1,r=fc;null!==r;){if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-ce(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Ac(r,o))}else o=ru,!(3&(o=ge(r,r===tu?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ye(r,o)||(n=!0,Ac(r,o));r=r.next}}while(n);vc=!1}}function Ec(){kc()}function kc(){yc=gc=!1;var e=0;0!==bc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=bc),bc=0);for(var t=X(),n=null,r=fc;null!==r;){var i=r.next,o=Tc(r,t);0===o?(r.next=null,null===n?fc=i:n.next=i,null===i&&(mc=n)):(n=r,(0!==e||3&o)&&(yc=!0)),r=i}wc(e)}function Tc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-ce(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ve(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=ru,n=ge(e,e===(t=tu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===iu||9===iu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Y(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||ye(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Y(r),Ae(n)){case 2:case 8:n=te;break;case 32:default:n=ne;break;case 268435456:n=ie}return r=Cc.bind(null,e),n=K(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Y(r),e.callbackPriority=2,e.callbackNode=null,2}function Cc(e,t){if(0!==ku&&5!==ku)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(oc()&&e.callbackNode!==n)return null;var r=ru;return 0===(r=ge(e,e===tu?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Nu(e,r,t),Tc(e,X()),null!=e.callbackNode&&e.callbackNode===n?Cc.bind(null,e):null)}function Ac(e,t){if(oc())return null;Nu(e,t,!0)}function xc(){return 0===bc&&(bc=be()),bc}function Pc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:At(""+e)}function Ic(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var _c=0;_c<br.length;_c++){var Oc=br[_c];Sr(Oc.toLowerCase(),"on"+(Oc[0].toUpperCase()+Oc.slice(1)))}Sr(cr,"onAnimationEnd"),Sr(dr,"onAnimationIteration"),Sr(pr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(hr,"onTransitionRun"),Sr(fr,"onTransitionStart"),Sr(mr,"onTransitionCancel"),Sr(gr,"onTransitionEnd"),Ge("onMouseEnter",["mouseout","mouseover"]),Ge("onMouseLeave",["mouseout","mouseover"]),Ge("onPointerEnter",["pointerout","pointerover"]),Ge("onPointerLeave",["pointerout","pointerover"]),He("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),He("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),He("onBeforeInput",["compositionend","keypress","textInput","paste"]),He("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),He("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),He("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function Dc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(c){ms(c)}i.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(c){ms(c)}i.currentTarget=null,o=l}}}}function Nc(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(Fc(t,e,2,!1),n.add(r))}function Rc(e,t,n){var r=0;t&&(r|=4),Fc(n,e,r,t)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[zc]){e[zc]=!0,$e.forEach(function(t){"selectionchange"!==t&&(Mc.has(t)||Rc(t,!1,e),Rc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zc]||(t[zc]=!0,Rc("selectionchange",!1,t))}}function Fc(e,t,n,r){switch(hp(t)){case 2:var i=sp;break;case 8:i=lp;break;default:i=up}n=i.bind(null,t,n,e),i=void 0,!Rt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vc(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var l=r.stateNode.containerInfo;if(l===i)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==l;){if(null===(s=Be(l)))return;if(5===(u=s.tag)||6===u||26===u||27===u){r=a=s;continue e}l=l.parentNode}}r=r.return}Mt(function(){var r=a,i=Pt(n),s=[];e:{var l=yr.get(e);if(void 0!==l){var u=Qt,c=e;switch(e){case"keypress":if(0===jt(n))break e;case"keydown":case"keyup":u=pn;break;case"focusin":c="focus",u=nn;break;case"focusout":c="blur",u=nn;break;case"beforeblur":case"afterblur":u=nn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=tn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=fn;break;case cr:case dr:case pr:u=rn;break;case gr:u=mn;break;case"scroll":case"scrollend":u=Xt;break;case"wheel":u=gn;break;case"copy":case"cut":case"paste":u=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=hn;break;case"toggle":case"beforetoggle":u=yn}var d=!!(4&t),p=!d&&("scroll"===e||"scrollend"===e),h=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===h||null!=(g=Dt(m,h))&&d.push(Uc(m,g,f)),p)break;m=m.return}0<d.length&&(l=new u(l,c,null,n,i),s.push({event:l,listeners:d}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===xt||!(c=n.relatedTarget||n.fromElement)||!Be(c)&&!c[Oe])&&(u||l)&&(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Be(c):null)&&(p=o(c),d=c.tag,c!==p||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=en,g="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=hn,g="onPointerLeave",h="onPointerEnter",m="pointer"),p=null==u?l:Ve(u),f=null==c?l:Ve(c),(l=new d(g,m+"leave",u,n,i)).target=p,l.relatedTarget=f,g=null,Be(i)===r&&((d=new d(h,m+"enter",c,n,i)).target=f,d.relatedTarget=p,g=d),p=g,u&&c)e:{for(h=c,m=0,f=d=u;f;f=$c(f))m++;for(f=0,g=h;g;g=$c(g))f++;for(;0<m-f;)d=$c(d),m--;for(;0<f-m;)h=$c(h),f--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=$c(d),h=$c(h)}d=null}else d=null;null!==u&&qc(s,l,u,d,!1),null!==c&&null!==p&&qc(s,p,c,d,!0)}if("select"===(u=(l=r?Ve(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var y=Nn;else if(In(l))if(Rn)y=Hn;else{y=$n;var v=jn}else!(u=l.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&kt(r.elementType)&&(y=Nn):y=qn;switch(y&&(y=y(e,r))?_n(s,y,n,i):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&mt(l,"number",l.value)),v=r?Ve(r):window,e){case"focusin":(In(v)||"true"===v.contentEditable)&&(er=v,tr=r,nr=null);break;case"focusout":nr=tr=er=null;break;case"mousedown":rr=!0;break;case"contextmenu":case"mouseup":case"dragend":rr=!1,ir(s,n,i);break;case"selectionchange":if(Zn)break;case"keydown":case"keyup":ir(s,n,i)}var b;if(bn)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else xn?Cn(e,n)&&(S="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(S="onCompositionStart");S&&(En&&"ko"!==n.locale&&(xn||"onCompositionStart"!==S?"onCompositionEnd"===S&&xn&&(b=Ut()):(Ft="value"in(Bt=i)?Bt.value:Bt.textContent,xn=!0)),0<(v=jc(r,S)).length&&(S=new an(S,e,null,n,i),s.push({event:S,listeners:v}),b?S.data=b:null!==(b=An(n))&&(S.data=b))),(b=wn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Tn=!0,kn);case"textInput":return(e=t.data)===kn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(xn)return"compositionend"===e||!bn&&Cn(e,t)?(e=Ut(),Vt=Ft=Bt=null,xn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return En&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(S=jc(r,"onBeforeInput")).length&&(v=new an("onBeforeInput","beforeinput",null,n,i),s.push({event:v,listeners:S}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Pc((i[_e]||null).action),a=r.submitter;a&&null!==(t=(t=a[_e]||null)?Pc(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new Qt("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==bc){var e=a?Ic(i,a):new FormData(i);Ia(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"==typeof o&&(s.preventDefault(),e=a?Ic(i,a):new FormData(i),Ia(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(s,e,r,n,i)}Dc(s,t)})}function Uc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Dt(e,n))&&r.unshift(Uc(e,i,o)),null!=(i=Dt(e,t))&&r.push(Uc(e,i,o))),3===e.tag)return r;e=e.return}return[]}function $c(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qc(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=Dt(n,o))&&a.unshift(Uc(n,u,l)):i||null!=(u=Dt(n,o))&&a.push(Uc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Hc=/\r\n?/g,Gc=/\u0000|\uFFFD/g;function Wc(e){return("string"==typeof e?e:""+e).replace(Hc,"\n").replace(Gc,"")}function Kc(e,t){return t=Wc(t),Wc(e)===t}function Yc(){}function Qc(e,t,n,i,o,a){switch(n){case"children":"string"==typeof i?"body"===t||"textarea"===t&&""===i||bt(e,i):("number"==typeof i||"bigint"==typeof i)&&"body"!==t&&bt(e,""+i);break;case"className":Ze(e,"class",i);break;case"tabIndex":Ze(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ze(e,n,i);break;case"style":Et(e,i,a);break;case"data":if("object"!==t){Ze(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"==typeof i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"==typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&Qc(e,t,"name",o.name,o,null),Qc(e,t,"formEncType",o.formEncType,o,null),Qc(e,t,"formMethod",o.formMethod,o,null),Qc(e,t,"formTarget",o.formTarget,o,null)):(Qc(e,t,"encType",o.encType,o,null),Qc(e,t,"method",o.method,o,null),Qc(e,t,"target",o.target,o,null))),null==i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Yc);break;case"onScroll":null!=i&&Nc("scroll",e);break;case"onScrollEnd":null!=i&&Nc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"muted":e.muted=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"==typeof i||"boolean"==typeof i||"symbol"==typeof i){e.removeAttribute("xlink:href");break}n=At(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"==typeof i||"symbol"==typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Nc("beforetoggle",e),Nc("toggle",e),Xe(e,"popover",i);break;case"xlinkActuate":et(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":et(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":et(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":et(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":et(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":et(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":et(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":et(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":et(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Xe(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&Xe(e,n=Tt.get(n)||n,i)}}function Jc(e,t,n,i,o,a){switch(n){case"style":Et(e,i,a);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof i?bt(e,i):("number"==typeof i||"bigint"==typeof i)&&bt(e,""+i);break;case"onScroll":null!=i&&Nc("scroll",e);break;case"onScrollEnd":null!=i&&Nc("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Yc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(a=null!=(a=e[_e]||null)?a[n]:null)&&e.removeEventListener(t,a,o),"function"!=typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):Xe(e,n,i):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o)))}}function Xc(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nc("error",e),Nc("load",e);var i,o=!1,a=!1;for(i in n)if(n.hasOwnProperty(i)){var s=n[i];if(null!=s)switch(i){case"src":o=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Qc(e,t,i,s,n,null)}}return a&&Qc(e,t,"srcSet",n.srcSet,n,null),void(o&&Qc(e,t,"src",n.src,n,null));case"input":Nc("invalid",e);var l=i=s=a=null,u=null,c=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":a=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:Qc(e,t,o,d,n,null)}}return ft(e,i,l,u,c,s,a,!1),void lt(e);case"select":for(a in Nc("invalid",e),o=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"multiple":o=l;default:Qc(e,t,a,l,n,null)}return t=i,n=s,e.multiple=!!o,void(null!=t?gt(e,!!o,t,!1):null!=n&&gt(e,!!o,n,!0));case"textarea":for(s in Nc("invalid",e),i=a=o=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":o=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:Qc(e,t,s,l,n,null)}return vt(e,o,a,i),void lt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))if("selected"===u)e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o;else Qc(e,t,u,o,n,null);return;case"dialog":Nc("beforetoggle",e),Nc("toggle",e),Nc("cancel",e),Nc("close",e);break;case"iframe":case"object":Nc("load",e);break;case"video":case"audio":for(o=0;o<Lc.length;o++)Nc(Lc[o],e);break;case"image":Nc("error",e),Nc("load",e);break;case"details":Nc("toggle",e);break;case"embed":case"source":case"link":Nc("error",e),Nc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Qc(e,t,c,o,n,null)}return;default:if(kt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&Jc(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&Qc(e,t,l,o,n,null))}var Zc=null,ed=null;function td(e){return 9===e.nodeType?e:e.ownerDocument}function nd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function id(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ad="function"==typeof setTimeout?setTimeout:void 0,sd="function"==typeof clearTimeout?clearTimeout:void 0,ld="function"==typeof Promise?Promise:void 0,ud="function"==typeof queueMicrotask?queueMicrotask:void 0!==ld?function(e){return ld.resolve(null).then(e).catch(cd)}:ad;function cd(e){setTimeout(function(){throw e})}function dd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&bd(a.documentElement),2&n&&bd(a.body),4&n)for(bd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[Re]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void Op(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Op(t)}function hd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":hd(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function fd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function md(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var gd=null;function yd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function vd(e,t,n){switch(t=td(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function bd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var Sd=new Map,wd=new Set;function Ed(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var kd=L.d;L.d={f:function(){var e=kd.f(),t=Fu();return e||t},r:function(e){var t=Fe(e);null!==t&&5===t.tag&&"form"===t.type?Oa(t):kd.r(e)},D:function(e){kd.D(e),Cd("dns-prefetch",e,null)},C:function(e,t){kd.C(e,t),Cd("preconnect",e,t)},L:function(e,t,n){kd.L(e,t,n);var r=Td;if(r&&e&&t){var i='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+pt(n.imageSizes)+'"]')):i+='[href="'+pt(e)+'"]';var o=i;switch(t){case"style":o=xd(e);break;case"script":o=_d(e)}Sd.has(o)||(e=u({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Pd(o))||"script"===t&&r.querySelector(Od(o))||(Xc(t=r.createElement("link"),"link",e),je(t),r.head.appendChild(t)))}},m:function(e,t){kd.m(e,t);var n=Td;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=_d(e)}if(!Sd.has(o)&&(e=u({rel:"modulepreload",href:e},t),Sd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Od(o)))return}Xc(r=n.createElement("link"),"link",e),je(r),n.head.appendChild(r)}}},X:function(e,t){kd.X(e,t);var n=Td;if(n&&e){var r=Ue(n).hoistableScripts,i=_d(e),o=r.get(i);o||((o=n.querySelector(Od(i)))||(e=u({src:e,async:!0},t),(t=Sd.get(i))&&Nd(e,t),je(o=n.createElement("script")),Xc(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){kd.S(e,t,n);var r=Td;if(r&&e){var i=Ue(r).hoistableStyles,o=xd(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Pd(o)))s.loading=5;else{e=u({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(o))&&Dd(e,n);var l=a=r.createElement("link");je(l),Xc(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Md(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){kd.M(e,t);var n=Td;if(n&&e){var r=Ue(n).hoistableScripts,i=_d(e),o=r.get(i);o||((o=n.querySelector(Od(i)))||(e=u({src:e,async:!0,type:"module"},t),(t=Sd.get(i))&&Nd(e,t),je(o=n.createElement("script")),Xc(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var Td="undefined"==typeof document?null:document;function Cd(e,t,n){var r=Td;if(r&&"string"==typeof t&&t){var i=pt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),wd.has(i)||(wd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(Xc(t=r.createElement("link"),"link",e),je(t),r.head.appendChild(t)))}}function Ad(e,t,n,i){var o,a,s,l,u=(u=U.current)?Ed(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=xd(n.href),(i=(n=Ue(u).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=xd(n.href);var c=Ue(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Pd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),c||(o=u,a=e,s=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=o.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Xc(a,"link",s),je(a),o.head.appendChild(a))))),t&&null===i)throw Error(r(528,""));return d}if(t&&null!==i)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=_d(n),(i=(n=Ue(u).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function xd(e){return'href="'+pt(e)+'"'}function Pd(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return u({},e,{"data-precedence":e.precedence,precedence:null})}function _d(e){return'[src="'+pt(e)+'"]'}function Od(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(i)return t.instance=i,je(i),i;var o=u({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return je(i=(e.ownerDocument||e).createElement("style")),Xc(i,"style",o),Md(i,n.precedence,e),t.instance=i;case"stylesheet":o=xd(n.href);var a=e.querySelector(Pd(o));if(a)return t.state.loading|=4,t.instance=a,je(a),a;i=Id(n),(o=Sd.get(o))&&Dd(i,o),je(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Xc(a,"link",i),t.state.loading|=4,Md(a,n.precedence,e),t.instance=a;case"script":return a=_d(n.src),(o=e.querySelector(Od(a)))?(t.instance=o,je(o),o):(i=n,(o=Sd.get(a))&&Nd(i=u({},n),o),je(o=(e=e.ownerDocument||e).createElement("script")),Xc(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Md(i,n.precedence,e));return t.instance}function Md(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Nd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Rd=null;function zd(e,t,n){if(null===Rd){var r=new Map,i=Rd=new Map;i.set(n,r)}else(r=(i=Rd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Re]||o[Ie]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Ud=null;function $d(){}function Gd(){if(this.count--,0===this.count)if(this.stylesheets)Qd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function Qd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach(Jd,e),Kd=null,Gd.call(e))}function Jd(e,t){if(!(4&t.state.loading)){var n=Kd.get(e);if(n)var r=n.get(null);else{n=new Map,Kd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Gd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Xd={$$typeof:v,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Zd(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=we(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=we(0),this.hiddenUpdates=we(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function ep(e,t,n,r,i,o,a,s,l,u,c,d){return e=new Zd(e,t,n,a,s,l,u,d),t=1,!0===o&&(t|=24),o=Dr(3,null,null,t),e.current=o,o.stateNode=e,(t=Oi()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},eo(o),e}function tp(e){return e?e=Lr:Lr}function np(e,t,n,r,i,o){i=tp(i),null===r.context?r.context=i:r.pendingContext=i,(r=no(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=ro(e,r,t))&&(Du(n,0,t),io(n,e,t))}function rp(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ip(e,t){rp(e,t),(e=e.alternate)&&rp(e,t)}function op(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Du(t,0,67108864),ip(e,67108864)}}var ap=!0;function sp(e,t,n,r){var i=O.T;O.T=null;var o=L.p;try{L.p=2,up(e,t,n,r)}finally{L.p=o,O.T=i}}function lp(e,t,n,r){var i=O.T;O.T=null;var o=L.p;try{L.p=8,up(e,t,n,r)}finally{L.p=o,O.T=i}}function up(e,t,n,r){if(ap){var i=cp(r);if(null===i)Vc(e,t,r,dp,n),Ep(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return mp=kp(mp,e,t,n,r,i),!0;case"dragenter":return gp=kp(gp,e,t,n,r,i),!0;case"mouseover":return yp=kp(yp,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return vp.set(o,kp(vp.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,bp.set(o,kp(bp.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ep(e,r),4&t&&-1<wp.indexOf(e)){for(;null!==i;){var o=Fe(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=me(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-ce(a);s.entanglements[1]|=l,a&=~l}Sc(o),!(6&eu)&&(Su=X()+500,wc(0))}}break;case 13:null!==(s=Ir(o,2))&&Du(s,0,2),Fu(),ip(o,2)}if(null===(o=cp(r))&&Vc(e,t,r,dp,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vc(e,t,r,null,n)}}function cp(e){return pp(e=Pt(e))}var dp=null;function pp(e){if(dp=null,null!==(e=Be(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=a(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return dp=e,null}function hp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z()){case ee:return 2;case te:return 8;case ne:case re:return 32;case ie:return 268435456;default:return 32}default:return 32}}var fp=!1,mp=null,gp=null,yp=null,vp=new Map,bp=new Map,Sp=[],wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ep(e,t){switch(e){case"focusin":case"focusout":mp=null;break;case"dragenter":case"dragleave":gp=null;break;case"mouseover":case"mouseout":yp=null;break;case"pointerover":case"pointerout":vp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bp.delete(t.pointerId)}}function kp(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Fe(t))&&op(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Tp(e){var t=Be(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=a(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=Lu();e=Ce(e);var t=Ir(n,e);null!==t&&Du(t,0,e),ip(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Cp(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=cp(e.nativeEvent);if(null!==n)return null!==(t=Fe(n))&&op(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,t.shift()}return!0}function Ap(e,t,n){Cp(e)&&n.delete(t)}function xp(){fp=!1,null!==mp&&Cp(mp)&&(mp=null),null!==gp&&Cp(gp)&&(gp=null),null!==yp&&Cp(yp)&&(yp=null),vp.forEach(Ap),bp.forEach(Ap)}function Pp(t,n){t.blockedOn===n&&(t.blockedOn=null,fp||(fp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xp)))}var Ip=null;function _p(t){Ip!==t&&(Ip=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ip===t&&(Ip=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if("function"!=typeof r){if(null===pp(r||n))continue;break}var o=Fe(n);null!==o&&(t.splice(e,3),e-=3,Ia(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Op(e){function t(t){return Pp(t,e)}null!==mp&&Pp(mp,e),null!==gp&&Pp(gp,e),null!==yp&&Pp(yp,e),vp.forEach(t),bp.forEach(t);for(var n=0;n<Sp.length;n++){var r=Sp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Sp.length&&null===(n=Sp[0]).blockedOn;)Tp(n),null===n.blockedOn&&Sp.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[_e]||null;if("function"==typeof o)a||_p(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[_e]||null)s=a.formAction;else if(null!==pp(i))continue}else s=a.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),_p(n)}}}function Lp(e){this._internalRoot=e}function Mp(e){this._internalRoot=e}Mp.prototype.render=Lp.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));np(t.current,Lu(),e,t,null,null)},Mp.prototype.unmount=Lp.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;np(e.current,2,null,e,null,null),Fu(),t[Oe]=null}},Mp.prototype.unstable_scheduleHydration=function(e){if(e){var t=xe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sp.length&&0!==t&&t<Sp[n].priority;n++);Sp.splice(n,0,e),0===n&&Tp(e)}};var Dp=t.version;if("19.1.1"!==Dp)throw Error(r(527,Dp,"19.1.1"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(i=a.return)){n=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return s(a),e;if(l===i)return s(a),t;l=l.sibling}throw Error(r(188))}if(n.return!==i.return)n=a,i=l;else{for(var u=!1,c=a.child;c;){if(c===n){u=!0,n=a,i=l;break}if(c===i){u=!0,i=a,n=l;break}c=c.sibling}if(!u){for(c=l.child;c;){if(c===n){u=!0,n=l,i=a;break}if(c===i){u=!0,i=l,n=a;break}c=c.sibling}if(!u)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?l(e):null)?null:e.stateNode};var Np={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rp.isDisabled&&Rp.supportsFiber)try{se=Rp.inject(Np),le=Rp}catch(Bp){}}return Fd.createRoot=function(e,t){if(!i(e))throw Error(r(299));var n=!1,o="",a=gs,s=ys,l=vs;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=ep(e,1,!1,null,0,n,o,a,s,l,0,null),e[Oe]=t.current,Bc(e),new Lp(t)},Fd.hydrateRoot=function(e,t,n){if(!i(e))throw Error(r(299));var o=!1,a="",s=gs,l=ys,u=vs,c=null;return null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=ep(e,1,!0,t,0,o,a,s,l,u,0,c)).context=tp(null),n=t.current,(a=no(o=Ce(o=Lu()))).callback=null,ro(n,a,o),n=o,t.current.lanes=n,Ee(t,n),Sc(t),e[Oe]=t.current,Bc(e),new Mp(t)},Fd.version="19.1.1",Fd}var Jd=(Gd||(Gd=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),Bd.exports=Qd()),Bd.exports);const Xd=new class{constructor(){this.cache=new Map,this.TTL=6e5}getKey(e,t){const n=JSON.stringify(e.map(e=>[e.lat,e.lng]));return`${this.simpleHash(n)}_${t}`}simpleHash(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t).toString(36)}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.TTL?(this.cache.delete(e),null):t.data:null}set(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}clear(){this.cache.clear()}};function Zd(e){if(!e)return;const t=e.trim().toLowerCase();if("walk"===t)return 7;if("none"===t)return;const n=t.includes("mph"),r=parseFloat(t);return isFinite(r)?n?Math.round(1.60934*r):r:void 0}function ep(e,t){const n=(()=>{switch((e||"").toLowerCase()){case"asphalt":case"concrete":case"concrete:lanes":case"concrete:plates":return.75;case"paving_stones":case"sett":case"cobblestone":case"compacted":return.55;case"gravel":return.45;case"fine_gravel":return.48;case"dirt":case"earth":case"ground":return.35;case"grass":return.3;case"sand":return.25;default:return}})();if(n){if(t){const e=t.toLowerCase();if(e.includes("good")||e.includes("excellent"))return Math.min(.85,n+.02);if(e.includes("bad")||e.includes("horrible"))return Math.max(.2,n-.05)}return n}}function tp(e){switch(e){case"dry":return 1;case"wet":return.75;case"snow":return.3;case"ice":return.15}}function np(e){switch(e){case"hump":case"table":case"island":return 40;case"chicane":return 35;case"cushion":case"rumble_strip":return 45;default:return}}function rp(e,t){const n=(t.lat-e.lat)*Math.PI/180,r=(t.lng-e.lng)*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function ip(e,t,n){const r=e.lat-t.lat,i=e.lng-t.lng,o=n.lat-t.lat,a=n.lng-t.lng,s=r*o+i*a,l=o*o+a*a;if(0===l)return{lat:t.lat,lng:t.lng,distance:rp(e,t)};const u=s/l;let c;return c=u<0?t:u>1?n:{lat:t.lat+u*o,lng:t.lng+u*a},{...c,distance:rp(e,c)}}class op{constructor(e){this.osmData=null,this.config=e}setOsmData(e){this.osmData=e}updateConfig(e){this.config={...this.config,...e}}getConstraintsAt(e){if(!this.osmData)return{};const t={};return this.config.useMaxspeed&&(t.maxspeedCap=this.findMaxspeedAt(e)),this.config.useTrafficCalming&&(t.calmingCap=this.findCalmingCapAt(e)),this.config.useSurface&&(t.frictionMu=this.findFrictionAt(e)),t}findMaxspeedAt(e){if(!this.osmData)return;let t,n=1/0;for(const r of this.osmData.ways)if(r.tags.maxspeed&&!(r.nodes.length<2))for(let i=0;i<r.nodes.length-1;i++){const o=ip(e,{lat:r.nodes[i].lat,lng:r.nodes[i].lon},{lat:r.nodes[i+1].lat,lng:r.nodes[i+1].lon});if(o.distance<15&&o.distance<n){const e=Zd(r.tags.maxspeed);void 0!==e&&(t=e,n=o.distance)}}return t}findCalmingCapAt(e){if(!this.osmData)return;let t;for(const n of this.osmData.calming){if(rp(e,{lat:n.lat,lng:n.lon})<=25){const e=np(n.kind);void 0!==e&&(t=void 0===t?e:Math.min(t,e))}}return t}findFrictionAt(e){if(!this.osmData)return;let t,n=1/0;for(const r of this.osmData.ways)if(r.tags.surface&&!(r.nodes.length<2))for(let i=0;i<r.nodes.length-1;i++){const o=ip(e,{lat:r.nodes[i].lat,lng:r.nodes[i].lon},{lat:r.nodes[i+1].lat,lng:r.nodes[i+1].lon});if(o.distance<15&&o.distance<n){const e=ep(r.tags.surface,r.tags.smoothness);void 0!==e&&(t=e*tp(this.config.weather),n=o.distance)}}return t}applyConstraints(e,t,n){let r=e;if(void 0!==t.maxspeedCap&&(r=Math.min(r,t.maxspeedCap)),void 0!==t.calmingCap&&(r=Math.min(r,t.calmingCap)),void 0!==t.frictionMu&&void 0!==n&&n>0){const e=9.81,i=3.6*Math.sqrt(t.frictionMu*e*.95*n);r=Math.min(r,i)}return r}getFrictionLimitedAcceleration(e,t=0){if(!e.frictionMu)return;const n=9.81*e.frictionMu,r=Math.min(1,Math.abs(t)/n);return n*Math.sqrt(1-r*r)}}const ap="barricadix_authenticated";function sp(){const e=document.getElementById("welcome-screen"),t=document.getElementById("app-container");e&&t&&(e.style.display="flex",t.style.display="none")}function lp(){const e=document.getElementById("welcome-screen"),t=document.getElementById("app-container");e&&t&&(e.style.display="none",t.style.display="flex",async function(){var e;Np(),Zp(),Tp=new op({useMaxspeed:!0,useTrafficCalming:!0,useSurface:!1,weather:"dry"}),function(){try{const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface"),r=document.getElementById("weather-select");e&&(e.checked="false"!==localStorage.getItem("osm-maxspeed")),t&&(t.checked="false"!==localStorage.getItem("osm-traffic-calming")),n&&(n.checked="true"===localStorage.getItem("osm-surface")),r&&(r.value=localStorage.getItem("osm-weather")||"dry"),kh()}catch(e){}}(),function(){const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface"),r=document.getElementById("weather-select"),i=()=>{kh(),function(){try{const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface"),r=document.getElementById("weather-select");e&&localStorage.setItem("osm-maxspeed",e.checked.toString()),t&&localStorage.setItem("osm-traffic-calming",t.checked.toString()),n&&localStorage.setItem("osm-surface",n.checked.toString()),r&&localStorage.setItem("osm-weather",r.value)}catch(e){}}(),Sp&&Ch()};e&&e.addEventListener("change",i),t&&t.addEventListener("change",i),n&&n.addEventListener("change",i),r&&r.addEventListener("change",i)}();let t=0;const n=3;for(;t<n&&(!Mp.de||!Mp.en);)await Jp(),t++,!(t<n)||Mp.de&&Mp.en||await new Promise(e=>setTimeout(e,500));Mp.de&&Mp.en||(Mp=Dp);Lp="de",await Qp(),Ph();const r=localStorage.getItem("language")||"de";r!==Lp&&await Xp(r);document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.dataset.lang;t&&t!==Lp&&Xp(t)})});const i=document.getElementById("tooltip");document.querySelectorAll(".info-icon").forEach(e=>{e.addEventListener("mouseover",e=>{const t=e.currentTarget,n=t.dataset.tooltip||"";i.textContent=n,i.style.opacity="1";const r=t.getBoundingClientRect();i.style.left=`${r.left+window.scrollX}px`,i.style.top=`${r.bottom+window.scrollY+5}px`}),e.addEventListener("mouseout",()=>{i.style.opacity="0"})});const o=document.getElementById("map-search-input"),a=document.getElementById("map-search-button"),s=document.getElementById("toggle-sidebar"),l=document.querySelector(".sidebar"),u=async()=>{const e=o.value.trim();if(!e)return;const t=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(e)}`;try{const e=await fetch(t,{headers:{"Accept-Language":Lp}});if(!e.ok)throw new Error(`API request failed with status ${e.status}`);const n=await e.json();if(n&&n.length>0){const{lat:e,lon:t,display_name:r}=n[0];pp.setView([e,t],15),mp&&pp.removeLayer(mp),mp&&(pp.removeLayer(mp),mp=null);const i=L.divIcon({className:"search-marker",html:'<i class="fas fa-map-marker-alt" style="color: #dc2626; font-size: 20px;"></i>',iconSize:[25,41],iconAnchor:[12,41]});mp=L.marker([e,t],{icon:i,zIndexOffset:1e3}).addTo(pp),mp.bindPopup(`<b>${r}</b>`).openPopup(),pp.invalidateSize()}else alert(Yp("alerts.locationNotFound"))}catch(n){alert(Yp("alerts.searchError"))}};a.addEventListener("click",u),o.addEventListener("keypress",e=>{"Enter"===e.key&&u()}),s&&l&&s.addEventListener("click",()=>{l.classList.toggle("open")});const c=document.getElementById("toggle-draw-mode"),d=document.getElementById("reset-drawing"),p=document.getElementById("map"),h=e=>{gp=e;const t=c.querySelector("span");e?(c.classList.add("active"),t&&(t.textContent=Yp("map.setWaypointsActive")),null==p||p.classList.add("drawing-mode")):(c.classList.remove("active"),t&&(t.textContent=Yp("map.setWaypoints")),null==p||p.classList.remove("drawing-mode"))},f=()=>{vp.forEach(e=>pp.removeLayer(e)),vp=[],bp&&pp.removeLayer(bp),bp=null,Sp&&pp.removeLayer(Sp),Sp=null,wp&&pp.removeLayer(wp),wp=null,yp=[],gp&&h(!1)},m=()=>{bp&&pp.removeLayer(bp),yp.length>1&&(bp=L.polyline(yp,{color:"var(--accent-color)",weight:3}).addTo(pp))},g=()=>{if(yp.length<3)return;Sp&&pp.removeLayer(Sp),Sp=L.polygon(yp,{color:"yellow",fillColor:"#FFFF00",fillOpacity:.3,weight:2}).addTo(pp);const e=Sp.getBounds().getCenter();wp=L.marker(e,{icon:L.divIcon({className:"polygon-label",html:Yp("map.securityAreaLabel"),iconSize:[150,24]})}).addTo(pp),bp&&pp.removeLayer(bp),bp=null,vp.forEach(e=>pp.removeLayer(e)),vp=[],Th()&&Ch(),yp=[],h(!1)},y=e=>{if(!gp)return;const t=e.latlng,n=L.marker(t).addTo(pp);0===yp.length&&n.on("click",()=>{gp&&yp.length>=3&&g()}),yp.push(t),vp.push(n),m()};pp.on("click",y);const v=document.querySelectorAll(".main-nav a"),b=document.querySelectorAll(".map-tabs a"),S=document.getElementById("analyze-threats"),w=document.getElementById("create-report-btn"),E=document.getElementById("download-report-btn"),k=document.getElementById("report-iframe"),T=document.getElementById("map"),C=document.getElementById("report-preview-area"),A=document.getElementById("vehicle-select"),x=async(e,t)=>{t&&(v.forEach(e=>e.classList.remove("active")),t.classList.add("active")),b.forEach(t=>{const n=t;n.classList.toggle("active",n.getAttribute("data-target")===e)}),"nav-param-input"===e&&(f(),eh(),Pp=null),"nav-marking-area"===e&&(eh(),Pp=null),"nav-threat-analysis"===e&&(Pp=null),"nav-product-selection"===e?await hh():vh(),"nav-project-description"===e&&(eh(),Pp=null),c.classList.add("hidden"),d.classList.add("hidden"),S.classList.add("hidden"),w.classList.add("hidden"),E.classList.add("hidden");const n="nav-risk-report"===e;T.classList.toggle("view-hidden",n),C.classList.toggle("view-hidden",!n),pp&&(n||pp.invalidateSize()),Pp||(k.src="about:blank",E.disabled=!0),"nav-marking-area"===e?(c.classList.remove("hidden"),d.classList.remove("hidden")):"nav-threat-analysis"===e?S.classList.remove("hidden"):"nav-risk-report"===e&&(w.classList.remove("hidden"),E.classList.remove("hidden"),E.disabled=!Pp)};v.forEach(e=>{e.addEventListener("click",async e=>{e.preventDefault();const t=e.currentTarget,n=t.id;await x(n,t)})}),b.forEach(e=>{e.addEventListener("click",async e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-target"),n=document.getElementById(t);await x(t,n??void 0)})}),A.addEventListener("change",async()=>{var e;kp.size>0&&await ch(),!1===(null==(e=document.querySelector(".product-recommendations-container"))?void 0:e.classList.contains("hidden"))&&await hh()}),c.addEventListener("click",()=>{Sp&&f(),h(!gp)}),d.addEventListener("click",()=>{f(),eh()}),S.addEventListener("click",ch),w.addEventListener("click",wh),E.addEventListener("click",Eh),null==(e=document.getElementById("nav-param-input"))||e.click();const P=document.getElementById("chatbot-react-root");if(P)try{Jd.createRoot(P).render(wr.createElement(Nd))}catch(I){}Np()}(),setTimeout(()=>{pp&&pp.invalidateSize()},200),setTimeout(()=>{pp&&pp.invalidateSize()},500))}function up(){const e=document.getElementById("auth-form"),t=document.getElementById("password-input"),n=document.getElementById("auth-error"),r=document.getElementById("auth-submit");e&&t&&n&&r&&(e.addEventListener("submit",e=>{e.preventDefault(),cp(t.value)}),t.addEventListener("keypress",e=>{"Enter"===e.key&&(e.preventDefault(),cp(t.value))}),t.addEventListener("input",()=>{!function(){const e=document.getElementById("auth-error");e&&(e.style.display="none")}()}),t.focus())}function cp(e){const t=document.getElementById("auth-error"),n=document.getElementById("auth-submit"),r=document.getElementById("password-input");t&&n&&r&&(n.style.opacity="0.7",n.style.pointerEvents="none",r.disabled=!0,setTimeout(()=>{"1919"===e?(sessionStorage.setItem(ap,"true"),n.innerHTML='<i class="fas fa-check"></i> Erfolgreich!',n.style.background="linear-gradient(45deg, #10b981, #059669)",setTimeout(()=>{lp()},800)):(!function(){const e=document.getElementById("auth-error");e&&(e.style.display="flex",setTimeout(()=>{e.style.display="none"},3e3))}(),n.style.opacity="1",n.style.pointerEvents="auto",r.disabled=!1,r.value="",r.focus(),n.innerHTML='<i class="fas fa-sign-in-alt"></i> Anmelden')},500))}function dp(){sessionStorage.removeItem(ap),sp(),up()}let pp,hp;window.logout=dp;let fp=null,mp=null,gp=!1,yp=[],vp=[],bp=null,Sp=null,wp=null,Ep=new Map,kp=new Map,Tp=null,Cp=null,Ap=null,xp=null,Pp=null,Ip=null,_p=[],Op=[],Lp="de",Mp={};const Dp={de:{header:{planning:"Planung",manufacturer:"Hersteller"},nav:{paramInput:"Parameter",markingArea:"Sicherheitsbereich",threatAnalysis:"Gefahrenanalyse",riskReport:"Risikobericht",productSelection:"Produktauswahl",projectDescription:"Ausschreibung",publishProject:"Projektausschreibung veröffentlichen"},aria:{search:"Suche",email:"E-Mail",settings:"Einstellungen"},user:{loggedIn:"Angemeldet: BarricadiX Admin"},sidebar:{osmLimits:{title:"OSM Geschwindigkeitsbegrenzungen",maxspeed:"Tempolimits aus OSM anwenden (empfohlen)",trafficCalming:"Verkehrsberuhiger bremsen Fahrzeuge",weather:"Wetter",weatherOptions:{dry:"trocken",wet:"nass",snow:"Schnee",ice:"Eis"},surface:"Belag berücksichtigen (OSM surface)"},trafficData:"Verkehrsdaten",vehicleSelect:"Fahrzeugauswahl",accessRoads:"Zufahrten",curbs:"Bordsteinkanten",obstacles:"Hindernisse",protectionSelection:"Schutzauswahl",protectionPeriod:"Schutzzeitraum",protectionProducts:"Schutzprodukte",productProperty:"Produkteigenschaft",riskAssessment:"Risikobewertung",assetToProtect:"Was geschützt werden soll",securityRisk:"Sicherheitsrisiko",recommendedProductClass:"Empfohlene Produktklasse",low:"niedrig",high:"hoch",options:{vehicle:{all:"alle",motorcycle:"Motorrad",car_light:"KFZ <3.5t",truck_light:"LKW <7.5t",truck_medium:"LKW <12t",truck_heavy:"LKW <40t"},access:{all:"alle",meadow:"Wiese",forest_path:"Waldweg",pedestrian_path:"Fußgängerweg",one_way:"Einbahnstraße",two_lane:"Zweispur",three_lane:"Dreispur",four_lane:"Vierspur"},curbs:{yes:"ja",no:"nein"},obstacles:{none:"keine",trees:"Bäume",posts:"Pfosten",bins:"Mülltonnen"},period:{permanent:"dauerhaft",temporary:"temporär",eventual:"eventuell"},products:{bollard:"Poller",barrier:"Barriere",post:"Pfosten",ditch:"Graben"},property:{automatic_rigid:"aut./starr",retractable:"versenkbar",removable:"entfernbar"}}},products:{resistanceMedium:"Widerstandsmedium",resistanceHigh:"Hoher Widerstand",resistanceLow:"Niedriger Widerstand",contactAdvice:"Kontaktempfehlung",requiredSpeed:"Erforderliche Geschwindigkeit",noSuitableProduct:"Kein passendes Produkt in der Datenbank gefunden. Bitte kontaktieren Sie einen zertifizierten Sicherheitsberater",pinned:"Angepinnt",clickToPin:"Klicken zum Anpinnen"},ai:{reportPrompt:"Du bist ein Spezialist für physischen Zufahrtsschutz und erstellst einen Sicherheitsbericht für den Schutz vor Fahrzeugangriffen und unbefugtem Eindringen mit Kraftfahrzeugen (Vehicle Security Barriers / Hostile Vehicle Mitigation). Der Fokus liegt auf dem physischen Schutz von Gebäuden, Plätzen und Infrastruktur vor Terroranschlägen mit Fahrzeugen, Amokfahrten oder Unfällen. WICHTIG: Dies ist KEIN Cybersecurity-Bericht! Generiere ein JSON-Objekt mit sechs Schlüsseln: 'purpose', 'threatAnalysis', 'vulnerabilities', 'hvmMeasures', 'siteConsiderations', 'operationalImpact'. Die Sprache des Inhalts muss {language} sein. Fokussiere ausschließlich auf: Fahrzeugbarrieren, Poller, physische Sperren, Fahrzeuganprallschutz, Rammangriffe, Teststandards wie PAS 68 oder IWA 14, Geschwindigkeiten, Fahrzeugmassen, Anprallwinkel, Eindringtiefen. Erwähne NIEMALS: Malware, Cyberangriffe, Netzwerksicherheit, Software, IT-Systeme.",chatbot:{title:"Zufahrtsschutz-Assistent",welcome:"Willkommen zum Zufahrtsschutz-Assistenten. Ich stelle nur Fragen, die noch fehlen oder unsicher sind. Bereit?",assetQuestion:"Welche Schutzgüter möchten Sie absichern?",assetOptions:"Menschenmenge,Gebäude,KRITIS-Prozess,Veranstaltungsfläche",assetPlaceholder:"z. B. Menschenmenge, Bühne",assetQuestionInfo:"Grundlage für Schutzziel & Schutzklasse (DIN SPEC 91414-2 / ISO 22343-2)",inputPlaceholder:"Antwort eingeben...",sendButton:"Senden",stakeholderQuestion:"Wer sind die relevanten Stakeholder (Behörden, Veranstalter, Betreiber)?",stakeholderOptions:"Behörden,Veranstalter,Betreiber",restRiskQuestion:"Welches akzeptable Restrisiko gilt?",restRiskOptions:"niedrig,mittel,hoch",restRiskQuestionInfo:"Steuert Schutzklasse/Sicherungsgrad (DIN SPEC 91414-2)",operationalQuestion:"Betriebsanforderungen (mehrfach wählbar)",operationalOptions:"Feuerwehrzufahrt,Fluchtwege,Verkehrssicherheit,Betriebssicherheit",threatQuestion:"Welche Art fahrzeuggestützter Bedrohung ist zu erwarten?",threatOptions:"intentional,unbeabsichtigt,beides",vehicleTypesQuestion:"Welche Fahrzeugtypen sind relevant?",vehicleOptions:"PKW,Transporter,LKW,Bus",accessCorridorsQuestion:"Wo könnten Fahrzeuge eindringen? (Karte markieren oder beschreiben)",accessCorridorsPlaceholder:"Polyline/Polygon auswählen oder kurz beschreiben",speedQuestion:"Maximale Zufahrtsgeschwindigkeit (km/h)",speedQuestionInfo:"Pflichtparameter für FSB-Performance (ISO 22343-2/-1)",angleQuestion:"Wahrscheinlicher Anprallwinkel (°)",angleQuestionInfo:"Pflichtparameter für FSB-Performance (ISO 22343-2/-1)",groundQuestion:"Untergrund/Fundamente am Standort",groundOptions:"Asphalt,Beton,Pflaster,Erde,Unbekannt",riskMatrixQuestion:"Risikobewertung: Eintrittswahrscheinlichkeit & Schadensausmaß",riskMatrixOptions:"EW:niedrig|SA:gering,EW:niedrig|SA:mittel,EW:mittel|SA:mittel,EW:hoch|SA:schwer",riskMatrixQuestionInfo:"Erzeugt Sicherungsgrad & Schutzklasse (DIN SPEC 91414-2)",infoPrefix:"Hinweis: ",completionMessage:"Danke! Alle erforderlichen Angaben sind vorhanden. Möchten Sie den normkonformen PDF-Plan erzeugen?"},error:"Fehler bei der KI-Analyse",retry:"Erneut versuchen",loading:"KI-Analyse wird erstellt...",timeout:"Zeitüberschreitung bei der Analyse",networkError:"Netzwerkfehler bei der KI-Analyse",serviceUnavailable:"KI-Service vorübergehend nicht verfügbar"},manufacturer:{title:"Herstelleransicht",subtitle:"Verwalten Sie Ihren Produktkatalog und Kundenanfragen",products:"Produkte",quotations:"Angebote",customers:"Kunden",analytics:"Analysen",manageCatalog:"Verwalten Sie Ihren Produktkatalog",createQuotations:"Erstellen und verwalten Sie Angebote",manageContacts:"Verwalten Sie Ihre Kundenkontakte",businessAnalytics:"Betriebs- und Verkaufsanalysen",open:"Öffnen",nav:{products:"Produkte",quotations:"Angebote",customers:"Kunden",analytics:"Analysen",settings:"Einstellungen"},sidebar:{productManagement:"Produktverwaltung",productCategory:"Produktkategorie",productStatus:"Produktstatus",customerManagement:"Kundenverwaltung",customerType:"Kundentyp",customerRegion:"Region",analytics:"Analysen",dateRange:"Zeitraum",options:{category:{all:"Alle Kategorien",bollards:"Poller",barriers:"Barrieren",posts:"Pfosten",ditches:"Gräben"},status:{all:"Alle Status",active:"Aktiv",inactive:"Inaktiv",draft:"Entwurf"},customerType:{all:"Alle Typen",private:"Privat",business:"Geschäft",government:"Behörde"},region:{all:"Alle Regionen",north:"Nord",south:"Süd",east:"Ost",west:"West"},dateRange:{"7days":"Letzte 7 Tage","30days":"Letzte 30 Tage","90days":"Letzte 90 Tage","1year":"Letztes Jahr"},manufacturer:{all:"Alle Hersteller"},standard:{all:"Alle Standards"},vehicleType:{all:"Alle Fahrzeugtypen"}},productDatabase:{title:"Produktdatenbank",subtitle:"Technische Daten und Spezifikationen aller verfügbaren Produkte",search:"Produktsuche",searchPlaceholder:"Produktname, Hersteller, Standard oder Fahrzeugtyp eingeben...",filterBy:"Filtern nach",manufacturer:"Hersteller",type:"Typ",standard:"Standard",vehicleWeight:"Fahrzeuggewicht (kg)",vehicleType:"Fahrzeugtyp",speed:"Geschwindigkeit (km/h)",impactAngle:"Anprallwinkel (°)",penetration:"Penetration (m)",debrisDistance:"Trümmerdistanz (m)",actions:"Aktionen",noProducts:"Keine Produkte gefunden",loading:"Produkte werden geladen...",technicalSpecs:"Technische Spezifikationen",performanceData:"Leistungsdaten",certification:"Zertifizierung",certificationStandard:"Zertifizierungsstandard",testConditions:"Testbedingungen",atSpeed:"bei",viewDetails:"Details anzeigen",closeDetails:"Schließen",exportData:"Daten exportieren",printSpecs:"Spezifikationen drucken",modal:{title:"Produktdetails",technicalSpecs:"Technische Spezifikationen",performanceData:"Leistungsdaten",certification:"Zertifizierung",exportData:"Daten exportieren",printSpecs:"Spezifikationen drucken"},toggleToGrid:"Kachelansicht",toggleToTable:"Tabellenansicht",table:{manufacturer:"Hersteller",type:"Typ",standard:"Standard",vehicleWeight:"Fahrzeuggewicht (kg)",vehicleType:"Fahrzeugtyp",speed:"Geschwindigkeit (km/h)",impactAngle:"Anprallwinkel (°)",penetration:"Penetration (m)",debrisDistance:"Trümmerdistanz (m)",actions:"Aktionen"}}}},tooltips:{securityRisk:"Informationen zum Sicherheitsrisiko.",productClass:"Informationen zur empfohlenen Produktklasse."},report:{mainTitle:"Risikobewertung für Zufahrtsschutz",watermark:"VERTRAULICH",undefinedAsset:"Nicht definiertes Schutzgut",undefinedValue:"Nicht definierter Wert",noThreatAnalysis:"Keine Gefahrenanalyse verfügbar",generating:"Bericht wird generiert...",status:{draft:"Entwurf",final:"Final",approved:"Genehmigt"},metadata:{date:"Datum",author:"Autor",version:"Version",classification:"Klassifizierung"},sections:{purpose:{title:"Zweck und Zielsetzung",description:"Dieser Bericht dient der Bewertung der Sicherheitsrisiken für die zu schützenden Zufahrten und der Empfehlung geeigneter Schutzmaßnahmen."},threatAnalysis:{title:"Gefahrenanalyse",description:"Analyse der identifizierten Bedrohungen und deren potenzielle Auswirkungen."},riskAssessment:{title:"Risikobewertung",description:"Bewertung der identifizierten Risiken und deren Klassifizierung."},recommendations:{title:"Empfehlungen",description:"Konkrete Handlungsempfehlungen für die Implementierung von Schutzmaßnahmen."},vulnerabilities:{title:"Schwachstellenanalyse",description:"Identifizierung und Bewertung von Sicherheitsschwachstellen."},hvmMeasures:{title:"HVM-Schutzmaßnahmen",description:"Spezifische Schutzmaßnahmen gegen High-Velocity Missile Angriffe."},siteConsiderations:{title:"Standortbetrachtungen",description:"Besondere Aspekte des Standorts und der Umgebung."},operationalImpact:{title:"Betriebliche Auswirkungen",description:"Auswirkungen der Schutzmaßnahmen auf den laufenden Betrieb."}},threatsTable:{title:"Identifizierte Bedrohungen",street:"Straße",distance:"Strecke",maxSpeed:"Max. erreichbare Geschw."},identifiedCorridors:"{count} identifizierte Korridore",noChatGeometry:"keine Geometrie aus Chatbot übergeben",actions:{save:"Speichern",print:"Drucken",export:"Exportieren",share:"Teilen"},generation:{failed:"Berichterstellung fehlgeschlagen",networkError:"Netzwerkfehler bei der Berichterstellung",retry:"Bericht erneut generieren",loading:"Bericht wird erstellt..."},ai:{error:"Fehler bei der KI-Berichterstellung",loading:"KI-Bericht wird generiert...",timeout:"Zeitüberschreitung bei der KI-Berichterstellung"}},threats:{title:"Gefahrenanalyse",speed:"Geschwindigkeit",analysisFailed:"Gefahrenanalyse fehlgeschlagen",noCrossingWaysBoundary:"Keine kreuzenden Wege an der Grenze gefunden",popupHeader:"Gefahreninformationen",loading:"Lade Gefahrenanalyse...",minimize:"Minimieren",maximize:"Maximieren",close:"Schließen"},map:{createReport:"Bericht erstellen",downloadReport:"Bericht herunterladen",searchPlaceholder:"Paderborn, Domplatz",searchButton:"Suchen",setWaypoints:"Wegpunkte setzen",setWaypointsActive:"Zeichnen aktiv",reset:"Zurücksetzen",securityAreaLabel:"Sicherheitsbereich",analyzeAccess:"Zugang analysieren"},placeholders:{assetToProtect:"Bitte eintragen"},alerts:{noPolygon:"Bitte zeichnen Sie zuerst einen Sicherheitsbereich auf der Karte.",overpassError:"Fehler beim Laden der Straßendaten (Status: {status}).",analysisError:"Fehler bei der Gefahrenanalyse. Bitte versuchen Sie es erneut.",invalidPolygon:"Ungültiges Polygon. Bitte zeichnen Sie den Sicherheitsbereich neu.",emptyPolygon:"Das gezeichnete Polygon hat keine gültigen Koordinaten.",polygonCoordinateError:"Fehler beim Verarbeiten der Polygon-Koordinaten.",locationNotFound:"Standort nicht gefunden. Bitte überprüfen Sie die Eingabe.",noThreatsFound:"Keine Bedrohungen in diesem Bereich gefunden.",reportGenerationError:"Fehler beim Erstellen des Berichts. Bitte versuchen Sie es erneut."}},en:{header:{planning:"Planning",manufacturer:"Manufacturer"},nav:{paramInput:"Parameters",markingArea:"Security Area",threatAnalysis:"Threat Analysis",riskReport:"Risk Report",productSelection:"Product Selection",projectDescription:"Specification",publishProject:"Publish Project Specification"},aria:{search:"Search",email:"Email",settings:"Settings"},user:{loggedIn:"Logged in: BarricadiX Admin"},sidebar:{osmLimits:{title:"OSM Speed Limits",maxspeed:"Apply OSM speed limits (recommended)",trafficCalming:"Traffic calming slows vehicles",weather:"Weather",weatherOptions:{dry:"dry",wet:"wet",snow:"snow",ice:"ice"},surface:"Consider surface (OSM surface)"},trafficData:"Traffic Data",vehicleSelect:"Vehicle Selection",accessRoads:"Access Roads",curbs:"Curbs",obstacles:"Obstacles",protectionSelection:"Protection Selection",protectionPeriod:"Protection Period",protectionProducts:"Protection Products",productProperty:"Product Property",riskAssessment:"Risk Assessment",assetToProtect:"What to Protect",securityRisk:"Security Risk",recommendedProductClass:"Recommended Product Class",low:"low",high:"high",options:{vehicle:{all:"all",motorcycle:"Motorcycle",car_light:"Car <3.5t",truck_light:"Truck <7.5t",truck_medium:"Truck <12t",truck_heavy:"Truck <40t"},access:{all:"all",meadow:"Meadow",forest_path:"Forest Path",pedestrian_path:"Pedestrian Path",one_way:"One Way",two_lane:"Two Lane",three_lane:"Three Lane",four_lane:"Four Lane"},curbs:{yes:"yes",no:"no"},obstacles:{none:"none",trees:"Trees",posts:"Posts",bins:"Bins"},period:{permanent:"permanent",temporary:"temporary",eventual:"eventual"},products:{bollard:"Bollard",barrier:"Barrier",post:"Post",ditch:"Ditch"},property:{automatic_rigid:"auto/rigid",retractable:"retractable",removable:"removable"}}},products:{resistanceMedium:"Resistance Medium",resistanceHigh:"High Resistance",resistanceLow:"Low Resistance",contactAdvice:"Contact Recommendation",requiredSpeed:"Required Speed",noSuitableProduct:"No suitable product found in database. Please contact a certified security consultant",pinned:"Pinned",clickToPin:"Click to pin"},ai:{reportPrompt:"You are a specialist for physical vehicle access protection creating a security report for protection against vehicle attacks and unauthorized vehicle intrusion (Vehicle Security Barriers / Hostile Vehicle Mitigation). The focus is on physical protection of buildings, squares and infrastructure against vehicle terrorist attacks, rampage attacks or accidents. IMPORTANT: This is NOT a cybersecurity report! Generate a JSON object with six keys: 'purpose', 'threatAnalysis', 'vulnerabilities', 'hvmMeasures', 'siteConsiderations', 'operationalImpact'. The content's language must be {language}. Focus exclusively on: vehicle barriers, bollards, physical barriers, vehicle impact protection, ram attacks, test standards like PAS 68 or IWA 14, speeds, vehicle masses, impact angles, penetration depths. NEVER mention: malware, cyber attacks, network security, software, IT systems.",chatbot:{title:"Access Protection Assistant",welcome:"Welcome to the Access Protection Assistant. I only ask questions that are still missing or uncertain. Ready?",assetQuestion:"Which protective assets would you like to secure?",assetOptions:"Crowd,Building,KRITIS Process,Event Area",assetPlaceholder:"e.g. Crowd, Stage",assetQuestionInfo:"Basis for Protection Goal & Protection Class (DIN SPEC 91414-2 / ISO 22343-2)",inputPlaceholder:"Enter answer...",sendButton:"Send",stakeholderQuestion:"Who are the relevant stakeholders (authorities, organizers, operators)?",stakeholderOptions:"Authorities,Organizers,Operators",restRiskQuestion:"What acceptable residual risk applies?",restRiskOptions:"low,medium,high",restRiskQuestionInfo:"Controls protection class/security level (DIN SPEC 91414-2)",operationalQuestion:"Operational requirements (multiple choice)",operationalOptions:"Fire brigade access,Escape routes,Traffic safety,Operational safety",threatQuestion:"What type of vehicle-based threat is expected?",threatOptions:"intentional,unintentional,both",vehicleTypesQuestion:"Which vehicle types are relevant?",vehicleOptions:"Car,Van,Truck,Bus",accessCorridorsQuestion:"Where could vehicles penetrate? (Mark on map or describe)",accessCorridorsPlaceholder:"Select polyline/polygon or describe briefly",speedQuestion:"Maximum access speed (km/h)",speedQuestionInfo:"Mandatory parameter for FSB performance (ISO 22343-2/-1)",angleQuestion:"Probable impact angle (°)",angleQuestionInfo:"Mandatory parameter for FSB performance (ISO 22343-2/-1)",groundQuestion:"Ground/foundations at the site",groundOptions:"Asphalt,Concrete,Paving,Earth,Unknown",riskMatrixQuestion:"Risk assessment: probability of occurrence & extent of damage",riskMatrixOptions:"Prob:low|Damage:minor,Prob:low|Damage:medium,Prob:medium|Damage:medium,Prob:high|Damage:severe",riskMatrixQuestionInfo:"Generates security level & protection class (DIN SPEC 91414-2)",infoPrefix:"Note: ",completionMessage:"Thank you! All required information is available. Would you like to generate the standards-compliant PDF plan?"},error:"Error in AI analysis",retry:"Try again",loading:"AI analysis is being created...",timeout:"Analysis timeout",networkError:"Network error in AI analysis",serviceUnavailable:"AI service temporarily unavailable"},manufacturer:{title:"Manufacturer View",subtitle:"Manage your product catalog and customer inquiries",products:"Products",quotations:"Quotations",customers:"Customers",analytics:"Analytics",manageCatalog:"Manage your product catalog",createQuotations:"Create and manage quotations",manageContacts:"Manage your customer contacts",businessAnalytics:"Business and sales analytics",open:"Open",nav:{products:"Products",quotations:"Quotations",customers:"Customers",analytics:"Analytics",settings:"Settings"},sidebar:{productManagement:"Product Management",productCategory:"Product Category",productStatus:"Product Status",customerManagement:"Customer Management",customerType:"Customer Type",customerRegion:"Region",analytics:"Analytics",dateRange:"Date Range",options:{category:{all:"All Categories",bollards:"Bollards",barriers:"Barriers",posts:"Posts",ditches:"Ditches"},status:{all:"All Status",active:"Active",inactive:"Inactive",draft:"Draft"},customerType:{all:"All Types",private:"Private",business:"Business",government:"Government"},region:{all:"All Regions",north:"North",south:"South",east:"East",west:"West"},dateRange:{"7days":"Last 7 Days","30days":"Last 30 Days","90days":"Last 90 Days","1year":"Last Year"},manufacturer:{all:"All Manufacturers"},standard:{all:"All Standards"},vehicleType:{all:"All Vehicle Types"}},productDatabase:{title:"Product Database",subtitle:"Technical data and specifications of all available products",search:"Product Search",searchPlaceholder:"Enter product name, manufacturer, standard or vehicle type...",filterBy:"Filter by",manufacturer:"Manufacturer",type:"Type",standard:"Standard",vehicleWeight:"Vehicle Weight (kg)",vehicleType:"Vehicle Type",speed:"Speed (km/h)",impactAngle:"Impact Angle (°)",penetration:"Penetration (m)",debrisDistance:"Debris Distance (m)",actions:"Actions",noProducts:"No products found",loading:"Loading products...",technicalSpecs:"Technical Specifications",performanceData:"Performance Data",certification:"Certification",certificationStandard:"Certification Standard",testConditions:"Test Conditions",atSpeed:"at",viewDetails:"View Details",closeDetails:"Close",exportData:"Export Data",printSpecs:"Print Specifications",modal:{title:"Product Details",technicalSpecs:"Technical Specifications",performanceData:"Performance Data",certification:"Certification",exportData:"Export Data",printSpecs:"Print Specifications"},toggleToGrid:"Grid View",toggleToTable:"Table View",table:{manufacturer:"Manufacturer",type:"Type",standard:"Standard",vehicleWeight:"Vehicle Weight (kg)",vehicleType:"Vehicle Type",speed:"Speed (km/h)",impactAngle:"Impact Angle (°)",penetration:"Penetration (m)",debrisDistance:"Debris Distance (m)",actions:"Actions"}}}},tooltips:{securityRisk:"Information about security risk.",productClass:"Information about recommended product class."},report:{mainTitle:"Risk Assessment for Access Protection",watermark:"CONFIDENTIAL",undefinedAsset:"Undefined asset",undefinedValue:"Undefined value",noThreatAnalysis:"No threat analysis available",generating:"Generating report...",identifiedCorridors:"{count} identified corridors",noChatGeometry:"no geometry from chatbot",status:{draft:"Draft",final:"Final",approved:"Approved"},metadata:{date:"Date",author:"Author",version:"Version",classification:"Classification"},sections:{purpose:{title:"Purpose and Objectives",description:"This report serves to assess security risks for the access routes to be protected and to recommend appropriate protective measures."},threatAnalysis:{title:"Threat Analysis",description:"Analysis of identified threats and their potential impacts."},riskAssessment:{title:"Risk Assessment",description:"Assessment of identified risks and their classification."},recommendations:{title:"Recommendations",description:"Concrete action recommendations for implementing protective measures."},vulnerabilities:{title:"Vulnerability Analysis",description:"Identification and assessment of security vulnerabilities."},hvmMeasures:{title:"HVM Protection Measures",description:"Specific protection measures against High-Velocity Missile attacks."},siteConsiderations:{title:"Site Considerations",description:"Special aspects of the site and environment."},operationalImpact:{title:"Operational Impact",description:"Impact of protection measures on ongoing operations."}},threatsTable:{title:"Identified Threats",street:"Street",distance:"Distance",maxSpeed:"Max. achievable speed"},actions:{save:"Save",print:"Print",export:"Export",share:"Share"},generation:{failed:"Report generation failed",networkError:"Network error in report generation",retry:"Generate report again",loading:"Report is being created..."},ai:{error:"Error in AI report generation",loading:"AI report is being generated...",timeout:"Timeout in AI report generation"}},threats:{title:"Threat Analysis",speed:"Speed",analysisFailed:"Threat analysis failed",noCrossingWaysBoundary:"No crossing ways found at boundary",popupHeader:"Threat Information",loading:"Loading threat analysis...",minimize:"Minimize",maximize:"Maximize",close:"Close"},map:{createReport:"Create Report",downloadReport:"Download Report",searchPlaceholder:"Paderborn, Domplatz",searchButton:"Search",setWaypoints:"Set Waypoints",setWaypointsActive:"Drawing Active",reset:"Reset",securityAreaLabel:"Security Area",analyzeAccess:"Analyze Access"},placeholders:{assetToProtect:"Please enter"}}};function Np(){setTimeout(()=>{const e=document.getElementById("planning-view-btn"),t=document.getElementById("manufacturer-view-btn");e&&t&&(e.addEventListener("click",()=>{!function(){const e=document.getElementById("planning-view-btn"),t=document.getElementById("manufacturer-view-btn");e&&t&&(e.classList.add("active"),t.classList.remove("active"));!function(){vh();const e=document.getElementById("manufacturer-view");e&&(e.style.display="none");const t=document.getElementById("planning-view");t&&(t.style.display="block");["map","map-area","sidebar","map-tabs","map-toolbar","chatbot-react-root"].forEach(e=>{const t=document.getElementById(e);t&&(t.classList.remove("view-hidden"),t.style.display="block",t.style.visibility="visible",t.style.opacity="1")}),pp&&(pp.remove(),pp=null);if(setTimeout(()=>{if(Zp(),window.savedMapState){const e=window.savedMapState;pp&&(pp.setView(e.center,e.zoom),pp.invalidateSize(),setTimeout(()=>null==pp?void 0:pp.invalidateSize(),100),setTimeout(()=>null==pp?void 0:pp.invalidateSize(),300))}},100),window.savedChatbotState&&window.savedChatbotState.open){const e=document.querySelector('#chatbot-react-root [aria-label="Zufahrtsschutz-Assistent öffnen"]');e&&e.click()}Wp("Planungs-Ansicht aktiviert - Map neu initialisiert","success")}()}()}),t.addEventListener("click",()=>{!function(){const e=document.getElementById("planning-view-btn"),t=document.getElementById("manufacturer-view-btn");e&&t&&(t.classList.add("active"),e.classList.remove("active"));(function(){vh(),pp&&(window.savedMapState={center:pp.getCenter(),zoom:pp.getZoom(),waypoints:yp,drawnPolygon:Sp?Sp.getLatLngs()[0]:null,waypointMarkers:vp.length>0,pathLine:null!==bp});const e=document.querySelector('#chatbot-react-root aside[aria-label="Zufahrtsschutz-Assistent Panel"]');window.savedChatbotState={open:e&&!e.classList.contains("hidden")};const t=document.getElementById("planning-view");t&&(t.style.display="none");const n=document.getElementById("manufacturer-view");n&&(n.style.display="block",n.style.position="relative",n.style.width="100%",n.style.height="100%",n.style.zIndex="auto",n.style.backgroundColor="transparent");const r=document.querySelector(".sidebar");r&&(r.style.display="none");const i=document.getElementById("map-area");i&&(i.style.display="none",i.style.visibility="hidden",i.style.opacity="0",i.classList.add("view-hidden"));const o=document.getElementById("map");o&&(o.style.display="none",o.style.visibility="hidden",o.style.opacity="0",o.classList.add("view-hidden"));const a=document.getElementById("map-tabs"),s=document.getElementById("map-toolbar");a&&(a.style.display="none",a.classList.add("view-hidden"));s&&(s.style.display="none",s.classList.add("view-hidden"));setTimeout(()=>{Qp()},50),Wp("Hersteller-Ansicht aktiviert","success")})(),setTimeout(()=>{Rp()},100)}()}));const n=document.querySelectorAll(".manufacturer-tab");n.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();const t=e.target;n.forEach(e=>e.classList.remove("active")),t.classList.add("active");t.id;Wp(`${t.textContent||"Tab"} wird geladen...`,"info")})}),setTimeout(()=>{Rp()},500)},100)}function Rp(){$p(),async function(){const e=document.getElementById("products-loading");e&&(e.style.display="block");try{const t=await fetch("/Barricadix_MWP/product-database.json",{cache:"no-cache"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();window.productDatabase=n,function(e){const t=document.getElementById("manufacturer-filter");if(t){[...new Set(e.map(e=>e.manufacturer).filter(Boolean))].forEach(e=>{const n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)})}const n=document.getElementById("standard-filter");if(n){[...new Set(e.map(e=>{var t;return null==(t=e.technical_data)?void 0:t.standard}).filter(Boolean))].forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)})}const r=document.getElementById("vehicle-type-filter");if(r){[...new Set(e.map(e=>{var t;return null==(t=e.technical_data)?void 0:t.material}).filter(Boolean))].forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,r.appendChild(t)})}}(n),await zp(n),e&&(e.style.display="none"),$p(),setTimeout(()=>{document.getElementById("toggle-view-btn")&&Up("grid")},100)}catch(t){Wp("Fehler beim Laden der Produktdatenbank","error");const e=document.getElementById("no-products");e&&(e.style.display="block",e.textContent="Fehler beim Laden der Produktdatenbank")}}(),function(){const e=document.getElementById("product-search"),t=document.getElementById("search-btn"),n=document.getElementById("manufacturer-filter"),r=document.getElementById("standard-filter"),i=document.getElementById("vehicle-type-filter");e&&e.addEventListener("input",jp);t&&t.addEventListener("click",jp);n&&n.addEventListener("change",jp);r&&r.addEventListener("change",jp);i&&i.addEventListener("change",jp);const o=document.getElementById("speed-filter");o&&o.addEventListener("change",jp);!function(){const e=document.getElementById("toggle-view-btn");if(!e)return;e.addEventListener("click",Vp),Up("grid")}()}(),function(){const e=document.getElementById("close-modal"),t=document.getElementById("export-product"),n=document.getElementById("print-product");e&&e.addEventListener("click",()=>{const e=document.getElementById("product-modal");e&&(e.style.display="none",e.currentProductIndex=void 0)});t&&t.addEventListener("click",Hp);n&&n.addEventListener("click",Gp);const r=document.getElementById("product-modal");r&&r.addEventListener("click",e=>{e.target===r&&(r.style.display="none",r.currentProductIndex=void 0)})}()}async function zp(e){document.getElementById("products-tbody"),document.getElementById("products-grid");!function(e){const t=document.getElementById("products-tbody");if(!t)return;if(t.innerHTML="",0===e.length){const e=document.getElementById("no-products");return void(e&&(e.style.display="block"))}const n=document.getElementById("no-products");n&&(n.style.display="none");const r=Bp(e);r.forEach((e,n)=>{var r,i,o,a,s,l,u;const c=document.createElement("tr"),d=e.product_type_confidence||0,p=d>=.9?"🟢":d>=.7?"🟡":d>=.5?"🟠":"🔴";c.innerHTML=`\n            <td>${e.manufacturer||"N/A"}</td>\n            <td>${e.product_name||"N/A"}</td>\n            <td><span title="Produkttyp: ${e.product_type||"N/A"}">${e.product_type||"N/A"}</span></td>\n            <td><span title="Cluster: ${e.product_cluster||"N/A"}">${e.product_cluster||"N/A"}</span></td>\n            <td><span title="Vertrauen: ${(100*d).toFixed(0)}%">${p} ${(100*d).toFixed(0)}%</span></td>\n            <td>${(null==(r=e.technical_data)?void 0:r.standard)||"N/A"}</td>\n            <td>${(null==(i=e.technical_data)?void 0:i.pr_mass_kg)||"N/A"}</td>\n            <td>${(null==(o=e.technical_data)?void 0:o.pr_veh)||"N/A"}</td>\n            <td>${(null==(a=e.technical_data)?void 0:a.pr_speed_kph)||"N/A"}</td>\n            <td>${(null==(s=e.technical_data)?void 0:s.pr_angle_deg)||"N/A"}</td>\n            <td>${(null==(l=e.technical_data)?void 0:l.pr_pen_m)||"N/A"}</td>\n            <td>${(null==(u=e.technical_data)?void 0:u.pr_debris_m)||"N/A"}</td>\n            <td>\n                <button class="view-details-btn" data-product-index="${n}">\n                    ${Yp("manufacturer.sidebar.productDatabase.viewDetails")}\n                </button>\n            </td>\n        `,t.appendChild(c)});t.querySelectorAll(".view-details-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.target,n=parseInt(t.getAttribute("data-product-index")||"0"),i=r[n],o=(window.productDatabase||[]).findIndex(e=>e.manufacturer===i.manufacturer&&e.product_name===i.product_name);qp(o>=0?o:n)})})}(e),await async function(e){const t=document.getElementById("products-grid");if(!t)return;if(t.innerHTML="",0===e.length){const e=document.getElementById("no-products-grid");return void(e&&(e.style.display="block"))}const n=document.getElementById("no-products-grid");n&&(n.style.display="none");const r=Bp(e),i=await async function(e){const t=await Promise.all(e.map(async e=>{const t=Fp(e),n=await function(e){return new Promise(t=>{const n=new Image,r=setTimeout(()=>{t(!1)},1500);n.onload=()=>{clearTimeout(r),t(!0)},n.onerror=()=>{clearTimeout(r),t(!1)},n.loading="lazy",n.decoding="async",n.src=e,setTimeout(()=>{t(!1)},2e3)})}(t),r=e.product_image_file&&null!==e.product_image_file&&""!==e.product_image_file.trim();return{...e,hasRealImage:n,hasDatabaseFilename:r}})),n=t.sort((e,t)=>!e.hasDatabaseFilename||!e.hasRealImage||t.hasDatabaseFilename&&t.hasRealImage?!t.hasDatabaseFilename||!t.hasRealImage||e.hasDatabaseFilename&&e.hasRealImage?e.hasRealImage&&!t.hasRealImage?-1:!e.hasRealImage&&t.hasRealImage?1:0:1:-1),r=n.filter(e=>e.hasDatabaseFilename&&e.hasRealImage);n.filter(e=>!e.hasDatabaseFilename&&e.hasRealImage),n.filter(e=>!e.hasRealImage);return r.slice(0,5).forEach((e,t)=>{}),n}(r);i.filter(e=>e.hasRealImage),i.filter(e=>!e.hasRealImage);i.forEach((e,n)=>{var r,i,o,a,s,l;const u=document.createElement("div");u.className="product-card";const c=Fp(e),d=e.hasRealImage;d&&n<20&&(u.className="product-card product-card-priority"),u.innerHTML=`\n            <div class="product-card-image ${d?"":"no-image"}">\n                <img src="${c}" alt="${e.product_name||"Produkt"}" \n                     loading="lazy" decoding="async"\n                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"\n                     class="product-image">\n                <div class="product-image-placeholder" style="display: none;">\n                    <i class="fas fa-image"></i>\n                    <span>Kein Bild verfügbar</span>\n                </div>\n            </div>\n            <div class="product-card-content">\n                <div class="product-card-header">\n                    <div class="product-card-title">${e.product_name||"N/A"}</div>\n                    <div class="product-card-manufacturer">${e.manufacturer||"N/A"}</div>\n                </div>\n                <div class="product-card-classification">\n                    <div class="product-card-type">\n                        <span class="type-badge ${(null==(r=e.product_cluster)?void 0:r.toLowerCase())||"unknown"}">${e.product_type||"N/A"}</span>\n                        <span class="cluster-badge">${e.product_cluster||"N/A"}</span>\n                    </div>\n                    <div class="confidence-indicator">\n                        <span class="confidence-label">Vertrauen:</span>\n                        <span class="confidence-value">${e.product_type_confidence?(100*e.product_type_confidence).toFixed(0)+"%":"N/A"}</span>\n                    </div>\n                </div>\n                <div class="product-card-specs">\n                    <div class="product-card-spec">\n                        <div class="product-card-spec-label">Standard</div>\n                        <div class="product-card-spec-value">${(null==(i=e.technical_data)?void 0:i.standard)||"N/A"}</div>\n                    </div>\n                    <div class="product-card-spec highlight-speed">\n                        <div class="product-card-spec-label">Testgeschwindigkeit</div>\n                        <div class="product-card-spec-value"><strong>${(null==(o=e.technical_data)?void 0:o.pr_speed_kph)||"N/A"} km/h</strong></div>\n                    </div>\n                    <div class="product-card-spec">\n                        <div class="product-card-spec-label">Fahrzeugtyp</div>\n                        <div class="product-card-spec-value">${(null==(a=e.technical_data)?void 0:a.pr_veh)||"N/A"}</div>\n                    </div>\n                    <div class="product-card-spec">\n                        <div class="product-card-spec-label">Anprallwinkel</div>\n                        <div class="product-card-spec-value">${(null==(s=e.technical_data)?void 0:s.pr_angle_deg)||"N/A"}°</div>\n                    </div>\n                    <div class="product-card-spec">\n                        <div class="product-card-spec-label">Eindringtiefe</div>\n                        <div class="product-card-spec-value">${(null==(l=e.technical_data)?void 0:l.pr_pen_m)||"N/A"} m</div>\n                    </div>\n                </div>\n                <div class="product-card-actions">\n                    <button class="product-card-btn secondary" data-product-index="${n}">\n                        Details anzeigen\n                    </button>\n                </div>\n            </div>\n        `,t.appendChild(u)});t.querySelectorAll(".product-card").forEach(e=>{e.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("product-card-btn")){const e=parseInt(t.getAttribute("data-product-index")||"0"),n=i[e],r=(window.productDatabase||[]).findIndex(e=>e.manufacturer===n.manufacturer&&e.product_name===n.product_name);qp(r>=0?r:e)}})})}(e)}function Bp(e){return e.filter(e=>{const t=e.product_name&&""!==e.product_name.trim(),n=e.manufacturer&&""!==e.manufacturer.trim();return t&&n}).filter((e,t,n)=>{const r=`${e.manufacturer.trim()}|${e.product_name.trim()}`;return!(n.findIndex(e=>`${e.manufacturer.trim()}|${e.product_name.trim()}`===r)!==t)})}function Fp(e){if(e.product_image_file&&null!==e.product_image_file&&""!==e.product_image_file.trim()){const t=`/Barricadix_MWP/images/${e.product_image_file}`,n=new Image;return n.onload=()=>{},n.onerror=()=>{},n.src=t,t}if(!e.product_name||""===e.product_name){return"/Barricadix_MWP/images/default_product_img01.jpg"}let t=e.product_name.replace(/[^a-zA-Z0-9\s\-_]/g,"").replace(/\s+/g,"_").replace(/[_-]+/g,"_").trim();return`/Barricadix_MWP/images/${[`${t}_img01.jpg`,`${t}_img02.jpg`,`${t}_img03.jpg`,`${t}.jpg`,`${t}_01.jpg`,`${t}_02.jpg`][0]}`}function Vp(){const e=document.getElementById("toggle-view-btn");if(!e)return;Up("table"===e.getAttribute("data-view")?"grid":"table")}function Up(e){const t=document.getElementById("toggle-view-btn"),n=document.getElementById("products-table-container"),r=document.getElementById("products-grid-container");if(!t||!n||!r)return;t.setAttribute("data-view",e);const i=t.querySelector("span"),o=t.querySelector("i");if("grid"===e)n.style.display="none",r.style.display="block",i&&(i.textContent=Yp("manufacturer.sidebar.productDatabase.toggleToTable")),o&&(o.className="fas fa-table");else{n.style.display="block",r.style.display="none";const e=document.getElementById("products-table");e&&(e.style.display="table"),i&&(i.textContent=Yp("manufacturer.sidebar.productDatabase.toggleToGrid")),o&&(o.className="fas fa-th-large")}}async function jp(){var e,t,n,r,i;const o=window.productDatabase||[],a=(null==(e=document.getElementById("product-search"))?void 0:e.value.toLowerCase())||"",s=(null==(t=document.getElementById("manufacturer-filter"))?void 0:t.value)||"",l=(null==(n=document.getElementById("standard-filter"))?void 0:n.value)||"",u=(null==(r=document.getElementById("vehicle-type-filter"))?void 0:r.value)||"",c=(null==(i=document.getElementById("speed-filter"))?void 0:i.value)||"",d=o.filter(e=>{var t,n,r,i,o,d;const p=!a||(null==(t=e.manufacturer)?void 0:t.toLowerCase().includes(a))||(null==(n=e.product_name)?void 0:n.toLowerCase().includes(a))||(null==(i=null==(r=e.technical_data)?void 0:r.standard)?void 0:i.toLowerCase().includes(a)),h=!s||e.manufacturer===s,f=!l||(null==(o=e.technical_data)?void 0:o.standard)===l,m=!u||(null==(d=e.technical_data)?void 0:d.material)===u,g=!c||(()=>{var t,n;const r=parseFloat(c);let i=0;if(null==(t=e.technical_data)?void 0:t.pr_speed_kph)i=parseFloat(e.technical_data.pr_speed_kph);else if(e.speed)i=parseFloat(e.speed);else if(null==(n=e.technical_data)?void 0:n.performance_rating){const t=e.technical_data.performance_rating.split("/");if(t.length>=3){const e=t[2];i=parseFloat(e)||0}}return!isNaN(i)&&i>=r})();return p&&h&&f&&m&&g});await zp(d)}function $p(){}function qp(e){var t,n,r,i,o,a,s,l,u,c,d,p,h,f;const m=(window.productDatabase||[])[e];if(!m)return;const g=document.getElementById("modal-product-name");g&&(g.textContent=`${m.manufacturer} - ${m.product_name}`);const y=document.getElementById("modal-technical-specs");y&&(y.innerHTML=`\n            <p><strong>${Yp("manufacturer.sidebar.productDatabase.manufacturer")}:</strong> ${m.manufacturer||"N/A"}</p>\n            <p><strong>Produktname:</strong> ${m.product_name||"N/A"}</p>\n            <p><strong>${Yp("manufacturer.sidebar.productDatabase.standard")}:</strong> ${(null==(t=m.technical_data)?void 0:t.standard)||"N/A"}</p>\n            <p><strong>${Yp("manufacturer.sidebar.productDatabase.dimensions")}:</strong> ${(null==(n=m.technical_data)?void 0:n.dimensions)||"N/A"}</p>\n            <p><strong>${Yp("manufacturer.sidebar.productDatabase.material")}:</strong> ${(null==(r=m.technical_data)?void 0:r.material)||"N/A"}</p>\n        `);const v=document.getElementById("modal-performance-data");v&&(v.innerHTML=`\n            <p><strong>${Yp("manufacturer.sidebar.productDatabase.performance")}:</strong> ${(null==(i=m.technical_data)?void 0:i.performance_rating)||"N/A"}</p>\n            <p><strong>${Yp("manufacturer.sidebar.productDatabase.foundation")}:</strong> ${(null==(o=m.technical_data)?void 0:o.foundation_depth)||"N/A"}</p>\n            <p><strong>Standard getestet nach:</strong> ${(null==(a=m.technical_data)?void 0:a.standard_tested_to)||"N/A"}</p>\n            <p><strong>Download Datum:</strong> ${(null==(s=m.technical_data)?void 0:s.download_date)||"N/A"}</p>\n            <div style="margin-top: 20px; padding: 15px; background-color: #e3f2fd; border-radius: 8px;">\n                <h4 style="margin-bottom: 12px; color: #1565c0;">🏷️ Produktklassifizierung</h4>\n                <p><strong>Produkttyp:</strong> ${m.product_type||"N/A"}</p>\n                <p><strong>Cluster:</strong> ${m.product_cluster||"N/A"}</p>\n                <p><strong>Vertrauenswert:</strong> ${m.product_type_confidence?(100*m.product_type_confidence).toFixed(0)+"%":"N/A"}</p>\n                <p><strong>Erkennungsquelle:</strong> ${m.product_type_source||"N/A"}</p>\n            </div>\n            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">\n                <h4 style="margin-bottom: 12px; color: #495057;">⚡ Testparameter</h4>\n                <p><strong>Fahrzeuggewicht:</strong> ${(null==(l=m.technical_data)?void 0:l.pr_mass_kg)||"N/A"} kg</p>\n                <p><strong>Fahrzeugtyp:</strong> ${(null==(u=m.technical_data)?void 0:u.pr_veh)||"N/A"}</p>\n                <p><strong>Testgeschwindigkeit:</strong> ${(null==(c=m.technical_data)?void 0:c.pr_speed_kph)||"N/A"} km/h</p>\n                <p><strong>Anprallwinkel:</strong> ${(null==(d=m.technical_data)?void 0:d.pr_angle_deg)||"N/A"}°</p>\n                <p><strong>Eindringtiefe:</strong> ${(null==(p=m.technical_data)?void 0:p.pr_pen_m)||"N/A"} m</p>\n                <p><strong>Trümmerstreuweite:</strong> ${(null==(h=m.technical_data)?void 0:h.pr_debris_m)||"N/A"} m</p>\n            </div>\n        `);const b=document.getElementById("modal-certification");b&&(b.innerHTML=`\n            <p><strong>${Yp("manufacturer.sidebar.productDatabase.standard")}:</strong> ${(null==(f=m.technical_data)?void 0:f.standard)||"N/A"}</p>\n            <p><strong>Datenblatt URL:</strong> ${m.datasheet_url?`<a href="${m.datasheet_url}" target="_blank">${m.datasheet_url}</a>`:"N/A"}</p>\n            <p><strong>Produktbild:</strong> ${m.product_image_file||"N/A"}</p>\n        `);const S=document.getElementById("product-modal");S&&(S.style.display="flex",S.currentProductIndex=e)}function Hp(){Wp("Export-Funktionalität wird implementiert...","info")}function Gp(){Wp("Druck-Funktionalität wird implementiert...","info")}function Wp(e,t="info"){document.querySelectorAll(".custom-notification").forEach(e=>e.remove());const n=document.createElement("div");n.className=`custom-notification custom-notification-${t}`,n.innerHTML=`\n        <div class="notification-content">\n            <span class="notification-message">${e}</span>\n            <button class="notification-close">&times;</button>\n        </div>\n    `,n.style.cssText=`\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ${"info"===t?"#2563eb":"success"===t?"#22c55e":"warning"===t?"#f59e0b":"#ef4444"};\n        color: white;\n        padding: 16px 20px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        z-index: 10000;\n        max-width: 400px;\n        font-family: 'Open Sans', sans-serif;\n        font-size: 14px;\n        line-height: 1.4;\n    `,document.body.appendChild(n);const r=n.querySelector(".notification-close");r&&r.addEventListener("click",()=>n.remove()),setTimeout(()=>{n.parentNode&&n.remove()},5e3)}function Kp(e,t){return t.split(".").reduce((e,t)=>e?e[t]:void 0,e)}function Yp(e,t){Mp&&Mp[Lp]||(Mp=Dp);let n=Kp(Mp[Lp],e);if("string"!=typeof n&&(n=Kp(Dp[Lp],e),"string"!=typeof n)){const t=function(e){return{"sidebar.trafficData":"Verkehrsdaten","sidebar.vehicleSelect":"Fahrzeugauswahl","sidebar.accessRoads":"Zufahrten","sidebar.curbs":"Bordsteinkanten","sidebar.obstacles":"Hindernisse","sidebar.protectionSelection":"Schutzauswahl","sidebar.protectionPeriod":"Schutzzeitraum","sidebar.protectionProducts":"Schutzprodukte","sidebar.productProperty":"Produkteigenschaft","sidebar.riskAssessment":"Risikobewertung","sidebar.assetToProtect":"Was geschützt werden soll","sidebar.securityRisk":"Sicherheitsrisiko","sidebar.recommendedProductClass":"Empfohlene Produktklasse","sidebar.low":"niedrig","sidebar.high":"hoch","nav.paramInput":"Parameter","nav.markingArea":"Sicherheitsbereich","nav.threatAnalysis":"Gefahrenanalyse","nav.riskReport":"Risikobericht","nav.productSelection":"Produktauswahl","nav.projectDescription":"Ausschreibung","header.planning":"Planung","header.manufacturer":"Hersteller"}[e]||null}(e);return t||e}if(t)for(const r in t)n=n.replace(`{${r}}`,String(t[r]));return n}async function Qp(){if(!Mp[Lp]&&(await Jp(),!Mp[Lp]))return;document.querySelectorAll("[data-translate-key]").forEach(e=>{try{const t=e.getAttribute("data-translate-key"),n=Yp(t);if(n&&n!==t){if(e.hasAttribute("placeholder"))e.placeholder=n;else if("INPUT"===e.tagName&&"text"===e.type)e.value=n;else{const t=Array.from(e.childNodes).find(e=>{var t;return e.nodeType===Node.TEXT_NODE&&(null==(t=e.textContent)?void 0:t.trim())});t?t.textContent=n:e.textContent=n}0}else 0}catch(t){0}}),document.querySelectorAll("[data-translate-key-placeholder]").forEach(e=>{try{const t=e.getAttribute("data-translate-key-placeholder"),n=Yp(t);n&&n!==t&&(e.placeholder=n)}catch(t){0}}),document.querySelectorAll("[data-translate-key-aria]").forEach(e=>{try{const t=e.getAttribute("data-translate-key-aria"),n=Yp(t);n&&n!==t&&e.setAttribute("aria-label",n)}catch(t){0}}),document.querySelectorAll("[data-translate-key-tooltip]").forEach(e=>{try{const t=e.getAttribute("data-translate-key-tooltip"),n=Yp(t);n&&n!==t&&(e.dataset.tooltip=n)}catch(t){0}});const e=document.getElementById("toggle-draw-mode");if(e){const t=e.querySelector("span");if(t){const e=Yp(gp?"map.setWaypointsActive":"map.setWaypoints");e&&"map.setWaypointsActive"!==e&&"map.setWaypoints"!==e&&(t.textContent=e)}}!function(){const e=document.getElementById("products-grid");if(!e)return;e.querySelectorAll(".product-card").forEach(e=>{e.querySelectorAll(".product-card-spec-label, .tech-spec-item, .tech-spec-label, .spec-label").forEach(e=>{let t=e.textContent||"";t="en"===Lp?t.replace(/Fahrzeuggewicht \(kg\)/gi,Yp("manufacturer.sidebar.productDatabase.vehicleWeight")).replace(/Fahrzeugtyp/gi,Yp("manufacturer.sidebar.productDatabase.vehicleType")).replace(/Geschwindigkeit \(km\/h\)/gi,Yp("manufacturer.sidebar.productDatabase.speed")).replace(/Aufprallwinkel \(°\)/gi,Yp("manufacturer.sidebar.productDatabase.impactAngle")).replace(/Penetration \(m\)/gi,Yp("manufacturer.sidebar.productDatabase.penetration")).replace(/Trümmerentfernung \(m\)/gi,Yp("manufacturer.sidebar.productDatabase.debrisDistance")).replace(/Standard/gi,Yp("manufacturer.sidebar.productDatabase.standard")).replace(/Hersteller/gi,Yp("manufacturer.sidebar.productDatabase.manufacturer")).replace(/Typ/gi,Yp("manufacturer.sidebar.productDatabase.type")).replace(/FAHRZEUGGEWICHT \(KG\)/gi,Yp("manufacturer.sidebar.productDatabase.vehicleWeight").toUpperCase()).replace(/FAHRZEUGTYP/gi,Yp("manufacturer.sidebar.productDatabase.vehicleType").toUpperCase()).replace(/GESCHWINDIGKEIT \(KM\/H\)/gi,Yp("manufacturer.sidebar.productDatabase.speed").toUpperCase()).replace(/AUFPRALLWINKEL \(°\)/gi,Yp("manufacturer.sidebar.productDatabase.impactAngle").toUpperCase()).replace(/PENETRATION \(M\)/gi,Yp("manufacturer.sidebar.productDatabase.penetration").toUpperCase()).replace(/STANDARD/gi,Yp("manufacturer.sidebar.productDatabase.standard").toUpperCase()).replace(/HERSTELLER/gi,Yp("manufacturer.sidebar.productDatabase.manufacturer").toUpperCase()).replace(/TYP/gi,Yp("manufacturer.sidebar.productDatabase.type").toUpperCase()):t.replace(/Vehicle Weight \(kg\)/gi,"Fahrzeuggewicht (kg)").replace(/Vehicle Type/gi,"Fahrzeugtyp").replace(/Speed \(km\/h\)/gi,"Geschwindigkeit (km/h)").replace(/Impact Angle \(°\)/gi,"Aufprallwinkel (°)").replace(/Penetration \(m\)/gi,"Penetration (m)").replace(/Debris Distance \(m\)/gi,"Trümmerentfernung (m)").replace(/Standard/gi,"Standard").replace(/Manufacturer/gi,"Hersteller").replace(/Type/gi,"Typ").replace(/VEHICLE WEIGHT \(KG\)/gi,"FAHRZEUGGEWICHT (KG)").replace(/VEHICLE TYPE/gi,"FAHRZEUGTYP").replace(/SPEED \(KM\/H\)/gi,"GESCHWINDIGKEIT (KM/H)").replace(/IMPACT ANGLE \(°\)/gi,"AUFPRALLWINKEL (°)").replace(/PENETRATION \(M\)/gi,"PENETRATION (M)").replace(/STANDARD/gi,"STANDARD").replace(/MANUFACTURER/gi,"HERSTELLER").replace(/TYPE/gi,"TYP"),e.textContent=t});const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),n=[];let r;for(;r=t.nextNode();)r.nodeValue&&r.nodeValue.trim()&&n.push(r);n.forEach(e=>{let t=e.nodeValue||"";t="en"===Lp?t.replace(/FAHRZEUGGEWICHT \(KG\)/gi,"VEHICLE WEIGHT (KG)").replace(/FAHRZEUGTYP/gi,"VEHICLE TYPE").replace(/GESCHWINDIGKEIT \(KM\/H\)/gi,"SPEED (KM/H)").replace(/AUFPRALLWINKEL \(°\)/gi,"IMPACT ANGLE (°)").replace(/PENETRATION \(M\)/gi,"PENETRATION (M)").replace(/STANDARD/gi,"STANDARD").replace(/HERSTELLER/gi,"MANUFACTURER").replace(/TYP/gi,"TYPE"):t.replace(/VEHICLE WEIGHT \(KG\)/gi,"FAHRZEUGGEWICHT (KG)").replace(/VEHICLE TYPE/gi,"FAHRZEUGTYP").replace(/SPEED \(KM\/H\)/gi,"GESCHWINDIGKEIT (KM/H)").replace(/IMPACT ANGLE \(°\)/gi,"AUFPRALLWINKEL (°)").replace(/PENETRATION \(M\)/gi,"PENETRATION (M)").replace(/STANDARD/gi,"STANDARD").replace(/MANUFACTURER/gi,"HERSTELLER").replace(/TYPE/gi,"TYP"),e.nodeValue=t})})}();const t=document.getElementById("manufacturer-view");if(t&&"none"!==t.style.display){const e=window.productDatabase;e&&e.length>0&&zp(e);const t=document.getElementById("product-modal");if(t&&"block"===t.style.display){const e=t.currentProductIndex;void 0!==e&&qp(e)}}setTimeout(()=>{document.querySelectorAll("[data-translate-key]").forEach(e=>{try{const t=e.getAttribute("data-translate-key"),n=Yp(t);n&&n!==t&&e.textContent!==n&&(e.textContent=n)}catch(t){}})},200)}async function Jp(){Mp=Dp}async function Xp(e){var t;const n={center:pp?pp.getCenter():null,zoom:pp?pp.getZoom():null,drawnPolygon:Sp?Sp.getLatLngs():null,threatsMap:new Map(kp),waypoints:[...yp]};Lp=e,localStorage.setItem("language",e),document.documentElement.lang=e,document.querySelectorAll(".lang-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-lang")===e)}),await Qp();const r=document.getElementById("manufacturer-view");if(r&&"none"!==r.style.display&&Qp(),Ph(),window.dispatchEvent(new Event("languageChanged")),pp&&n.center&&n.zoom){await new Promise(e=>setTimeout(e,500));try{if(pp.setView(n.center,n.zoom,{animate:!1}),n.drawnPolygon&&n.drawnPolygon.length>0){Sp&&pp.removeLayer(Sp),Sp=L.polygon(n.drawnPolygon,{color:"#ff7800",weight:3,opacity:.8,fillColor:"#ff7800",fillOpacity:.2}).addTo(pp),wp&&pp.removeLayer(wp);const e=Sp.getBounds().getCenter();wp=L.marker(e,{icon:L.divIcon({className:"polygon-label",html:`<div style="background: white; padding: 5px; border: 2px solid #ff7800; border-radius: 5px; font-weight: bold; color: #ff7800;">${Yp("map.securityArea")}</div>`,iconSize:[120,40],iconAnchor:[60,20]})}).addTo(pp)}n.threatsMap.size>0&&(kp=n.threatsMap,kp.size>0&&lh()),n.waypoints.length>0&&(yp=n.waypoints,yp.forEach((e,t)=>{const n=L.marker(e,{icon:L.divIcon({className:"waypoint-marker",html:`<div style="background: #ff7800; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">${t+1}</div>`,iconSize:[20,20],iconAnchor:[10,10]})}).addTo(pp);vp.push(n)}),yp.length>1&&(bp=L.polyline(yp,{color:"#ff7800",weight:3,opacity:.8,dashArray:"10, 10"}).addTo(pp))),pp.invalidateSize()}catch(i){}}kp.size>0&&lh(),!1===(null==(t=document.querySelector(".product-recommendations-container"))?void 0:t.classList.contains("hidden"))&&await hh()}function Zp(){const e=document.getElementById("map");if(!e)return;e.style.display="block",e.style.visibility="visible",e.style.opacity="1",e.classList.remove("view-hidden");let t;pp=L.map(e,{zoomControl:!1,preferCanvas:!0}).setView([51.7189,8.7575],16),L.control.zoom({position:"bottomright"}).addTo(pp),hp=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(pp),setTimeout(()=>{pp&&pp.invalidateSize()},100),hp.once("load",()=>{pp&&pp.invalidateSize()}),pp.on("move",()=>{t&&clearTimeout(t),t=window.setTimeout(()=>{bh()},100)}),pp.on("zoom",()=>{bh()}),pp.on("resize",()=>{bh()})}Mp=Dp,window.restoreMapState=function(){if(!window.savedMapState)return;return window.savedMapState};const eh=()=>{if(fp){try{fp.clearLayers(),pp.removeLayer(fp)}catch(r){}fp=null}Ep.forEach(e=>{e.forEach(e=>pp.removeLayer(e))}),Ep.clear(),kp.clear();const e=document.querySelector(".threat-list");e&&(e.innerHTML="");const t=document.getElementById("floating-threats");t&&t.classList.add("view-hidden"),uh(!1);const n=document.querySelector(".product-recommendations-container");n&&n.classList.add("hidden")};function th(e,t,n,r){const i=e.lon,o=e.lat,a=t.lon,s=t.lat,l=n.lon,u=n.lat,c=r.lon,d=r.lat,p=(i-a)*(u-d)-(o-s)*(l-c);if(0===p)return null;const h=((i-l)*(u-d)-(o-u)*(l-c))/p,f=-((i-a)*(o-u)-(o-s)*(i-l))/p;return h>0&&h<1&&f>0&&f<1?{lat:o+h*(s-o),lon:i+h*(a-i)}:null}function nh(e,t){const n=e.replace(/\(ID:\d+\)/g,"").replace(/(straße|weg|gasse|platz|allee)$/i,"").trim().toLowerCase(),r=t.replace(/\(ID:\d+\)/g,"").replace(/(straße|weg|gasse|platz|allee)$/i,"").trim().toLowerCase();if(n===r&&n.length>2)return!0;if(function(e,t){const n=Array(t.length+1).fill(null).map(()=>Array(e.length+1).fill(null));for(let r=0;r<=e.length;r++)n[0][r]=r;for(let r=0;r<=t.length;r++)n[r][0]=r;for(let r=1;r<=t.length;r++)for(let i=1;i<=e.length;i++){const o=e[i-1]===t[r-1]?0:1;n[r][i]=Math.min(n[r][i-1]+1,n[r-1][i]+1,n[r-1][i-1]+o)}return n[t.length][e.length]}(n,r)<=1&&Math.min(n.length,r.length)>3)return!0;const i=n.replace(/^(haupt|neben|ober|unter|neu|alt)\s*/i,"");return i===r.replace(/^(haupt|neben|ober|unter|neu|alt)\s*/i,"")&&i.length>2}const rh=(e,t)=>{let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const o=t[r].lon,a=t[r].lat,s=t[i].lon,l=t[i].lat;a>e.lat!=l>e.lat&&e.lon<(s-o)*(e.lat-a)/(l-a)+o&&(n=!n)}return n};function ih(e,t){const n=e.lat*Math.PI/180,r=t.lat*Math.PI/180,i=(t.lat-e.lat)*Math.PI/180,o=(t.lon-e.lon)*Math.PI/180,a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(r)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function oh(e,t,n){const r=e.lon-t.lon,i=e.lat-t.lat,o=n.lon-t.lon,a=n.lat-t.lat,s=r*o+i*a,l=Math.sqrt(r*r+i*i),u=Math.sqrt(o*o+a*a);if(0===l||0===u)return 180;const c=s/(l*u),d=Math.max(-1,Math.min(1,c));return Math.acos(d)*(180/Math.PI)}function ah(e){switch(e){case"500":return[4,6];case"3500":return[3,4];case"7500":return[1.5,2.5];case"12000":return[1,1.5];case"40000":return[.5,1];default:return null}}function sh(e,t){if(t<=0)return 0;return 3.6*Math.sqrt(2*e*t)}function lh(){const e=document.querySelector(".threat-list");if(!e)return;if(e.innerHTML="",0===kp.size)return void uh();const t=ah(document.getElementById("vehicle-select").value),n=Array.from(kp.entries()).map(([e,n])=>{if(0===n.entryPoints.length)return null;const r=Math.round(n.totalLength);let i=0;if(t&&r>0){const[,e]=t,o=n.entryPoints.length>0?[{lat:n.entryPoints[0].lat,lng:n.entryPoints[0].lon}]:void 0;i=Math.round(xh(e,r,o))}return{name:e,data:n,maxSpeed:i,lengthInMeters:r,threatLevel:n.threatLevel||5,roadType:n.roadType||"unbekannt",roadMaxSpeed:n.maxSpeed||50}}).filter(e=>null!==e);if(n.sort((e,t)=>e.threatLevel!==t.threatLevel?t.threatLevel-e.threatLevel:t.maxSpeed-e.maxSpeed),n.forEach(({name:t,maxSpeed:n,lengthInMeters:r,threatLevel:i,roadType:o})=>{const a=document.createElement("li");let s=`${i>=9?"🔴":i>=7?"🟠":i>=5?"🟡":i>=3?"🟢":"⚪"} ${t}`;s+=` (${o}, Level ${i})`,s+=` - ${r} m`,n>0&&(s+=` / ${n} km/h`),a.textContent=s,a.setAttribute("role","button"),a.setAttribute("tabindex","0"),a.addEventListener("click",()=>{e.querySelectorAll("li").forEach(e=>e.classList.remove("active")),a.classList.add("active");const n=Ep.get(t);if(n&&n.length>0){const e=L.featureGroup(n);pp.fitBounds(e.getBounds().pad(.5))}}),a.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||a.click()}),e.appendChild(a)}),0===e.children.length){const t=document.createElement("li");t.textContent=Yp("threats.noCrossingWaysBoundary"),e.appendChild(t)}uh(!0)}function uh(e=!1){const t=document.querySelector("#floating-threats h4");t&&(t.textContent=e?`${Yp("threats.title")} (Strecke / Endgeschw.)`:Yp("threats.title"))}const ch=async()=>{var e,t,n,r,i;if(!Sp)return void alert(Yp("alerts.noPolygon"));if(!Sp.getLatLngs||"function"!=typeof Sp.getLatLngs)return void alert(Yp("alerts.invalidPolygon"));const o=Sp.getLatLngs();if(!o||0===o.length)return void alert(Yp("alerts.emptyPolygon"));const a=document.querySelector(".loading-indicator");if(a){eh(),a.classList.remove("hidden");try{let l=function(e){if(e.length<4)return!1;let t=0,n=0;for(let o=1;o<e.length-1;o++){const r=e[o-1],i=e[o],a=e[o+1],s=Math.atan2(i.lat-r.lat,i.lon-r.lon),l=Math.atan2(a.lat-i.lat,a.lon-i.lon);let u=Math.abs(l-s);u>Math.PI&&(u=2*Math.PI-u),n+=u,u>Math.PI/4&&t++}const r=n/(e.length-2),i=t/e.length>.3&&r>Math.PI/6;return i},u=function(e,t,n){for(const r of m.names)if(r.test(e))return!0;if(null==t?void 0:t.tags){for(const[e,n]of Object.entries(m.tags)){const r=t.tags[e];if(r&&n.includes(r)){if(("bicycle"===e||"foot"===e)&&t.tags.highway&&!["cycleway","footway","path"].includes(t.tags.highway))continue;return!0}}if(t.tags.leisure||t.tags.sport||t.tags.tourism)return!0;if("no"===t.tags.motor_vehicle||"no"===t.tags.motorcar||"no"===t.tags.vehicle)return!0;if("private"===t.tags.access||"no"===t.tags.access)return!0;if("designated"===t.tags.bicycle&&"cycleway"===t.tags.highway||"designated"===t.tags.foot&&"footway"===t.tags.highway)return!0}return!!l(n)};const c=Sp.getBounds();if(!c||!c.isValid())throw new Error("Invalid polygon bounds");const d=.005,p=c.getSouthWest(),h=c.getNorthEast(),f=`${p.lat-d},${p.lng-d},${h.lat+d},${h.lng+d}`,m={names:[/bikepark/i,/bike\s*park/i,/mountainbike/i,/mtb/i,/singletrail/i,/trail/i,/downhill/i,/freeride/i,/pumptrack/i,/pump\s*track/i,/bmx/i,/skatepark/i,/skate\s*park/i,/spielplatz/i,/playground/i,/golfplatz/i,/golf/i,/wanderweg/i,/hiking/i,/spazierweg/i,/serpentin/i,/kurve/i,/schleife/i],tags:{sport:["cycling","mtb","bmx","skateboard","golf","hiking"],leisure:["park","playground","sports_centre","track","golf_course"],tourism:["attraction","viewpoint"],mtb:["yes","designated"],motor_vehicle:["no","private"],access:["private","no","forestry","agricultural"]}},g=`\n            [out:json][timeout:30];\n            (\n              way["highway"~"^(primary|secondary|tertiary|residential|unclassified|service|living_street|track)$"](bbox:${f});\n              way["highway"~"^(motorway|trunk)$"](bbox:${f});\n              way["highway"="cycleway"]["motor_vehicle"!="no"](bbox:${f});\n              way["railway"="tram"](bbox:${f});\n              way["access"~"^(yes|permissive)$"]["highway"](bbox:${f});\n            );\n            (._;>;);\n            out geom;\n        `,y=`https://overpass-api.de/api/interpreter?data=${encodeURIComponent(g)}`;let v;try{const r=await fetch(y);if(!r.ok)throw new Error(Yp("alerts.overpassError",{status:r.status}));v=await r.json();null==(e=null==v?void 0:v.elements)||e.length;const i={};null==(t=null==v?void 0:v.elements)||t.forEach(e=>{var t;"way"===e.type&&(null==(t=e.tags)?void 0:t.highway)&&(i[e.tags.highway]=(i[e.tags.highway]||0)+1)});let o=0;null==(n=null==v?void 0:v.elements)||n.forEach(e=>{var t;if("way"===e.type&&(null==(t=e.tags)?void 0:t.highway)){let t=e.tags.name;t||(t="residential"===e.tags.highway?`Wohnstraße (ID:${e.id})`:"service"===e.tags.highway?`Erschließungsstraße (ID:${e.id})`:`${e.tags.highway} (ID:${e.id})`),u(t,e,[])&&o++}})}catch(s){return alert(Yp("alerts.analysisError")),void a.classList.add("hidden")}const b={},S={};let w=0,E=0,k=0;v.elements.forEach(e=>{if("node"===e.type)b[e.id]={lat:e.lat,lon:e.lon},w++;else if("way"===e.type&&e.tags&&(e.tags.highway||e.tags.railway)){let t=e.tags.name;t||(t="residential"===e.tags.highway?`Wohnstraße (ID:${e.id})`:"service"===e.tags.highway?`Erschließungsstraße (ID:${e.id})`:"unclassified"===e.tags.highway?`Nebenstraße (ID:${e.id})`:"track"===e.tags.highway?`Wirtschaftsweg (ID:${e.id})`:e.tags.ref?e.tags.ref:`${e.tags.highway||"Straße"} (ID:${e.id})`),e.nodes&&Array.isArray(e.nodes)&&e.nodes.length>0?(S[e.id]={name:t,nodes:e.nodes,id:e.id},E++):k++}else"way"===e.type&&k++});const T={motorway:10,trunk:10,primary:9,secondary:8,tertiary:7,unclassified:6,residential:5,living_street:4,service:3,track:2,cycleway:1,footway:1,path:1},C=new Map;let A=[];try{if(A=Array.isArray(o[0])?Array.isArray(o[0][0])?o[0][0].map(e=>({lat:e.lat||e.lat,lon:e.lng||e.lon})):o[0].map(e=>({lat:e.lat||e.lat,lon:e.lng||e.lon})):o.map(e=>({lat:e.lat||e.lat,lon:e.lng||e.lon})),A.length<3)throw new Error("Invalid polygon: insufficient vertices");if(A=A.filter(e=>"number"==typeof e.lat&&"number"==typeof e.lon&&!isNaN(e.lat)&&!isNaN(e.lon)),A.length<3)throw new Error("Invalid polygon: insufficient valid coordinates")}catch(s){return alert(Yp("alerts.polygonCoordinateError")),void a.classList.add("hidden")}let x=0,P=0,I=0;for(const e in S){if(!S.hasOwnProperty(e))continue;const t=S[e];if(!t||!t.nodes)continue;const n=t.nodes.map(e=>({id:e,...b[e]})).filter(e=>e.lat&&e.lon);if(n.length<2)continue;x++;const o=[],a=[];for(let e=0;e<n.length-1;e++){const t=n[e],r=n[e+1],i=rh(t,A),s=rh(r,A);if(i!==s){let i=null;for(let e=0;e<A.length;e++){const n=A[e],o=th(t,r,n,A[(e+1)%A.length]);if(o){i=o;break}}if(i){let l=0;if(s){for(let t=0;t<e;t++)l+=ih(n[t],n[t+1]);l+=ih(t,i)}else{for(let t=0;t<e;t++)l+=ih(n[t],n[t+1]);l+=ih(t,i)}const u={lat:i.lat,lon:i.lon,distance:Math.max(l,10)};a.push(u);const c=[i];let d,p;s?(c.push({lat:t.lat,lon:t.lon}),d=e-1,p=-1):(c.push({lat:r.lat,lon:r.lon}),d=e+1,p=1);for(let e=d;e>=0&&e<n.length;e+=p){const t=n[e];if(c.length>=2){const e=c[c.length-2],n=c[c.length-1],r={lat:t.lat,lon:t.lon};if(oh(e,n,r)<120)break}c.push({lat:t.lat,lon:t.lon})}o.push(c)}}}if(a.length>0){const e=v.elements.find(e=>e.id===t.id);if(u(t.name,e,n)){P++;continue}if(!C.has(t.name)){const n=(null==(r=null==e?void 0:e.tags)?void 0:r.highway)||"unknown",o=T[n]||3;let a=50;const s=v.elements.find(e=>e.id===t.id);if(null==(i=null==s?void 0:s.tags)?void 0:i.maxspeed){const e=s.tags.maxspeed.match(/\d+/);e&&(a=parseInt(e[0]))}let l=o;a>=100?l+=2:a>=80?l+=1.5:a>=50?l+=1:a<=30&&(l-=1),C.set(t.name,{entryPoints:[],pathSegments:[],totalLength:0,threatLevel:Math.round(10*l)/10,roadType:n,maxSpeed:a}),I++}const s=C.get(t.name);s.entryPoints.push(...a),s.pathSegments.push(...o);let l=0;o.forEach(e=>{for(let t=0;t<e.length-1;t++)l+=ih(e[t],e[t+1])}),s.totalLength+=l}}const _=new Map;for(const[e,t]of C){let n=e,r=t;for(const[i,o]of _)if(nh(e,i)){n=i,r={entryPoints:[...o.entryPoints,...t.entryPoints],pathSegments:[...o.pathSegments,...t.pathSegments],totalLength:o.totalLength+t.totalLength,threatLevel:Math.max(o.threatLevel,t.threatLevel),roadType:o.threatLevel>=t.threatLevel?o.roadType:t.roadType,maxSpeed:Math.max(o.maxSpeed,t.maxSpeed)};break}_.set(n,r)}if(kp=_,kp.size>0){if(fp)try{fp.clearLayers(),pp.removeLayer(fp)}catch{}fp=L.layerGroup().addTo(pp);const e=document.getElementById("vehicle-select"),t=ah((null==e?void 0:e.value)||"alle"),n=t?t[1]:3;kp.forEach((e,t)=>{if(0===e.entryPoints.length)return;const r=e.threatLevel||5;let i="red",o="#f03",a=5;r>=9?(i="#8B0000",o="#DC143C",a=10):r>=7?(i="#B22222",o="#FF6347",a=8):r>=5?(i="red",o="#f03",a=6):r>=3?(i="#FF8C00",o="#FFA500",a=5):(i="#DAA520",o="#FFD700",a=4);const s=[];e.entryPoints.forEach(n=>{const l=`\n                        <b>${Yp("threats.popupHeader")}</b><br>\n                        <b>Straße:</b> ${t}<br>\n                        <b>Straßentyp:</b> ${e.roadType||"unbekannt"}<br>\n                        <b>Bedrohungslevel:</b> ${r}/10<br>\n                        <b>Max. Geschwindigkeit:</b> ${e.maxSpeed||"unbekannt"} km/h\n                    `,u=L.circle([n.lat,n.lon],{radius:a,color:i,fillColor:o,fillOpacity:.8,weight:3}).bindPopup(l);fp.addLayer(u),s.push(u)}),e.pathSegments.forEach(e=>{if(e.length>1){const t=e.map(e=>[e.lat,e.lon]);let r=0;for(let n=0;n<e.length-1;n++)r+=ih(e[n],e[n+1]);const i=sh(n,r);let o="#e74c3c";i<=30?o="#39b54a":i<=50&&(o="#f1c40f");const a=L.polyline(t,{color:o,weight:5,opacity:.9});fp.addLayer(a),s.push(a)}}),s.length>0&&Ep.set(t,s)}),lh();const r=document.getElementById("floating-threats");r&&(r.classList.remove("view-hidden"),r.classList.remove("minimized"));const i=document.querySelector(".product-recommendations-container");i&&(i.classList.remove("hidden"),await hh())}else{const e=document.querySelector(".threat-list"),t=document.createElement("li");t.textContent=Yp("threats.noCrossingWaysArea"),e.appendChild(t);const n=document.getElementById("floating-threats");n&&(n.classList.remove("view-hidden"),n.classList.remove("minimized"))}}catch(s){alert(Yp("alerts.analysisError"));const e=document.querySelector(".threat-list"),t=document.createElement("li");t.textContent=Yp("threats.analysisFailed"),e.appendChild(t)}finally{a.classList.add("hidden")}}};async function dh(e){try{const t="undefined"!=typeof window&&window.location.hostname.endsWith("github.io"),n="AIzaSyAu89J9B0b57XIao133a19Wd64T6oiCA9A";if(!n||t)return function(e){var t,n,r,i,o,a,s,l,u,c;try{const d=window.planningState||{},p=(null==(t=d.schutzgüter)?void 0:t.join(", "))||e.assetToProtect||Yp("report.undefinedAsset"),h=(null==(r=null==(n=d.risiko)?void 0:n.bedrohung)?void 0:r.art)||Yp("report.undefinedValue"),f=(null==(o=null==(i=d.risiko)?void 0:i.dynamik)?void 0:o.v_kmh)||e.estimatedSpeedKmH||Yp("report.undefinedValue"),m=(null==(s=null==(a=d.risiko)?void 0:a.site)?void 0:s.untergrund)||Yp("report.undefinedValue"),g=(null==(l=d.restrisiko)?void 0:l.klasse)||e.securityLevel||Yp("report.undefinedValue"),y=(null==(c=null==(u=d.risiko)?void 0:u.site)?void 0:c.anfahrkorridore)&&d.risiko.site.anfahrkorridore.length>0?Yp("report.identifiedCorridors",{count:d.risiko.site.anfahrkorridore.length}):Yp("report.noChatGeometry");return"de"===Lp?{purpose:`Schutzziel: Sicherung von ${p} am Standort ${e.locationName}. Der Assistent lieferte ergänzende Eingaben (Normbezug DIN SPEC 91414‑2 / ISO 22343‑2).`,threatAnalysis:`Bedrohungsannahme: ${h}. Aus der Karten-/Chat-Analyse ergibt sich eine Zufahrtsgeschwindigkeit von ca. ${f} km/h. Anfahrkorridore laut Chat: ${y}.`,vulnerabilities:`Untergrund/Fundamente: ${m}. Restrisiko (Chat/Slider): ${g}. Kritische Zufahrtswinkel bzw. Engstellen sind bei der Maßnahmendefinition zu berücksichtigen.`,hvmMeasures:`Empfohlene Maßnahmen orientieren sich an der erwarteten Geschwindigkeit und den Schutzzielen. Für ${p} mit Geschwindigkeit ~${f} km/h sind FSB mit entsprechendem Leistungsniveau, geprüften Fundamenten und Berücksichtigung des Anprallwinkels anzusetzen.`,siteConsiderations:`Betriebliche Rahmenbedingungen (z. B. Feuerwehrzufahrt, Fluchtwege) aus Chat sollten in die Detailplanung einfließen. Untergrund: ${m}.`,operationalImpact:"Maßnahmen sind so auszulegen, dass Betrieb, Rettungswege und Gestaltung berücksichtigt sind; temporäre Anpassungen (Events) werden unterstützt."}:{purpose:`Protection objective: Securing ${p} at location ${e.locationName}. The assistant provided additional inputs (standard reference DIN SPEC 91414‑2 / ISO 22343‑2).`,threatAnalysis:`Threat assumption: ${h}. From the map/chat analysis, an access speed of approximately ${f} km/h results. Access corridors according to chat: ${y}.`,vulnerabilities:`Ground/foundations: ${m}. Residual risk (Chat/Slider): ${g}. Critical impact angles or bottlenecks must be considered in measure definition.`,hvmMeasures:`Recommended measures are oriented to expected speed and protection objectives. For ${p} with speed ~${f} km/h, FSB with corresponding performance level, tested foundations and consideration of impact angle should be applied.`,siteConsiderations:`Operational framework conditions (e.g., fire brigade access, escape routes) from chat should flow into detailed planning. Ground: ${m}.`,operationalImpact:"Measures are designed so that operations, rescue routes and design are considered; temporary adaptations (events) are supported."}}catch{return"de"===Lp?{purpose:`Schutzziel und Rahmenbedingungen für ${e.locationName}.`,threatAnalysis:"Zusammenfassung der Gefahren basierend auf Karten-/Chat-Eingaben.",vulnerabilities:"Allgemeine Schwachstellen am Standort.",hvmMeasures:"Empfohlene HVM‑Maßnahmen gemäß Annahmen.",siteConsiderations:"Standortspezifische Hinweise.",operationalImpact:"Betriebliche Auswirkungen und Gestaltung."}:{purpose:`Protection objective and framework conditions for ${e.locationName}.`,threatAnalysis:"Summary of hazards based on map/chat inputs.",vulnerabilities:"General vulnerabilities at the site.",hvmMeasures:"Recommended HVM measures according to assumptions.",siteConsiderations:"Site-specific notes.",operationalImpact:"Operational impacts and design."}}}(e);const r=new pr({apiKey:n}),i=Array.from(kp.values()),o=i.length>0?i.reduce((e,t)=>e+(t.threatLevel||5),0)/i.length:5,a=function(){var e;const t=(null==(e=document.getElementById("asset-to-protect"))?void 0:e.value)||"",n=Array.from(kp.entries());let r="unbekannt";if(n.length>0){const e=n.map(([,e])=>e.roadType).filter(Boolean),i=n.some(([,e])=>(e.maxSpeed||0)>70),o=e.includes("residential"),a=e.includes("primary")||e.includes("motorway");r=i&&a?"industriell/verkehrsreich":o&&!a?"wohngebiet":t.toLowerCase().includes("innenstadt")||t.toLowerCase().includes("event")?"innenstadt/öffentlich":"gemischt"}return r}(),s=function(e){const{assetToProtect:t,securityLevel:n,protectionGrade:r,locationContext:i,threatLevel:o}=e,a=t.toLowerCase(),s=i.toLowerCase();let l=[];a.includes("atomkraftwerk")||a.includes("nuclear")||a.includes("kraftwerk")||a.includes("power plant")?l=["Tor","Schranke","Zaun","Poller"]:a.includes("industrie")||a.includes("industrial")||a.includes("fabrik")||a.includes("factory")||a.includes("werk")||a.includes("plant")?l=["Tor","Schranke","Zaun"]:a.includes("regierung")||a.includes("government")||a.includes("militär")||a.includes("military")||a.includes("ministerium")||a.includes("embassy")?l=["Tor","Zaun","Poller","Durchfahrtsperre"]:a.includes("krankenhaus")||a.includes("hospital")||a.includes("flughafen")||a.includes("airport")||a.includes("bahnhof")||a.includes("station")?l=["Poller","Durchfahrtsperre","Zaun"]:a.includes("büro")||a.includes("office")||a.includes("zentrum")||a.includes("center")||a.includes("gebäude")||a.includes("building")||a.includes("event")||a.includes("veranstaltung")||a.includes("festival")||a.includes("markt")||a.includes("market")||a.includes("platz")||a.includes("square")||a.includes("innenstadt")?l=["Poller","Durchfahrtsperre"]:(a.includes("schule")||a.includes("school")||a.includes("universität")||a.includes("university")||a.includes("campus"))&&(l=["Poller","Durchfahrtsperre","Zaun"]);(s.includes("innenstadt")||s.includes("city center")||s.includes("downtown")||s.includes("pedestrian"))&&(l=l.filter(e=>"Zaun"!==e&&"Tor"!==e));"high"===n||o>=8?(l.includes("Tor")||l.unshift("Tor"),l.includes("Zaun")||l.push("Zaun")):("low"===n||o<=4)&&(l=l.filter(e=>"Tor"!==e&&"Schranke"!==e));"permanent"===r?l.includes("Zaun")||l.push("Zaun"):"temporary"===r&&(l=l.filter(e=>"Zaun"!==e&&"Tor"!==e),l.includes("Poller")||l.unshift("Poller"));0===l.length&&(l=["Poller","Durchfahrtsperre"]);return[...new Set(l)]}({assetToProtect:e.assetToProtect||"",securityLevel:e.securityLevel||"medium",protectionGrade:e.protectionGrade||"permanent",locationContext:a,threatLevel:o}),l={...e,threatAnalysis:mh(),highestThreatRoads:gh(),threatLevelDistribution:yh(),locationContext:a,recommendedProductTypes:s.join(", "),averageThreatLevel:o.toFixed(1),productTypeJustification:fh(s,e.assetToProtect||"",a,o)},u=Yp("ai.reportPrompt",l)+`\n\nENHANCED THREAT ANALYSIS:\n        ${l.threatAnalysis}\n        \n        HIGHEST THREAT ROADS:\n        ${l.highestThreatRoads}\n        \n        THREAT LEVEL DISTRIBUTION:\n        ${l.threatLevelDistribution}\n        \n        RECOMMENDED PRODUCT TYPES:\n        ${l.recommendedProductTypes}\n        \n        PRODUCT TYPE JUSTIFICATION:\n        ${l.productTypeJustification}\n        \n        LOCATION CONTEXT: ${l.locationContext}\n        AVERAGE THREAT LEVEL: ${l.averageThreatLevel}/10\n        \n        IMPORTANT: Generate the report in ${"de"===Lp?"German":"English"} language only. All text must be in ${"de"===Lp?"German":"English"}. \n        Focus on the threat level analysis and provide specific justifications for each threat level based on road type, traffic speed, and vehicle access capabilities.\n        Include the recommended product types and explain why they are suitable for this specific context and threat level.`,c=((await r.models.generateContent({model:"gemini-2.5-flash",contents:u,config:{responseMimeType:"application/json",responseSchema:{type:ne.OBJECT,properties:{purpose:{type:ne.STRING},threatAnalysis:{type:ne.STRING},vulnerabilities:{type:ne.STRING},hvmMeasures:{type:ne.STRING},siteConsiderations:{type:ne.STRING},operationalImpact:{type:ne.STRING}},required:["purpose","threatAnalysis","vulnerabilities","hvmMeasures","siteConsiderations","operationalImpact"]}}})).text||"").trim();return function(e){const t="de"===Lp,n=e.purpose||e.threatAnalysis||"",r=["the","and","for","of","with","at","on","in","to","from","by","as","is","are"],i=["der","die","das","und","für","von","mit","bei","auf","in","an","zu","zur","zum"].filter(e=>n.toLowerCase().includes(e)).length,o=r.filter(e=>n.toLowerCase().includes(e)).length,a=i>o;if(!(t&&!a||!t&&a))return e;const s={};for(const[l,u]of Object.entries(e))s[l]="string"==typeof u?ph(u,t):u;return s}(JSON.parse(c))}catch(t){return alert(Yp("alerts.geminiError")),null}}function ph(e,t){return t?e.replace(/\bThis report\b/gi,"Dieser Bericht").replace(/\baims to\b/gi,"zielt darauf ab").replace(/\bidentify\b/gi,"zu identifizieren").replace(/\bassess\b/gi,"zu bewerten").replace(/\bmitigate\b/gi,"zu mindern").replace(/\bpotential\b/gi,"potenzielle").replace(/\brisks\b/gi,"Risiken").replace(/\bassets\b/gi,"Schutzgüter").replace(/\bensuring\b/gi,"um sicherzustellen").replace(/\bbusiness continuity\b/gi,"Geschäftskontinuität").replace(/\bstrategic\b/gi,"strategische").replace(/\bsecurity\b/gi,"Sicherheits").replace(/\binvestments\b/gi,"Investitionen").replace(/\bThe primary threat\b/gi,"Die primäre Bedrohung").replace(/\bis\b/gi,"ist").replace(/\buse of vehicles\b/gi,"die Nutzung von Fahrzeugen").replace(/\bvehicle as weapon\b/gi,"Fahrzeug als Waffe").replace(/\bram attack\b/gi,"Rammangriff").replace(/\bvehicle impact\b/gi,"Fahrzeuganprall").replace(/\bcrash barrier\b/gi,"Anprallbarriere").replace(/\bsecurity barrier\b/gi,"Sicherheitsbarriere").replace(/\bpenetration depth\b/gi,"Eindringtiefe").replace(/\bdebris scatter\b/gi,"Trümmerstreuung").replace(/\bas\b/gi,"als").replace(/\bweapon\b/gi,"Waffe").replace(/\bPotential\b/gi,"Potenzielle").replace(/\badversaries\b/gi,"Gegner").replace(/\binclude\b/gi,"umfassen").replace(/\bstate-sponsored\b/gi,"staatsgestützte").replace(/\bterrorist\b/gi,"terroristische").replace(/\bvehicle threats\b/gi,"Fahrzeugbedrohungen").replace(/\bvehicle attacks\b/gi,"Fahrzeugangriffe").replace(/\bram attacks\b/gi,"Rammangriffe").replace(/\battacks\b/gi,"Angriffe").replace(/\bGiven\b/gi,"Angesichts").replace(/\bglobal\b/gi,"globaler").replace(/\btrends\b/gi,"Trends").replace(/\band\b/gi,"und").replace(/\bthe\b/gi,"der").replace(/\bof\b/gi,"von").replace(/\bto\b/gi,"zu").replace(/\bin\b/gi,"in").replace(/\bon\b/gi,"auf").replace(/\bat\b/gi,"bei").replace(/\bwith\b/gi,"mit").replace(/\bfor\b/gi,"für").replace(/\bfrom\b/gi,"von").replace(/\bby\b/gi,"durch").replace(/\bas\b/gi,"als").replace(/\bis\b/gi,"ist").replace(/\bare\b/gi,"sind").replace(/\bwas\b/gi,"war").replace(/\bwere\b/gi,"waren").replace(/\bwill\b/gi,"wird").replace(/\bwould\b/gi,"würde").replace(/\bcould\b/gi,"könnte").replace(/\bshould\b/gi,"sollte").replace(/\bmay\b/gi,"kann").replace(/\bmight\b/gi,"könnte").replace(/\bcan\b/gi,"kann"):e.replace(/\bDieser Bericht\b/gi,"This report").replace(/\bzielt darauf ab\b/gi,"aims to").replace(/\bzu identifizieren\b/gi,"identify").replace(/\bzu bewerten\b/gi,"assess").replace(/\bzu mindern\b/gi,"mitigate").replace(/\bpotenzielle\b/gi,"potential").replace(/\bRisiken\b/gi,"risks").replace(/\bSchutzgüter\b/gi,"assets").replace(/\bum sicherzustellen\b/gi,"ensuring").replace(/\bGeschäftskontinuität\b/gi,"business continuity").replace(/\bstrategische\b/gi,"strategic").replace(/\bSicherheits\b/gi,"security").replace(/\bInvestitionen\b/gi,"investments").replace(/\bDie primäre Bedrohung\b/gi,"The primary threat").replace(/\bist\b/gi,"is").replace(/\bdie Nutzung von Fahrzeugen\b/gi,"use of vehicles").replace(/\bals\b/gi,"as").replace(/\bWaffe\b/gi,"weapon").replace(/\bPotenzielle\b/gi,"Potential").replace(/\bGegner\b/gi,"adversaries").replace(/\bumfassen\b/gi,"include").replace(/\bstaatsgestützte\b/gi,"state-sponsored").replace(/\bterroristische\b/gi,"terrorist").replace(/\bFahrzeugbedrohungen\b/gi,"vehicle threats").replace(/\bFahrzeugangriffe\b/gi,"vehicle attacks").replace(/\bRammangriffe\b/gi,"ram attacks").replace(/\bAngriffe\b/gi,"attacks").replace(/\bAngesichts\b/gi,"Given").replace(/\bglobaler\b/gi,"global").replace(/\bTrends\b/gi,"trends").replace(/\bund\b/gi,"and").replace(/\bder\b/gi,"the").replace(/\bvon\b/gi,"of").replace(/\bzu\b/gi,"to").replace(/\bin\b/gi,"in").replace(/\bauf\b/gi,"on").replace(/\bbei\b/gi,"at").replace(/\bmit\b/gi,"with").replace(/\bfür\b/gi,"for").replace(/\bdurch\b/gi,"by").replace(/\bist\b/gi,"is").replace(/\bsind\b/gi,"are").replace(/\bwar\b/gi,"was").replace(/\bwaren\b/gi,"were").replace(/\bwird\b/gi,"will").replace(/\bwürde\b/gi,"would").replace(/\bkönnte\b/gi,"could").replace(/\bsollte\b/gi,"should").replace(/\bkann\b/gi,"may")}async function hh(){let e=window.productDatabase||[];if(0===e.length)try{const t=await fetch("/Barricadix_MWP/product-database.json");if(!t.ok)throw new Error("Product database fetch failed");e=await t.json(),window.productDatabase=e}catch(t){return}await async function(){const e=document.getElementById("map");if(!e||!pp)return;e.classList.remove("view-hidden"),setTimeout(()=>{pp&&pp.invalidateSize()},100),kp.size>0&&await async function(){vh(),Ep.forEach((e,t)=>{const n=kp.get(t);n&&e&&e.forEach((e,r)=>{const i=function(e,t){if(!e.entryPoints||0===e.entryPoints.length||t>=e.entryPoints.length)return 0;const n=document.getElementById("vehicle-select"),r=ah(n.value);if(!r)return 0;const i=e.entryPoints[t],o=i.distance||e.totalLength;const a=sh(r[1],o);return Math.round(a)}(n,r),o=function(e){var t,n;const r=window.productDatabase||[];r.map(e=>{var t;let n=0;return(null==(t=e.technical_data)?void 0:t.pr_speed_kph)?n=e.technical_data.pr_speed_kph:e.speed&&(n=parseFloat(e.speed)),{name:e.product_name,speed:n}}).filter(e=>e.speed>0).sort((e,t)=>e.speed-t.speed);if(!r||0===r.length)return[];function i(e){if(!e||"string"!=typeof e)return 0;const t=e.split("/");if(t.length>=3){const e=t[2],n=parseFloat(e);if(!isNaN(n))return n}return 0}const o=r.filter(t=>{let n=0;t.technical_data&&t.technical_data.pr_speed_kph?n=parseFloat(t.technical_data.pr_speed_kph):t.speed?n=parseFloat(t.speed):t.technical_data&&t.technical_data.performance_rating?n=i(t.technical_data.performance_rating):t.performance_rating&&(n=i(t.performance_rating));const r=!isNaN(n)&&n>0&&n>=e;return r});const a=r.filter(t=>{var n;let r=0;return(null==(n=t.technical_data)?void 0:n.pr_speed_kph)?r=t.technical_data.pr_speed_kph:t.speed&&(r=parseFloat(t.speed)),r>0&&r<e});a.length;const s=o.sort((e,t)=>{function n(e){var t,n;return(null==(t=e.technical_data)?void 0:t.pr_speed_kph)?parseFloat(e.technical_data.pr_speed_kph):e.speed?parseFloat(e.speed):i((null==(n=e.technical_data)?void 0:n.performance_rating)||e.performance_rating||"0")}const r=n(e);return n(t)-r});if(s.length>0){const e=s[0];let r=0;r=(null==(t=e.technical_data)?void 0:t.pr_speed_kph)?parseFloat(e.technical_data.pr_speed_kph):e.speed?parseFloat(e.speed):i((null==(n=e.technical_data)?void 0:n.performance_rating)||e.performance_rating||"0")}return s}(i);if(o.length>0){const n=function(e,t,n,r){if(1===e.length)return e[0];function i(e){var t,n;if(null==(t=e.technical_data)?void 0:t.pr_speed_kph)return parseFloat(e.technical_data.pr_speed_kph);if(e.speed)return parseFloat(e.speed);if(null==(n=e.technical_data)?void 0:n.performance_rating){const t=e.technical_data.performance_rating.split("/");if(t.length>=3)return parseFloat(t[2])||0}return 0}let o=e[0],a=1/0;for(const s of e){const e=i(s)-t;e>=0&&e<a&&(a=e,o=s)}if(a<20){const s=e.filter(e=>{const n=i(e)-t;return n>=0&&n<=a+15});if(s.length>1){const e=n.split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0)+1e3*(r||0);o=s[Math.abs(e)%s.length]}}return o}(o,i,t,r);!function(e,t,n,r){let i=null,o=!1,a=null;const s=e.getElement();s&&s.classList.add("has-tooltip");const l=()=>{var e;const i=Fp(r);return`\n            <div class="product-tooltip">\n                <div class="tooltip-header">\n                    <h4>${t}</h4>\n                    <span class="tooltip-close">×</span>\n                </div>\n                <div class="tooltip-content">\n                    <div class="product-image">\n                        <img src="${i}" alt="${r.product_name||r.type||"Produkt"}" \n                             onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">\n                        <div class="product-image-placeholder" style="display: none;">\n                            <i class="fas fa-image"></i>\n                        </div>\n                    </div>\n                    <div class="product-info">\n                        <h5>${r.product_name||r.type||"Unbekanntes Produkt"}</h5>\n                        <p><strong>Hersteller:</strong> ${r.manufacturer}</p>\n                        <p><strong>Getestete Geschw.:</strong> ${r.speed||r.pr_speed_kph||(null==(e=r.technical_data)?void 0:e.pr_speed_kph)||"N/A"} km/h</p>\n                        <p><strong>Erforderlich:</strong> ${n} km/h</p>\n                        <p><strong>Fahrzeugtyp:</strong> ${r.pr_veh||"N/A"}</p>\n                        <p><strong>Standard:</strong> ${r.standard}</p>\n                    </div>\n                </div>\n                <div class="tooltip-pin-indicator ${o?"pinned":""}">\n                    <i class="fas fa-thumbtack"></i> ${o?"Angepinnt":"Klicken zum Anpinnen"}\n                </div>\n            </div>\n        `};e.on("mouseover",e=>{if(o)return;i=document.createElement("div"),i.className="leaflet-tooltip-pane",i.innerHTML=l(),document.body.appendChild(i);const t=e=>{i&&(i.style.left=`${e.clientX+10}px`,i.style.top=e.clientY-10+"px")};t(e.originalEvent),document.addEventListener("mousemove",t),i.cleanup=()=>{document.removeEventListener("mousemove",t)}}),e.on("mouseout",()=>{o||i&&(i.cleanup&&i.cleanup(),document.body.removeChild(i),i=null)}),e.on("click",t=>{if(t.originalEvent.stopPropagation(),o){if(o=!1,a&&(pp.closePopup(a),a=null),i){const e=Op.findIndex(e=>e.element===i);-1!==e&&Op.splice(e,1),i.cleanup&&i.cleanup(),document.body.removeChild(i),i=null}}else{o=!0,i&&!i.classList.contains("pinned-tooltip")&&(i.cleanup&&i.cleanup(),document.body.removeChild(i),i=null);const t=l();a=L.popup({closeButton:!0,autoClose:!1,closeOnClick:!1,className:"product-popup",offset:[10,-10]}).setLatLng(e.getLatLng?e.getLatLng():e._latlng||e.latlng).setContent(t).openOn(pp),a.on("remove",()=>{o=!1,a=null})}})}(e,t,i,n)}else!function(e,t,n){const r=()=>`\n            <div class="product-tooltip">\n                <div class="tooltip-header">\n                    <h4>${t}</h4>\n                    <span class="tooltip-close">×</span>\n                </div>\n                <div class="tooltip-content">\n                    <div class="no-product-info">\n                        <div class="warning-icon">\n                            <i class="fas fa-exclamation-triangle" style="color: #ff9900; font-size: 2rem; margin-bottom: 12px;"></i>\n                        </div>\n                        <h5>${Yp("products.contactAdvice")}</h5>\n                        <p><strong>${Yp("products.requiredSpeed")}:</strong> ${n} km/h</p>\n                        <div class="contact-message">\n                            <p style="text-align: center; font-weight: 500; line-height: 1.5; margin: 16px 0;">\n                                ${Yp("products.noSuitableProduct")}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div class="tooltip-pin-indicator">\n                    <i class="fas fa-info-circle"></i> ${o?Yp("products.pinned")||"Angepinnt":Yp("products.clickToPin")||"Klicken zum Anpinnen"}\n                </div>\n            </div>\n        `;let i=null,o=!1;const a=e.getElement();a&&a.classList.add("has-tooltip","no-product-marker");e.on("click",t=>{if(t.originalEvent.stopPropagation(),o)o=!1,i&&(pp.closePopup(i),i=null);else{o=!0;const t=r();i=L.popup({closeButton:!0,autoClose:!1,closeOnClick:!1,className:"product-popup no-product-popup",offset:[10,-10]}).setLatLng(e.getLatLng?e.getLatLng():e._latlng||e.latlng).setContent(t).openOn(pp),i.on("remove",()=>{o=!1,i=null})}})}(e,t,i)})})}()}()}function fh(e,t,n,r){let i=`Basierend auf dem zu schützenden Objekt "${t}", dem Standortkontext "${n}" und dem durchschnittlichen Bedrohungslevel von ${r.toFixed(1)}/10 werden folgende Produkttypen empfohlen:\n\n`;return e.forEach(e=>{switch(e){case"Tor":i+="• Tor: Geeignet für kontrollierte Zufahrten mit hohem Sicherheitsbedarf. Ermöglicht selektiven Zugang für autorisierte Fahrzeuge.\n";break;case"Schranke":i+="• Schranke: Ideal für industrielle Bereiche mit häufigem, aber kontrolliertem Fahrzeugverkehr. Bietet schnelle Durchfahrtskontrolle.\n";break;case"Zaun":i+="• Zaun: Permanente Perimetersicherung für Bereiche mit erhöhtem Sicherheitsbedarf. Verhindert unbefugtes Eindringen.\n";break;case"Poller":i+="• Poller: Diskrete Lösung für öffentliche Bereiche. Ermöglicht Fußgängerverkehr bei gleichzeitigem Fahrzeugschutz.\n";break;case"Durchfahrtsperre":i+="• Durchfahrtsperre: Flexible temporäre Lösung für Events oder veränderliche Sicherheitsanforderungen.\n"}}),i}function mh(){const e=Array.from(kp.entries());if(0===e.length)return"Keine Bedrohungen erkannt.";const t=e.filter(([,e])=>(e.threatLevel||5)>=9),n=e.filter(([,e])=>(e.threatLevel||5)>=7&&(e.threatLevel||5)<9),r=e.filter(([,e])=>(e.threatLevel||5)>=5&&(e.threatLevel||5)<7),i=e.filter(([,e])=>(e.threatLevel||5)<5);let o=`Gesamtanzahl identifizierter Zufahrten: ${e.length}\n`;return o+=`Kritische Bedrohungen (Level 9-10): ${t.length}\n`,o+=`Hohe Bedrohungen (Level 7-8): ${n.length}\n`,o+=`Mittlere Bedrohungen (Level 5-6): ${r.length}\n`,o+=`Niedrige Bedrohungen (Level 1-4): ${i.length}\n`,o}function gh(){const e=Array.from(kp.entries()).filter(([,e])=>e.threatLevel&&e.threatLevel>=7).sort((e,t)=>(t[1].threatLevel||0)-(e[1].threatLevel||0)).slice(0,5);return 0===e.length?"Keine Hochrisiko-Zufahrten identifiziert.":e.map(([e,t])=>`${e}: Level ${t.threatLevel}/10 (${t.roadType}, ${t.maxSpeed} km/h, ${Math.round(t.totalLength)}m Beschleunigungsstrecke)`).join("\n")}function yh(){const e=Array.from(kp.values());if(0===e.length)return"Keine Daten verfügbar.";const t={},n={unter_30:0,"30_50":0,"50_80":0,"über_80":0};e.forEach(e=>{const r=e.roadType||"unbekannt";t[r]=(t[r]||0)+1;const i=e.maxSpeed||50;i<30?n.unter_30++:i<=50?n["30_50"]++:i<=80?n["50_80"]++:n.über_80++});let r="Straßentyp-Verteilung:\n";return Object.entries(t).forEach(([e,t])=>{r+=`- ${e}: ${t}\n`}),r+="\nGeschwindigkeits-Verteilung:\n",r+=`- Unter 30 km/h: ${n.unter_30}\n`,r+=`- 30-50 km/h: ${n["30_50"]}\n`,r+=`- 50-80 km/h: ${n["50_80"]}\n`,r+=`- Über 80 km/h: ${n.über_80}\n`,r}function vh(){pp&&pp.eachLayer(e=>{e instanceof L.Popup&&("product-popup"===e.options.className||"product-popup no-product-popup"===e.options.className)&&pp.closePopup(e)});document.querySelectorAll(".pinned-tooltip").forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)});document.querySelectorAll(".leaflet-tooltip-pane:not(.pinned-tooltip)").forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),Op=[]}function bh(){Op.forEach((e,t)=>{const{element:n,marker:r,latLng:i}=e,o=pp.latLngToContainerPoint(i),a=pp.getContainer().getBoundingClientRect(),s=`${a.left+o.x+10}px`,l=a.top+o.y-10+"px";n.style.left=s,n.style.top=l})}function Sh(e){return Yp(e<33?"sidebar.low":e<66?"products.resistanceMedium":"sidebar.high")}async function wh(){var e;const t=document.getElementById("report-iframe"),n=document.querySelector(".report-loading-overlay"),r=document.getElementById("download-report-btn"),i=document.getElementById("map"),o=document.getElementById("report-preview-area");n.classList.remove("view-hidden"),r.disabled=!0;let a=null;try{if(Sp){if(!Sp.getLatLngs||"function"!=typeof Sp.getLatLngs)throw new Error("Invalid polygon data for map capture");const e=Sp.getLatLngs();if(!e||0===e.length)throw new Error("Polygon has no valid coordinates");o.classList.add("view-hidden"),i.classList.remove("view-hidden"),await new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("Map rendering timeout"))},1e4),r=()=>{clearTimeout(n);const t="de"===Lp?1e3:500;requestAnimationFrame(()=>setTimeout(e,t))};let i;pp.invalidateSize(),hp.once("load",()=>{clearTimeout(i),r()}),pp.once("moveend",()=>{i=window.setTimeout(r,1e3)});try{const e=Sp.getBounds();e&&e.isValid()?pp.fitBounds(e,{animate:!1,padding:[20,20]}):pp.setView(pp.getCenter(),pp.getZoom())}catch(o){}}),await new Promise(e=>setTimeout(e,500)),a=await html2canvas(i,{useCORS:!0,logging:!0,allowTaint:!0,backgroundColor:"#ffffff",scale:2,width:i.offsetWidth,height:i.offsetHeight,onclone:e=>{e.querySelectorAll(".leaflet-popup-pane > *").forEach(e=>{e.style.display="none"});const t=e.getElementById("map");t&&(t.style.visibility="visible",t.style.opacity="1",t.style.display="block");const n=e.querySelector(".leaflet-container");n&&(n.style.visibility="visible",n.style.opacity="1")}})}a&&a.width>0&&a.height>0||(a=null);const n=Sp?await async function(e){const t=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e.lat}&lon=${e.lng}&zoom=18&addressdetails=1`;try{const e=await fetch(t,{headers:{"Accept-Language":Lp}});return e.ok&&(await e.json()).display_name||"Unknown Location"}catch(n){return"Could not determine location"}}(Sp.getBounds().getCenter()):Yp("report.undefinedLocation"),l=document.getElementById("asset-to-protect").value.trim()||Yp("report.undefinedAsset");let u=Yp("report.noThreatAnalysis");if(kp.size>0){const e=document.getElementById("vehicle-select"),t=ah(e.value),n=Array.from(kp.entries()).map(([e,n])=>{const r=Math.round(n.totalLength);let i=0;if(t&&r>0){const[,e]=t;i=Math.round(xh(e,r))}return{name:e,lengthInMeters:r,maxSpeed:i}});n.sort((e,t)=>t.maxSpeed-e.maxSpeed),u=`\n                <table style="width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 12px;">\n                    <thead>\n                        <tr style="background-color: #f0f0f0; font-weight: bold;">\n                            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">${Yp("report.threatsTable.street")}</th>\n                            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">${Yp("report.threatsTable.distance")}</th>\n                            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">${Yp("report.threatsTable.maxSpeed")}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${n.map(e=>`\n                            <tr>\n                                <td style="border: 1px solid #ddd; padding: 8px;">${e.name}</td>\n                                <td style="border: 1px solid #ddd; padding: 8px;">${e.lengthInMeters} m</td>\n                                <td style="border: 1px solid #ddd; padding: 8px;">${e.maxSpeed} km/h</td>\n                            </tr>\n                        `).join("")}\n                    </tbody>\n                </table>\n            `}const c=document.getElementById("security-risk-slider"),d=document.getElementById("product-class-slider"),p=document.getElementById("protection-period-select"),h=document.getElementById("protection-product-select"),f=function(){const e=document.getElementById("vehicle-select"),t=parseInt(e.value,10);if(isNaN(t))return null;let n=null,r=1/0;for(const i of _p){const e=parseInt(i.vehicleWeight,10),o=parseFloat(i.penetration);!isNaN(e)&&!isNaN(o)&&e>=t&&o<r&&(r=o,n=i)}return n}(),m={locationName:n,assetToProtect:l,securityLevel:Sh(parseInt(c.value)),protectionGrade:Sh(parseInt(d.value)),threatList:u,protectionPeriod:p.options[p.selectedIndex].text,productType:h.options[h.selectedIndex].text,penetration:f?f.penetration:Yp("report.undefinedValue"),debrisDistance:f&&f.debrisDistance||Yp("report.undefinedValue")},g=await dh(m);if(!g)throw new Error("AI did not return report sections.");const{jsPDF:y}=window.jspdf,v=new y({orientation:"p",unit:"mm",format:"a4"}),b=()=>{const e=v.internal.pageSize.getWidth(),t=v.internal.pageSize.getHeight();if(v.saveGraphicsState(),v.setFont("helvetica","bold"),v.setFontSize(120),v.setTextColor(200,200,200),y.GState){const e=new y.GState({opacity:.2});v.setGState(e)}v.text(Yp("report.watermark"),e/2+50,t/2+50,{align:"center",angle:45}),v.restoreGraphicsState()},S=20,w=v.internal.pageSize.getWidth(),E=w-2*S;let k=25;const T=(e,t)=>{k>250&&(v.addPage(),b(),k=25),v.setFont("helvetica","bold").setFontSize(14).text(Yp(e),S,k),k+=7;const n=v.setFont("helvetica","normal").setFontSize(11).splitTextToSize(t,E);k+5*n.length>280&&(v.addPage(),b(),k=25),v.text(n,S,k),k+=5*n.length+10};b();const C=Yp("report.mainTitle",{locationName:n});v.setFont("helvetica","bold").setFontSize(18);const A=v.splitTextToSize(C,E),x=8;if(k+A.length*x>280&&(v.addPage(),b(),k=25),v.text(A,S,k),k+=A.length*x+5,v.setDrawColor(30,144,255).setLineWidth(.5).line(S,k,w-S,k),k+=15,T("report.sections.purpose.title",g.purpose),T("report.sections.threatAnalysis.title",g.threatAnalysis),kp.size>0){k-=5,v.setFont("helvetica","normal").setFontSize(11);const e=document.getElementById("vehicle-select"),t=ah(e.value);kp.forEach((e,n)=>{let r=`• ${n} (${Math.round(e.totalLength)} m)`;if(t&&e.totalLength>0){const[n,i]=t,o=Math.round(xh(n,e.totalLength)),a=Math.round(xh(i,e.totalLength));r+=` | ${Yp("threats.speed")}: ${o}-${a} km/h`}const i=v.splitTextToSize(r,E-5);k+7*i.length>280&&(v.addPage(),b(),k=25),v.text(i,S+5,k),k+=6*i.length}),k+=10}if(T("report.sections.vulnerabilities.title",g.vulnerabilities),T("report.sections.hvmMeasures.title",g.hvmMeasures),T("report.sections.siteConsiderations.title",g.siteConsiderations),a){const e=a.height/a.width,t=E*e;k+t>280&&(v.addPage(),b(),k=25),v.addImage(a,"PNG",S,k,E,t),k+=t+10}else{const e=Yp("report.noMapAvailable"),t=v.setFont("helvetica","italic").setFontSize(10).splitTextToSize(e,E);k+5*t.length>280&&(v.addPage(),b(),k=25),v.text(t,S,k),k+=5*t.length+10}T("report.sections.operationalImpact.title",g.operationalImpact);try{const t=v.getNumberOfPages||(null==(e=v.internal)?void 0:e.getNumberOfPages),n="function"==typeof t?t.call(v):1;for(let e=1;e<=n;e++)v.setPage(e),b()}catch(s){b()}o.classList.remove("view-hidden"),i.classList.add("view-hidden"),await new Promise(requestAnimationFrame);try{const e=v.output("blob");Ip&&URL.revokeObjectURL(Ip),Ip=URL.createObjectURL(e),t.src=Ip}catch(s){t.src=v.output("datauristring")}Pp=v,r.disabled=!1}catch(l){alert(Yp("alerts.reportCreationError")),i.classList.add("view-hidden"),o.classList.remove("view-hidden")}finally{n.classList.add("view-hidden")}}function Eh(){Pp?Pp.save(Yp("report.reportFilename")):alert(Yp("alerts.noReportToDownload"))}function kh(){if(!Tp)return;const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface"),r=document.getElementById("weather-select"),i={useMaxspeed:(null==e?void 0:e.checked)??!0,useTrafficCalming:(null==t?void 0:t.checked)??!0,useSurface:(null==n?void 0:n.checked)??!1,weather:(null==r?void 0:r.value)??"dry"};Tp.updateConfig(i)}function Th(){const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface");return(null==e?void 0:e.checked)||(null==t?void 0:t.checked)||(null==n?void 0:n.checked)}function Ch(){xp&&clearTimeout(xp),xp=window.setTimeout(()=>{!async function(){var e,t,n;if(!Sp||!Tp||!Th())return;try{const r=Sp.getLatLngs()[0].map(e=>({lat:e.lat,lng:e.lng}));if(r.length<3)return void Ah("error","Polygon zu klein");const i=`${(null==(e=document.getElementById("osm-maxspeed"))?void 0:e.checked)?"M":""}${(null==(t=document.getElementById("osm-traffic-calming"))?void 0:t.checked)?"C":""}${(null==(n=document.getElementById("osm-surface"))?void 0:n.checked)?"S":""}`,o=Xd.getKey(r,i),a=Xd.get(o);if(a)return Cp=a,Tp.setOsmData(a),void Ah("success",`${a.ways.length} Straßen, ${a.calming.length} Verkehrsberuhiger`);Ah("loading","Lade OSM-Daten..."),Ap&&Ap.abort(),Ap=new AbortController;const s=await async function(e,t){var n;if(e.length<3)throw new Error("Polygon must have at least 3 points");const r=e.map(e=>`${e.lat} ${e.lng}`).join(" "),i=`\n    [out:json][timeout:25];\n    (\n      way["highway"](poly:"${r}");\n      node["traffic_calming"](poly:"${r}");\n    );\n    (._;>;);\n    out body;\n  `,o=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:i,headers:{"Content-Type":"text/plain"},signal:t});if(!o.ok){const e=await o.text().catch(()=>"Unknown error");throw new Error(`Overpass ${o.status}: ${e}`)}const a=await o.json(),s={};for(const c of a.elements)"node"===c.type&&(s[c.id]={lat:c.lat,lon:c.lon});const l=[],u=[];for(const c of a.elements)if("way"===c.type)l.push({id:c.id,nodes:(c.nodes||[]).map(e=>s[e]).filter(Boolean),tags:c.tags||{}});else if("node"===c.type&&(null==(n=c.tags)?void 0:n.traffic_calming)){const e=String(c.tags.traffic_calming);["hump","table","chicane","cushion","rumble_strip","island"].includes(e)&&u.push({id:c.id,lat:c.lat,lon:c.lon,kind:e})}return{ways:l,calming:u}}(r,Ap.signal);Xd.set(o,s),Cp=s,Tp.setOsmData(s);s.ways.filter(e=>e.tags.maxspeed).length;Ah("success",`${s.ways.length} Straßen, ${s.calming.length} Verkehrsberuhiger`)}catch(r){if("AbortError"===r.name)return;Ah("error","OSM-Daten nicht verfügbar")}}()},300)}function Ah(e,t){const n=document.getElementById("osm-status"),r=null==n?void 0:n.querySelector(".status-text");n&&r&&(n.className=`osm-status ${e}`,n.style.display="flex",r.textContent=t,"loading"!==e&&setTimeout(()=>{n.classList.contains(e)&&(n.style.display="none")},5e3))}function xh(e,t,n){const r=sh(e,t);if(Tp&&Cp&&n&&n.length>0){let e=r;const t=Math.min(10,n.length),i=Math.max(1,Math.floor(n.length/t));for(let o=0;o<n.length;o+=i){const t=n[o],i=Tp.getConstraintsAt(t);let a;if(o>0&&o<n.length-1){const e=n[o-1],r=n[o+1],i=Math.atan2(t.lat-e.lat,t.lng-e.lng),s=Math.atan2(r.lat-t.lat,r.lng-t.lng),l=Math.abs(s-i);l>.01&&(a=1/l*1e3)}const s=Tp.applyConstraints(r,i,a);e=Math.min(e,s)}return e}return r}function Ph(){const e=document.querySelector("#chatbot-react-root h2");e&&(e.textContent=Yp("ai.chatbot.title"));const t=document.querySelector("#chatbot-react-root .message:first-child .message-content");t&&(t.textContent=Yp("ai.chatbot.welcome"));const n=document.querySelector("#chatbot-react-root .message:nth-child(2) .message-content");n&&(n.textContent=Yp("ai.chatbot.assetQuestion"));const r=document.querySelector('#chatbot-react-root input[type="text"]');r&&(r.placeholder=Yp("ai.chatbot.inputPlaceholder"));const i=document.querySelector('#chatbot-react-root button[type="submit"]');i&&(i.textContent=Yp("ai.chatbot.sendButton"))}document.addEventListener("DOMContentLoaded",()=>{sp(),up(),document.querySelectorAll(".logo-img, .welcome-logo").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),dp()}),e.style.cursor="pointer"}),function(){const e=document.getElementById("minimize-threats-btn"),t=document.getElementById("close-threats-btn"),n=document.getElementById("floating-threats");e&&n&&e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),n.classList.toggle("minimized");const r=n.classList.contains("minimized"),i=n.querySelector(".threat-panel-content");i&&(r?(i.style.maxHeight="0",i.style.opacity="0",i.style.padding="0",i.style.margin="0",i.style.overflow="hidden"):(i.style.maxHeight="",i.style.opacity="",i.style.padding="",i.style.margin="",i.style.overflow="")),e.title=Yp(r?"threats.maximize":"threats.minimize");const o=e.querySelector("i");o&&(o.className=r?"fas fa-plus":"fas fa-minus")}),t&&n&&t.addEventListener("click",()=>{n.classList.add("view-hidden"),eh()})}()});
