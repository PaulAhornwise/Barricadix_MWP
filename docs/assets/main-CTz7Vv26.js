/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let e,t;function n(n,i,r){var o,a,s;if(!(null===(o=n.httpOptions)||void 0===o?void 0:o.baseUrl)){const o={geminiUrl:e,vertexUrl:t};return n.vertexai?null!==(a=o.vertexUrl)&&void 0!==a?a:i:null!==(s=o.geminiUrl)&&void 0!==s?s:r}return n.httpOptions.baseUrl}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class i{}function r(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return null!=e?String(e):""}throw new Error(`Key '${n}' not found in valueMap.`)})}function o(e,t,n){for(let a=0;a<t.length-1;a++){const i=t[a];if(i.endsWith("[]")){const r=i.slice(0,-2);if(!(r in e)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${i}`);e[r]=Array.from({length:n.length},()=>({}))}if(Array.isArray(e[r])){const i=e[r];if(Array.isArray(n))for(let e=0;e<i.length;e++){o(i[e],t.slice(a+1),n[e])}else for(const e of i)o(e,t.slice(a+1),n)}return}if(i.endsWith("[0]")){const r=i.slice(0,-3);r in e||(e[r]=[{}]);return void o(e[r][0],t.slice(a+1),n)}e[i]&&"object"==typeof e[i]||(e[i]={}),e=e[i]}const i=t[t.length-1],r=e[i];if(void 0!==r){if(!n||"object"==typeof n&&0===Object.keys(n).length)return;if(n===r)return;if("object"!=typeof r||"object"!=typeof n||null===r||null===n)throw new Error(`Cannot set value for an existing key. Key: ${i}`);Object.assign(r,n)}else e[i]=n}function a(e,t){try{if(1===t.length&&"_self"===t[0])return e;for(let n=0;n<t.length;n++){if("object"!=typeof e||null===e)return;const i=t[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in e){const i=e[r];if(!Array.isArray(i))return;return i.map(e=>a(e,t.slice(n+1)))}return}e=e[i]}return e}catch(n){if(n instanceof TypeError)return;throw n}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s(e,t){if(!t||"string"!=typeof t)throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return`publishers/google/models/${t}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function l(e,t){const n=s(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function u(e,t){return Array.isArray(t)?t.map(t=>c(e,t)):[c(e,t)]}function c(e,t){if("object"==typeof t&&null!==t)return t;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof t)}function d(e,t){if(null==t)throw new Error("PartUnion is required");if("object"==typeof t)return t;if("string"==typeof t)return{text:t};throw new Error("Unsupported part type: "+typeof t)}function h(e,t){if(null==t||Array.isArray(t)&&0===t.length)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>d(0,e)):[d(0,t)]}function f(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function p(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function g(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function m(e,t){if(null==t)throw new Error("ContentUnion is required");return f(t)?t:{role:"user",parts:h(0,t)}}function y(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const t=m(0,e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){const e=m(0,t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>m(0,e)):[m(0,t)]}function v(e,t){if(null==t||Array.isArray(t)&&0===t.length)throw new Error("contents are required");if(!Array.isArray(t)){if(p(t)||g(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[m(0,t)]}const n=[],i=[],r=f(t[0]);for(const o of t){const e=f(o);if(e!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)n.push(o);else{if(p(o)||g(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(o)}}return r||n.push({role:"user",parts:h(0,i)}),n}function b(e,t){return t}function _(e,t){if("object"==typeof t)return t;if("string"==typeof t)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error("Unsupported speechConfig type: "+typeof t)}function E(e,t){return t}function k(e,t){if(!Array.isArray(t))throw new Error("tool is required and must be an array of Tools");return t}function w(e,t){if("string"!=typeof t)throw new Error("name must be a string");return function(e,t,n,i=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}(e,t,"cachedContents")}function S(e,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function x(e,t){if("string"!=typeof t)throw new Error("fromImageBytes must be a string");return t}function T(e,t){if("string"!=typeof t)throw new Error("fromName must be a string");return t.startsWith("files/")?t.split("files/")[1]:t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["videoMetadata"]))throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const r=a(t,["codeExecutionResult"]);null!=r&&o(n,["codeExecutionResult"],r);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function C(e,t){const n={},i=a(t,["dynamicRetrievalConfig"]);return null!=i&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["dynamicThreshold"]);return null!=r&&o(n,["dynamicThreshold"],r),n}(0,i)),n}function N(e,t){const n={},i=a(t,["functionCallingConfig"]);return null!=i&&o(n,["functionCallingConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["allowedFunctionNames"]);return null!=r&&o(n,["allowedFunctionNames"],r),n}(0,i)),n}function A(e,t,n){const i=a(t,["ttl"]);void 0!==n&&null!=i&&o(n,["ttl"],i);const r=a(t,["expireTime"]);void 0!==n&&null!=r&&o(n,["expireTime"],r);const s=a(t,["displayName"]);void 0!==n&&null!=s&&o(n,["displayName"],s);const l=a(t,["contents"]);if(void 0!==n&&null!=l){let e=v(0,l);Array.isArray(e)&&(e=e.map(e=>I(0,e))),o(n,["contents"],e)}const u=a(t,["systemInstruction"]);void 0!==n&&null!=u&&o(n,["systemInstruction"],I(0,m(0,u)));const c=a(t,["tools"]);if(void 0!==n&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const i=a(t,["googleSearchRetrieval"]);null!=i&&o(n,["googleSearchRetrieval"],C(0,i));const r=a(t,["codeExecution"]);null!=r&&o(n,["codeExecution"],r);const s=a(t,["functionDeclarations"]);return null!=s&&o(n,["functionDeclarations"],s),n}(0,e))),o(n,["tools"],e)}const d=a(t,["toolConfig"]);return void 0!==n&&null!=d&&o(n,["toolConfig"],N(0,d)),{}}function P(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","name"],w(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const i=a(t,["ttl"]);void 0!==n&&null!=i&&o(n,["ttl"],i);const r=a(t,["expireTime"]);return void 0!==n&&null!=r&&o(n,["expireTime"],r),{}}(0,r,n)),n}function O(e,t){const n={},i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const i=a(t,["pageSize"]);void 0!==n&&null!=i&&o(n,["_query","pageSize"],i);const r=a(t,["pageToken"]);return void 0!==n&&null!=r&&o(n,["_query","pageToken"],r),{}}(0,i,n)),n}function M(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["videoMetadata"]);null!=i&&o(n,["videoMetadata"],i);const r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const h=a(t,["inlineData"]);null!=h&&o(n,["inlineData"],h);const f=a(t,["text"]);return null!=f&&o(n,["text"],f),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function R(e,t){const n={},i=a(t,["dynamicRetrievalConfig"]);return null!=i&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["dynamicThreshold"]);return null!=r&&o(n,["dynamicThreshold"],r),n}(0,i)),n}function D(e,t){const n={},i=a(t,["functionCallingConfig"]);return null!=i&&o(n,["functionCallingConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["allowedFunctionNames"]);return null!=r&&o(n,["allowedFunctionNames"],r),n}(0,i)),n}function F(e,t,n){const i=a(t,["ttl"]);void 0!==n&&null!=i&&o(n,["ttl"],i);const r=a(t,["expireTime"]);void 0!==n&&null!=r&&o(n,["expireTime"],r);const s=a(t,["displayName"]);void 0!==n&&null!=s&&o(n,["displayName"],s);const l=a(t,["contents"]);if(void 0!==n&&null!=l){let e=v(0,l);Array.isArray(e)&&(e=e.map(e=>M(0,e))),o(n,["contents"],e)}const u=a(t,["systemInstruction"]);void 0!==n&&null!=u&&o(n,["systemInstruction"],M(0,m(0,u)));const c=a(t,["tools"]);if(void 0!==n&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["retrieval"]);null!=i&&o(n,["retrieval"],i),null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const r=a(t,["googleSearchRetrieval"]);null!=r&&o(n,["googleSearchRetrieval"],R(0,r));const s=a(t,["codeExecution"]);null!=s&&o(n,["codeExecution"],s);const l=a(t,["functionDeclarations"]);return null!=l&&o(n,["functionDeclarations"],l),n}(0,e))),o(n,["tools"],e)}const d=a(t,["toolConfig"]);return void 0!==n&&null!=d&&o(n,["toolConfig"],D(0,d)),{}}function z(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","name"],w(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const i=a(t,["ttl"]);void 0!==n&&null!=i&&o(n,["ttl"],i);const r=a(t,["expireTime"]);return void 0!==n&&null!=r&&o(n,["expireTime"],r),{}}(0,r,n)),n}function B(e,t){const n={},i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const i=a(t,["pageSize"]);void 0!==n&&null!=i&&o(n,["_query","pageSize"],i);const r=a(t,["pageToken"]);return void 0!==n&&null!=r&&o(n,["_query","pageToken"],r),{}}(0,i,n)),n}function U(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["displayName"]);null!=r&&o(n,["displayName"],r);const s=a(t,["model"]);null!=s&&o(n,["model"],s);const l=a(t,["createTime"]);null!=l&&o(n,["createTime"],l);const u=a(t,["updateTime"]);null!=u&&o(n,["updateTime"],u);const c=a(t,["expireTime"]);null!=c&&o(n,["expireTime"],c);const d=a(t,["usageMetadata"]);return null!=d&&o(n,["usageMetadata"],d),n}function q(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["displayName"]);null!=r&&o(n,["displayName"],r);const s=a(t,["model"]);null!=s&&o(n,["model"],s);const l=a(t,["createTime"]);null!=l&&o(n,["createTime"],l);const u=a(t,["updateTime"]);null!=u&&o(n,["updateTime"],u);const c=a(t,["expireTime"]);null!=c&&o(n,["expireTime"],c);const d=a(t,["usageMetadata"]);return null!=d&&o(n,["usageMetadata"],d),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
var V,G,j,$,H,Y,W,X,K,Q,Z,J,ee,te,ne,ie,re,oe,ae,se,le,ue,ce,de,he,fe,pe,ge,me,ye,ve,be,_e,Ee,ke,we,Se,xe,Te,Ie,Ce,Ne,Ae,Pe,Le,Oe,Me,Re,De,Fe,ze,Be,Ue,qe,Ve,Ge,je,$e,He,Ye,We,Xe,Ke,Qe,Ze,Je;(G=V||(V={})).PAGED_ITEM_BATCH_JOBS="batchJobs",G.PAGED_ITEM_MODELS="models",G.PAGED_ITEM_TUNING_JOBS="tuningJobs",G.PAGED_ITEM_FILES="files",G.PAGED_ITEM_CACHED_CONTENTS="cachedContents";class et{constructor(e,t,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,i)}init(e,t,n){var i,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};o=n?"object"==typeof n?Object.assign({},n):n:{config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=null!==(r=null===(i=o.config)||void 0===i?void 0:i.pageSize)&&void 0!==r?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */($=j||(j={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",$.OUTCOME_OK="OUTCOME_OK",$.OUTCOME_FAILED="OUTCOME_FAILED",$.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(Y=H||(H={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",Y.PYTHON="PYTHON",(X=W||(W={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",X.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",X.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",X.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",X.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",X.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(Q=K||(K={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",Q.SEVERITY="SEVERITY",Q.PROBABILITY="PROBABILITY",(J=Z||(Z={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",J.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",J.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",J.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",J.BLOCK_NONE="BLOCK_NONE",J.OFF="OFF",(te=ee||(ee={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",te.MODE_DYNAMIC="MODE_DYNAMIC",(ie=ne||(ne={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",ie.STRING="STRING",ie.NUMBER="NUMBER",ie.INTEGER="INTEGER",ie.BOOLEAN="BOOLEAN",ie.ARRAY="ARRAY",ie.OBJECT="OBJECT",(oe=re||(re={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",oe.STOP="STOP",oe.MAX_TOKENS="MAX_TOKENS",oe.SAFETY="SAFETY",oe.RECITATION="RECITATION",oe.LANGUAGE="LANGUAGE",oe.OTHER="OTHER",oe.BLOCKLIST="BLOCKLIST",oe.PROHIBITED_CONTENT="PROHIBITED_CONTENT",oe.SPII="SPII",oe.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",oe.IMAGE_SAFETY="IMAGE_SAFETY",(se=ae||(ae={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",se.NEGLIGIBLE="NEGLIGIBLE",se.LOW="LOW",se.MEDIUM="MEDIUM",se.HIGH="HIGH",(ue=le||(le={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",ue.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",ue.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",ue.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",ue.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(de=ce||(ce={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",de.SAFETY="SAFETY",de.OTHER="OTHER",de.BLOCKLIST="BLOCKLIST",de.PROHIBITED_CONTENT="PROHIBITED_CONTENT",(fe=he||(he={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",fe.ON_DEMAND="ON_DEMAND",fe.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(ge=pe||(pe={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",ge.TEXT="TEXT",ge.IMAGE="IMAGE",ge.AUDIO="AUDIO",(ye=me||(me={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",ye.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",ye.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",ye.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(be=ve||(ve={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",be.JOB_STATE_QUEUED="JOB_STATE_QUEUED",be.JOB_STATE_PENDING="JOB_STATE_PENDING",be.JOB_STATE_RUNNING="JOB_STATE_RUNNING",be.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",be.JOB_STATE_FAILED="JOB_STATE_FAILED",be.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",be.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",be.JOB_STATE_PAUSED="JOB_STATE_PAUSED",be.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",be.JOB_STATE_UPDATING="JOB_STATE_UPDATING",be.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(Ee=_e||(_e={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",Ee.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",Ee.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",Ee.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",Ee.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",Ee.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",Ee.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(we=ke||(ke={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",we.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",we.BALANCED="BALANCED",we.PRIORITIZE_COST="PRIORITIZE_COST",(xe=Se||(Se={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",xe.MODE_DYNAMIC="MODE_DYNAMIC",(Ie=Te||(Te={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Ie.AUTO="AUTO",Ie.ANY="ANY",Ie.NONE="NONE",(Ne=Ce||(Ce={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Ne.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Ne.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Ne.BLOCK_NONE="BLOCK_NONE",(Pe=Ae||(Ae={})).DONT_ALLOW="DONT_ALLOW",Pe.ALLOW_ADULT="ALLOW_ADULT",Pe.ALLOW_ALL="ALLOW_ALL",(Oe=Le||(Le={})).auto="auto",Oe.en="en",Oe.ja="ja",Oe.ko="ko",Oe.hi="hi",(Re=Me||(Me={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",Re.PROCESSING="PROCESSING",Re.ACTIVE="ACTIVE",Re.FAILED="FAILED",(Fe=De||(De={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",Fe.UPLOADED="UPLOADED",Fe.GENERATED="GENERATED",(Be=ze||(ze={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",Be.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",Be.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",Be.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",Be.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(qe=Ue||(Ue={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",qe.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",qe.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",qe.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(Ge=Ve||(Ve={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",Ge.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",Ge.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",Ge.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",($e=je||(je={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",$e.TEXT="TEXT",$e.IMAGE="IMAGE",$e.VIDEO="VIDEO",$e.AUDIO="AUDIO",$e.DOCUMENT="DOCUMENT",(Ye=He||(He={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",Ye.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",Ye.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(Xe=We||(We={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",Xe.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",Xe.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(Qe=Ke||(Ke={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",Qe.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",Qe.NO_INTERRUPTION="NO_INTERRUPTION",(Je=Ze||(Ze={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",Je.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",Je.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT";class tt{get text(){var e,t,n,i,r,o,a,s;if(0===(null===(i=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;let l="",u=!1;const c=[];for(const d of null!==(s=null===(a=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)&&void 0!==s?s:[]){for(const[e,t]of Object.entries(d))"text"===e||"thought"===e||null===t&&void 0===t||c.push(e);if("string"==typeof d.text){if("boolean"==typeof d.thought&&d.thought)continue;u=!0,l+=d.text}}return c.length,u?l:void 0}get data(){var e,t,n,i,r,o,a,s;if(0===(null===(i=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;let l="";const u=[];for(const c of null!==(s=null===(a=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)&&void 0!==s?s:[]){for(const[e,t]of Object.entries(c))"inlineData"===e||null===t&&void 0===t||u.push(e);c.inlineData&&"string"==typeof c.inlineData.data&&(l+=atob(c.inlineData.data))}return u.length,l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,i,r,o,a,s;if(0===(null===(i=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;const l=null===(s=null===(a=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);return 0!==(null==l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,i,r,o,a,s,l;if(0===(null===(i=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;const u=null===(s=null===(a=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);return 0!==(null==u?void 0:u.length)?null===(l=null==u?void 0:u[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,i,r,o,a,s,l;if(0===(null===(i=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===i?void 0:i.length))return;this.candidates&&this.candidates.length;const u=null===(s=null===(a=null===(o=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===o?void 0:o.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);return 0!==(null==u?void 0:u.length)?null===(l=null==u?void 0:u[0])||void 0===l?void 0:l.output:void 0}}class nt{}class it{}class rt{}class ot{}class at{}class st{}class lt{}class ut{}class ct{}class dt{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ht{}class ft{}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pt extends i{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new et(V.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,n,i,s;let u,c="",d={};if(this.apiClient.isVertexAI()){const i=function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["model"],l(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],F(0,r,n)),n}(this.apiClient,e);return c=r("cachedContents",i._url),d=i._query,delete i.config,delete i._url,delete i._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),u.then(e=>q(this.apiClient,e))}{const t=function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["model"],l(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],A(0,r,n)),n}(this.apiClient,e);return c=r("cachedContents",t._url),d=t._query,delete t.config,delete t._url,delete t._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),u.then(e=>U(this.apiClient,e))}}async get(e){var t,n,i,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const i=function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","name"],w(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return u=r("{name}",i._url),c=i._query,delete i.config,delete i._url,delete i._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>q(this.apiClient,e))}{const t=function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","name"],w(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return u=r("{name}",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>U(this.apiClient,e))}}async delete(e){var t,n,i,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const i=function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","name"],w(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return u=r("{name}",i._url),c=i._query,delete i.config,delete i._url,delete i._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(()=>{const e={},t=new lt;return Object.assign(t,e),t})}{const t=function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","name"],w(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return u=r("{name}",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(()=>{const e={},t=new lt;return Object.assign(t,e),t})}}async update(e){var t,n,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const i=z(this.apiClient,e);return s=r("{name}",i._url),l=i._query,delete i.config,delete i._url,delete i._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>q(this.apiClient,e))}{const t=P(this.apiClient,e);return s=r("{name}",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>U(this.apiClient,e))}}async listInternal(e){var t,n,i,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const i=B(this.apiClient,e);return u=r("cachedContents",i._url),c=i._query,delete i.config,delete i._url,delete i._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},i=a(t,["nextPageToken"]);null!=i&&o(n,["nextPageToken"],i);const r=a(t,["cachedContents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>q(0,e))),o(n,["cachedContents"],e)}return n}(this.apiClient,e),n=new ut;return Object.assign(n,t),n})}{const t=O(this.apiClient,e);return u=r("cachedContents",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},i=a(t,["nextPageToken"]);null!=i&&o(n,["nextPageToken"],i);const r=a(t,["cachedContents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>U(0,e))),o(n,["cachedContents"],e)}return n}(this.apiClient,e),n=new ut;return Object.assign(n,t),n})}}}function gt(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(e){return this instanceof mt?(this.v=e,this):new mt(e)}function yt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,i){o.push([e,t,n,i])>1||s(e,t)})},t&&(i[e]=t(i[e])))}function s(e,t){try{(n=r[e](t)).value instanceof mt?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(i){c(o[0][3],i)}var n}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function vt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=gt(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise(function(i,r){(function(e,t,n,i){Promise.resolve(i).then(function(t){e({value:t,done:n})},t)})(i,r,(t=e[n](t)).done,t.value)})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function bt(e){var t;if(null==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&_t(n)}function _t(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts){if(void 0===t||0===Object.keys(t).length)return!1;if(void 0!==t.text&&""===t.text)return!1}return!0}"function"==typeof SuppressedError&&SuppressedError;class Et{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new kt(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class kt{constructor(e,t,n,i={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=i,this.history=r,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length){if("user"!==e[0].role)throw new Error("History must start with a user turn.");for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error(`Role must be user or model, but got ${t.role}.`)}}(r)}async sendMessage(e){var t;await this.sendPromise;const n=m(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t;const r=null===(t=null===(e=(await i).candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,o=r?[r]:[];this.recordHistory(n,o)})(),await this.sendPromise,i}async sendMessageStream(e){var t;await this.sendPromise;const n=m(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const r=await i;return this.processStreamResponse(r,n)}getHistory(e=!1){return e?function(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let i=0,r=e[0];for(;i<n;)if("user"===e[i].role)r=e[i],i++;else{const o=[];let a=!0;for(;i<n&&"model"===e[i].role;)o.push(e[i]),a&&!_t(e[i])&&(a=!1),i++;a&&(t.push(r),t.push(...o))}return t}(this.history):this.history}processStreamResponse(e,t){var n,i;return yt(this,arguments,function*(){var r,o,a,s;const l=[];try{for(var u,c=!0,d=vt(e);!(r=(u=yield mt(d.next())).done);c=!0){s=u.value,c=!1;const e=s;if(bt(e)){const t=null===(i=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===i?void 0:i.content;void 0!==t&&l.push(t)}yield yield mt(e)}}catch(h){o={error:h}}finally{try{c||r||!(a=d.return)||(yield mt(a.call(d)))}finally{if(o)throw o.error}}this.recordHistory(t,l)})}recordHistory(e,t){let n=[];t.length>0&&t.every(e=>"model"===e.role)?n=t:n.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...n)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wt(e,t){const n={},i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const i=a(t,["pageSize"]);void 0!==n&&null!=i&&o(n,["_query","pageSize"],i);const r=a(t,["pageToken"]);return void 0!==n&&null!=r&&o(n,["_query","pageToken"],r),{}}(0,i,n)),n}function St(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["displayName"]);null!=r&&o(n,["displayName"],r);const s=a(t,["mimeType"]);null!=s&&o(n,["mimeType"],s);const l=a(t,["sizeBytes"]);null!=l&&o(n,["sizeBytes"],l);const u=a(t,["createTime"]);null!=u&&o(n,["createTime"],u);const c=a(t,["expirationTime"]);null!=c&&o(n,["expirationTime"],c);const d=a(t,["updateTime"]);null!=d&&o(n,["updateTime"],d);const h=a(t,["sha256Hash"]);null!=h&&o(n,["sha256Hash"],h);const f=a(t,["uri"]);null!=f&&o(n,["uri"],f);const p=a(t,["downloadUri"]);null!=p&&o(n,["downloadUri"],p);const g=a(t,["state"]);null!=g&&o(n,["state"],g);const m=a(t,["source"]);null!=m&&o(n,["source"],m);const y=a(t,["videoMetadata"]);null!=y&&o(n,["videoMetadata"],y);const v=a(t,["error"]);return null!=v&&o(n,["error"],function(e,t){const n={},i=a(t,["details"]);null!=i&&o(n,["details"],i);const r=a(t,["message"]);null!=r&&o(n,["message"],r);const s=a(t,["code"]);return null!=s&&o(n,["code"],s),n}(0,v)),n}function xt(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["displayName"]);null!=r&&o(n,["displayName"],r);const s=a(t,["mimeType"]);null!=s&&o(n,["mimeType"],s);const l=a(t,["sizeBytes"]);null!=l&&o(n,["sizeBytes"],l);const u=a(t,["createTime"]);null!=u&&o(n,["createTime"],u);const c=a(t,["expirationTime"]);null!=c&&o(n,["expirationTime"],c);const d=a(t,["updateTime"]);null!=d&&o(n,["updateTime"],d);const h=a(t,["sha256Hash"]);null!=h&&o(n,["sha256Hash"],h);const f=a(t,["uri"]);null!=f&&o(n,["uri"],f);const p=a(t,["downloadUri"]);null!=p&&o(n,["downloadUri"],p);const g=a(t,["state"]);null!=g&&o(n,["state"],g);const m=a(t,["source"]);null!=m&&o(n,["source"],m);const y=a(t,["videoMetadata"]);null!=y&&o(n,["videoMetadata"],y);const v=a(t,["error"]);return null!=v&&o(n,["error"],function(e,t){const n={},i=a(t,["details"]);null!=i&&o(n,["details"],i);const r=a(t,["message"]);null!=r&&o(n,["message"],r);const s=a(t,["code"]);return null!=s&&o(n,["code"],s),n}(0,v)),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Tt extends i{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new et(V.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>xt(this.apiClient,e))}async listInternal(e){var t,n;let i,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wt(this.apiClient,e);return s=r("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>{const t=function(e,t){const n={},i=a(t,["nextPageToken"]);null!=i&&o(n,["nextPageToken"],i);const r=a(t,["files"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>xt(0,e))),o(n,["files"],e)}return n}(this.apiClient,e),n=new ct;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let i,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=function(e,t){const n={},i=a(t,["file"]);null!=i&&o(n,["file"],St(0,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return s=r("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(()=>{const e={},t=new ht;return Object.assign(t,e),t})}}async get(e){var t,n;let i,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","file"],T(0,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return s=r("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>xt(this.apiClient,e))}}async delete(e){var t,n;let i,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","file"],T(0,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return s=r("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(()=>{const e={},t=new ft;return Object.assign(t,e),t})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function It(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["videoMetadata"]))throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const r=a(t,["codeExecutionResult"]);null!=r&&o(n,["codeExecutionResult"],r);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function Ct(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["videoMetadata"]);null!=i&&o(n,["videoMetadata"],i);const r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const h=a(t,["inlineData"]);null!=h&&o(n,["inlineData"],h);const f=a(t,["text"]);return null!=f&&o(n,["text"],f),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function Nt(e,t){const n={},i=a(t,["dynamicRetrievalConfig"]);return null!=i&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["dynamicThreshold"]);return null!=r&&o(n,["dynamicThreshold"],r),n}(0,i)),n}function At(e,t){const n={},i=a(t,["dynamicRetrievalConfig"]);return null!=i&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["dynamicThreshold"]);return null!=r&&o(n,["dynamicThreshold"],r),n}(0,i)),n}function Pt(e,t){const n={},i=a(t,["automaticActivityDetection"]);null!=i&&o(n,["automaticActivityDetection"],function(e,t){const n={},i=a(t,["disabled"]);null!=i&&o(n,["disabled"],i);const r=a(t,["startOfSpeechSensitivity"]);null!=r&&o(n,["startOfSpeechSensitivity"],r);const s=a(t,["endOfSpeechSensitivity"]);null!=s&&o(n,["endOfSpeechSensitivity"],s);const l=a(t,["prefixPaddingMs"]);null!=l&&o(n,["prefixPaddingMs"],l);const u=a(t,["silenceDurationMs"]);return null!=u&&o(n,["silenceDurationMs"],u),n}(0,i));const r=a(t,["activityHandling"]);null!=r&&o(n,["activityHandling"],r);const s=a(t,["turnCoverage"]);return null!=s&&o(n,["turnCoverage"],s),n}function Lt(e,t){const n={},i=a(t,["automaticActivityDetection"]);null!=i&&o(n,["automaticActivityDetection"],function(e,t){const n={},i=a(t,["disabled"]);null!=i&&o(n,["disabled"],i);const r=a(t,["startOfSpeechSensitivity"]);null!=r&&o(n,["startOfSpeechSensitivity"],r);const s=a(t,["endOfSpeechSensitivity"]);null!=s&&o(n,["endOfSpeechSensitivity"],s);const l=a(t,["prefixPaddingMs"]);null!=l&&o(n,["prefixPaddingMs"],l);const u=a(t,["silenceDurationMs"]);return null!=u&&o(n,["silenceDurationMs"],u),n}(0,i));const r=a(t,["activityHandling"]);null!=r&&o(n,["activityHandling"],r);const s=a(t,["turnCoverage"]);return null!=s&&o(n,["turnCoverage"],s),n}function Ot(e,t){const n={},i=a(t,["triggerTokens"]);null!=i&&o(n,["triggerTokens"],i);const r=a(t,["slidingWindow"]);return null!=r&&o(n,["slidingWindow"],function(e,t){const n={},i=a(t,["targetTokens"]);return null!=i&&o(n,["targetTokens"],i),n}(0,r)),n}function Mt(e,t){const n={},i=a(t,["triggerTokens"]);null!=i&&o(n,["triggerTokens"],i);const r=a(t,["slidingWindow"]);return null!=r&&o(n,["slidingWindow"],function(e,t){const n={},i=a(t,["targetTokens"]);return null!=i&&o(n,["targetTokens"],i),n}(0,r)),n}function Rt(e,t,n){const i=a(t,["generationConfig"]);void 0!==n&&null!=i&&o(n,["setup","generationConfig"],i);const r=a(t,["responseModalities"]);void 0!==n&&null!=r&&o(n,["setup","generationConfig","responseModalities"],r);const s=a(t,["temperature"]);void 0!==n&&null!=s&&o(n,["setup","generationConfig","temperature"],s);const l=a(t,["topP"]);void 0!==n&&null!=l&&o(n,["setup","generationConfig","topP"],l);const u=a(t,["topK"]);void 0!==n&&null!=u&&o(n,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);void 0!==n&&null!=c&&o(n,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);void 0!==n&&null!=d&&o(n,["setup","generationConfig","mediaResolution"],d);const h=a(t,["seed"]);void 0!==n&&null!=h&&o(n,["setup","generationConfig","seed"],h);const f=a(t,["speechConfig"]);void 0!==n&&null!=f&&o(n,["setup","generationConfig","speechConfig"],f);const p=a(t,["systemInstruction"]);void 0!==n&&null!=p&&o(n,["setup","systemInstruction"],It(0,m(0,p)));const g=a(t,["tools"]);if(void 0!==n&&null!=g){let e=k(0,g);Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const i=a(t,["googleSearchRetrieval"]);null!=i&&o(n,["googleSearchRetrieval"],Nt(0,i));const r=a(t,["codeExecution"]);null!=r&&o(n,["codeExecution"],r);const s=a(t,["functionDeclarations"]);return null!=s&&o(n,["functionDeclarations"],s),n}(0,E(0,e)))),o(n,["setup","tools"],e)}const y=a(t,["sessionResumption"]);if(void 0!==n&&null!=y&&o(n,["setup","sessionResumption"],function(e,t){const n={},i=a(t,["handle"]);if(null!=i&&o(n,["handle"],i),void 0!==a(t,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return n}(0,y)),void 0!==a(t,["inputAudioTranscription"]))throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const v=a(t,["outputAudioTranscription"]);void 0!==n&&null!=v&&o(n,["setup","outputAudioTranscription"],{});const b=a(t,["realtimeInputConfig"]);void 0!==n&&null!=b&&o(n,["setup","realtimeInputConfig"],Pt(0,b));const _=a(t,["contextWindowCompression"]);return void 0!==n&&null!=_&&o(n,["setup","contextWindowCompression"],Ot(0,_)),{}}function Dt(e,t,n){const i=a(t,["generationConfig"]);void 0!==n&&null!=i&&o(n,["setup","generationConfig"],i);const r=a(t,["responseModalities"]);void 0!==n&&null!=r&&o(n,["setup","generationConfig","responseModalities"],r);const s=a(t,["temperature"]);void 0!==n&&null!=s&&o(n,["setup","generationConfig","temperature"],s);const l=a(t,["topP"]);void 0!==n&&null!=l&&o(n,["setup","generationConfig","topP"],l);const u=a(t,["topK"]);void 0!==n&&null!=u&&o(n,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);void 0!==n&&null!=c&&o(n,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);void 0!==n&&null!=d&&o(n,["setup","generationConfig","mediaResolution"],d);const h=a(t,["seed"]);void 0!==n&&null!=h&&o(n,["setup","generationConfig","seed"],h);const f=a(t,["speechConfig"]);void 0!==n&&null!=f&&o(n,["setup","generationConfig","speechConfig"],f);const p=a(t,["systemInstruction"]);void 0!==n&&null!=p&&o(n,["setup","systemInstruction"],Ct(0,m(0,p)));const g=a(t,["tools"]);if(void 0!==n&&null!=g){let e=k(0,g);Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["retrieval"]);null!=i&&o(n,["retrieval"],i),null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const r=a(t,["googleSearchRetrieval"]);null!=r&&o(n,["googleSearchRetrieval"],At(0,r));const s=a(t,["codeExecution"]);null!=s&&o(n,["codeExecution"],s);const l=a(t,["functionDeclarations"]);return null!=l&&o(n,["functionDeclarations"],l),n}(0,E(0,e)))),o(n,["setup","tools"],e)}const y=a(t,["sessionResumption"]);void 0!==n&&null!=y&&o(n,["setup","sessionResumption"],function(e,t){const n={},i=a(t,["handle"]);null!=i&&o(n,["handle"],i);const r=a(t,["transparent"]);return null!=r&&o(n,["transparent"],r),n}(0,y));const v=a(t,["inputAudioTranscription"]);void 0!==n&&null!=v&&o(n,["setup","inputAudioTranscription"],{});const b=a(t,["outputAudioTranscription"]);void 0!==n&&null!=b&&o(n,["setup","outputAudioTranscription"],{});const _=a(t,["realtimeInputConfig"]);void 0!==n&&null!=_&&o(n,["setup","realtimeInputConfig"],Lt(0,_));const w=a(t,["contextWindowCompression"]);return void 0!==n&&null!=w&&o(n,["setup","contextWindowCompression"],Mt(0,w)),{}}function Ft(e,t){const n={},i=a(t,["media"]);null!=i&&o(n,["mediaChunks"],u(e,i));const r=a(t,["audio"]);null!=r&&o(n,["audio"],function(e,t){const n=c(0,t);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}(0,r));const s=a(t,["audioStreamEnd"]);null!=s&&o(n,["audioStreamEnd"],s);const l=a(t,["video"]);null!=l&&o(n,["video"],function(e,t){const n=c(0,t);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}(0,l));const d=a(t,["text"]);null!=d&&o(n,["text"],d);null!=a(t,["activityStart"])&&o(n,["activityStart"],{});return null!=a(t,["activityEnd"])&&o(n,["activityEnd"],{}),n}function zt(e,t){const n={},i=a(t,["media"]);if(null!=i&&o(n,["mediaChunks"],u(e,i)),void 0!==a(t,["audio"]))throw new Error("audio parameter is not supported in Vertex AI.");const r=a(t,["audioStreamEnd"]);if(null!=r&&o(n,["audioStreamEnd"],r),void 0!==a(t,["video"]))throw new Error("video parameter is not supported in Vertex AI.");if(void 0!==a(t,["text"]))throw new Error("text parameter is not supported in Vertex AI.");null!=a(t,["activityStart"])&&o(n,["activityStart"],{});return null!=a(t,["activityEnd"])&&o(n,["activityEnd"],{}),n}function Bt(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const r=a(t,["codeExecutionResult"]);null!=r&&o(n,["codeExecutionResult"],r);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function Ut(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["videoMetadata"]);null!=i&&o(n,["videoMetadata"],i);const r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const h=a(t,["inlineData"]);null!=h&&o(n,["inlineData"],h);const f=a(t,["text"]);return null!=f&&o(n,["text"],f),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function qt(e,t){const n={},i=a(t,["text"]);null!=i&&o(n,["text"],i);const r=a(t,["finished"]);return null!=r&&o(n,["finished"],r),n}function Vt(e,t){const n={},i=a(t,["text"]);null!=i&&o(n,["text"],i);const r=a(t,["finished"]);return null!=r&&o(n,["finished"],r),n}function Gt(e,t){const n={},i=a(t,["functionCalls"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["id"]);null!=i&&o(n,["id"],i);const r=a(t,["args"]);null!=r&&o(n,["args"],r);const s=a(t,["name"]);return null!=s&&o(n,["name"],s),n}(0,e))),o(n,["functionCalls"],e)}return n}function jt(e,t){const n={},i=a(t,["functionCalls"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["args"]);null!=i&&o(n,["args"],i);const r=a(t,["name"]);return null!=r&&o(n,["name"],r),n}(0,e))),o(n,["functionCalls"],e)}return n}function $t(e,t){const n={},i=a(t,["modality"]);null!=i&&o(n,["modality"],i);const r=a(t,["tokenCount"]);return null!=r&&o(n,["tokenCount"],r),n}function Ht(e,t){const n={},i=a(t,["modality"]);null!=i&&o(n,["modality"],i);const r=a(t,["tokenCount"]);return null!=r&&o(n,["tokenCount"],r),n}function Yt(e,t){const n={};null!=a(t,["setupComplete"])&&o(n,["setupComplete"],{});const i=a(t,["serverContent"]);null!=i&&o(n,["serverContent"],function(e,t){const n={},i=a(t,["modelTurn"]);null!=i&&o(n,["modelTurn"],Bt(0,i));const r=a(t,["turnComplete"]);null!=r&&o(n,["turnComplete"],r);const s=a(t,["interrupted"]);null!=s&&o(n,["interrupted"],s);const l=a(t,["groundingMetadata"]);null!=l&&o(n,["groundingMetadata"],l);const u=a(t,["generationComplete"]);null!=u&&o(n,["generationComplete"],u);const c=a(t,["inputTranscription"]);null!=c&&o(n,["inputTranscription"],qt(0,c));const d=a(t,["outputTranscription"]);return null!=d&&o(n,["outputTranscription"],qt(0,d)),n}(0,i));const r=a(t,["toolCall"]);null!=r&&o(n,["toolCall"],Gt(0,r));const s=a(t,["toolCallCancellation"]);null!=s&&o(n,["toolCallCancellation"],function(e,t){const n={},i=a(t,["ids"]);return null!=i&&o(n,["ids"],i),n}(0,s));const l=a(t,["usageMetadata"]);null!=l&&o(n,["usageMetadata"],function(e,t){const n={},i=a(t,["promptTokenCount"]);null!=i&&o(n,["promptTokenCount"],i);const r=a(t,["cachedContentTokenCount"]);null!=r&&o(n,["cachedContentTokenCount"],r);const s=a(t,["responseTokenCount"]);null!=s&&o(n,["responseTokenCount"],s);const l=a(t,["toolUsePromptTokenCount"]);null!=l&&o(n,["toolUsePromptTokenCount"],l);const u=a(t,["thoughtsTokenCount"]);null!=u&&o(n,["thoughtsTokenCount"],u);const c=a(t,["totalTokenCount"]);null!=c&&o(n,["totalTokenCount"],c);const d=a(t,["promptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>$t(0,e))),o(n,["promptTokensDetails"],e)}const h=a(t,["cacheTokensDetails"]);if(null!=h){let e=h;Array.isArray(e)&&(e=e.map(e=>$t(0,e))),o(n,["cacheTokensDetails"],e)}const f=a(t,["responseTokensDetails"]);if(null!=f){let e=f;Array.isArray(e)&&(e=e.map(e=>$t(0,e))),o(n,["responseTokensDetails"],e)}const p=a(t,["toolUsePromptTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>$t(0,e))),o(n,["toolUsePromptTokensDetails"],e)}return n}(0,l));const u=a(t,["goAway"]);null!=u&&o(n,["goAway"],function(e,t){const n={},i=a(t,["timeLeft"]);return null!=i&&o(n,["timeLeft"],i),n}(0,u));const c=a(t,["sessionResumptionUpdate"]);return null!=c&&o(n,["sessionResumptionUpdate"],function(e,t){const n={},i=a(t,["newHandle"]);null!=i&&o(n,["newHandle"],i);const r=a(t,["resumable"]);null!=r&&o(n,["resumable"],r);const s=a(t,["lastConsumedClientMessageIndex"]);return null!=s&&o(n,["lastConsumedClientMessageIndex"],s),n}(0,c)),n}function Wt(e,t){const n={};null!=a(t,["setupComplete"])&&o(n,["setupComplete"],{});const i=a(t,["serverContent"]);null!=i&&o(n,["serverContent"],function(e,t){const n={},i=a(t,["modelTurn"]);null!=i&&o(n,["modelTurn"],Ut(0,i));const r=a(t,["turnComplete"]);null!=r&&o(n,["turnComplete"],r);const s=a(t,["interrupted"]);null!=s&&o(n,["interrupted"],s);const l=a(t,["groundingMetadata"]);null!=l&&o(n,["groundingMetadata"],l);const u=a(t,["generationComplete"]);null!=u&&o(n,["generationComplete"],u);const c=a(t,["inputTranscription"]);null!=c&&o(n,["inputTranscription"],Vt(0,c));const d=a(t,["outputTranscription"]);return null!=d&&o(n,["outputTranscription"],Vt(0,d)),n}(0,i));const r=a(t,["toolCall"]);null!=r&&o(n,["toolCall"],jt(0,r));const s=a(t,["toolCallCancellation"]);null!=s&&o(n,["toolCallCancellation"],function(e,t){const n={},i=a(t,["ids"]);return null!=i&&o(n,["ids"],i),n}(0,s));const l=a(t,["usageMetadata"]);null!=l&&o(n,["usageMetadata"],function(e,t){const n={},i=a(t,["promptTokenCount"]);null!=i&&o(n,["promptTokenCount"],i);const r=a(t,["cachedContentTokenCount"]);null!=r&&o(n,["cachedContentTokenCount"],r);const s=a(t,["candidatesTokenCount"]);null!=s&&o(n,["responseTokenCount"],s);const l=a(t,["toolUsePromptTokenCount"]);null!=l&&o(n,["toolUsePromptTokenCount"],l);const u=a(t,["thoughtsTokenCount"]);null!=u&&o(n,["thoughtsTokenCount"],u);const c=a(t,["totalTokenCount"]);null!=c&&o(n,["totalTokenCount"],c);const d=a(t,["promptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>Ht(0,e))),o(n,["promptTokensDetails"],e)}const h=a(t,["cacheTokensDetails"]);if(null!=h){let e=h;Array.isArray(e)&&(e=e.map(e=>Ht(0,e))),o(n,["cacheTokensDetails"],e)}const f=a(t,["candidatesTokensDetails"]);if(null!=f){let e=f;Array.isArray(e)&&(e=e.map(e=>Ht(0,e))),o(n,["responseTokensDetails"],e)}const p=a(t,["toolUsePromptTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>Ht(0,e))),o(n,["toolUsePromptTokensDetails"],e)}const g=a(t,["trafficType"]);return null!=g&&o(n,["trafficType"],g),n}(0,l));const u=a(t,["goAway"]);null!=u&&o(n,["goAway"],function(e,t){const n={},i=a(t,["timeLeft"]);return null!=i&&o(n,["timeLeft"],i),n}(0,u));const c=a(t,["sessionResumptionUpdate"]);return null!=c&&o(n,["sessionResumptionUpdate"],function(e,t){const n={},i=a(t,["newHandle"]);null!=i&&o(n,["newHandle"],i);const r=a(t,["resumable"]);null!=r&&o(n,["resumable"],r);const s=a(t,["lastConsumedClientMessageIndex"]);return null!=s&&o(n,["lastConsumedClientMessageIndex"],s),n}(0,c)),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xt(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["videoMetadata"]))throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const r=a(t,["codeExecutionResult"]);null!=r&&o(n,["codeExecutionResult"],r);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function Kt(e,t){const n={},i=a(t,["dynamicRetrievalConfig"]);return null!=i&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["dynamicThreshold"]);return null!=r&&o(n,["dynamicThreshold"],r),n}(0,i)),n}function Qt(e,t){const n={},i=a(t,["functionCallingConfig"]);return null!=i&&o(n,["functionCallingConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["allowedFunctionNames"]);return null!=r&&o(n,["allowedFunctionNames"],r),n}(0,i)),n}function Zt(e,t){const n={},i=a(t,["prebuiltVoiceConfig"]);return null!=i&&o(n,["prebuiltVoiceConfig"],function(e,t){const n={},i=a(t,["voiceName"]);return null!=i&&o(n,["voiceName"],i),n}(0,i)),n}function Jt(e,t,n){const i={},r=a(t,["systemInstruction"]);void 0!==n&&null!=r&&o(n,["systemInstruction"],Xt(0,m(0,r)));const s=a(t,["temperature"]);null!=s&&o(i,["temperature"],s);const l=a(t,["topP"]);null!=l&&o(i,["topP"],l);const u=a(t,["topK"]);null!=u&&o(i,["topK"],u);const c=a(t,["candidateCount"]);null!=c&&o(i,["candidateCount"],c);const d=a(t,["maxOutputTokens"]);null!=d&&o(i,["maxOutputTokens"],d);const h=a(t,["stopSequences"]);null!=h&&o(i,["stopSequences"],h);const f=a(t,["responseLogprobs"]);null!=f&&o(i,["responseLogprobs"],f);const p=a(t,["logprobs"]);null!=p&&o(i,["logprobs"],p);const g=a(t,["presencePenalty"]);null!=g&&o(i,["presencePenalty"],g);const y=a(t,["frequencyPenalty"]);null!=y&&o(i,["frequencyPenalty"],y);const v=a(t,["seed"]);null!=v&&o(i,["seed"],v);const S=a(t,["responseMimeType"]);null!=S&&o(i,["responseMimeType"],S);const x=a(t,["responseSchema"]);if(null!=x&&o(i,["responseSchema"],b(0,x)),void 0!==a(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==a(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=a(t,["safetySettings"]);if(void 0!==n&&null!=T){let e=T;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["method"]))throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["category"]);null!=i&&o(n,["category"],i);const r=a(t,["threshold"]);return null!=r&&o(n,["threshold"],r),n}(0,e))),o(n,["safetySettings"],e)}const I=a(t,["tools"]);if(void 0!==n&&null!=I){let e=k(0,I);Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={};if(void 0!==a(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const i=a(t,["googleSearchRetrieval"]);null!=i&&o(n,["googleSearchRetrieval"],Kt(0,i));const r=a(t,["codeExecution"]);null!=r&&o(n,["codeExecution"],r);const s=a(t,["functionDeclarations"]);return null!=s&&o(n,["functionDeclarations"],s),n}(0,E(0,e)))),o(n,["tools"],e)}const C=a(t,["toolConfig"]);if(void 0!==n&&null!=C&&o(n,["toolConfig"],Qt(0,C)),void 0!==a(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const N=a(t,["cachedContent"]);void 0!==n&&null!=N&&o(n,["cachedContent"],w(e,N));const A=a(t,["responseModalities"]);null!=A&&o(i,["responseModalities"],A);const P=a(t,["mediaResolution"]);null!=P&&o(i,["mediaResolution"],P);const L=a(t,["speechConfig"]);if(null!=L&&o(i,["speechConfig"],function(e,t){const n={},i=a(t,["voiceConfig"]);null!=i&&o(n,["voiceConfig"],Zt(0,i));const r=a(t,["languageCode"]);return null!=r&&o(n,["languageCode"],r),n}(0,_(0,L))),void 0!==a(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=a(t,["thinkingConfig"]);return null!=O&&o(i,["thinkingConfig"],function(e,t){const n={},i=a(t,["includeThoughts"]);null!=i&&o(n,["includeThoughts"],i);const r=a(t,["thinkingBudget"]);return null!=r&&o(n,["thinkingBudget"],r),n}(0,O)),i}function en(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["contents"]);if(null!=r){let e=v(0,r);Array.isArray(e)&&(e=e.map(e=>Xt(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["generationConfig"],Jt(e,l,n)),n}function tn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["contents"]);null!=r&&o(n,["requests[]","content"],y(e,r));const l=a(t,["config"]);null!=l&&o(n,["config"],function(e,t,n){const i=a(t,["taskType"]);void 0!==n&&null!=i&&o(n,["requests[]","taskType"],i);const r=a(t,["title"]);void 0!==n&&null!=r&&o(n,["requests[]","title"],r);const s=a(t,["outputDimensionality"]);if(void 0!==n&&null!=s&&o(n,["requests[]","outputDimensionality"],s),void 0!==a(t,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==a(t,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(0,l,n));const u=a(t,["model"]);return void 0!==u&&o(n,["requests[]","model"],s(e,u)),n}function nn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["prompt"]);null!=r&&o(n,["instances[0]","prompt"],r);const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t,n){if(void 0!==a(t,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==a(t,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);void 0!==n&&null!=i&&o(n,["parameters","sampleCount"],i);const r=a(t,["aspectRatio"]);void 0!==n&&null!=r&&o(n,["parameters","aspectRatio"],r);const s=a(t,["guidanceScale"]);if(void 0!==n&&null!=s&&o(n,["parameters","guidanceScale"],s),void 0!==a(t,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const l=a(t,["safetyFilterLevel"]);void 0!==n&&null!=l&&o(n,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);void 0!==n&&null!=u&&o(n,["parameters","personGeneration"],u);const c=a(t,["includeSafetyAttributes"]);void 0!==n&&null!=c&&o(n,["parameters","includeSafetyAttributes"],c);const d=a(t,["includeRaiReason"]);void 0!==n&&null!=d&&o(n,["parameters","includeRaiReason"],d);const h=a(t,["language"]);void 0!==n&&null!=h&&o(n,["parameters","language"],h);const f=a(t,["outputMimeType"]);void 0!==n&&null!=f&&o(n,["parameters","outputOptions","mimeType"],f);const p=a(t,["outputCompressionQuality"]);if(void 0!==n&&null!=p&&o(n,["parameters","outputOptions","compressionQuality"],p),void 0!==a(t,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==a(t,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(0,l,n)),n}function rn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","name"],s(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const i=a(t,["displayName"]);void 0!==n&&null!=i&&o(n,["displayName"],i);const r=a(t,["description"]);return void 0!==n&&null!=r&&o(n,["description"],r),{}}(0,r,n)),n}function on(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["contents"]);if(null!=r){let e=v(0,r);Array.isArray(e)&&(e=e.map(e=>Xt(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t){if(void 0!==a(t,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==a(t,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==a(t,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.");return{}}(0,l)),n}function an(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["prompt"]);null!=r&&o(n,["instances[0]","prompt"],r);const l=a(t,["image"]);null!=l&&o(n,["instances[0]","image"],function(e,t){const n={};if(void 0!==a(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const i=a(t,["imageBytes"]);null!=i&&o(n,["bytesBase64Encoded"],x(0,i));const r=a(t,["mimeType"]);return null!=r&&o(n,["mimeType"],r),n}(0,l));const u=a(t,["config"]);return null!=u&&o(n,["config"],function(e,t,n){const i=a(t,["numberOfVideos"]);if(void 0!==n&&null!=i&&o(n,["parameters","sampleCount"],i),void 0!==a(t,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==a(t,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const r=a(t,["durationSeconds"]);if(void 0!==n&&null!=r&&o(n,["parameters","durationSeconds"],r),void 0!==a(t,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["aspectRatio"]);if(void 0!==n&&null!=s&&o(n,["parameters","aspectRatio"],s),void 0!==a(t,["resolution"]))throw new Error("resolution parameter is not supported in Gemini API.");const l=a(t,["personGeneration"]);if(void 0!==n&&null!=l&&o(n,["parameters","personGeneration"],l),void 0!==a(t,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);if(void 0!==n&&null!=u&&o(n,["parameters","negativePrompt"],u),void 0!==a(t,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(0,u,n)),n}function sn(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["videoMetadata"]);null!=i&&o(n,["videoMetadata"],i);const r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const h=a(t,["inlineData"]);null!=h&&o(n,["inlineData"],h);const f=a(t,["text"]);return null!=f&&o(n,["text"],f),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function ln(e,t){const n={},i=a(t,["dynamicRetrievalConfig"]);return null!=i&&o(n,["dynamicRetrievalConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["dynamicThreshold"]);return null!=r&&o(n,["dynamicThreshold"],r),n}(0,i)),n}function un(e,t){const n={},i=a(t,["retrieval"]);null!=i&&o(n,["retrieval"],i);null!=a(t,["googleSearch"])&&o(n,["googleSearch"],{});const r=a(t,["googleSearchRetrieval"]);null!=r&&o(n,["googleSearchRetrieval"],ln(0,r));const s=a(t,["codeExecution"]);null!=s&&o(n,["codeExecution"],s);const l=a(t,["functionDeclarations"]);return null!=l&&o(n,["functionDeclarations"],l),n}function cn(e,t){const n={},i=a(t,["functionCallingConfig"]);return null!=i&&o(n,["functionCallingConfig"],function(e,t){const n={},i=a(t,["mode"]);null!=i&&o(n,["mode"],i);const r=a(t,["allowedFunctionNames"]);return null!=r&&o(n,["allowedFunctionNames"],r),n}(0,i)),n}function dn(e,t){const n={},i=a(t,["prebuiltVoiceConfig"]);return null!=i&&o(n,["prebuiltVoiceConfig"],function(e,t){const n={},i=a(t,["voiceName"]);return null!=i&&o(n,["voiceName"],i),n}(0,i)),n}function hn(e,t,n){const i={},r=a(t,["systemInstruction"]);void 0!==n&&null!=r&&o(n,["systemInstruction"],sn(0,m(0,r)));const s=a(t,["temperature"]);null!=s&&o(i,["temperature"],s);const l=a(t,["topP"]);null!=l&&o(i,["topP"],l);const u=a(t,["topK"]);null!=u&&o(i,["topK"],u);const c=a(t,["candidateCount"]);null!=c&&o(i,["candidateCount"],c);const d=a(t,["maxOutputTokens"]);null!=d&&o(i,["maxOutputTokens"],d);const h=a(t,["stopSequences"]);null!=h&&o(i,["stopSequences"],h);const f=a(t,["responseLogprobs"]);null!=f&&o(i,["responseLogprobs"],f);const p=a(t,["logprobs"]);null!=p&&o(i,["logprobs"],p);const g=a(t,["presencePenalty"]);null!=g&&o(i,["presencePenalty"],g);const y=a(t,["frequencyPenalty"]);null!=y&&o(i,["frequencyPenalty"],y);const v=a(t,["seed"]);null!=v&&o(i,["seed"],v);const S=a(t,["responseMimeType"]);null!=S&&o(i,["responseMimeType"],S);const x=a(t,["responseSchema"]);null!=x&&o(i,["responseSchema"],b(0,x));const T=a(t,["routingConfig"]);null!=T&&o(i,["routingConfig"],T);const I=a(t,["modelSelectionConfig"]);null!=I&&o(i,["modelConfig"],function(e,t){const n={},i=a(t,["featureSelectionPreference"]);return null!=i&&o(n,["featureSelectionPreference"],i),n}(0,I));const C=a(t,["safetySettings"]);if(void 0!==n&&null!=C){let e=C;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["method"]);null!=i&&o(n,["method"],i);const r=a(t,["category"]);null!=r&&o(n,["category"],r);const s=a(t,["threshold"]);return null!=s&&o(n,["threshold"],s),n}(0,e))),o(n,["safetySettings"],e)}const N=a(t,["tools"]);if(void 0!==n&&null!=N){let e=k(0,N);Array.isArray(e)&&(e=e.map(e=>un(0,E(0,e)))),o(n,["tools"],e)}const A=a(t,["toolConfig"]);void 0!==n&&null!=A&&o(n,["toolConfig"],cn(0,A));const P=a(t,["labels"]);void 0!==n&&null!=P&&o(n,["labels"],P);const L=a(t,["cachedContent"]);void 0!==n&&null!=L&&o(n,["cachedContent"],w(e,L));const O=a(t,["responseModalities"]);null!=O&&o(i,["responseModalities"],O);const M=a(t,["mediaResolution"]);null!=M&&o(i,["mediaResolution"],M);const R=a(t,["speechConfig"]);null!=R&&o(i,["speechConfig"],function(e,t){const n={},i=a(t,["voiceConfig"]);null!=i&&o(n,["voiceConfig"],dn(0,i));const r=a(t,["languageCode"]);return null!=r&&o(n,["languageCode"],r),n}(0,_(0,R)));const D=a(t,["audioTimestamp"]);null!=D&&o(i,["audioTimestamp"],D);const F=a(t,["thinkingConfig"]);return null!=F&&o(i,["thinkingConfig"],function(e,t){const n={},i=a(t,["includeThoughts"]);null!=i&&o(n,["includeThoughts"],i);const r=a(t,["thinkingBudget"]);return null!=r&&o(n,["thinkingBudget"],r),n}(0,F)),i}function fn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["contents"]);if(null!=r){let e=v(0,r);Array.isArray(e)&&(e=e.map(e=>sn(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["generationConfig"],hn(e,l,n)),n}function pn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["contents"]);null!=r&&o(n,["instances[]","content"],y(e,r));const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t,n){const i=a(t,["taskType"]);void 0!==n&&null!=i&&o(n,["instances[]","task_type"],i);const r=a(t,["title"]);void 0!==n&&null!=r&&o(n,["instances[]","title"],r);const s=a(t,["outputDimensionality"]);void 0!==n&&null!=s&&o(n,["parameters","outputDimensionality"],s);const l=a(t,["mimeType"]);void 0!==n&&null!=l&&o(n,["instances[]","mimeType"],l);const u=a(t,["autoTruncate"]);return void 0!==n&&null!=u&&o(n,["parameters","autoTruncate"],u),{}}(0,l,n)),n}function gn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["prompt"]);null!=r&&o(n,["instances[0]","prompt"],r);const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t,n){const i=a(t,["outputGcsUri"]);void 0!==n&&null!=i&&o(n,["parameters","storageUri"],i);const r=a(t,["negativePrompt"]);void 0!==n&&null!=r&&o(n,["parameters","negativePrompt"],r);const s=a(t,["numberOfImages"]);void 0!==n&&null!=s&&o(n,["parameters","sampleCount"],s);const l=a(t,["aspectRatio"]);void 0!==n&&null!=l&&o(n,["parameters","aspectRatio"],l);const u=a(t,["guidanceScale"]);void 0!==n&&null!=u&&o(n,["parameters","guidanceScale"],u);const c=a(t,["seed"]);void 0!==n&&null!=c&&o(n,["parameters","seed"],c);const d=a(t,["safetyFilterLevel"]);void 0!==n&&null!=d&&o(n,["parameters","safetySetting"],d);const h=a(t,["personGeneration"]);void 0!==n&&null!=h&&o(n,["parameters","personGeneration"],h);const f=a(t,["includeSafetyAttributes"]);void 0!==n&&null!=f&&o(n,["parameters","includeSafetyAttributes"],f);const p=a(t,["includeRaiReason"]);void 0!==n&&null!=p&&o(n,["parameters","includeRaiReason"],p);const g=a(t,["language"]);void 0!==n&&null!=g&&o(n,["parameters","language"],g);const m=a(t,["outputMimeType"]);void 0!==n&&null!=m&&o(n,["parameters","outputOptions","mimeType"],m);const y=a(t,["outputCompressionQuality"]);void 0!==n&&null!=y&&o(n,["parameters","outputOptions","compressionQuality"],y);const v=a(t,["addWatermark"]);void 0!==n&&null!=v&&o(n,["parameters","addWatermark"],v);const b=a(t,["enhancePrompt"]);return void 0!==n&&null!=b&&o(n,["parameters","enhancePrompt"],b),{}}(0,l,n)),n}function mn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],function(e,t,n){const i=a(t,["displayName"]);void 0!==n&&null!=i&&o(n,["displayName"],i);const r=a(t,["description"]);return void 0!==n&&null!=r&&o(n,["description"],r),{}}(0,r,n)),n}function yn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["contents"]);if(null!=r){let e=v(0,r);Array.isArray(e)&&(e=e.map(e=>sn(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["config"],function(e,t,n){const i=a(t,["systemInstruction"]);void 0!==n&&null!=i&&o(n,["systemInstruction"],sn(0,m(0,i)));const r=a(t,["tools"]);if(void 0!==n&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>un(0,e))),o(n,["tools"],e)}const s=a(t,["generationConfig"]);return void 0!==n&&null!=s&&o(n,["generationConfig"],s),{}}(0,l,n)),n}function vn(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["prompt"]);null!=r&&o(n,["instances[0]","prompt"],r);const l=a(t,["image"]);null!=l&&o(n,["instances[0]","image"],function(e,t){const n={},i=a(t,["gcsUri"]);null!=i&&o(n,["gcsUri"],i);const r=a(t,["imageBytes"]);null!=r&&o(n,["bytesBase64Encoded"],x(0,r));const s=a(t,["mimeType"]);return null!=s&&o(n,["mimeType"],s),n}(0,l));const u=a(t,["config"]);return null!=u&&o(n,["config"],function(e,t,n){const i=a(t,["numberOfVideos"]);void 0!==n&&null!=i&&o(n,["parameters","sampleCount"],i);const r=a(t,["outputGcsUri"]);void 0!==n&&null!=r&&o(n,["parameters","storageUri"],r);const s=a(t,["fps"]);void 0!==n&&null!=s&&o(n,["parameters","fps"],s);const l=a(t,["durationSeconds"]);void 0!==n&&null!=l&&o(n,["parameters","durationSeconds"],l);const u=a(t,["seed"]);void 0!==n&&null!=u&&o(n,["parameters","seed"],u);const c=a(t,["aspectRatio"]);void 0!==n&&null!=c&&o(n,["parameters","aspectRatio"],c);const d=a(t,["resolution"]);void 0!==n&&null!=d&&o(n,["parameters","resolution"],d);const h=a(t,["personGeneration"]);void 0!==n&&null!=h&&o(n,["parameters","personGeneration"],h);const f=a(t,["pubsubTopic"]);void 0!==n&&null!=f&&o(n,["parameters","pubsubTopic"],f);const p=a(t,["negativePrompt"]);void 0!==n&&null!=p&&o(n,["parameters","negativePrompt"],p);const g=a(t,["enhancePrompt"]);return void 0!==n&&null!=g&&o(n,["parameters","enhancePrompt"],g),{}}(0,u,n)),n}function bn(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["thought"]);null!=i&&o(n,["thought"],i);const r=a(t,["codeExecutionResult"]);null!=r&&o(n,["codeExecutionResult"],r);const s=a(t,["executableCode"]);null!=s&&o(n,["executableCode"],s);const l=a(t,["fileData"]);null!=l&&o(n,["fileData"],l);const u=a(t,["functionCall"]);null!=u&&o(n,["functionCall"],u);const c=a(t,["functionResponse"]);null!=c&&o(n,["functionResponse"],c);const d=a(t,["inlineData"]);null!=d&&o(n,["inlineData"],d);const h=a(t,["text"]);return null!=h&&o(n,["text"],h),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function _n(e,t){const n={},i=a(t,["content"]);null!=i&&o(n,["content"],bn(0,i));const r=a(t,["citationMetadata"]);null!=r&&o(n,["citationMetadata"],function(e,t){const n={},i=a(t,["citationSources"]);return null!=i&&o(n,["citations"],i),n}(0,r));const s=a(t,["tokenCount"]);null!=s&&o(n,["tokenCount"],s);const l=a(t,["finishReason"]);null!=l&&o(n,["finishReason"],l);const u=a(t,["avgLogprobs"]);null!=u&&o(n,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);null!=c&&o(n,["groundingMetadata"],c);const d=a(t,["index"]);null!=d&&o(n,["index"],d);const h=a(t,["logprobsResult"]);null!=h&&o(n,["logprobsResult"],h);const f=a(t,["safetyRatings"]);return null!=f&&o(n,["safetyRatings"],f),n}function En(e,t){const n={},i=a(t,["candidates"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>_n(0,e))),o(n,["candidates"],e)}const r=a(t,["modelVersion"]);null!=r&&o(n,["modelVersion"],r);const s=a(t,["promptFeedback"]);null!=s&&o(n,["promptFeedback"],s);const l=a(t,["usageMetadata"]);return null!=l&&o(n,["usageMetadata"],l),n}function kn(e,t){const n={},i=a(t,["embeddings"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["values"]);return null!=i&&o(n,["values"],i),n}(0,e))),o(n,["embeddings"],e)}return null!=a(t,["metadata"])&&o(n,["metadata"],{}),n}function wn(e,t){const n={},i=a(t,["safetyAttributes","categories"]);null!=i&&o(n,["categories"],i);const r=a(t,["safetyAttributes","scores"]);null!=r&&o(n,["scores"],r);const s=a(t,["contentType"]);return null!=s&&o(n,["contentType"],s),n}function Sn(e,t){const n={},i=a(t,["_self"]);null!=i&&o(n,["image"],function(e,t){const n={},i=a(t,["bytesBase64Encoded"]);null!=i&&o(n,["imageBytes"],x(0,i));const r=a(t,["mimeType"]);return null!=r&&o(n,["mimeType"],r),n}(0,i));const r=a(t,["raiFilteredReason"]);null!=r&&o(n,["raiFilteredReason"],r);const s=a(t,["_self"]);return null!=s&&o(n,["safetyAttributes"],wn(0,s)),n}function xn(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["displayName"]);null!=r&&o(n,["displayName"],r);const s=a(t,["description"]);null!=s&&o(n,["description"],s);const l=a(t,["version"]);null!=l&&o(n,["version"],l);const u=a(t,["_self"]);null!=u&&o(n,["tunedModelInfo"],function(e,t){const n={},i=a(t,["baseModel"]);null!=i&&o(n,["baseModel"],i);const r=a(t,["createTime"]);null!=r&&o(n,["createTime"],r);const s=a(t,["updateTime"]);return null!=s&&o(n,["updateTime"],s),n}(0,u));const c=a(t,["inputTokenLimit"]);null!=c&&o(n,["inputTokenLimit"],c);const d=a(t,["outputTokenLimit"]);null!=d&&o(n,["outputTokenLimit"],d);const h=a(t,["supportedGenerationMethods"]);return null!=h&&o(n,["supportedActions"],h),n}function Tn(e,t){const n={},i=a(t,["_self"]);return null!=i&&o(n,["video"],function(e,t){const n={},i=a(t,["video","uri"]);null!=i&&o(n,["uri"],i);const r=a(t,["video","encodedVideo"]);null!=r&&o(n,["videoBytes"],x(0,r));const s=a(t,["encoding"]);return null!=s&&o(n,["mimeType"],s),n}(0,i)),n}function In(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["metadata"]);null!=r&&o(n,["metadata"],r);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);null!=l&&o(n,["error"],l);const u=a(t,["response","generateVideoResponse"]);return null!=u&&o(n,["response"],function(e,t){const n={},i=a(t,["generatedSamples"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Tn(0,e))),o(n,["generatedVideos"],e)}const r=a(t,["raiMediaFilteredCount"]);null!=r&&o(n,["raiMediaFilteredCount"],r);const s=a(t,["raiMediaFilteredReasons"]);return null!=s&&o(n,["raiMediaFilteredReasons"],s),n}(0,u)),n}function Cn(e,t){const n={},i=a(t,["parts"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["videoMetadata"]);null!=i&&o(n,["videoMetadata"],i);const r=a(t,["thought"]);null!=r&&o(n,["thought"],r);const s=a(t,["codeExecutionResult"]);null!=s&&o(n,["codeExecutionResult"],s);const l=a(t,["executableCode"]);null!=l&&o(n,["executableCode"],l);const u=a(t,["fileData"]);null!=u&&o(n,["fileData"],u);const c=a(t,["functionCall"]);null!=c&&o(n,["functionCall"],c);const d=a(t,["functionResponse"]);null!=d&&o(n,["functionResponse"],d);const h=a(t,["inlineData"]);null!=h&&o(n,["inlineData"],h);const f=a(t,["text"]);return null!=f&&o(n,["text"],f),n}(0,e))),o(n,["parts"],e)}const r=a(t,["role"]);return null!=r&&o(n,["role"],r),n}function Nn(e,t){const n={},i=a(t,["content"]);null!=i&&o(n,["content"],Cn(0,i));const r=a(t,["citationMetadata"]);null!=r&&o(n,["citationMetadata"],function(e,t){const n={},i=a(t,["citations"]);return null!=i&&o(n,["citations"],i),n}(0,r));const s=a(t,["finishMessage"]);null!=s&&o(n,["finishMessage"],s);const l=a(t,["finishReason"]);null!=l&&o(n,["finishReason"],l);const u=a(t,["avgLogprobs"]);null!=u&&o(n,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);null!=c&&o(n,["groundingMetadata"],c);const d=a(t,["index"]);null!=d&&o(n,["index"],d);const h=a(t,["logprobsResult"]);null!=h&&o(n,["logprobsResult"],h);const f=a(t,["safetyRatings"]);return null!=f&&o(n,["safetyRatings"],f),n}function An(e,t){const n={},i=a(t,["candidates"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Nn(0,e))),o(n,["candidates"],e)}const r=a(t,["createTime"]);null!=r&&o(n,["createTime"],r);const s=a(t,["responseId"]);null!=s&&o(n,["responseId"],s);const l=a(t,["modelVersion"]);null!=l&&o(n,["modelVersion"],l);const u=a(t,["promptFeedback"]);null!=u&&o(n,["promptFeedback"],u);const c=a(t,["usageMetadata"]);return null!=c&&o(n,["usageMetadata"],c),n}function Pn(e,t){const n={},i=a(t,["values"]);null!=i&&o(n,["values"],i);const r=a(t,["statistics"]);return null!=r&&o(n,["statistics"],function(e,t){const n={},i=a(t,["truncated"]);null!=i&&o(n,["truncated"],i);const r=a(t,["token_count"]);return null!=r&&o(n,["tokenCount"],r),n}(0,r)),n}function Ln(e,t){const n={},i=a(t,["predictions[]","embeddings"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Pn(0,e))),o(n,["embeddings"],e)}const r=a(t,["metadata"]);return null!=r&&o(n,["metadata"],function(e,t){const n={},i=a(t,["billableCharacterCount"]);return null!=i&&o(n,["billableCharacterCount"],i),n}(0,r)),n}function On(e,t){const n={},i=a(t,["safetyAttributes","categories"]);null!=i&&o(n,["categories"],i);const r=a(t,["safetyAttributes","scores"]);null!=r&&o(n,["scores"],r);const s=a(t,["contentType"]);return null!=s&&o(n,["contentType"],s),n}function Mn(e,t){const n={},i=a(t,["_self"]);null!=i&&o(n,["image"],function(e,t){const n={},i=a(t,["gcsUri"]);null!=i&&o(n,["gcsUri"],i);const r=a(t,["bytesBase64Encoded"]);null!=r&&o(n,["imageBytes"],x(0,r));const s=a(t,["mimeType"]);return null!=s&&o(n,["mimeType"],s),n}(0,i));const r=a(t,["raiFilteredReason"]);null!=r&&o(n,["raiFilteredReason"],r);const s=a(t,["_self"]);null!=s&&o(n,["safetyAttributes"],On(0,s));const l=a(t,["prompt"]);return null!=l&&o(n,["enhancedPrompt"],l),n}function Rn(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["displayName"]);null!=r&&o(n,["displayName"],r);const s=a(t,["description"]);null!=s&&o(n,["description"],s);const l=a(t,["versionId"]);null!=l&&o(n,["version"],l);const u=a(t,["deployedModels"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["endpoint"]);null!=i&&o(n,["name"],i);const r=a(t,["deployedModelId"]);return null!=r&&o(n,["deployedModelId"],r),n}(0,e))),o(n,["endpoints"],e)}const c=a(t,["labels"]);null!=c&&o(n,["labels"],c);const d=a(t,["_self"]);return null!=d&&o(n,["tunedModelInfo"],function(e,t){const n={},i=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);null!=i&&o(n,["baseModel"],i);const r=a(t,["createTime"]);null!=r&&o(n,["createTime"],r);const s=a(t,["updateTime"]);return null!=s&&o(n,["updateTime"],s),n}(0,d)),n}function Dn(e,t){const n={},i=a(t,["_self"]);return null!=i&&o(n,["video"],function(e,t){const n={},i=a(t,["gcsUri"]);null!=i&&o(n,["uri"],i);const r=a(t,["bytesBase64Encoded"]);null!=r&&o(n,["videoBytes"],x(0,r));const s=a(t,["mimeType"]);return null!=s&&o(n,["mimeType"],s),n}(0,i)),n}function Fn(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["metadata"]);null!=r&&o(n,["metadata"],r);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);null!=l&&o(n,["error"],l);const u=a(t,["response"]);return null!=u&&o(n,["response"],function(e,t){const n={},i=a(t,["videos"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Dn(0,e))),o(n,["generatedVideos"],e)}const r=a(t,["raiMediaFilteredCount"]);null!=r&&o(n,["raiMediaFilteredCount"],r);const s=a(t,["raiMediaFilteredReasons"]);return null!=s&&o(n,["raiMediaFilteredReasons"],s),n}(0,u)),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zn{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n,i,r;const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const d=function(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${this.apiClient.getApiKey()}`}let h=()=>{};const f=new Promise(e=>{h=e}),p=e.callbacks,g=this.apiClient,m={onopen:function(){var e;null===(e=null==p?void 0:p.onopen)||void 0===e||e.call(p),h({})},onmessage:e=>{!async function(e,t,n){let i,r;r=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),i=e.isVertexAI()?Wt(0,r):Yt(0,r),t(i)}(g,p.onmessage,e)},onerror:null!==(t=null==p?void 0:p.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==p?void 0:p.onclose)&&void 0!==n?n:function(e){}},y=this.webSocketFactory.create(c,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(d),m);y.connect(),await f;let v=s(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){v=`projects/${this.apiClient.getProject()}/locations/${this.apiClient.getLocation()}/`+v}let b={};this.apiClient.isVertexAI()&&void 0===(null===(i=e.config)||void 0===i?void 0:i.responseModalities)&&(void 0===e.config?e.config={responseModalities:[pe.AUDIO]}:e.config.responseModalities=[pe.AUDIO]),null===(r=e.config)||void 0===r||r.generationConfig;const _={model:v,config:e.config,callbacks:e.callbacks};return b=this.apiClient.isVertexAI()?function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["setup","model"],s(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],Dt(0,r,n)),n}(this.apiClient,_):function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["setup","model"],s(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],Rt(0,r,n)),n}(this.apiClient,_),delete b.config,y.send(JSON.stringify(b)),new Un(y,this.apiClient)}}const Bn={turnComplete:!0};class Un{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let i=[];try{i=v(0,t.turns),i=e.isVertexAI()?i.map(e=>sn(0,e)):i.map(e=>Xt(0,e))}catch(n){throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const i of n){if("object"!=typeof i||null===i||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Bn),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:zt(this.apiClient,e)}:{realtimeInput:Ft(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}class qn extends i{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e),this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n;const i=[];if(null==e?void 0:e.generatedImages)for(const o of e.generatedImages)o&&(null==o?void 0:o.safetyAttributes)&&"Positive Prompt"===(null===(t=null==o?void 0:o.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null==o?void 0:o.safetyAttributes:i.push(o);let r;return r=n?{generatedImages:i,positivePromptSafetyAttributes:n}:{generatedImages:i},r})}async generateContentInternal(e){var t,n,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const i=fn(this.apiClient,e);return s=r("{model}:generateContent",i._url),l=i._query,delete i.config,delete i._url,delete i._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>{const t=An(this.apiClient,e),n=new tt;return Object.assign(n,t),n})}{const t=en(this.apiClient,e);return s=r("{model}:generateContent",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>{const t=En(this.apiClient,e),n=new tt;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const i=fn(this.apiClient,e);s=r("{model}:streamGenerateContent?alt=sse",i._url),l=i._query,delete i.config,delete i._url,delete i._query;const o=this.apiClient;return a=o.requestStream({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),a.then(function(e){return yt(this,arguments,function*(){var t,n,i,r;try{for(var o,a=!0,s=vt(e);!(t=(o=yield mt(s.next())).done);a=!0){r=o.value,a=!1;const e=r,t=An(0,yield mt(e.json())),n=new tt;Object.assign(n,t),yield yield mt(n)}}catch(l){n={error:l}}finally{try{a||t||!(i=s.return)||(yield mt(i.call(s)))}finally{if(n)throw n.error}}})})}{const t=en(this.apiClient,e);s=r("{model}:streamGenerateContent?alt=sse",t._url),l=t._query,delete t.config,delete t._url,delete t._query;const n=this.apiClient;return a=n.requestStream({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}),a.then(function(e){return yt(this,arguments,function*(){var t,n,i,r;try{for(var o,a=!0,s=vt(e);!(t=(o=yield mt(s.next())).done);a=!0){r=o.value,a=!1;const e=r,t=En(0,yield mt(e.json())),n=new tt;Object.assign(n,t),yield yield mt(n)}}catch(l){n={error:l}}finally{try{a||t||!(i=s.return)||(yield mt(i.call(s)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const i=pn(this.apiClient,e);return s=r("{model}:predict",i._url),l=i._query,delete i.config,delete i._url,delete i._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>{const t=Ln(this.apiClient,e),n=new nt;return Object.assign(n,t),n})}{const t=tn(this.apiClient,e);return s=r("{model}:batchEmbedContents",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>{const t=kn(this.apiClient,e),n=new nt;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,i,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const i=gn(this.apiClient,e);return u=r("{model}:predict",i._url),c=i._query,delete i.config,delete i._url,delete i._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},i=a(t,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Mn(0,e))),o(n,["generatedImages"],e)}const r=a(t,["positivePromptSafetyAttributes"]);return null!=r&&o(n,["positivePromptSafetyAttributes"],On(0,r)),n}(this.apiClient,e),n=new it;return Object.assign(n,t),n})}{const t=nn(this.apiClient,e);return u=r("{model}:predict",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},i=a(t,["predictions"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Sn(0,e))),o(n,["generatedImages"],e)}const r=a(t,["positivePromptSafetyAttributes"]);return null!=r&&o(n,["positivePromptSafetyAttributes"],wn(0,r)),n}(this.apiClient,e),n=new it;return Object.assign(n,t),n})}}async get(e){var t,n,i,l;let u,c="",d={};if(this.apiClient.isVertexAI()){const i=function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","name"],s(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return c=r("{name}",i._url),d=i._query,delete i.config,delete i._url,delete i._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),u.then(e=>Rn(this.apiClient,e))}{const t=function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","name"],s(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return c=r("{name}",t._url),d=t._query,delete t.config,delete t._url,delete t._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(l=e.config)||void 0===l?void 0:l.abortSignal}).then(e=>e.json()),u.then(e=>xn(this.apiClient,e))}}async update(e){var t,n,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const i=mn(this.apiClient,e);return s=r("{model}",i._url),l=i._query,delete i.config,delete i._url,delete i._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>Rn(this.apiClient,e))}{const t=rn(this.apiClient,e);return s=r("{name}",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>xn(this.apiClient,e))}}async delete(e){var t,n,i,l;let u,c="",d={};if(this.apiClient.isVertexAI()){const i=function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","name"],s(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return c=r("{name}",i._url),d=i._query,delete i.config,delete i._url,delete i._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),u.then(()=>{const e={},t=new rt;return Object.assign(t,e),t})}{const t=function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","name"],s(e,i));const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return c=r("{name}",t._url),d=t._query,delete t.config,delete t._url,delete t._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(l=e.config)||void 0===l?void 0:l.abortSignal}).then(e=>e.json()),u.then(()=>{const e={},t=new rt;return Object.assign(t,e),t})}}async countTokens(e){var t,n,i,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const i=yn(this.apiClient,e);return u=r("{model}:countTokens",i._url),c=i._query,delete i.config,delete i._url,delete i._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},i=a(t,["totalTokens"]);return null!=i&&o(n,["totalTokens"],i),n}(this.apiClient,e),n=new ot;return Object.assign(n,t),n})}{const t=on(this.apiClient,e);return u=r("{model}:countTokens",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},i=a(t,["totalTokens"]);null!=i&&o(n,["totalTokens"],i);const r=a(t,["cachedContentTokenCount"]);return null!=r&&o(n,["cachedContentTokenCount"],r),n}(this.apiClient,e),n=new ot;return Object.assign(n,t),n})}}async computeTokens(e){var t,n;let i,l="",u={};if(this.apiClient.isVertexAI()){const c=function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["_url","model"],s(e,i));const r=a(t,["contents"]);if(null!=r){let e=v(0,r);Array.isArray(e)&&(e=e.map(e=>sn(0,e))),o(n,["contents"],e)}const l=a(t,["config"]);return null!=l&&o(n,["config"],l),n}(this.apiClient,e);return l=r("{model}:computeTokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>{const t=function(e,t){const n={},i=a(t,["tokensInfo"]);return null!=i&&o(n,["tokensInfo"],i),n}(this.apiClient,e),n=new at;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const i=vn(this.apiClient,e);return s=r("{model}:predictLongRunning",i._url),l=i._query,delete i.config,delete i._url,delete i._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),a.then(e=>Fn(this.apiClient,e))}{const t=an(this.apiClient,e);return s=r("{model}:predictLongRunning",t._url),l=t._query,delete t.config,delete t._url,delete t._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),a.then(e=>In(this.apiClient,e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vn(e,t){const n={},i=a(t,["_self"]);return null!=i&&o(n,["video"],function(e,t){const n={},i=a(t,["video","uri"]);null!=i&&o(n,["uri"],i);const r=a(t,["video","encodedVideo"]);null!=r&&o(n,["videoBytes"],x(0,r));const s=a(t,["encoding"]);return null!=s&&o(n,["mimeType"],s),n}(0,i)),n}function Gn(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["metadata"]);null!=r&&o(n,["metadata"],r);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);null!=l&&o(n,["error"],l);const u=a(t,["response","generateVideoResponse"]);return null!=u&&o(n,["response"],function(e,t){const n={},i=a(t,["generatedSamples"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Vn(0,e))),o(n,["generatedVideos"],e)}const r=a(t,["raiMediaFilteredCount"]);null!=r&&o(n,["raiMediaFilteredCount"],r);const s=a(t,["raiMediaFilteredReasons"]);return null!=s&&o(n,["raiMediaFilteredReasons"],s),n}(0,u)),n}function jn(e,t){const n={},i=a(t,["_self"]);return null!=i&&o(n,["video"],function(e,t){const n={},i=a(t,["gcsUri"]);null!=i&&o(n,["uri"],i);const r=a(t,["bytesBase64Encoded"]);null!=r&&o(n,["videoBytes"],x(0,r));const s=a(t,["mimeType"]);return null!=s&&o(n,["mimeType"],s),n}(0,i)),n}function $n(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["metadata"]);null!=r&&o(n,["metadata"],r);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);null!=l&&o(n,["error"],l);const u=a(t,["response"]);return null!=u&&o(n,["response"],function(e,t){const n={},i=a(t,["videos"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>jn(0,e))),o(n,["generatedVideos"],e)}const r=a(t,["raiMediaFilteredCount"]);null!=r&&o(n,["raiMediaFilteredCount"],r);const s=a(t,["raiMediaFilteredReasons"]);return null!=s&&o(n,["raiMediaFilteredReasons"],s),n}(0,u)),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn extends i{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let i;return n&&"httpOptions"in n&&(i=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:i}})}return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,i,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const i=function(e,t){const n={},i=a(t,["operationName"]);null!=i&&o(n,["_url","operationName"],i);const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return u=r("{operationName}",i._url),c=i._query,delete i.config,delete i._url,delete i._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>$n(this.apiClient,e))}{const t=function(e,t){const n={},i=a(t,["operationName"]);null!=i&&o(n,["_url","operationName"],i);const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return u=r("{operationName}",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>Gn(this.apiClient,e))}}async fetchPredictVideosOperationInternal(e){var t,n;let i,s="",l={};if(this.apiClient.isVertexAI()){const u=function(e,t){const n={},i=a(t,["operationName"]);null!=i&&o(n,["operationName"],i);const r=a(t,["resourceName"]);null!=r&&o(n,["_url","resourceName"],r);const s=a(t,["config"]);return null!=s&&o(n,["config"],s),n}(this.apiClient,e);return s=r("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>$n(this.apiClient,e))}throw new Error("This method is only supported by the Vertex AI.")}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Wn extends Error{constructor(e,t){super(e,t?{cause:t}:{cause:(new Error).stack}),this.message=e,this.name="ClientError"}}class Xn extends Error{constructor(e,t){super(e,t?{cause:t}:{cause:(new Error).stack}),this.message=e,this.name="ServerError"}}class Kn{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const i=[this.getRequestUrlInternal(t)];n&&i.push(this.getBaseResourcePath()),""!==e&&i.push(e);return new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let r={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.unaryApiCall(i,r,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[i,r]of Object.entries(t))"object"==typeof r?n[i]=Object.assign(Object.assign({},n[i]),r):void 0!==r&&(n[i]=r);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,n);i.searchParams.has("alt")&&"sse"===i.searchParams.get("alt")||i.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.streamApiCall(i,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const i=new AbortController,r=i.signal;t.timeout&&(null==t?void 0:t.timeout)>0&&setTimeout(()=>i.abort(),t.timeout),n&&n.addEventListener("abort",()=>{i.abort()}),e.signal=r}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Qn(e),new dt(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Qn(e),this.processStreamResponse(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}processStreamResponse(e){var t;return yt(this,arguments,function*(){const n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:o,value:a}=yield mt(n.read());if(o){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const s=i.decode(a);try{const e=JSON.parse(s);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,i=t.code,r=`got status: ${n}. ${JSON.stringify(e)}`;if(i>=400&&i<500){throw new Wn(r)}if(i>=500&&i<600){throw new Xn(r)}}}catch(r){const e=r;if("ClientError"===e.name||"ServerError"===e.name)throw r}t+=s;let l=t.match(Yn);for(;l;){const n=l[1];try{const i=new Response(n,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield mt(new dt(i)),t=t.slice(l[0].length),l=t.match(Yn)}catch(r){throw new Error(`exception parsing stream chunk ${n}. ${r}`)}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw new Error(`exception ${e} sending request`)})}getDefaultHeaders(){const e={},t="google-genai-sdk/0.12.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e["x-goog-api-client"]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,i]of Object.entries(e.headers))t.append(n,i);e.timeout&&e.timeout>0&&t.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const i={};null!=t&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const r=this.clientOptions.uploader,o=await r.stat(e);i.sizeBytes=String(o.size);const a=null!==(n=null==t?void 0:t.mimeType)&&void 0!==n?n:o.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const s=await this.fetchUploadUrl(i,t);return r.upload(e,s,this)}async fetchUploadUrl(e,t){var n;let i={};i=(null==t?void 0:t.httpOptions)?t.httpOptions:{apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},a=await this.request({path:r("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!a||!(null==a?void 0:a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const s=null===(n=null==a?void 0:a.headers)||void 0===n?void 0:n["x-goog-upload-url"];if(void 0===s)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return s}}async function Qn(e){var t;if(void 0===e)throw new Xn("response is undefined");if(!e.ok){const n=e.status,i=e.statusText;let r;r=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const o=`got status: ${n} ${i}. ${JSON.stringify(r)}`;if(n>=400&&n<500){throw new Wn(o)}if(n>=500&&n<600){throw new Xn(o)}throw new Error(o)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zn(e,t){const n={},i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const i=a(t,["pageSize"]);void 0!==n&&null!=i&&o(n,["_query","pageSize"],i);const r=a(t,["pageToken"]);void 0!==n&&null!=r&&o(n,["_query","pageToken"],r);const s=a(t,["filter"]);return void 0!==n&&null!=s&&o(n,["_query","filter"],s),{}}(0,i,n)),n}function Jn(e,t){const n={};if(void 0!==a(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const i=a(t,["examples"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e,t){const n={},i=a(t,["textInput"]);null!=i&&o(n,["textInput"],i);const r=a(t,["output"]);return null!=r&&o(n,["output"],r),n}(0,e))),o(n,["examples","examples"],e)}return n}function ei(e,t){const n={},i=a(t,["baseModel"]);null!=i&&o(n,["baseModel"],i);const r=a(t,["trainingDataset"]);null!=r&&o(n,["tuningTask","trainingData"],Jn(0,r));const s=a(t,["config"]);return null!=s&&o(n,["config"],function(e,t,n){const i={};if(void 0!==a(t,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(t,["tunedModelDisplayName"]);if(void 0!==n&&null!=r&&o(n,["displayName"],r),void 0!==a(t,["description"]))throw new Error("description parameter is not supported in Gemini API.");const s=a(t,["epochCount"]);void 0!==n&&null!=s&&o(n,["tuningTask","hyperparameters","epochCount"],s);const l=a(t,["learningRateMultiplier"]);if(null!=l&&o(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),void 0!==a(t,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const u=a(t,["batchSize"]);void 0!==n&&null!=u&&o(n,["tuningTask","hyperparameters","batchSize"],u);const c=a(t,["learningRate"]);return void 0!==n&&null!=c&&o(n,["tuningTask","hyperparameters","learningRate"],c),i}(0,s,n)),n}function ti(e,t){const n={},i=a(t,["config"]);return null!=i&&o(n,["config"],function(e,t,n){const i=a(t,["pageSize"]);void 0!==n&&null!=i&&o(n,["_query","pageSize"],i);const r=a(t,["pageToken"]);void 0!==n&&null!=r&&o(n,["_query","pageToken"],r);const s=a(t,["filter"]);return void 0!==n&&null!=s&&o(n,["_query","filter"],s),{}}(0,i,n)),n}function ni(e,t,n){const i=a(t,["validationDataset"]);void 0!==n&&null!=i&&o(n,["supervisedTuningSpec"],function(e,t){const n={},i=a(t,["gcsUri"]);return null!=i&&o(n,["validationDatasetUri"],i),n}(0,i));const r=a(t,["tunedModelDisplayName"]);void 0!==n&&null!=r&&o(n,["tunedModelDisplayName"],r);const s=a(t,["description"]);void 0!==n&&null!=s&&o(n,["description"],s);const l=a(t,["epochCount"]);void 0!==n&&null!=l&&o(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const u=a(t,["learningRateMultiplier"]);void 0!==n&&null!=u&&o(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=a(t,["adapterSize"]);if(void 0!==n&&null!=c&&o(n,["supervisedTuningSpec","hyperParameters","adapterSize"],c),void 0!==a(t,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==a(t,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");return{}}function ii(e,t){const n={},i=a(t,["baseModel"]);null!=i&&o(n,["baseModel"],i);const r=a(t,["trainingDataset"]);null!=r&&o(n,["supervisedTuningSpec","trainingDatasetUri"],function(e,t,n){const i=a(t,["gcsUri"]);if(void 0!==n&&null!=i&&o(n,["supervisedTuningSpec","trainingDatasetUri"],i),void 0!==a(t,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.");return{}}(0,r,n));const s=a(t,["config"]);return null!=s&&o(n,["config"],ni(0,s,n)),n}function ri(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["state"]);null!=r&&o(n,["state"],S(0,r));const s=a(t,["createTime"]);null!=s&&o(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);null!=l&&o(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);null!=u&&o(n,["endTime"],u);const c=a(t,["updateTime"]);null!=c&&o(n,["updateTime"],c);const d=a(t,["description"]);null!=d&&o(n,["description"],d);const h=a(t,["baseModel"]);null!=h&&o(n,["baseModel"],h);const f=a(t,["_self"]);null!=f&&o(n,["tunedModel"],function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["model"],i);const r=a(t,["name"]);return null!=r&&o(n,["endpoint"],r),n}(0,f));const p=a(t,["distillationSpec"]);null!=p&&o(n,["distillationSpec"],p);const g=a(t,["experiment"]);null!=g&&o(n,["experiment"],g);const m=a(t,["labels"]);null!=m&&o(n,["labels"],m);const y=a(t,["pipelineJob"]);null!=y&&o(n,["pipelineJob"],y);const v=a(t,["tunedModelDisplayName"]);return null!=v&&o(n,["tunedModelDisplayName"],v),n}function oi(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["state"]);null!=r&&o(n,["state"],S(0,r));const s=a(t,["createTime"]);null!=s&&o(n,["createTime"],s);const l=a(t,["startTime"]);null!=l&&o(n,["startTime"],l);const u=a(t,["endTime"]);null!=u&&o(n,["endTime"],u);const c=a(t,["updateTime"]);null!=c&&o(n,["updateTime"],c);const d=a(t,["error"]);null!=d&&o(n,["error"],d);const h=a(t,["description"]);null!=h&&o(n,["description"],h);const f=a(t,["baseModel"]);null!=f&&o(n,["baseModel"],f);const p=a(t,["tunedModel"]);null!=p&&o(n,["tunedModel"],function(e,t){const n={},i=a(t,["model"]);null!=i&&o(n,["model"],i);const r=a(t,["endpoint"]);return null!=r&&o(n,["endpoint"],r),n}(0,p));const g=a(t,["supervisedTuningSpec"]);null!=g&&o(n,["supervisedTuningSpec"],g);const m=a(t,["tuningDataStats"]);null!=m&&o(n,["tuningDataStats"],m);const y=a(t,["encryptionSpec"]);null!=y&&o(n,["encryptionSpec"],y);const v=a(t,["partnerModelTuningSpec"]);null!=v&&o(n,["partnerModelTuningSpec"],v);const b=a(t,["distillationSpec"]);null!=b&&o(n,["distillationSpec"],b);const _=a(t,["experiment"]);null!=_&&o(n,["experiment"],_);const E=a(t,["labels"]);null!=E&&o(n,["labels"],E);const k=a(t,["pipelineJob"]);null!=k&&o(n,["pipelineJob"],k);const w=a(t,["tunedModelDisplayName"]);return null!=w&&o(n,["tunedModelDisplayName"],w),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ai extends i{constructor(e){super(),this.apiClient=e,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new et(V.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const t=await this.tuneMldevInternal(e);let n="";void 0!==t.metadata&&void 0!==t.metadata.tunedModel?n=t.metadata.tunedModel:void 0!==t.name&&t.name.includes("/operations/")&&(n=t.name.split("/operations/")[0]);return{name:n,state:ve.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,i,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const i=function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","name"],i);const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return u=r("{name}",i._url),c=i._query,delete i.config,delete i._url,delete i._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>oi(this.apiClient,e))}{const t=function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["_url","name"],i);const r=a(t,["config"]);return null!=r&&o(n,["config"],r),n}(this.apiClient,e);return u=r("{name}",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>ri(this.apiClient,e))}}async listInternal(e){var t,n,i,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const i=ti(this.apiClient,e);return u=r("tuningJobs",i._url),c=i._query,delete i.config,delete i._url,delete i._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(i),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},i=a(t,["nextPageToken"]);null!=i&&o(n,["nextPageToken"],i);const r=a(t,["tuningJobs"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>oi(0,e))),o(n,["tuningJobs"],e)}return n}(this.apiClient,e),n=new st;return Object.assign(n,t),n})}{const t=Zn(this.apiClient,e);return u=r("tunedModels",t._url),c=t._query,delete t.config,delete t._url,delete t._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(i=e.config)||void 0===i?void 0:i.httpOptions,abortSignal:null===(s=e.config)||void 0===s?void 0:s.abortSignal}).then(e=>e.json()),l.then(e=>{const t=function(e,t){const n={},i=a(t,["nextPageToken"]);null!=i&&o(n,["nextPageToken"],i);const r=a(t,["tunedModels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>ri(0,e))),o(n,["tuningJobs"],e)}return n}(this.apiClient,e),n=new st;return Object.assign(n,t),n})}}async tuneInternal(e){var t,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=ii(this.apiClient,e);return o=r("tuningJobs",s._url),a=s._query,delete s.config,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>oi(this.apiClient,e))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let i,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ei(this.apiClient,e);return s=r("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>function(e,t){const n={},i=a(t,["name"]);null!=i&&o(n,["name"],i);const r=a(t,["metadata"]);null!=r&&o(n,["metadata"],r);const s=a(t,["done"]);null!=s&&o(n,["done"],s);const l=a(t,["error"]);return null!=l&&o(n,["error"],l),n}(this.apiClient,e))}}}class si{async upload(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var i,r;let o=0,a=0,s=new dt(new Response),l="upload";for(o=e.size;a<o;){const r=Math.min(8388608,o-a),u=e.slice(a,a+r);if(a+r>=o&&(l+=", finalize"),s=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(r)}}}),a+=r,"active"!==(null===(i=null==s?void 0:s.headers)||void 0===i?void 0:i["x-goog-upload-status"]))break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(null==s?void 0:s.json());if("final"!==(null===(r=null==s?void 0:s.headers)||void 0===r?void 0:r["x-goog-upload-status"]))throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}(e,t,n)}async stat(e){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class li{create(e,t,n){return new ui(e,t,n)}}class ui{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ci="x-goog-api-key";class di{constructor(e){this.apiKey=e}async addAuthHeaders(e){null===e.get(ci)&&e.append(ci,this.apiKey)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hi{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const i=n(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new di(this.apiKey);this.apiClient=new Kn({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:"gl-node/web",uploader:new si}),this.models=new qn(this.apiClient),this.live=new zn(this.apiClient,r,new li),this.chats=new Et(this.models,this.apiClient),this.caches=new pt(this.apiClient),this.files=new Tt(this.apiClient),this.operations=new Hn(this.apiClient),this.tunings=new ai(this.apiClient)}}function fi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pi,gi,mi={exports:{}},yi={};function vi(){if(pi)return yi;pi=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,p={};function g(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||h}function m(){}function y(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var v=y.prototype=new m;v.constructor=y,f(v,g.prototype),v.isPureReactComponent=!0;var b=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function k(t,n,i,r,o,a){return i=a.ref,{$$typeof:e,type:t,key:n,ref:void 0!==i?i:null,props:a}}function w(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var S=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,i={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return i[e]})):t.toString(36);var n,i}function T(){}function I(n,i,r,o,a){var s=typeof n;"undefined"!==s&&"boolean"!==s||(n=null);var l,u,h=!1;if(null===n)h=!0;else switch(s){case"bigint":case"string":case"number":h=!0;break;case"object":switch(n.$$typeof){case e:case t:h=!0;break;case c:return I((h=n._init)(n._payload),i,r,o,a)}}if(h)return a=a(n),h=""===o?"."+x(n,0):o,b(a)?(r="",null!=h&&(r=h.replace(S,"$&/")+"/"),I(a,i,r,"",function(e){return e})):null!=a&&(w(a)&&(l=a,u=r+(null==a.key||n&&n.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+h,a=k(l.type,u,void 0,0,0,l.props)),i.push(a)),1;h=0;var f,p=""===o?".":o+":";if(b(n))for(var g=0;g<n.length;g++)h+=I(o=n[g],i,r,s=p+x(o,g),a);else if("function"==typeof(g=null===(f=n)||"object"!=typeof f?null:"function"==typeof(f=d&&f[d]||f["@@iterator"])?f:null))for(n=g.call(n),g=0;!(o=n.next()).done;)h+=I(o=o.value,i,r,s=p+x(o,g++),a);else if("object"===s){if("function"==typeof n.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),i,r,o,a);throw i=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===i?"object with keys {"+Object.keys(n).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.")}return h}function C(e,t,n){if(null==e)return e;var i=[],r=0;return I(e,i,"","",function(e){return t.call(n,e,r++)}),i}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function P(){}return yi.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},yi.Component=g,yi.Fragment=n,yi.Profiler=r,yi.PureComponent=y,yi.StrictMode=i,yi.Suspense=l,yi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,yi.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},yi.cache=function(e){return function(){return e.apply(null,arguments)}},yi.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var i=f({},e.props),r=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(r=""+t.key),t)!E.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(i[o]=t[o]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];i.children=a}return k(e.type,r,void 0,0,0,i)},yi.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},yi.createElement=function(e,t,n){var i,r={},o=null;if(null!=t)for(i in void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=t[i]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];r.children=s}if(e&&e.defaultProps)for(i in a=e.defaultProps)void 0===r[i]&&(r[i]=a[i]);return k(e,o,void 0,0,0,r)},yi.createRef=function(){return{current:null}},yi.forwardRef=function(e){return{$$typeof:s,render:e}},yi.isValidElement=w,yi.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:N}},yi.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},yi.startTransition=function(e){var t=_.T,n={};_.T=n;try{var i=e(),r=_.S;null!==r&&r(n,i),"object"==typeof i&&null!==i&&"function"==typeof i.then&&i.then(P,A)}catch(o){A(o)}finally{_.T=t}},yi.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},yi.use=function(e){return _.H.use(e)},yi.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},yi.useCallback=function(e,t){return _.H.useCallback(e,t)},yi.useContext=function(e){return _.H.useContext(e)},yi.useDebugValue=function(){},yi.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},yi.useEffect=function(e,t,n){var i=_.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)},yi.useId=function(){return _.H.useId()},yi.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},yi.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},yi.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},yi.useMemo=function(e,t){return _.H.useMemo(e,t)},yi.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},yi.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},yi.useRef=function(e){return _.H.useRef(e)},yi.useState=function(e){return _.H.useState(e)},yi.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},yi.useTransition=function(){return _.H.useTransition()},yi.version="19.1.1",yi}function bi(){return gi||(gi=1,mi.exports=vi()),mi.exports}var _i,Ei,ki=bi(),wi={exports:{}},Si={};var xi=(Ei||(Ei=1,wi.exports=function(){if(_i)return Si;_i=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==n.key&&(r=""+n.key),"key"in n)for(var o in i={},n)"key"!==o&&(i[o]=n[o]);else i=n;return n=i.ref,{$$typeof:e,type:t,key:r,ref:void 0!==n?n:null,props:i}}return Si.Fragment=t,Si.jsx=n,Si.jsxs=n,Si}()),wi.exports);const Ti=ki.createContext({});function Ii(e){const t=ki.useRef(null);return null===t.current&&(t.current=e()),t.current}const Ci="undefined"!=typeof window,Ni=Ci?ki.useLayoutEffect:ki.useEffect,Ai=ki.createContext(null);function Pi(e,t){-1===e.indexOf(t)&&e.push(t)}function Li(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Oi=(e,t,n)=>n>t?t:n<e?e:n;const Mi={},Ri=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Di(e){return"object"==typeof e&&null!==e}const Fi=e=>/^0[^.\s]+$/u.test(e);function zi(e){let t;return()=>(void 0===t&&(t=e()),t)}const Bi=e=>e,Ui=(e,t)=>n=>t(e(n)),qi=(...e)=>e.reduce(Ui),Vi=(e,t,n)=>{const i=t-e;return 0===i?1:(n-e)/i};class Gi{constructor(){this.subscriptions=[]}add(e){return Pi(this.subscriptions,e),()=>Li(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let r=0;r<i;r++){const i=this.subscriptions[r];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ji=e=>1e3*e,$i=e=>e/1e3;function Hi(e,t){return t?e*(1e3/t):0}const Yi=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Wi(e,t,n,i){if(e===t&&n===i)return Bi;const r=t=>function(e,t,n,i,r){let o,a,s=0;do{a=t+(n-t)/2,o=Yi(a,i,r)-e,o>0?n=a:t=a}while(Math.abs(o)>1e-7&&++s<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:Yi(r(e),t,i)}const Xi=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ki=e=>t=>1-e(1-t),Qi=Wi(.33,1.53,.69,.99),Zi=Ki(Qi),Ji=Xi(Zi),er=e=>(e*=2)<1?.5*Zi(e):.5*(2-Math.pow(2,-10*(e-1))),tr=e=>1-Math.sin(Math.acos(e)),nr=Ki(tr),ir=Xi(tr),rr=Wi(.42,0,1,1),or=Wi(0,0,.58,1),ar=Wi(.42,0,.58,1),sr=e=>Array.isArray(e)&&"number"==typeof e[0],lr={linear:Bi,easeIn:rr,easeInOut:ar,easeOut:or,circIn:tr,circInOut:ir,circOut:nr,backIn:Zi,backInOut:Ji,backOut:Qi,anticipate:er},ur=e=>{if(sr(e)){e.length;const[t,n,i,r]=e;return Wi(t,n,i,r)}return"string"==typeof e?lr[e]:e},cr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function dr(e,t){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=cr.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function s(t){o.has(t)&&(l.schedule(t),e()),t(a)}const l={schedule:(e,r=!1,a=!1)=>{const s=a&&i?t:n;return r&&o.add(e),s.has(e)||s.add(e),e},cancel:e=>{n.delete(e),o.delete(e)},process:e=>{a=e,i?r=!0:(i=!0,[t,n]=[n,t],t.forEach(s),t.clear(),i=!1,r&&(r=!1,l.process(e)))}};return l}(o),e),{}),{setup:s,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:h,render:f,postRender:p}=a,g=()=>{const o=Mi.useManualTiming?r.timestamp:performance.now();n=!1,Mi.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(o-r.timestamp,40),1)),r.timestamp=o,r.isProcessing=!0,s.process(r),l.process(r),u.process(r),c.process(r),d.process(r),h.process(r),f.process(r),p.process(r),r.isProcessing=!1,n&&t&&(i=!1,e(g))};return{schedule:cr.reduce((t,o)=>{const s=a[o];return t[o]=(t,o=!1,a=!1)=>(n||(n=!0,i=!0,r.isProcessing||e(g)),s.schedule(t,o,a)),t},{}),cancel:e=>{for(let t=0;t<cr.length;t++)a[cr[t]].cancel(e)},state:r,steps:a}}const{schedule:hr,cancel:fr,state:pr,steps:gr}=dr("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Bi,!0);let mr;function yr(){mr=void 0}const vr={now:()=>(void 0===mr&&vr.set(pr.isProcessing||Mi.useManualTiming?pr.timestamp:performance.now()),mr),set:e=>{mr=e,queueMicrotask(yr)}},br=e=>t=>"string"==typeof t&&t.startsWith(e),_r=br("--"),Er=br("var(--"),kr=e=>!!Er(e)&&wr.test(e.split("/*")[0].trim()),wr=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sr={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},xr={...Sr,transform:e=>Oi(0,1,e)},Tr={...Sr,default:1},Ir=e=>Math.round(1e5*e)/1e5,Cr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Nr=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ar=(e,t)=>n=>Boolean("string"==typeof n&&Nr.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Pr=(e,t,n)=>i=>{if("string"!=typeof i)return i;const[r,o,a,s]=i.match(Cr);return{[e]:parseFloat(r),[t]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},Lr={...Sr,transform:e=>Math.round((e=>Oi(0,255,e))(e))},Or={test:Ar("rgb","red"),parse:Pr("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Lr.transform(e)+", "+Lr.transform(t)+", "+Lr.transform(n)+", "+Ir(xr.transform(i))+")"};const Mr={test:Ar("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:Or.transform},Rr=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Dr=Rr("deg"),Fr=Rr("%"),zr=Rr("px"),Br=Rr("vh"),Ur=Rr("vw"),qr=(()=>({...Fr,parse:e=>Fr.parse(e)/100,transform:e=>Fr.transform(100*e)}))(),Vr={test:Ar("hsl","hue"),parse:Pr("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Fr.transform(Ir(t))+", "+Fr.transform(Ir(n))+", "+Ir(xr.transform(i))+")"},Gr={test:e=>Or.test(e)||Mr.test(e)||Vr.test(e),parse:e=>Or.test(e)?Or.parse(e):Vr.test(e)?Vr.parse(e):Mr.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Or.transform(e):Vr.transform(e),getAnimatableNone:e=>{const t=Gr.parse(e);return t.alpha=0,Gr.transform(t)}},jr=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const $r="number",Hr="color",Yr=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wr(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const a=t.replace(Yr,e=>(Gr.test(e)?(i.color.push(o),r.push(Hr),n.push(Gr.parse(e))):e.startsWith("var(")?(i.var.push(o),r.push("var"),n.push(e)):(i.number.push(o),r.push($r),n.push(parseFloat(e))),++o,"${}")).split("${}");return{values:n,split:a,indexes:i,types:r}}function Xr(e){return Wr(e).values}function Kr(e){const{split:t,types:n}=Wr(e),i=t.length;return e=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],void 0!==e[o]){const t=n[o];r+=t===$r?Ir(e[o]):t===Hr?Gr.transform(e[o]):e[o]}return r}}const Qr=e=>"number"==typeof e?0:Gr.test(e)?Gr.getAnimatableNone(e):e;const Zr={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(Cr))?void 0:t.length)||0)+((null==(n=e.match(jr))?void 0:n.length)||0)>0},parse:Xr,createTransformer:Kr,getAnimatableNone:function(e){const t=Xr(e);return Kr(e)(t.map(Qr))}};function Jr(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function eo(e,t){return n=>n>0?t:e}const to=(e,t,n)=>e+(t-e)*n,no=(e,t,n)=>{const i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},io=[Mr,Or,Vr];function ro(e){const t=(n=e,io.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let i=t.parse(e);return t===Vr&&(i=function({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,n/=100;let r=0,o=0,a=0;if(t/=100){const i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;r=Jr(s,i,e+1/3),o=Jr(s,i,e),a=Jr(s,i,e-1/3)}else r=o=a=n;return{red:Math.round(255*r),green:Math.round(255*o),blue:Math.round(255*a),alpha:i}}(i)),i}const oo=(e,t)=>{const n=ro(e),i=ro(t);if(!n||!i)return eo(e,t);const r={...n};return e=>(r.red=no(n.red,i.red,e),r.green=no(n.green,i.green,e),r.blue=no(n.blue,i.blue,e),r.alpha=to(n.alpha,i.alpha,e),Or.transform(r))},ao=new Set(["none","hidden"]);function so(e,t){return n=>to(e,t,n)}function lo(e){return"number"==typeof e?so:"string"==typeof e?kr(e)?eo:Gr.test(e)?oo:ho:Array.isArray(e)?uo:"object"==typeof e?Gr.test(e)?oo:co:eo}function uo(e,t){const n=[...e],i=n.length,r=e.map((e,n)=>lo(e)(e,t[n]));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}}function co(e,t){const n={...e,...t},i={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=lo(e[r])(e[r],t[r]));return e=>{for(const t in i)n[t]=i[t](e);return n}}const ho=(e,t)=>{const n=Zr.createTransformer(t),i=Wr(e),r=Wr(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?ao.has(e)&&!r.values.length||ao.has(t)&&!i.values.length?function(e,t){return ao.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):qi(uo(function(e,t){const n=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],a=e.indexes[o][i[o]],s=e.values[a]??0;n[r]=s,i[o]++}return n}(i,r),r.values),n):eo(e,t)};function fo(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return to(e,t,n);return lo(e)(e,t)}const po=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>hr.update(t,e),stop:()=>fr(t),now:()=>pr.isProcessing?pr.timestamp:vr.now()}},go=(e,t,n=10)=>{let i="";const r=Math.max(Math.round(t/n),2);for(let o=0;o<r;o++)i+=Math.round(1e4*e(o/(r-1)))/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},mo=2e4;function yo(e){let t=0;let n=e.next(t);for(;!n.done&&t<mo;)t+=50,n=e.next(t);return t>=mo?1/0:t}function vo(e,t,n){const i=Math.max(t-5,0);return Hi(n-e(i),t-i)}const bo=100,_o=10,Eo=1,ko=0,wo=800,So=.3,xo=.3,To={granular:.01,default:2},Io={granular:.005,default:.5},Co=.01,No=10,Ao=.05,Po=1,Lo=.001;function Oo({duration:e=wo,bounce:t=So,velocity:n=ko,mass:i=Eo}){let r,o,a=1-t;a=Oi(Ao,Po,a),e=Oi(Co,No,$i(e)),a<1?(r=t=>{const i=t*a,r=i*e,o=i-n,s=Ro(t,a),l=Math.exp(-r);return Lo-o/s*l},o=t=>{const i=t*a*e,o=i*n+n,s=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-i),u=Ro(Math.pow(t,2),a);return(-r(t)+Lo>0?-1:1)*((o-s)*l)/u}):(r=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,o=t=>Math.exp(-t*e)*(e*e*(n-t)));const s=function(e,t,n){let i=n;for(let r=1;r<Mo;r++)i-=e(i)/t(i);return i}(r,o,5/e);if(e=ji(e),isNaN(s))return{stiffness:bo,damping:_o,duration:e};{const t=Math.pow(s,2)*i;return{stiffness:t,damping:2*a*Math.sqrt(i*t),duration:e}}}const Mo=12;function Ro(e,t){return e*Math.sqrt(1-t*t)}const Do=["duration","bounce"],Fo=["stiffness","damping","mass"];function zo(e,t){return t.some(t=>void 0!==e[t])}function Bo(e=xo,t=So){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:ko,stiffness:bo,damping:_o,mass:Eo,isResolvedFromDuration:!1,...e};if(!zo(e,Fo)&&zo(e,Do))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(1.2*n),r=i*i,o=2*Oi(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:Eo,stiffness:r,damping:o}}else{const n=Oo(e);t={...t,...n,mass:Eo},t.isResolvedFromDuration=!0}return t}({...n,velocity:-$i(n.velocity||0)}),p=h||0,g=u/(2*Math.sqrt(l*c)),m=a-o,y=$i(Math.sqrt(l/c)),v=Math.abs(m)<5;let b;if(i||(i=v?To.granular:To.default),r||(r=v?Io.granular:Io.default),g<1){const e=Ro(y,g);b=t=>{const n=Math.exp(-g*y*t);return a-n*((p+g*y*m)/e*Math.sin(e*t)+m*Math.cos(e*t))}}else if(1===g)b=e=>a-Math.exp(-y*e)*(m+(p+y*m)*e);else{const e=y*Math.sqrt(g*g-1);b=t=>{const n=Math.exp(-g*y*t),i=Math.min(e*t,300);return a-n*((p+g*y*m)*Math.sinh(i)+e*m*Math.cosh(i))/e}}const _={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)s.done=e>=d;else{let n=0===e?p:0;g<1&&(n=0===e?ji(p):vo(b,e,t));const o=Math.abs(n)<=i,l=Math.abs(a-t)<=r;s.done=o&&l}return s.value=s.done?a:t,s},toString:()=>{const e=Math.min(yo(_),mo),t=go(t=>_.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return _}function Uo({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],h={done:!1,value:d},f=e=>void 0===s?l:void 0===l||Math.abs(s-e)<Math.abs(l-e)?s:l;let p=n*t;const g=d+p,m=void 0===a?g:a(g);m!==g&&(p=m-d);const y=e=>-p*Math.exp(-e/i),v=e=>m+y(e),b=e=>{const t=y(e),n=v(e);h.done=Math.abs(t)<=u,h.value=h.done?m:n};let _,E;const k=e=>{var t;(t=h.value,void 0!==s&&t<s||void 0!==l&&t>l)&&(_=e,E=Bo({keyframes:[h.value,f(h.value)],velocity:vo(v,e,h.value),damping:r,stiffness:o,restDelta:u,restSpeed:c}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return E||void 0!==_||(t=!0,b(e),k(e)),void 0!==_&&e>=_?E.next(e-_):(!t&&b(e),h)}}}function qo(e,t,{clamp:n=!0,ease:i,mixer:r}={}){const o=e.length;if(t.length,1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=function(e,t,n){const i=[],r=n||Mi.mix||fo,o=e.length-1;for(let a=0;a<o;a++){let n=r(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Bi:t;n=qi(e,n)}i.push(n)}return i}(t,i,r),l=s.length,u=n=>{if(a&&n<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(n<e[i+1]);i++);const r=Vi(e[i],e[i+1],n);return s[i](r)};return n?t=>u(Oi(e[0],e[o-1],t)):u}function Vo(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const r=Vi(0,t,i);e.push(to(n,1,r))}}(t,e.length-1),t}function Go({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const r=(e=>Array.isArray(e)&&"number"!=typeof e[0])(i)?i.map(ur):ur(i),o={done:!1,value:t[0]},a=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:Vo(t),e),s=qo(a,t,{ease:Array.isArray(r)?r:(l=t,u=r,l.map(()=>u||ar).splice(0,l.length-1))});var l,u;return{calculatedDuration:e,next:t=>(o.value=s(t),o.done=t>=e,o)}}Bo.applyToOptions=e=>{const t=function(e,t=100,n){const i=n({...e,keyframes:[0,t]}),r=Math.min(yo(i),mo);return{type:"keyframes",ease:e=>i.next(r*e).value/t,duration:$i(r)}}(e,100,Bo);return e.ease=t.ease,e.duration=ji(t.duration),e.type="keyframes",e};const jo=e=>null!==e;function $o(e,{repeat:t,repeatType:n="loop"},i,r=1){const o=e.filter(jo),a=r<0||t&&"loop"!==n&&t%2==1?0:o.length-1;return a&&void 0!==i?i:o[a]}const Ho={decay:Uo,inertia:Uo,tween:Go,keyframes:Go,spring:Bo};function Yo(e){"string"==typeof e.type&&(e.type=Ho[e.type])}class Wo{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Xo=e=>e/100;class Ko extends Wo{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==vr.now()&&this.tick(vr.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Yo(e);const{type:t=Go,repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=e;let{keyframes:a}=e;const s=t||Go;s!==Go&&"number"!=typeof a[0]&&(this.mixKeyframes=qi(Xo,fo(a[0],a[1])),a=[0,100]);const l=s({...e,keyframes:a});"mirror"===r&&(this.mirroredGenerator=s({...e,keyframes:[...a].reverse(),velocity:-o})),null===l.calculatedDuration&&(l.calculatedDuration=yo(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:s}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:u,repeat:c,repeatType:d,repeatDelay:h,type:f,onUpdate:p,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const m=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?m<0:m>i;this.currentTime=Math.max(m,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=i);let v=this.currentTime,b=n;if(c){const e=Math.min(this.currentTime,i)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,c+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/a)):"mirror"===d&&(b=o)),v=Oi(0,1,n)*a}const _=y?{done:!1,value:u[0]}:b.next(v);r&&(_.value=r(_.value));let{done:E}=_;y||null===s||(E=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&E);return k&&f!==Uo&&(_.value=$o(u,this.options,g,this.speed)),p&&p(_.value),k&&this.finish(),_}then(e,t){return this.finished.then(e,t)}get duration(){return $i(this.calculatedDuration)}get time(){return $i(this.currentTime)}set time(e){var t;e=ji(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(vr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=$i(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=po,startTime:i}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=i??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vr.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const Qo=e=>180*e/Math.PI,Zo=e=>{const t=Qo(Math.atan2(e[1],e[0]));return ea(t)},Jo={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Zo,rotateZ:Zo,skewX:e=>Qo(Math.atan(e[1])),skewY:e=>Qo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ea=e=>((e%=360)<0&&(e+=360),e),ta=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),na=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ia={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ta,scaleY:na,scale:e=>(ta(e)+na(e))/2,rotateX:e=>ea(Qo(Math.atan2(e[6],e[5]))),rotateY:e=>ea(Qo(Math.atan2(-e[2],e[0]))),rotateZ:Zo,rotate:Zo,skewX:e=>Qo(Math.atan(e[4])),skewY:e=>Qo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ra(e){return e.includes("scale")?1:0}function oa(e,t){if(!e||"none"===e)return ra(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=ia,r=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Jo,r=t}if(!r)return ra(t);const o=i[t],a=r[1].split(",").map(aa);return"function"==typeof o?o(a):a[o]}function aa(e){return parseFloat(e.trim())}const sa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],la=(()=>new Set(sa))(),ua=e=>e===Sr||e===zr,ca=new Set(["x","y","z"]),da=sa.filter(e=>!ca.has(e));const ha={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>oa(t,"x"),y:(e,{transform:t})=>oa(t,"y")};ha.translateX=ha.x,ha.translateY=ha.y;const fa=new Set;let pa=!1,ga=!1,ma=!1;function ya(){if(ga){const e=Array.from(fa).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return da.forEach(n=>{const i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var i;null==(i=e.getValue(t))||i.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}ga=!1,pa=!1,fa.forEach(e=>e.complete(ma)),fa.clear()}function va(){fa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ga=!0)})}class ba{constructor(e,t,n,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(fa.add(this),pa||(pa=!0,hr.read(va),hr.resolveKeyframes(ya))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(null===e[0]){const r=null==i?void 0:i.get(),o=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const i=n.readValue(t,o);null!=i&&(e[0]=i)}void 0===e[0]&&(e[0]=o),i&&void 0===r&&i.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),fa.delete(this)}cancel(){"scheduled"===this.state&&(fa.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const _a=zi(()=>void 0!==window.ScrollTimeline),Ea={};function ka(e,t){const n=zi(e);return()=>Ea[t]??n()}const wa=ka(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),Sa=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,xa={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sa([0,.65,.55,1]),circOut:Sa([.55,0,1,.45]),backIn:Sa([.31,.01,.66,-.59]),backOut:Sa([.33,1.53,.69,.99])};function Ta(e,t){return e?"function"==typeof e?wa()?go(e,t):"ease-out":sr(e)?Sa(e):Array.isArray(e)?e.map(e=>Ta(e,t)||xa.easeOut):xa[e]:void 0}function Ia(e,t,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:s="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const d=Ta(s,r);Array.isArray(d)&&(c.easing=d);const h={delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:"reverse"===a?"alternate":"normal"};u&&(h.pseudoElement=u);return e.animate(c,h)}function Ca(e){return"function"==typeof e&&"applyToOptions"in e}class Na extends Wo{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:s}=e;this.isPseudoElement=Boolean(r),this.allowFlatten=o,this.options=e,e.type;const l=function({type:e,...t}){return Ca(e)&&wa()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=Ia(t,n,i,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const e=$o(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==s||s(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const n=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return $i(Number(n))}get time(){return $i(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ji(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&(null==(n=this.animation.effect)||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&_a()?(this.animation.timeline=e,Bi):t(this)}}const Aa={anticipate:er,backInOut:Ji,circInOut:ir};function Pa(e){"string"==typeof e.ease&&e.ease in Aa&&(e.ease=Aa[e.ease])}class La extends Na{constructor(e){Pa(e),Yo(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:i,element:r,...o}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new Ko({...o,autoplay:!1}),s=ji(this.finishedTime??this.time);t.setWithVelocity(a.sample(s-10).value,a.sample(s).value,10),a.stop()}}const Oa=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!Zr.test(e)&&"0"!==e||e.startsWith("url(")));function Ma(e){e.duration=0,e.type}const Ra=new Set(["opacity","clipPath","filter","transform"]),Da=zi(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Fa extends Wo{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:s,motionValue:l,element:u,...c}){var d;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=vr.now();const h={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:r,repeatType:o,name:s,motionValue:l,element:u,...c},f=(null==u?void 0:u.KeyframeResolver)||ba;this.keyframeResolver=new f(a,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),s,l,u),null==(d=this.keyframeResolver)||d.scheduleResolve()}onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;const{name:r,type:o,velocity:a,delay:s,isHandoff:l,onUpdate:u}=n;this.resolvedAt=vr.now(),function(e,t,n,i){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],a=Oa(r,t),s=Oa(o,t);return!(!a||!s)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Ca(n))&&i)}(e,r,o,a)||(!Mi.instantAnimations&&s||null==u||u($o(e,n,t)),e[0]=e[e.length-1],Ma(n),n.repeat=0);const c={startTime:i?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!l&&function(e){var t;const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:a,type:s}=e;if(!((null==(t=null==n?void 0:n.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return Da()&&i&&Ra.has(i)&&("transform"!==i||!u)&&!l&&!r&&"mirror"!==o&&0!==a&&"inertia"!==s}(c)?new La({...c,element:c.motionValue.owner.current}):new Ko(c);d.finished.then(()=>this.notifyFinished()).catch(Bi),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),ma=!0,va(),ya(),ma=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const za=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ba(e,t,n=1){const[i,r]=function(e){const t=za.exec(e);if(!t)return[,];const[,n,i,r]=t;return[`--${n??i}`,r]}(e);if(!i)return;const o=window.getComputedStyle(t).getPropertyValue(i);if(o){const e=o.trim();return Ri(e)?parseFloat(e):e}return kr(r)?Ba(r,t,n+1):r}function Ua(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const qa=new Set(["width","height","top","left","right","bottom",...sa]),Va=e=>t=>t.test(e),Ga=[Sr,zr,Fr,Dr,Ur,Br,{test:e=>"auto"===e,parse:e=>e}],ja=e=>Ga.find(Va(e));function $a(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||Fi(e))}const Ha=new Set(["brightness","contrast","saturate","opacity"]);function Ya(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[i]=n.match(Cr)||[];if(!i)return e;const r=n.replace(i,"");let o=Ha.has(t)?1:0;return i!==n&&(o*=100),t+"("+o+r+")"}const Wa=/\b([a-z-]*)\(.*?\)/gu,Xa={...Zr,getAnimatableNone:e=>{const t=e.match(Wa);return t?t.map(Ya).join(" "):e}},Ka={...Sr,transform:Math.round},Qa={borderWidth:zr,borderTopWidth:zr,borderRightWidth:zr,borderBottomWidth:zr,borderLeftWidth:zr,borderRadius:zr,radius:zr,borderTopLeftRadius:zr,borderTopRightRadius:zr,borderBottomRightRadius:zr,borderBottomLeftRadius:zr,width:zr,maxWidth:zr,height:zr,maxHeight:zr,top:zr,right:zr,bottom:zr,left:zr,padding:zr,paddingTop:zr,paddingRight:zr,paddingBottom:zr,paddingLeft:zr,margin:zr,marginTop:zr,marginRight:zr,marginBottom:zr,marginLeft:zr,backgroundPositionX:zr,backgroundPositionY:zr,...{rotate:Dr,rotateX:Dr,rotateY:Dr,rotateZ:Dr,scale:Tr,scaleX:Tr,scaleY:Tr,scaleZ:Tr,skew:Dr,skewX:Dr,skewY:Dr,distance:zr,translateX:zr,translateY:zr,translateZ:zr,x:zr,y:zr,z:zr,perspective:zr,transformPerspective:zr,opacity:xr,originX:qr,originY:qr,originZ:zr},zIndex:Ka,fillOpacity:xr,strokeOpacity:xr,numOctaves:Ka},Za={...Qa,color:Gr,backgroundColor:Gr,outlineColor:Gr,fill:Gr,stroke:Gr,borderColor:Gr,borderTopColor:Gr,borderRightColor:Gr,borderBottomColor:Gr,borderLeftColor:Gr,filter:Xa,WebkitFilter:Xa},Ja=e=>Za[e];function es(e,t){let n=Ja(e);return n!==Xa&&(n=Zr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const ts=new Set(["auto","none","0"]);class ns extends ba{constructor(e,t,n,i,r){super(e,t,n,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let n=e[s];if("string"==typeof n&&(n=n.trim(),kr(n))){const i=Ba(n,t.current);void 0!==i&&(e[s]=i),s===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!qa.has(n)||2!==e.length)return;const[i,r]=e,o=ja(i),a=ja(r);if(o!==a)if(ua(o)&&ua(a))for(let s=0;s<e.length;s++){const t=e[s];"string"==typeof t&&(e[s]=parseFloat(t))}else ha[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)(null===e[i]||$a(e[i]))&&n.push(i);n.length&&function(e,t,n){let i,r=0;for(;r<e.length&&!i;){const t=e[r];"string"==typeof t&&!ts.has(t)&&Wr(t).values.length&&(i=e[r]),r++}if(i&&n)for(const o of t)e[o]=es(n,i)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ha[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];void 0!==i&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=ha[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}const is=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function rs(e){return Di(e)&&"offsetHeight"in e}class os{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const n=vr.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=vr.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Gi);const n=this.events[e].add(t);return"change"===e?()=>{n(),hr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=vr.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Hi(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function as(e,t){return new os(e,t)}const{schedule:ss}=dr(queueMicrotask,!1),ls={x:!1,y:!1};function us(){return ls.x||ls.y}function cs(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const i=(null==n?void 0:n[e])??t.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}(e),i=new AbortController;return[n,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function ds(e){return!("touch"===e.pointerType||us())}const hs=(e,t)=>!!t&&(e===t||hs(e,t.parentElement)),fs=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,ps=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const gs=new WeakSet;function ms(e){return t=>{"Enter"===t.key&&e(t)}}function ys(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function vs(e){return fs(e)&&!us()}function bs(e,t,n={}){const[i,r,o]=cs(e,n),a=e=>{const i=e.currentTarget;if(!vs(e))return;gs.add(i);const o=t(i,e),a=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",l),gs.has(i)&&gs.delete(i),vs(e)&&"function"==typeof o&&o(e,{success:t})},s=e=>{a(e,i===window||i===document||n.useGlobalTarget||hs(i,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",s,r),window.addEventListener("pointercancel",l,r)};return i.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,r),rs(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const i=ms(()=>{if(gs.has(n))return;ys(n,"down");const e=ms(()=>{ys(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>ys(n,"cancel"),t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)})(e,r)),t=e,ps.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),o}function _s(e){return Di(e)&&"ownerSVGElement"in e}const Es=e=>Boolean(e&&e.getVelocity),ks=[...Ga,Gr,Zr],ws=ki.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Ss extends ki.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=rs(e)&&e.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function xs({children:e,isPresent:t,anchorX:n,root:i}){const r=ki.useId(),o=ki.useRef(null),a=ki.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=ki.useContext(ws);return ki.useInsertionEffect(()=>{const{width:e,height:l,top:u,left:c,right:d}=a.current;if(t||!o.current||!e||!l)return;const h="left"===n?`left: ${c}`:`right: ${d}`;o.current.dataset.motionPopId=r;const f=document.createElement("style");s&&(f.nonce=s);const p=i??document.head;return p.appendChild(f),f.sheet&&f.sheet.insertRule(`\n          [data-motion-pop-id="${r}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${l}px !important;\n            ${h}px !important;\n            top: ${u}px !important;\n          }\n        `),()=>{p.contains(f)&&p.removeChild(f)}},[t]),xi.jsx(Ss,{isPresent:t,childRef:o,sizeRef:a,children:ki.cloneElement(e,{ref:o})})}const Ts=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a,anchorX:s,root:l})=>{const u=Ii(Is),c=ki.useId();let d=!0,h=ki.useMemo(()=>(d=!1,{id:c,initial:t,isPresent:n,custom:r,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;i&&i()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[n,u,i]);return o&&d&&(h={...h}),ki.useMemo(()=>{u.forEach((e,t)=>u.set(t,!1))},[n]),ki.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),"popLayout"===a&&(e=xi.jsx(xs,{isPresent:n,anchorX:s,root:l,children:e})),xi.jsx(Ai.Provider,{value:h,children:e})};function Is(){return new Map}function Cs(e=!0){const t=ki.useContext(Ai);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=t,o=ki.useId();ki.useEffect(()=>{if(e)return r(o)},[e]);const a=ki.useCallback(()=>e&&i&&i(o),[o,i,e]);return!n&&i?[!1,a]:[!0]}const Ns=e=>e.key||"";function As(e){const t=[];return ki.Children.forEach(e,e=>{ki.isValidElement(e)&&t.push(e)}),t}const Ps=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1,anchorX:s="left",root:l})=>{const[u,c]=Cs(a),d=ki.useMemo(()=>As(e),[e]),h=a&&!u?[]:d.map(Ns),f=ki.useRef(!0),p=ki.useRef(d),g=Ii(()=>new Map),[m,y]=ki.useState(d),[v,b]=ki.useState(d);Ni(()=>{f.current=!1,p.current=d;for(let e=0;e<v.length;e++){const t=Ns(v[e]);h.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}},[v,h.length,h.join("-")]);const _=[];if(d!==m){let e=[...d];for(let t=0;t<v.length;t++){const n=v[t],i=Ns(n);h.includes(i)||(e.splice(t,0,n),_.push(n))}return"wait"===o&&_.length&&(e=_),b(As(e)),y(d),null}const{forceRender:E}=ki.useContext(Ti);return xi.jsx(xi.Fragment,{children:v.map(e=>{const m=Ns(e),y=!(a&&!u)&&(d===v||h.includes(m));return xi.jsx(Ts,{isPresent:y,initial:!(f.current&&!n)&&void 0,custom:t,presenceAffectsLayout:r,mode:o,root:l,onExitComplete:y?void 0:()=>{if(!g.has(m))return;g.set(m,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(null==E||E(),b(p.current),a&&(null==c||c()),i&&i())},anchorX:s,children:e},m)})})},Ls=ki.createContext({strict:!1}),Os={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ms={};for(const L in Os)Ms[L]={isEnabled:e=>Os[L].some(t=>!!e[t])};const Rs=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ds(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Rs.has(e)}let Fs=e=>!Ds(e);try{"function"==typeof(zs=require("@emotion/is-prop-valid").default)&&(Fs=e=>e.startsWith("on")?!Ds(e):zs(e))}catch{}var zs;const Bs=ki.createContext({});function Us(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function qs(e){return"string"==typeof e||Array.isArray(e)}const Vs=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gs=["initial",...Vs];function js(e){return Us(e.animate)||Gs.some(t=>qs(e[t]))}function $s(e){return Boolean(js(e)||e.variants)}function Hs(e){const{initial:t,animate:n}=function(e,t){if(js(e)){const{initial:t,animate:n}=e;return{initial:!1===t||qs(t)?t:void 0,animate:qs(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,ki.useContext(Bs));return ki.useMemo(()=>({initial:t,animate:n}),[Ys(t),Ys(n)])}function Ys(e){return Array.isArray(e)?e.join(" "):e}const Ws={};function Xs(e,{layout:t,layoutId:n}){return la.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!Ws[e]||"opacity"===e)}const Ks={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Qs=sa.length;function Zs(e,t,n){const{style:i,vars:r,transformOrigin:o}=e;let a=!1,s=!1;for(const l in t){const e=t[l];if(la.has(l))a=!0;else if(_r(l))r[l]=e;else{const t=is(e,Qa[l]);l.startsWith("origin")?(s=!0,o[l]=t):i[l]=t}}if(t.transform||(a||n?i.transform=function(e,t,n){let i="",r=!0;for(let o=0;o<Qs;o++){const a=sa[o],s=e[a];if(void 0===s)continue;let l=!0;if(l="number"==typeof s?s===(a.startsWith("scale")?1:0):0===parseFloat(s),!l||n){const e=is(s,Qa[a]);l||(r=!1,i+=`${Ks[a]||a}(${e}) `),n&&(t[a]=e)}}return i=i.trim(),n?i=n(t,r?"":i):r&&(i="none"),i}(t,e.transform,n):i.transform&&(i.transform="none")),s){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;i.transformOrigin=`${e} ${t} ${n}`}}const Js=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function el(e,t,n){for(const i in t)Es(t[i])||Xs(i,n)||(e[i]=t[i])}function tl(e,t){const n={};return el(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return ki.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return Zs(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function nl(e,t){const n={},i=tl(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const il={offset:"stroke-dashoffset",array:"stroke-dasharray"},rl={offset:"strokeDashoffset",array:"strokeDasharray"};function ol(e,{attrX:t,attrY:n,attrScale:i,pathLength:r,pathSpacing:o=1,pathOffset:a=0,...s},l,u,c){if(Zs(e,s,u),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(null==c?void 0:c.transformBox)??"fill-box",delete d.transformBox),void 0!==t&&(d.x=t),void 0!==n&&(d.y=n),void 0!==i&&(d.scale=i),void 0!==r&&function(e,t,n=1,i=0,r=!0){e.pathLength=1;const o=r?il:rl;e[o.offset]=zr.transform(-i);const a=zr.transform(t),s=zr.transform(n);e[o.array]=`${a} ${s}`}(d,r,o,a,!1)}const al=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),sl=e=>"string"==typeof e&&"svg"===e.toLowerCase();function ll(e,t,n,i){const r=ki.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return ol(n,t,sl(i),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};el(t,e.style,e),r.style={...t,...r.style}}return r}const ul=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cl(e){return"string"==typeof e&&!e.includes("-")&&!!(ul.indexOf(e)>-1||/[A-Z]/u.test(e))}function dl(e,t,n,{latestValues:i},r,o=!1){const a=(cl(e)?ll:nl)(t,i,r,e),s=function(e,t,n){const i={};for(const r in e)"values"===r&&"object"==typeof e.values||(Fs(r)||!0===n&&Ds(r)||!t&&!Ds(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(t,"string"==typeof e,o),l=e!==ki.Fragment?{...s,...a,ref:n}:{},{children:u}=t,c=ki.useMemo(()=>Es(u)?u.get():u,[u]);return ki.createElement(e,{...l,children:c})}function hl(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function fl(e,t,n,i){if("function"==typeof t){const[r,o]=hl(i);t=t(void 0!==n?n:e.custom,r,o)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[r,o]=hl(i);t=t(void 0!==n?n:e.custom,r,o)}return t}function pl(e){return Es(e)?e.get():e}function gl(e,t,n,i){const r={},o=i(e,{});for(const h in o)r[h]=pl(o[h]);let{initial:a,animate:s}=e;const l=js(e),u=$s(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===s&&(s=t.animate));let c=!!n&&!1===n.initial;c=c||!1===a;const d=c?s:a;if(d&&"boolean"!=typeof d&&!Us(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const i=fl(e,t[n]);if(i){const{transitionEnd:e,transition:t,...n}=i;for(const i in n){let e=n[i];if(Array.isArray(e)){e=e[c?e.length-1:0]}null!==e&&(r[i]=e)}for(const i in e)r[i]=e[i]}}}return r}const ml=e=>(t,n)=>{const i=ki.useContext(Bs),r=ki.useContext(Ai),o=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,r){return{latestValues:gl(n,i,r,e),renderState:t()}}(e,t,i,r);return n?o():Ii(o)};function yl(e,t,n){var i;const{style:r}=e,o={};for(const a in r)(Es(r[a])||t.style&&Es(t.style[a])||Xs(a,e)||void 0!==(null==(i=null==n?void 0:n.getValue(a))?void 0:i.liveStyle))&&(o[a]=r[a]);return o}const vl=ml({scrapeMotionValuesFromProps:yl,createRenderState:Js});function bl(e,t,n){const i=yl(e,t,n);for(const r in e)if(Es(e[r])||Es(t[r])){i[-1!==sa.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return i}const _l=ml({scrapeMotionValuesFromProps:bl,createRenderState:al}),El=Symbol.for("motionComponentSymbol");function kl(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function wl(e,t,n){return ki.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&("function"==typeof n?n(i):kl(n)&&(n.current=i))},[t])}const Sl=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xl="data-"+Sl("framerAppearId"),Tl=ki.createContext({});function Il(e,t,n,i,r){var o,a;const{visualElement:s}=ki.useContext(Bs),l=ki.useContext(Ls),u=ki.useContext(Ai),c=ki.useContext(ws).reducedMotion,d=ki.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(e,{visualState:t,parent:s,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:c}));const h=d.current,f=ki.useContext(Tl);!h||h.projection||!r||"html"!==h.type&&"svg"!==h.type||function(e,t,n,i){const{layoutId:r,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Cl(e.parent)),e.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:Boolean(a)||s&&kl(s),visualElement:e,animationType:"string"==typeof o?o:"both",initialPromotionConfig:i,crossfade:c,layoutScroll:l,layoutRoot:u})}(d.current,n,r,f);const p=ki.useRef(!1);ki.useInsertionEffect(()=>{h&&p.current&&h.update(n,u)});const g=n[xl],m=ki.useRef(Boolean(g)&&!(null==(o=window.MotionHandoffIsComplete)?void 0:o.call(window,g))&&(null==(a=window.MotionHasOptimisedAnimation)?void 0:a.call(window,g)));return Ni(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),m.current&&h.animationState&&h.animationState.animateChanges())}),ki.useEffect(()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,g)}),m.current=!1),h.enteringChildren=void 0)}),h}function Cl(e){if(e)return!1!==e.options.allowProjection?e.projection:Cl(e.parent)}function Nl(e,{forwardMotionProps:t=!1}={},n,i){n&&function(e){for(const t in e)Ms[t]={...Ms[t],...e[t]}}(n);const r=cl(e)?_l:vl;function o(n,o){let a;const s={...ki.useContext(ws),...n,layoutId:Al(n)},{isStatic:l}=s,u=Hs(n),c=r(n,l);if(!l&&Ci){ki.useContext(Ls).strict;const t=function(e){const{drag:t,layout:n}=Ms;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(s);a=t.MeasureLayout,u.visualElement=Il(e,c,s,i,t.ProjectionNode)}return xi.jsxs(Bs.Provider,{value:u,children:[a&&u.visualElement?xi.jsx(a,{visualElement:u.visualElement,...s}):null,dl(e,n,wl(c,u.visualElement,o),c,l,t)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const a=ki.forwardRef(o);return a[El]=e,a}function Al({layoutId:e}){const t=ki.useContext(Ti).id;return t&&void 0!==e?t+"-"+e:e}function Pl(e,t){if("undefined"==typeof Proxy)return Nl;const n=new Map,i=(n,i)=>Nl(n,i,e,t);return new Proxy((e,t)=>i(e,t),{get:(r,o)=>"create"===o?i:(n.has(o)||n.set(o,Nl(o,void 0,e,t)),n.get(o))})}function Ll({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function Ol(e){return void 0===e||1===e}function Ml({scale:e,scaleX:t,scaleY:n}){return!Ol(e)||!Ol(t)||!Ol(n)}function Rl(e){return Ml(e)||Dl(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Dl(e){return Fl(e.x)||Fl(e.y)}function Fl(e){return e&&"0%"!==e}function zl(e,t,n){return n+t*(e-n)}function Bl(e,t,n,i,r){return void 0!==r&&(e=zl(e,r,i)),zl(e,n,i)+t}function Ul(e,t=0,n=1,i,r){e.min=Bl(e.min,t,n,i,r),e.max=Bl(e.max,t,n,i,r)}function ql(e,{x:t,y:n}){Ul(e.x,t.translate,t.scale,t.originPoint),Ul(e.y,n.translate,n.scale,n.originPoint)}const Vl=.999999999999,Gl=1.0000000000001;function jl(e,t){e.min=e.min+t,e.max=e.max+t}function $l(e,t,n,i,r=.5){Ul(e,t,n,to(e.min,e.max,r),i)}function Hl(e,t){$l(e.x,t.x,t.scaleX,t.scale,t.originX),$l(e.y,t.y,t.scaleY,t.scale,t.originY)}function Yl(e,t){return Ll(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}const Wl=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Xl={current:null},Kl={current:!1};const Ql=new WeakMap;const Zl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jl{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ba,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=vr.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,hr.render(this.render,!1,!0))};const{latestValues:s,renderState:l}=o;this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=Boolean(r),this.isControllingVariants=js(t),this.isVariantNode=$s(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in c){const e=c[d];void 0!==s[d]&&Es(e)&&e.set(s[d])}}mount(e){var t;this.current=e,Ql.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Kl.current||function(){if(Kl.current=!0,Ci)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Xl.current=e.matches;e.addEventListener("change",t),t()}else Xl.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Xl.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),fr(this.notifyUpdate),fr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=la.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&hr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Ms){const t=Ms[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Zl.length;n++){const t=Zl[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const i=e["on"+t];i&&(this.propEventSubscriptions[t]=this.on(t,i))}this.prevMotionValues=function(e,t,n){for(const i in t){const r=t[i],o=n[i];if(Es(r))e.addValue(i,r);else if(Es(o))e.addValue(i,as(r,{owner:e}));else if(o!==r)if(e.hasValue(i)){const t=e.getValue(i);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(i);e.addValue(i,as(void 0!==t?t:r,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=as(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var i;return null!=n&&("string"==typeof n&&(Ri(n)||Fi(n))?n=parseFloat(n):(i=n,!ks.find(Va(i))&&Zr.test(t)&&(n=es(e,t))),this.setBaseTarget(e,Es(n)?n.get():n)),Es(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let i;if("string"==typeof n||"object"==typeof n){const r=fl(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);r&&(i=r[e])}if(n&&void 0!==i)return i;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||Es(r)?void 0!==this.initialValues[e]&&void 0===i?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new Gi),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){ss.render(this.render)}}class eu extends Jl{constructor(){super(...arguments),this.KeyframeResolver=ns}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Es(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function tu(e,{style:t,vars:n},i,r){const o=e.style;let a;for(a in t)o[a]=t[a];for(a in null==r||r.applyProjectionStyles(o,i),n)o.setProperty(a,n[a])}class nu extends eu{constructor(){super(...arguments),this.type="html",this.renderInstance=tu}readValueFromInstance(e,t){var n,i;if(la.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?ra(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return oa(n,t)})(e,t);{const n=(i=e,window.getComputedStyle(i)),r=(_r(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Yl(e,t)}build(e,t,n){Zs(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return yl(e,t,n)}}const iu=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class ru extends eu{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wl}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(la.has(t)){const e=Ja(t);return e&&e.default||0}return t=iu.has(t)?t:Sl(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return bl(e,t,n)}build(e,t,n){ol(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){!function(e,t,n,i){tu(e,t,void 0,i);for(const r in t.attrs)e.setAttribute(iu.has(r)?r:Sl(r),t.attrs[r])}(e,t,0,i)}mount(e){this.isSVGTag=sl(e.tagName),super.mount(e)}}const ou=(e,t)=>cl(e)?new ru(t):new nu(t,{allowProjection:e!==ki.Fragment});function au(e,t,n){const i=e.getProps();return fl(i,t,void 0!==n?n:i.custom,e)}const su=e=>Array.isArray(e);function lu(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,as(n))}function uu(e){return su(e)?e[e.length-1]||0:e}function cu(e,t){const n=e.getValue("willChange");if(i=n,Boolean(Es(i)&&i.add))return n.add(t);if(!n&&Mi.WillChange){const n=new Mi.WillChange("auto");e.addValue("willChange",n),n.add(t)}var i}function du(e){return e.props[xl]}const hu=e=>null!==e;const fu={type:"spring",stiffness:500,damping:25,restSpeed:10},pu={type:"keyframes",duration:.8},gu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mu=(e,{keyframes:t})=>t.length>2?pu:la.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:fu:gu;const yu=(e,t,n,i={},r,o)=>a=>{const s=Ua(i,e)||{},l=s.delay||i.delay||0;let{elapsed:u=0}=i;u-=ji(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-u,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:o?void 0:r};(function({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:s,from:l,elapsed:u,...c}){return!!Object.keys(c).length})(s)||Object.assign(c,mu(e,c)),c.duration&&(c.duration=ji(c.duration)),c.repeatDelay&&(c.repeatDelay=ji(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if((!1===c.type||0===c.duration&&!c.repeatDelay)&&(Ma(c),0===c.delay&&(d=!0)),(Mi.instantAnimations||Mi.skipAnimations)&&(d=!0,Ma(c),c.delay=0),c.allowFlatten=!s.type&&!s.ease,d&&!o&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const i=e.filter(hu);return i[t&&"loop"!==n&&t%2==1?0:i.length-1]}(c.keyframes,s);if(void 0!==e)return void hr.update(()=>{c.onUpdate(e),c.onComplete()})}return s.isSync?new Ko(c):new Fa(c)};function vu({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,i}function bu(e,t,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...s}=t;i&&(o=i);const l=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const c in s){const t=e.getValue(c,e.latestValues[c]??null),i=s[c];if(void 0===i||u&&vu(u,c))continue;const r={delay:n,...Ua(o||{},c)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(i)&&i===a&&!r.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=du(e);if(t){const e=window.MotionHandoffAnimation(t,c,hr);null!==e&&(r.startTime=e,d=!0)}}cu(e,c),t.start(yu(c,t,i,e.shouldReduceMotion&&qa.has(c)?{type:!1}:r,e,d));const h=t.animation;h&&l.push(h)}return a&&Promise.all(l).then(()=>{hr.update(()=>{a&&function(e,t){const n=au(e,t);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const a in o)lu(e,a,uu(o[a]))}(e,a)})}),l}function _u(e,t,n,i=0,r=1){const o=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,s=(a-1)*i;return"function"==typeof n?n(o,a):1===r?o*i:s-o*i}function Eu(e,t,n={}){var i;const r=au(e,t,"exit"===n.type?null==(i=e.presenceContext)?void 0:i.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const a=r?()=>Promise.all(bu(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(i=0)=>{const{delayChildren:r=0,staggerChildren:a,staggerDirection:s}=o;return function(e,t,n=0,i=0,r=0,o=1,a){const s=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),s.push(Eu(l,t,{...a,delay:n+("function"==typeof i?0:i)+_u(e.variantChildren,l,i,r,o)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(s)}(e,t,i,r,a,s,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[e,t]="beforeChildren"===l?[a,s]:[s,a];return e().then(()=>t())}return Promise.all([a(),s(n.delay)])}function ku(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const wu=Gs.length;function Su(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Su(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<wu;n++){const i=Gs[n],r=e.props[i];(qs(r)||!1===r)&&(t[i]=r)}return t}const xu=[...Vs].reverse(),Tu=Vs.length;function Iu(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let i;if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>Eu(e,t,n));i=Promise.all(r)}else if("string"==typeof t)i=Eu(e,t,n);else{const r="function"==typeof t?au(e,t,n.custom):t;i=Promise.all(bu(e,r,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function Cu(e){let t=Iu(e),n=Pu(),i=!0;const r=t=>(n,i)=>{var r;const o=au(e,i,"exit"===t?null==(r=e.presenceContext)?void 0:r.custom:void 0);if(o){const{transition:e,transitionEnd:t,...i}=o;n={...n,...i,...t}}return n};function o(o){const{props:a}=e,s=Su(e.parent)||{},l=[],u=new Set;let c={},d=1/0;for(let t=0;t<Tu;t++){const h=xu[t],f=n[h],p=void 0!==a[h]?a[h]:s[h],g=qs(p),m=h===o?f.isActive:null;!1===m&&(d=t);let y=p===s[h]&&p!==a[h]&&g;if(y&&i&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...c},!f.isActive&&null===m||!p&&!f.prevProp||Us(p)||"boolean"==typeof p)continue;const v=Nu(f.prevProp,p);let b=v||h===o&&f.isActive&&!y&&g||t>d&&g,_=!1;const E=Array.isArray(p)?p:[p];let k=E.reduce(r(h),{});!1===m&&(k={});const{prevResolvedValues:w={}}=f,S={...w,...k},x=t=>{b=!0,u.has(t)&&(_=!0,u.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=k[e],n=w[e];if(c.hasOwnProperty(e))continue;let i=!1;i=su(t)&&su(n)?!ku(t,n):t!==n,i?null!=t?x(e):u.add(e):void 0!==t&&u.has(e)?x(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=k,f.isActive&&(c={...c,...k}),i&&e.blockInitialAnimation&&(b=!1);const T=y&&v;b&&(!T||_)&&l.push(...E.map(t=>{const n={type:h};if("string"==typeof t&&i&&!T&&e.manuallyAnimateOnMount&&e.parent){const{parent:i}=e,r=au(i,t);if(i.enteringChildren&&r){const{delayChildren:t}=r.transition||{};n.delay=_u(i.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(u.size){const t={};if("boolean"!=typeof a.initial){const n=au(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}u.forEach(n=>{const i=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=i??null}),l.push({animation:t})}let h=Boolean(l.length);return!i||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(h=!1),i=!1,h?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,i){var r;if(n[t].isActive===i)return Promise.resolve();null==(r=e.variantChildren)||r.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,i)}),n[t].isActive=i;const a=o(t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Pu(),i=!0}}}function Nu(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!ku(t,e)}function Au(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Pu(){return{animate:Au(!0),whileInView:Au(),whileHover:Au(),whileTap:Au(),whileDrag:Au(),whileFocus:Au(),exit:Au()}}class Lu{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Ou=0;const Mu={animation:{Feature:class extends Lu{constructor(e){super(e),e.animationState||(e.animationState=Cu(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Us(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends Lu{constructor(){super(...arguments),this.id=Ou++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function Ru(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function Du(e){return{point:{x:e.pageX,y:e.pageY}}}function Fu(e,t,n,i){return Ru(e,t,(e=>t=>fs(t)&&e(t,Du(t)))(n),i)}function zu(e){return e.max-e.min}function Bu(e,t,n,i=.5){e.origin=i,e.originPoint=to(t.min,t.max,e.origin),e.scale=zu(n)/zu(t),e.translate=to(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Uu(e,t,n,i){Bu(e.x,t.x,n.x,i?i.originX:void 0),Bu(e.y,t.y,n.y,i?i.originY:void 0)}function qu(e,t,n){e.min=n.min+t.min,e.max=e.min+zu(t)}function Vu(e,t,n){e.min=t.min-n.min,e.max=e.min+zu(t)}function Gu(e,t,n){Vu(e.x,t.x,n.x),Vu(e.y,t.y,n.y)}function ju(e){return[e("x"),e("y")]}const $u=({current:e})=>e?e.ownerDocument.defaultView:null,Hu=(e,t)=>Math.abs(e-t);class Yu{constructor(e,t,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Ku(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Hu(e.x,t.x),i=Hu(e.y,t.y);return Math.sqrt(n**2+i**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:i}=e,{timestamp:r}=pr;this.history.push({...i,timestamp:r});const{onStart:o,onMove:a}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Wu(t,this.transformPagePoint),hr.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:i,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=Ku("pointercancel"===e.type?this.lastMoveEventInfo:Wu(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),i&&i(e,o)},!fs(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=i||window;const a=Wu(Du(e),this.transformPagePoint),{point:s}=a,{timestamp:l}=pr;this.history=[{...s,timestamp:l}];const{onSessionStart:u}=t;u&&u(e,Ku(a,this.history)),this.removeListeners=qi(Fu(this.contextWindow,"pointermove",this.handlePointerMove),Fu(this.contextWindow,"pointerup",this.handlePointerUp),Fu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fr(this.updatePoint)}}function Wu(e,t){return t?{point:t(e.point)}:e}function Xu(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ku({point:e},t){return{point:e,delta:Xu(e,Zu(t)),offset:Xu(e,Qu(t)),velocity:Ju(t,.1)}}function Qu(e){return e[0]}function Zu(e){return e[e.length-1]}function Ju(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=Zu(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>ji(t)));)n--;if(!i)return{x:0,y:0};const o=$i(r.timestamp-i.timestamp);if(0===o)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function ec(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function tc(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}const nc=.35;function ic(e,t,n){return{min:rc(e,t),max:rc(e,n)}}function rc(e,t){return"number"==typeof e?e:e[t]||0}const oc=new WeakMap;class ac{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Yu(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Du(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:i,onDragStart:r}=this.getProps();if(n&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(o=n)||"y"===o?ls[o]?null:(ls[o]=!0,()=>{ls[o]=!1}):ls.x||ls.y?null:(ls.x=ls.y=!0,()=>{ls.x=ls.y=!1}),!this.openDragLock))return;var o;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ju(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Fr.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const i=n.layout.layoutBox[e];if(i){t=zu(i)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&hr.postRender(()=>r(e,t)),cu(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:i,onDirectionLock:r,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(i&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>ju(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,distanceThreshold:n,contextWindow:$u(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,i=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!n)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&hr.postRender(()=>a(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!sc(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,{min:t,max:n},i){return void 0!==t&&e<t?e=i?to(t,e,i.min):Math.max(e,t):void 0!==n&&e>n&&(e=i?to(n,e,i.max):Math.min(e,n)),e}(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,r=this.constraints;t&&kl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!i)&&function(e,{top:t,left:n,bottom:i,right:r}){return{x:ec(e.x,n,r),y:ec(e.y,t,i)}}(i.layoutBox,t),this.elastic=function(e=nc){return!1===e?e=0:!0===e&&(e=nc),{x:ic(e,"left","right"),y:ic(e,"top","bottom")}}(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ju(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!kl(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=function(e,t,n){const i=Yl(e,n),{scroll:r}=t;return r&&(jl(i.x,r.offset.x),jl(i.y,r.offset.y)),i}(n,i.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:tc(e.x,t.x),y:tc(e.y,t.y)}}(i.layout.layoutBox,r);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=Ll(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},l=ju(a=>{if(!sc(a,t,this.currentDirection))return;let l=s&&s[a]||{};o&&(l={min:0,max:0});const u=i?200:1e6,c=i?40:1e7,d={type:"inertia",velocity:n?e[a]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(a,d)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return cu(this.visualElement,e),n.start(yu(e,n,0,t,this.visualElement,!1))}stopAnimation(){ju(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ju(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ju(t=>{const{drag:n}=this.getProps();if(!sc(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){const{min:n,max:o}=i.layout.layoutBox[t];r.set(e[t]-to(n,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!kl(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ju(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();i[e]=function(e,t){let n=.5;const i=zu(e),r=zu(t);return r>i?n=Vi(t.min,t.max-i,e.min):i>r&&(n=Vi(e.min,e.max-r,t.min)),Oi(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ju(t=>{if(!sc(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:o}=this.constraints[t];n.set(to(r,o,i[t]))})}addListeners(){if(!this.visualElement.current)return;oc.set(this.visualElement,this);const e=Fu(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();kl(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),hr.read(t);const r=Ru(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(ju(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{r(),e(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=nc,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function sc(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const lc=e=>(t,n)=>{e&&hr.postRender(()=>e(t,n))};const uc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cc(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const dc={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!zr.test(e))return e;e=parseFloat(e)}return`${cc(e,t.target.x)}% ${cc(e,t.target.y)}%`}},hc={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,r=Zr.parse(e);if(r.length>5)return i;const o=Zr.createTransformer(e),a="number"!=typeof r[0]?1:0,s=n.x.scale*t.x,l=n.y.scale*t.y;r[0+a]/=s,r[1+a]/=l;const u=to(s,l,.5);return"number"==typeof r[2+a]&&(r[2+a]/=u),"number"==typeof r[3+a]&&(r[3+a]/=u),o(r)}};let fc=!1;class pc extends ki.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;!function(e){for(const t in e)Ws[t]=e[t],_r(t)&&(Ws[t].isCSSVariable=!0)}(mc),r&&(t.group&&t.group.add(r),n&&n.register&&i&&n.register(r),fc&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),uc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:r}=this.props,{projection:o}=n;return o?(o.isPresent=r,fc=!0,i||e.layoutDependency!==t||void 0===t||e.isPresent!==r?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||hr.postRender(()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ss.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;fc=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gc(e){const[t,n]=Cs(),i=ki.useContext(Ti);return xi.jsx(pc,{...e,layoutGroup:i,switchLayoutGroup:ki.useContext(Tl),isPresent:t,safeToRemove:n})}const mc={borderRadius:{...dc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dc,borderTopRightRadius:dc,borderBottomLeftRadius:dc,borderBottomRightRadius:dc,boxShadow:hc};const yc=(e,t)=>e.depth-t.depth;class vc{constructor(){this.children=[],this.isDirty=!1}add(e){Pi(this.children,e),this.isDirty=!0}remove(e){Li(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yc),this.isDirty=!1,this.children.forEach(e)}}const bc=["TopLeft","TopRight","BottomLeft","BottomRight"],_c=bc.length,Ec=e=>"string"==typeof e?parseFloat(e):e,kc=e=>"number"==typeof e||zr.test(e);function wc(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Sc=Tc(0,.5,nr),xc=Tc(.5,.95,Bi);function Tc(e,t,n){return i=>i<e?0:i>t?1:n(Vi(e,t,i))}function Ic(e,t){e.min=t.min,e.max=t.max}function Cc(e,t){Ic(e.x,t.x),Ic(e.y,t.y)}function Nc(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ac(e,t,n,i,r){return e=zl(e-=t,1/n,i),void 0!==r&&(e=zl(e,1/r,i)),e}function Pc(e,t,[n,i,r],o,a){!function(e,t=0,n=1,i=.5,r,o=e,a=e){Fr.test(t)&&(t=parseFloat(t),t=to(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let s=to(o.min,o.max,i);e===o&&(s-=t),e.min=Ac(e.min,t,n,s,r),e.max=Ac(e.max,t,n,s,r)}(e,t[n],t[i],t[r],t.scale,o,a)}const Lc=["x","scaleX","originX"],Oc=["y","scaleY","originY"];function Mc(e,t,n,i){Pc(e.x,t,Lc,n?n.x:void 0,i?i.x:void 0),Pc(e.y,t,Oc,n?n.y:void 0,i?i.y:void 0)}function Rc(e){return 0===e.translate&&1===e.scale}function Dc(e){return Rc(e.x)&&Rc(e.y)}function Fc(e,t){return e.min===t.min&&e.max===t.max}function zc(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Bc(e,t){return zc(e.x,t.x)&&zc(e.y,t.y)}function Uc(e){return zu(e.x)/zu(e.y)}function qc(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Vc{constructor(){this.members=[]}add(e){Pi(this.members,e),e.scheduleRender()}remove(e){if(Li(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let i=t;i>=0;i--){const e=this.members[i];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Gc=["","X","Y","Z"];let jc=0;function $c(e,t,n,i){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),i&&(i[e]=0))}function Hc(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=du(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",hr,!(t||i))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&Hc(i)}function Yc({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=jc++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Kc),this.nodes.forEach(id),this.nodes.forEach(rd),this.nodes.forEach(Qc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new vc)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Gi),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=_s(t)&&!(_s(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:i,layout:r,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||i)&&(this.isLayoutDirty=!0),e){let n,i=0;const r=()=>this.root.updateBlockedByResize=!1;hr.read(()=>{i=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==i&&(i=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=vr.now(),i=({timestamp:r})=>{const o=r-n;o>=t&&(fr(i),e(o-t))};return hr.setup(i,!0),()=>fr(i)}(r,250),uc.hasAnimatedSinceResize&&(uc.hasAnimatedSinceResize=!1,this.nodes.forEach(nd)))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||r)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:i})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const r=this.options.transition||o.getDefaultTransition()||cd,{onLayoutAnimationStart:a,onLayoutAnimationComplete:s}=o.getProps(),l=!this.targetLayout||!Bc(this.targetLayout,i),u=!t&&n;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...Ua(r,"layout"),onPlay:a,onComplete:s};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,u)}else t||nd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(od),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Hc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Jc);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(ed);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(td),this.nodes.forEach(Wc),this.nodes.forEach(Xc)):this.nodes.forEach(ed),this.clearAllSnapshots();const e=vr.now();pr.delta=Oi(0,1e3/60,e-pr.timestamp),pr.timestamp=e,pr.isProcessing=!0,gr.update.process(pr),gr.preRender.process(pr),gr.render.process(pr),pr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ss.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Zc),this.sharedNodes.forEach(ad)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||zu(this.snapshot.measuredBox.x)||zu(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!r)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Dc(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,o=i!==this.prevTransformTemplateValue;e&&this.instance&&(t||Rl(this.latestValues)||o)&&(r(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var i;return e&&(n=this.removeTransform(n)),fd((i=n).x),fd(i.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(gd))){const{scroll:e}=this.root;e&&(jl(n.x,e.offset.x),jl(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Cc(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let i=0;i<this.path.length;i++){const t=this.path[i],{scroll:r,options:o}=t;t!==this.root&&r&&o.layoutScroll&&(r.wasRoot&&Cc(n,e),jl(n.x,r.offset.x),jl(n.y,r.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};Cc(n,e);for(let i=0;i<this.path.length;i++){const e=this.path[i];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Hl(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Rl(e.latestValues)&&Hl(n,e.latestValues)}return Rl(this.latestValues)&&Hl(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Cc(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Rl(e.latestValues))continue;Ml(e.latestValues)&&e.updateSnapshot();const i=Wl();Cc(i,e.measurePageBox()),Mc(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,i)}return Rl(this.latestValues)&&Mc(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const i=Boolean(this.resumingFrom)||this!==n;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:o}=this.options;if(this.layout&&(r||o)){if(this.resolvedRelativeTargetAt=pr.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Gu(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Cc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var a,s,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,s=this.relativeTarget,l=this.relativeParent.target,qu(a.x,s.x,l.x),qu(a.y,s.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Cc(this.target,this.layout.layoutBox),ql(this.target,this.targetDelta)):Cc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Gu(this.relativeTargetOrigin,this.target,e.target),Cc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!Ml(this.parent.latestValues)&&!Dl(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let i=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===pr.timestamp&&(i=!1),i)return;const{layout:r,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!o)return;Cc(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,s=this.treeScale.y;!function(e,t,n,i=!1){const r=n.length;if(!r)return;let o,a;t.x=t.y=1;for(let s=0;s<r;s++){o=n[s],a=o.projectionDelta;const{visualElement:r}=o.options;r&&r.props.style&&"contents"===r.props.style.display||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Hl(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,ql(e,a)),i&&Rl(o.latestValues)&&Hl(e,o.latestValues))}t.x<Gl&&t.x>Vl&&(t.x=1),t.y<Gl&&t.y>Vl&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Nc(this.prevProjectionDelta.x,this.projectionDelta.x),Nc(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Uu(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===s&&qc(this.projectionDelta.x,this.prevProjectionDelta.x)&&qc(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,i=n?n.latestValues:{},r={...this.latestValues},o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,c=Boolean(s&&!u&&!0===this.options.crossfade&&!this.path.some(ud));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,f,p,g,m;sd(o.x,e.x,n),sd(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gu(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,g=a,m=n,ld(f.x,p.x,g.x,m),ld(f.y,p.y,g.y,m),d&&(l=this.relativeTarget,h=d,Fc(l.x,h.x)&&Fc(l.y,h.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Cc(d,this.relativeTarget)),s&&(this.animationValues=r,function(e,t,n,i,r,o){r?(e.opacity=to(0,n.opacity??1,Sc(i)),e.opacityExit=to(t.opacity??1,0,xc(i))):o&&(e.opacity=to(t.opacity??1,n.opacity??1,i));for(let a=0;a<_c;a++){const r=`border${bc[a]}Radius`;let o=wc(t,r),s=wc(n,r);void 0===o&&void 0===s||(o||(o=0),s||(s=0),0===o||0===s||kc(o)===kc(s)?(e[r]=Math.max(to(Ec(o),Ec(s),i),0),(Fr.test(s)||Fr.test(o))&&(e[r]+="%")):e[r]=s)}(t.rotate||n.rotate)&&(e.rotate=to(t.rotate||0,n.rotate||0,i))}(r,i,this.latestValues,n,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n,i;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(i=null==(n=this.resumingFrom)?void 0:n.currentAnimation)||i.stop(),this.pendingAnimation&&(fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hr.update(()=>{uc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=as(0)),this.currentAnimation=function(e,t,n){const i=Es(e)?e:as(e);return i.start(yu("",i,t,n)),i.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:i,latestValues:r}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&pd(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=zu(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const i=zu(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}Cc(t,n),Hl(t,r),Uu(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Vc);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const i={};n.z&&$c("z",e,i,this.animationValues);for(let r=0;r<Gc.length;r++)$c(`rotate${Gc[r]}`,e,i,this.animationValues),$c(`skew${Gc[r]}`,e,i,this.animationValues);e.render();for(const r in i)e.setStaticValue(r,i[r]),this.animationValues&&(this.animationValues[r]=i[r]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=pl(null==t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=pl(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Rl(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const r=i.animationValues||i.latestValues;this.applyTransformsToTarget();let o=function(e,t,n){let i="";const r=e.x.translate/t.x,o=e.y.translate/t.y,a=(null==n?void 0:n.z)||0;if((r||o||a)&&(i=`translate3d(${r}px, ${o}px, ${a}px) `),1===t.x&&1===t.y||(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:o,skewX:a,skewY:s}=n;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),r&&(i+=`rotateX(${r}deg) `),o&&(i+=`rotateY(${o}deg) `),a&&(i+=`skewX(${a}deg) `),s&&(i+=`skewY(${s}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return 1===s&&1===l||(i+=`scale(${s}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);n&&(o=n(r,o)),e.transform=o;const{x:a,y:s}=this.projectionDelta;e.transformOrigin=`${100*a.origin}% ${100*s.origin}% 0`,i.animationValues?e.opacity=i===this?r.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:e.opacity=i===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0;for(const l in Ws){if(void 0===r[l])continue;const{correct:t,applyTo:n,isCSSVariable:a}=Ws[l],s="none"===o?r[l]:t(r[l],i);if(n){const t=n.length;for(let i=0;i<t;i++)e[n[i]]=s}else a?this.options.visualElement.renderState.vars[l]=s:e[l]=s}this.options.layoutId&&(e.pointerEvents=i===this?pl(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(Jc),this.root.sharedNodes.clear()}}}function Wc(e){e.updateLayout()}function Xc(e){var t;const n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=e.layout,{animationType:r}=e.options,o=n.source!==e.layout.source;"size"===r?ju(e=>{const i=o?n.measuredBox[e]:n.layoutBox[e],r=zu(i);i.min=t[e].min,i.max=i.min+r}):pd(r,n.layoutBox,t)&&ju(i=>{const r=o?n.measuredBox[i]:n.layoutBox[i],a=zu(t[i]);r.max=r.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Uu(a,t,n.layoutBox);const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o?Uu(s,e.applyTransform(i,!0),n.measuredBox):Uu(s,t,n.layoutBox);const l=!Dc(a);let u=!1;if(!e.resumeFrom){const i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){const{snapshot:r,layout:o}=i;if(r&&o){const a={x:{min:0,max:0},y:{min:0,max:0}};Gu(a,n.layoutBox,r.layoutBox);const s={x:{min:0,max:0},y:{min:0,max:0}};Gu(s,t,o.layoutBox),Bc(a,s)||(u=!0),i.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=a,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:s,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Kc(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Qc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Zc(e){e.clearSnapshot()}function Jc(e){e.clearMeasurements()}function ed(e){e.isLayoutDirty=!1}function td(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function id(e){e.resolveTargetDelta()}function rd(e){e.calcProjection()}function od(e){e.resetSkewAndRotation()}function ad(e){e.removeLeadSnapshot()}function sd(e,t,n){e.translate=to(t.translate,0,n),e.scale=to(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ld(e,t,n,i){e.min=to(t.min,n.min,i),e.max=to(t.max,n.max,i)}function ud(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const cd={duration:.45,ease:[.4,0,.1,1]},dd=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),hd=dd("applewebkit/")&&!dd("chrome/")?Math.round:Bi;function fd(e){e.min=hd(e.min),e.max=hd(e.max)}function pd(e,t,n){return"position"===e||"preserve-aspect"===e&&(i=Uc(t),r=Uc(n),o=.2,!(Math.abs(i-r)<=o));var i,r,o}function gd(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const md=Yc({attachResizeListener:(e,t)=>Ru(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yd={current:void 0},vd=Yc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!yd.current){const e=new md({});e.mount(window),e.setOptions({layoutScroll:!0}),yd.current=e}return yd.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),bd={pan:{Feature:class extends Lu{constructor(){super(...arguments),this.removePointerDownListener=Bi}onPointerDown(e){this.session=new Yu(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$u(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:lc(e),onStart:lc(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&hr.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=Fu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Lu{constructor(e){super(e),this.removeGroupControls=Bi,this.removeListeners=Bi,this.controls=new ac(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bi}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:vd,MeasureLayout:gc}};function _d(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===n);const r=i["onHover"+n];r&&hr.postRender(()=>r(t,Du(t)))}function Ed(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===n);const r=i["onTap"+("End"===n?"":n)];r&&hr.postRender(()=>r(t,Du(t)))}const kd=new WeakMap,wd=new WeakMap,Sd=e=>{const t=kd.get(e.target);t&&t(e)},xd=e=>{e.forEach(Sd)};function Td(e,t,n){const i=function({root:e,...t}){const n=e||document;wd.has(n)||wd.set(n,{});const i=wd.get(n),r=JSON.stringify(t);return i[r]||(i[r]=new IntersectionObserver(xd,{root:e,...t})),i[r]}(t);return kd.set(e,n),i.observe(e),()=>{kd.delete(e),i.unobserve(e)}}const Id={some:0,all:1};const Cd=Pl({...Mu,...{inView:{Feature:class extends Lu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof i?i:Id[i]};return Td(this.node.current,o,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),o=t?n:i;o&&o(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Lu{mount(){const{current:e}=this.node;e&&(this.unmount=bs(e,(e,t)=>(Ed(this.node,t,"Start"),(e,{success:t})=>Ed(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Lu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qi(Ru(this.node.current,"focus",()=>this.onFocus()),Ru(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Lu{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[i,r,o]=cs(e,n),a=e=>{if(!ds(e))return;const{target:n}=e,i=t(n,e);if("function"!=typeof i||!n)return;const o=e=>{ds(e)&&(i(e),n.removeEventListener("pointerleave",o))};n.addEventListener("pointerleave",o,r)};return i.forEach(e=>{e.addEventListener("pointerenter",a,r)}),o}(e,(e,t)=>(_d(this.node,t,"Start"),e=>_d(this.node,e,"End"))))}unmount(){}}}},...bd,...{layout:{ProjectionNode:vd,MeasureLayout:gc}}},ou);function Nd(e,t){return t.split(".").reduce((e,t)=>e?e[t]:void 0,e)}function Ad(e,t,n){const i=t.split("."),r=i.pop();let o=e;for(const a of i)"object"==typeof o[a]&&null!==o[a]||(o[a]={}),o=o[a];o[r]=n}function Pd(e,t=[],n=.7){if(!t||0===t.length)return{ask:!0,reason:"missing"};const i=[...t].sort((e,t)=>t.confidence-e.confidence)[0];return i.confidence>=n?{value:i.value,ask:!1}:{value:i.value,ask:!0,reason:"low_confidence"}}function Ld(e){if("undefined"!=typeof window&&window.t)try{const t=window.t(e);if(t&&t!==e)return t}catch(i){}const t={de:{"ai.chatbot.title":"Zufahrtsschutz-Assistent","ai.chatbot.welcome":"Willkommen zum Zufahrtsschutz-Assistenten. Ich stelle nur Fragen, die noch fehlen oder unsicher sind. Bereit?","ai.chatbot.assetQuestion":"Welche Schutzgüter möchten Sie absichern?","ai.chatbot.inputPlaceholder":"Antwort eingeben...","ai.chatbot.sendButton":"Senden","ai.chatbot.stakeholderQuestion":"Wer sind die relevanten Stakeholder (Behörden, Veranstalter, Betreiber)?","ai.chatbot.restRiskQuestion":"Welches akzeptable Restrisiko gilt?","ai.chatbot.operationalQuestion":"Betriebsanforderungen (mehrfach wählbar)","ai.chatbot.threatQuestion":"Welche Art fahrzeuggestützter Bedrohung ist zu erwarten?","ai.chatbot.vehicleTypesQuestion":"Welche Fahrzeugtypen sind relevant?","ai.chatbot.accessCorridorsQuestion":"Wo könnten Fahrzeuge eindringen? (Karte markieren oder beschreiben)","ai.chatbot.speedQuestion":"Maximale Zufahrtsgeschwindigkeit (km/h)","ai.chatbot.angleQuestion":"Wahrscheinlicher Anprallwinkel (°)","ai.chatbot.groundQuestion":"Untergrund/Fundamente am Standort","ai.chatbot.riskMatrixQuestion":"Risikobewertung: Eintrittswahrscheinlichkeit & Schadensausmaß","ai.chatbot.completionMessage":"Danke! Alle erforderlichen Angaben sind vorhanden. Möchten Sie den normkonformen PDF-Plan erzeugen?","ai.chatbot.infoPrefix":"Hinweis: ","ai.chatbot.assetQuestionInfo":"Grundlage für Schutzziel & Schutzklasse (DIN SPEC 91414-2 / ISO 22343-2)","ai.chatbot.restRiskQuestionInfo":"Steuert Schutzklasse/Sicherungsgrad (DIN SPEC 91414-2)","ai.chatbot.speedQuestionInfo":"Pflichtparameter für FSB-Performance (ISO 22343-2/-1)","ai.chatbot.angleQuestionInfo":"Pflichtparameter für FSB-Performance (ISO 22343-2/-1)","ai.chatbot.riskMatrixQuestionInfo":"Erzeugt Sicherungsgrad & Schutzklasse (DIN SPEC 91414-2)","ai.chatbot.assetOptions":"Menschenmenge,Gebäude,KRITIS-Prozess,Veranstaltungsfläche","ai.chatbot.assetPlaceholder":"z. B. Menschenmenge, Bühne","ai.chatbot.stakeholderOptions":"Behörden,Veranstalter,Betreiber","ai.chatbot.restRiskOptions":"niedrig,mittel,hoch","ai.chatbot.operationalOptions":"Feuerwehrzufahrt,Fluchtwege,Verkehrssicherheit,Betriebssicherheit","ai.chatbot.threatOptions":"intentional,unbeabsichtigt,beides","ai.chatbot.vehicleOptions":"PKW,Transporter,LKW,Bus","ai.chatbot.groundOptions":"Asphalt,Beton,Pflaster,Erde,Unbekannt","ai.chatbot.riskMatrixOptions":"EW:niedrig|SA:gering,EW:niedrig|SA:mittel,EW:mittel|SA:mittel,EW:hoch|SA:schwer","ai.chatbot.accessCorridorsPlaceholder":"Polyline/Polygon auswählen oder kurz beschreiben"},en:{"ai.chatbot.title":"Access Protection Assistant","ai.chatbot.welcome":"Welcome to the Access Protection Assistant. I only ask questions that are still missing or uncertain. Ready?","ai.chatbot.assetQuestion":"Which protective assets would you like to secure?","ai.chatbot.inputPlaceholder":"Enter answer...","ai.chatbot.sendButton":"Send","ai.chatbot.stakeholderQuestion":"Who are the relevant stakeholders (authorities, organizers, operators)?","ai.chatbot.restRiskQuestion":"What acceptable residual risk applies?","ai.chatbot.operationalQuestion":"Operational requirements (multiple choice)","ai.chatbot.threatQuestion":"What type of vehicle-based threat is expected?","ai.chatbot.vehicleTypesQuestion":"Which vehicle types are relevant?","ai.chatbot.accessCorridorsQuestion":"Where could vehicles penetrate? (Mark on map or describe)","ai.chatbot.speedQuestion":"Maximum access speed (km/h)","ai.chatbot.angleQuestion":"Probable impact angle (°)","ai.chatbot.groundQuestion":"Ground/foundations at the site","ai.chatbot.riskMatrixQuestion":"Risk assessment: probability of occurrence & extent of damage","ai.chatbot.completionMessage":"Thank you! All required information is available. Would you like to generate the standards-compliant PDF plan?","ai.chatbot.infoPrefix":"Note: ","ai.chatbot.assetQuestionInfo":"Basis for Protection Goal & Protection Class (DIN SPEC 91414-2 / ISO 22343-2)","ai.chatbot.restRiskQuestionInfo":"Controls Protection Class/Security Level (DIN SPEC 91414-2)","ai.chatbot.speedQuestionInfo":"Required parameter for FSB performance (ISO 22343-2/-1)","ai.chatbot.angleQuestionInfo":"Required parameter for FSB performance (ISO 22343-2/-1)","ai.chatbot.riskMatrixQuestionInfo":"Generates Security Level & Protection Class (DIN SPEC 91414-2)","ai.chatbot.assetOptions":"Crowd,Building,CRITIS Process,Event Area","ai.chatbot.assetPlaceholder":"e.g. crowd, stage","ai.chatbot.stakeholderOptions":"Authorities,Organizers,Operators","ai.chatbot.restRiskOptions":"low,medium,high","ai.chatbot.operationalOptions":"Fire Brigade Access,Escape Routes,Traffic Safety,Operational Safety","ai.chatbot.threatOptions":"intentional,unintentional,both","ai.chatbot.vehicleOptions":"Car,Van,Truck,Bus","ai.chatbot.groundOptions":"Asphalt,Concrete,Pavement,Earth,Unknown","ai.chatbot.riskMatrixOptions":"PO:low|SD:medium,PO:medium|SD:medium,PO:high|SD:severe","ai.chatbot.accessCorridorsPlaceholder":"Select polyline/polygon or describe briefly"}};let n="de";if("undefined"!=typeof window)if(window.currentLanguage)n=window.currentLanguage;else if(window.translations&&window.translations.currentLanguage)n=window.translations.currentLanguage;else{const e=document.querySelector('.lang-btn[data-lang="de"].active');if(document.querySelector('.lang-btn[data-lang="en"].active'))n="en";else if(e)n="de";else{document.querySelectorAll(".lang-btn").forEach((e,t)=>{})}}return t[n]&&t[n][e]?t[n][e]:e}function Od({open:e,onToggle:t}){return xi.jsx("button",{"aria-label":Ld("ai.chatbot.title"),onClick:t,className:"zb-btn",children:xi.jsx("span",{className:"text-xl",children:e?"×":"💬"})})}function Md({role:e,text:t}){const n="bot"===e;return xi.jsx("div",{className:"zb-msg "+(n?"zb-msg-left":"zb-msg-right"),children:xi.jsx("div",{className:"zb-bubble "+(n?"zb-bot":"zb-user"),children:t})})}function Rd({onSend:e}){const[t,n]=ki.useState("");return xi.jsxs("div",{className:"zb-input",children:[xi.jsx("input",{className:"zb-input-field",placeholder:Ld("ai.chatbot.inputPlaceholder"),value:t,onChange:e=>n(e.target.value),onKeyDown:i=>{"Enter"===i.key&&t.trim()&&(e(t.trim()),n(""))}}),xi.jsx("button",{className:"zb-input-send",onClick:()=>{t.trim()&&(e(t.trim()),n(""))},children:Ld("ai.chatbot.sendButton")})]})}function Dd({planningState:e,setPlanningState:t,getCandidatesFor:n}){const[i,r]=ki.useState({}),o=e??i,a=t??(e=>r(t=>e(t)));window.planningState=o;const[s,l]=ki.useState(!0),[u,c]=ki.useState([]),[d,h]=ki.useState(null),[f,p]=ki.useState(!1),g=ki.useRef(null);function m(e){c(t=>[...t,{role:"bot",text:e}])}function y(e,t){c(n=>[...n,{role:"user",text:e,field:t}])}ki.useEffect(()=>{0===u.length&&m(Ld("ai.chatbot.welcome"))},[]),ki.useEffect(()=>{u.length>0&&(g.current&&(g.current.scrollTop=g.current.scrollHeight),setTimeout(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},50))},[u.length]);const v=e=>{const t=Nd(o,e.field);if(null!=t&&""!==t)return{ask:!1,value:t};const i=n?n(e.field):[];return e.resolver?e.resolver(i):Pd(e.field,i,.7)};function b(){for(const e of[{id:"schutzgueter",label:Ld("ai.chatbot.assetQuestion"),field:"schutzgüter",type:"chips",options:Ld("ai.chatbot.assetOptions").split(","),placeholder:Ld("ai.chatbot.assetPlaceholder"),info:Ld("ai.chatbot.assetQuestionInfo")},{id:"stakeholder",label:Ld("ai.chatbot.stakeholderQuestion"),field:"stakeholder",type:"chips",options:Ld("ai.chatbot.stakeholderOptions").split(",")},{id:"restrisiko",label:Ld("ai.chatbot.restRiskQuestion"),field:"restrisiko.klasse",type:"select",options:Ld("ai.chatbot.restRiskOptions").split(","),info:Ld("ai.chatbot.restRiskQuestionInfo")},{id:"betrieb",label:Ld("ai.chatbot.operationalQuestion"),field:"betrieb",type:"multiselect",options:Ld("ai.chatbot.operationalOptions").split(",")},{id:"bedrohung",label:Ld("ai.chatbot.threatQuestion"),field:"risiko.bedrohung.art",type:"select",options:Ld("ai.chatbot.threatOptions").split(",")},{id:"fahrzeugtypen",label:Ld("ai.chatbot.vehicleTypesQuestion"),field:"risiko.bedrohung.fahrzeugtypen",type:"chips",options:Ld("ai.chatbot.vehicleOptions").split(",")},{id:"anfahrkorridore",label:Ld("ai.chatbot.accessCorridorsQuestion"),field:"risiko.site.anfahrkorridore",type:"geo",placeholder:Ld("ai.chatbot.accessCorridorsPlaceholder")},{id:"geschwindigkeit",label:Ld("ai.chatbot.speedQuestion"),field:"risiko.dynamik.v_kmh",type:"number",info:Ld("ai.chatbot.speedQuestionInfo"),resolver:e=>Pd(0,e,.7)},{id:"winkel",label:Ld("ai.chatbot.angleQuestion"),field:"risiko.dynamik.winkel_grad",type:"number",info:Ld("ai.chatbot.angleQuestionInfo"),resolver:e=>Pd(0,e,.7)},{id:"untergrund",label:Ld("ai.chatbot.groundQuestion"),field:"risiko.site.untergrund",type:"select",options:Ld("ai.chatbot.groundOptions").split(",")},{id:"risikomatrix",label:Ld("ai.chatbot.riskMatrixQuestion"),field:"risiko.matrix",type:"select",options:Ld("ai.chatbot.riskMatrixOptions").split(","),info:Ld("ai.chatbot.riskMatrixQuestionInfo")}]){if(e.dependsOn){if(e.dependsOn.find(e=>!Nd(o,e)))continue}const t=v(e);if(t.ask)return e;void 0!==t.value&&a(n=>{const i={...n??{}};return Ad(i,e.field,t.value),i})}return null}return ki.useEffect(()=>{if(f)return;if(d)return;if(0===u.length)return;const e=b();if(e){h(e);const t=e.label,n=e.info?Ld("ai.chatbot.infoPrefix")+e.info:"";m(t+(n?`\n\n${n}`:""))}else!f&&u.length>0&&(m(Ld("ai.chatbot.completionMessage")),p(!0))},[o,s,d,f,u.length]),ki.useEffect(()=>{const e=()=>{c([]),h(null),p(!1),setTimeout(()=>{m(Ld("ai.chatbot.welcome"))},100)};window.addEventListener("languageChanged",e);const t=setInterval(()=>{const t=window.currentLanguage;t&&t!==window.lastChatbotLanguage&&(window.lastChatbotLanguage=t,e());const n=document.querySelector('.lang-btn[data-lang="de"].active');let i=null;document.querySelector('.lang-btn[data-lang="en"].active')?i="en":n&&(i="de"),i&&i!==window.lastChatbotDetectedLanguage&&(window.lastChatbotDetectedLanguage=i,e())},100);return()=>{window.removeEventListener("languageChanged",e),clearInterval(t)}},[]),xi.jsxs(xi.Fragment,{children:[xi.jsx(Od,{open:s,onToggle:()=>l(e=>!e)}),xi.jsx(Ps,{children:s&&xi.jsxs(Cd.aside,{initial:{x:380,opacity:0},animate:{x:0,opacity:1},exit:{x:380,opacity:0},transition:{type:"spring",stiffness:240,damping:28},className:"zb-panel","aria-label":"Zufahrtsschutz-Assistent Panel",children:[xi.jsx("header",{className:"zb-header",children:xi.jsx("div",{className:"zb-title",children:Ld("ai.chatbot.title")})}),xi.jsx("div",{className:"zb-messages",ref:g,children:u.map((e,t)=>xi.jsx(Md,{role:e.role,text:e.text},t))}),xi.jsx(Rd,{onSend:function(e){if(!d)return/^(ja|start|bereit|ok|okay|los)/i.test(e)&&(p(!1),h(null)),void y(e);y(e,d.field);let t=e;if("number"===d.type){const n=parseFloat(e.replace(",","."));t=isNaN(n)?void 0:n}else"chips"===d.type||"multiselect"===d.type?t=e.split(",").map(e=>e.trim()).filter(Boolean):"select"===d.type?t=e.trim():"bool"===d.type&&(t=/^(ja|true|y|yes)$/i.test(e));a(e=>{const n={...e??{}};return void 0!==t&&Ad(n,d.field,t),n}),h(null)}})]})})]})}var Fd,zd,Bd={exports:{}},Ud={},qd={exports:{}},Vd={};function Gd(){return zd||(zd=1,qd.exports=(Fd||(Fd=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,o=e[i];if(!(0<r(o,t)))break e;e[i]=t,e[n]=o,n=i}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length,a=o>>>1;i<a;){var s=2*(i+1)-1,l=e[s],u=s+1,c=e[u];if(0>r(l,n))u<o&&0>r(c,l)?(e[i]=c,e[u]=n,i=u):(e[i]=l,e[s]=n,i=s);else{if(!(u<o&&0>r(c,n)))break e;e[i]=c,e[u]=n,i=u}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,m=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var r=n(u);null!==r;){if(null===r.callback)i(u);else{if(!(r.startTime<=e))break;i(u),r.sortIndex=r.expirationTime,t(l,r)}r=n(u)}}function E(e){if(g=!1,_(e),!p)if(null!==n(l))p=!0,w||(w=!0,k());else{var t=n(u);null!==t&&P(E,t.startTime-e)}}var k,w=!1,S=-1,x=5,T=-1;function I(){return!(!m&&e.unstable_now()-T<x)}function C(){if(m=!1,w){var t=e.unstable_now();T=t;var r=!0;try{e:{p=!1,g&&(g=!1,v(S),S=-1),f=!0;var o=h;try{t:{for(_(t),d=n(l);null!==d&&!(d.expirationTime>t&&I());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var s=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof s){d.callback=s,_(t),r=!0;break t}d===n(l)&&i(l),_(t)}else i(l);d=n(l)}if(null!==d)r=!0;else{var c=n(u);null!==c&&P(E,c.startTime-t),r=!1}}break e}finally{d=null,h=o,f=!1}r=void 0}}finally{r?k():w=!1}}}if("function"==typeof b)k=function(){b(C)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,A=N.port2;N.port1.onmessage=C,k=function(){A.postMessage(null)}}else k=function(){y(C,0)};function P(t,n){S=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(x=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){m=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(i,r,o){var a=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,i){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return i={id:c++,callback:r,priorityLevel:i,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(i.sortIndex=o,t(u,i),null===n(l)&&i===n(u)&&(g?(v(S),S=-1):g=!0,P(E,o-a))):(i.sortIndex=s,t(l,i),p||f||(p=!0,w||(w=!0,k()))),i},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(Vd)),Vd)),qd.exports}var jd,$d,Hd,Yd,Wd={exports:{}},Xd={};function Kd(){if(jd)return Xd;jd=1;var e=bi();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return Xd.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xd.createPortal=function(e,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:r,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,n,null,i)},Xd.flushSync=function(e){var t=o.T,n=i.p;try{if(o.T=null,i.p=2,e)return e()}finally{o.T=t,i.p=n,i.d.f()}},Xd.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},Xd.prefetchDNS=function(e){"string"==typeof e&&i.d.D(e)},Xd.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=a(n,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:s}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},Xd.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=a(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},Xd.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=a(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},Xd.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=a(t.as,t.crossOrigin);i.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},Xd.requestFormReset=function(e){i.d.r(e)},Xd.unstable_batchedUpdates=function(e,t){return e(t)},Xd.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},Xd.useFormStatus=function(){return o.H.useHostTransitionStatus()},Xd.version="19.1.1",Xd}function Qd(){if(Hd)return Ud;Hd=1;var e=Gd(),t=bi(),n=($d||($d=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),Wd.exports=Kd()),Wd.exports);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function a(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function s(e){if(o(e)!==e)throw Error(i(188))}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=l(e)))return t;e=e.sibling}return null}var u=Object.assign,c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function I(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var C=Symbol.for("react.client.reference");function N(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===C?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case g:return"Profiler";case p:return"StrictMode";case _:return"Suspense";case E:return"SuspenseList";case S:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case h:return"Portal";case v:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:N(e.type)||"Memo";case w:t=e._payload,e=e._init;try{return N(e(t))}catch(n){}}return null}var A=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],R=-1;function D(e){return{current:e}}function F(e){0>R||(e.current=M[R],M[R]=null,R--)}function z(e,t){R++,M[R]=e.current,e.current=t}var B=D(null),U=D(null),q=D(null),V=D(null);function G(e,t){switch(z(q,t),z(U,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?nd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=nd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(B),z(B,e)}function j(){F(B),F(U),F(q)}function $(e){null!==e.memoizedState&&z(V,e);var t=B.current,n=id(t,e.type);t!==n&&(z(U,e),z(B,n))}function H(e){U.current===e&&(F(B),F(U)),V.current===e&&(F(V),Zd._currentValue=O)}var Y=Object.prototype.hasOwnProperty,W=e.unstable_scheduleCallback,X=e.unstable_cancelCallback,K=e.unstable_shouldYield,Q=e.unstable_requestPaint,Z=e.unstable_now,J=e.unstable_getCurrentPriorityLevel,ee=e.unstable_ImmediatePriority,te=e.unstable_UserBlockingPriority,ne=e.unstable_NormalPriority,ie=e.unstable_LowPriority,re=e.unstable_IdlePriority,oe=e.log,ae=e.unstable_setDisableYieldValue,se=null,le=null;function ue(e){if("function"==typeof oe&&ae(e),le&&"function"==typeof le.setStrictMode)try{le.setStrictMode(se,e)}catch(t){}}var ce=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(de(e)/he|0)|0},de=Math.log,he=Math.LN2;var fe=256,pe=4194304;function ge(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function me(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&i;return 0!==s?0!==(i=s&~o)?r=ge(i):0!==(a&=s)?r=ge(a):n||0!==(n=s&~e)&&(r=ge(n)):0!==(s=i&~o)?r=ge(s):0!==a?r=ge(a):n||0!==(n=i&~e)&&(r=ge(n)),0===r?0:0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(n=t&-t)||32===o&&4194048&n)?t:r}function ye(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ve(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function be(){var e=fe;return!(4194048&(fe<<=1))&&(fe=256),e}function _e(){var e=pe;return!(62914560&(pe<<=1))&&(pe=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function we(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-ce(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194090&n}function Se(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ce(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function xe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ie(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:fh(e.type)}var Ce=Math.random().toString(36).slice(2),Ne="__reactFiber$"+Ce,Ae="__reactProps$"+Ce,Pe="__reactContainer$"+Ce,Le="__reactEvents$"+Ce,Oe="__reactListeners$"+Ce,Me="__reactHandles$"+Ce,Re="__reactResources$"+Ce,De="__reactMarker$"+Ce;function Fe(e){delete e[Ne],delete e[Ae],delete e[Le],delete e[Oe],delete e[Me]}function ze(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pe]||n[Ne]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yd(e);null!==e;){if(n=e[Ne])return n;e=yd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Ne]||e[Pe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function qe(e){var t=e[Re];return t||(t=e[Re]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[De]=!0}var Ge=new Set,je={};function $e(e,t){He(e,t),He(e+"Capture",t)}function He(e,t){for(je[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ye,We,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ke={},Qe={};function Ze(e,t,n){if(r=t,Y.call(Qe,r)||!Y.call(Ke,r)&&(Xe.test(r)?Qe[r]=!0:(Ke[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function Je(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function et(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function tt(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",We=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+We}var nt=!1;function it(e,t){if(!e||nt)return"";nt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){i=o}e.call(n.prototype)}}else{try{throw Error()}catch(a){i=a}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&i&&"string"==typeof s.stack)return[s.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),u=s.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===u.length)for(i=l.length-1,r=u.length-1;1<=i&&0<=r&&l[i]!==u[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==u[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==u[r]){var c="\n"+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=i&&0<=r);break}}}finally{nt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?tt(n):""}function rt(e){switch(e.tag){case 26:case 27:case 5:return tt(e.type);case 16:return tt("Lazy");case 13:return tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return tt("Activity");default:return""}}function ot(e){try{var t="";do{t+=rt(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function at(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function st(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function lt(e){e._valueTracker||(e._valueTracker=function(e){var t=st(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ut(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=st(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function ct(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var dt=/[\n"\\]/g;function ht(e){return e.replace(dt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function ft(e,t,n,i,r,o,a,s){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+at(t)):e.value!==""+at(t)&&(e.value=""+at(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?gt(e,a,at(t)):null!=n?gt(e,a,at(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=o&&(e.defaultChecked=!!o),null!=r&&(e.checked=r&&"function"!=typeof r&&"symbol"!=typeof r),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+at(s):e.removeAttribute("name")}function pt(e,t,n,i,r,o,a,s){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+at(n):"",t=null!=t?""+at(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}i="function"!=typeof(i=null!=i?i:r)&&"symbol"!=typeof i&&!!i,e.checked=s?e.checked:!!i,e.defaultChecked=!!i,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function gt(e,t,n){"number"===t&&ct(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function mt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+at(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function yt(e,t,n){null==t||((t=""+at(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+at(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function vt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(A(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=at(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function bt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!=typeof n||0===n||_t.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function kt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Et(e,o,r)}else for(var a in t)t.hasOwnProperty(a)&&Et(e,a,t[a])}function wt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return xt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function Ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,At=null;function Pt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Ae]||null;e:switch(e=t.stateNode,t.type){case"input":if(ft(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ht(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[Ae]||null;if(!o)throw Error(i(90));ft(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ut(r)}break e;case"textarea":yt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&mt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Ot(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Nt||null!==At)&&(Bu(),Nt&&(t=Nt,e=At,At=Nt=null,Pt(t),e)))for(t=0;t<e.length;t++)Pt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ae]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Rt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Dt=!1;if(Rt)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch(Fh){Dt=!1}var zt=null,Bt=null,Ut=null;function qt(){if(Ut)return Ut;var e,t,n=Bt,i=n.length,r="value"in zt?zt.value:zt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);return Ut=r.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function jt(){return!1}function $t(e){function t(t,n,i,r,o){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Gt:jt,this.isPropagationStopped=jt,this}return u(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Ht,Yt,Wt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kt=$t(Xt),Qt=u({},Xt,{view:0,detail:0}),Zt=$t(Qt),Jt=u({},Qt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wt&&(Wt&&"mousemove"===e.type?(Ht=e.screenX-Wt.screenX,Yt=e.screenY-Wt.screenY):Yt=Ht=0,Wt=e),Ht)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),en=$t(Jt),tn=$t(u({},Jt,{dataTransfer:0})),nn=$t(u({},Qt,{relatedTarget:0})),rn=$t(u({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),on=$t(u({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),an=$t(u({},Xt,{data:0})),sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},un={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=un[e])&&!!t[e]}function dn(){return cn}var hn=$t(u({},Qt,{key:function(e){if(e.key){var t=sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ln[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dn,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),fn=$t(u({},Jt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),pn=$t(u({},Qt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dn})),gn=$t(u({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),mn=$t(u({},Jt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),yn=$t(u({},Xt,{newState:0,oldState:0})),vn=[9,13,27,32],bn=Rt&&"CompositionEvent"in window,_n=null;Rt&&"documentMode"in document&&(_n=document.documentMode);var En=Rt&&"TextEvent"in window&&!_n,kn=Rt&&(!bn||_n&&8<_n&&11>=_n),wn=String.fromCharCode(32),Sn=!1;function xn(e,t){switch(e){case"keyup":return-1!==vn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Cn[e.type]:"textarea"===t}function An(e,t,n,i){Nt?At?At.push(i):At=[i]:Nt=i,0<(t=Vc(t,"onChange")).length&&(n=new Kt("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Pn=null,Ln=null;function On(e){Mc(e,0)}function Mn(e){if(ut(Ue(e)))return e}function Rn(e,t){if("change"===e)return t}var Dn=!1;if(Rt){var Fn;if(Rt){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"==typeof Bn.oninput}Fn=zn}else Fn=!1;Dn=Fn&&(!document.documentMode||9<document.documentMode)}function Un(){Pn&&(Pn.detachEvent("onpropertychange",qn),Ln=Pn=null)}function qn(e){if("value"===e.propertyName&&Mn(Ln)){var t=[];An(t,Ln,e,Ct(e)),Ot(On,t)}}function Vn(e,t,n){"focusin"===e?(Un(),Ln=n,(Pn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Un()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(Ln)}function jn(e,t){if("click"===e)return Mn(t)}function $n(e,t){if("input"===e||"change"===e)return Mn(t)}var Hn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Yn(e,t){if(Hn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Y.call(t,r)||!Hn(e[r],t[r]))return!1}return!0}function Wn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,i=Wn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Wn(i)}}function Kn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Kn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Qn(e){for(var t=ct((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=ct((e=t.contentWindow).document)}return t}function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Jn=Rt&&"documentMode"in document&&11>=document.documentMode,ei=null,ti=null,ni=null,ii=!1;function ri(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ii||null==ei||ei!==ct(i)||("selectionStart"in(i=ei)&&Zn(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},ni&&Yn(ni,i)||(ni=i,0<(i=Vc(ti,"onSelect")).length&&(t=new Kt("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ei)))}function oi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ai={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionrun:oi("Transition","TransitionRun"),transitionstart:oi("Transition","TransitionStart"),transitioncancel:oi("Transition","TransitionCancel"),transitionend:oi("Transition","TransitionEnd")},si={},li={};function ui(e){if(si[e])return si[e];if(!ai[e])return e;var t,n=ai[e];for(t in n)if(n.hasOwnProperty(t)&&t in li)return si[e]=n[t];return e}Rt&&(li=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);var ci=ui("animationend"),di=ui("animationiteration"),hi=ui("animationstart"),fi=ui("transitionrun"),pi=ui("transitionstart"),gi=ui("transitioncancel"),mi=ui("transitionend"),yi=new Map,vi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(e,t){yi.set(e,t),$e(t,[e])}vi.push("scrollEnd");var Ei=new WeakMap;function ki(e,t){if("object"==typeof e&&null!==e){var n=Ei.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ot(t)},Ei.set(e,t),t)}return{value:e,source:t,stack:ot(t)}}var wi=[],Si=0,xi=0;function Ti(){for(var e=Si,t=xi=Si=0;t<e;){var n=wi[t];wi[t++]=null;var i=wi[t];wi[t++]=null;var r=wi[t];wi[t++]=null;var o=wi[t];if(wi[t++]=null,null!==i&&null!==r){var a=i.pending;null===a?r.next=r:(r.next=a.next,a.next=r),i.pending=r}0!==o&&Ai(n,r,o)}}function Ii(e,t,n,i){wi[Si++]=e,wi[Si++]=t,wi[Si++]=n,wi[Si++]=i,xi|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Ci(e,t,n,i){return Ii(e,t,n,i),Pi(e)}function Ni(e,t){return Ii(e,null,null,t),Pi(e)}function Ai(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(i=o.alternate)&&(i.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(r=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,r&&null!==t&&(r=31-ce(n),null===(i=(e=o.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),o):null}function Pi(e){if(50<Au)throw Au=0,Pu=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Li={};function Oi(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(e,t,n,i){return new Oi(e,t,n,i)}function Ri(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Di(e,t){var n=e.alternate;return null===n?((n=Mi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zi(e,t,n,r,o,a){var s=0;if(r=e,"function"==typeof e)Ri(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case S:return(e=Mi(31,n,t,o)).elementType=S,e.lanes=a,e;case f:return Bi(n.children,o,a,t);case p:s=8,o|=24;break;case g:return(e=Mi(12,n,t,2|o)).elementType=g,e.lanes=a,e;case _:return(e=Mi(13,n,t,o)).elementType=_,e.lanes=a,e;case E:return(e=Mi(19,n,t,o)).elementType=E,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case m:case v:s=10;break e;case y:s=9;break e;case b:s=11;break e;case k:s=14;break e;case w:s=16,r=null;break e}s=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Mi(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Bi(e,t,n,i){return(e=Mi(7,e,i,t)).lanes=n,e}function Ui(e,t,n){return(e=Mi(6,e,null,t)).lanes=n,e}function qi(e,t,n){return(t=Mi(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vi=[],Gi=0,ji=null,$i=0,Hi=[],Yi=0,Wi=null,Xi=1,Ki="";function Qi(e,t){Vi[Gi++]=$i,Vi[Gi++]=ji,ji=e,$i=t}function Zi(e,t,n){Hi[Yi++]=Xi,Hi[Yi++]=Ki,Hi[Yi++]=Wi,Wi=e;var i=Xi;e=Ki;var r=32-ce(i)-1;i&=~(1<<r),n+=1;var o=32-ce(t)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Xi=1<<32-ce(t)+r|n<<r|i,Ki=o+e}else Xi=1<<o|n<<r|i,Ki=e}function Ji(e){null!==e.return&&(Qi(e,1),Zi(e,1,0))}function er(e){for(;e===ji;)ji=Vi[--Gi],Vi[Gi]=null,$i=Vi[--Gi],Vi[Gi]=null;for(;e===Wi;)Wi=Hi[--Yi],Hi[Yi]=null,Ki=Hi[--Yi],Hi[Yi]=null,Xi=Hi[--Yi],Hi[Yi]=null}var tr=null,nr=null,ir=!1,rr=null,or=!1,ar=Error(i(519));function sr(e){throw fr(ki(Error(i(418,"")),e)),ar}function lr(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ne]=e,t[Ae]=i,n){case"dialog":Rc("cancel",t),Rc("close",t);break;case"iframe":case"object":case"embed":Rc("load",t);break;case"video":case"audio":for(n=0;n<Lc.length;n++)Rc(Lc[n],t);break;case"source":Rc("error",t);break;case"img":case"image":case"link":Rc("error",t),Rc("load",t);break;case"details":Rc("toggle",t);break;case"input":Rc("invalid",t),pt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),lt(t);break;case"select":Rc("invalid",t);break;case"textarea":Rc("invalid",t),vt(t,i.value,i.defaultValue,i.children),lt(t)}"string"!=typeof(n=i.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Wc(t.textContent,n)?(null!=i.popover&&(Rc("beforetoggle",t),Rc("toggle",t)),null!=i.onScroll&&Rc("scroll",t),null!=i.onScrollEnd&&Rc("scrollend",t),null!=i.onClick&&(t.onclick=Xc),t=!0):t=!1,t||sr(e)}function ur(e){for(tr=e.return;tr;)switch(tr.tag){case 5:case 13:return void(or=!1);case 27:case 3:return void(or=!0);default:tr=tr.return}}function cr(e){if(e!==tr)return!1;if(!ir)return ur(e),ir=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||rd(e.type,e.memoizedProps)),t=!t),t&&nr&&sr(e),ur(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){nr=gd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}nr=null}}else 27===n?(n=nr,dd(e.type)?(e=md,md=null,nr=e):nr=n):nr=tr?gd(e.stateNode.nextSibling):null;return!0}function dr(){nr=tr=null,ir=!1}function hr(){var e=rr;return null!==e&&(null===yu?yu=e:yu.push.apply(yu,e),rr=null),e}function fr(e){null===rr?rr=[e]:rr.push(e)}var pr=D(null),gr=null,mr=null;function yr(e,t,n){z(pr,t._currentValue),t._currentValue=n}function vr(e){e._currentValue=pr.current,F(pr)}function br(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function _r(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){var s=o.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=o;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),br(a.return,n,e),r||(s=null);break e}a=l.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),br(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function Er(e,t,n,r){e=null;for(var o=t,a=!1;null!==o;){if(!a)if(524288&o.flags)a=!0;else if(262144&o.flags)break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(i(387));if(null!==(s=s.memoizedProps)){var l=o.type;Hn(o.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(o===V.current){if(null===(s=o.alternate))throw Error(i(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Zd):e=[Zd])}o=o.return}null!==e&&_r(t,e,n,r),t.flags|=262144}function kr(e){for(e=e.firstContext;null!==e;){if(!Hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function wr(e){gr=e,mr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Sr(e){return Tr(gr,e)}function xr(e,t){return null===gr&&wr(e),Tr(e,t)}function Tr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===mr){if(null===e)throw Error(i(308));mr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else mr=mr.next=t;return n}var Ir="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Cr=e.unstable_scheduleCallback,Nr=e.unstable_NormalPriority,Ar={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pr(){return{controller:new Ir,data:new Map,refCount:0}}function Lr(e){e.refCount--,0===e.refCount&&Cr(Nr,function(){e.controller.abort()})}var Or=null,Mr=0,Rr=0,Dr=null;function Fr(){if(0===--Mr&&null!==Or){null!==Dr&&(Dr.status="fulfilled");var e=Or;Or=null,Rr=0,Dr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zr=P.S;P.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Or){var n=Or=[];Mr=0,Rr=Ic(),Dr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mr++,t.then(Fr,Fr)}(0,t),null!==zr&&zr(e,t)};var Br=D(null);function Ur(){var e=Br.current;return null!==e?e:tu.pooledCache}function qr(e,t){z(Br,null===t?Br.current:t.pool)}function Vr(){var e=Ur();return null===e?null:{parent:Ar._currentValue,pool:e}}var Gr=Error(i(460)),jr=Error(i(474)),$r=Error(i(542)),Hr={then:function(){}};function Yr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Wr(){}function Xr(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Wr,Wr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw Zr(e=t.reason),e;default:if("string"==typeof t.status)t.then(Wr,Wr);else{if(null!==(e=tu)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw Zr(e=t.reason),e}throw Kr=t,Gr}}var Kr=null;function Qr(){if(null===Kr)throw Error(i(459));var e=Kr;return Kr=null,e}function Zr(e){if(e===Gr||e===$r)throw Error(i(483))}var Jr=!1;function eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function to(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function no(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function io(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,2&eu){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Pi(e),Ai(e,null,n),t}return Ii(e,i,t,n),Pi(e)}function ro(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Se(e,n)}}function oo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ao=!1;function so(){if(ao){if(null!==Dr)throw Dr}}function lo(e,t,n,i){ao=!1;var r=e.updateQueue;Jr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(a=0,d=c=l=null,s=o;;){var f=-536870913&s.lane,p=f!==s.lane;if(p?(iu&f)===f:(i&f)===f){0!==f&&f===Rr&&(ao=!0),null!==d&&(d=d.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var g=e,m=s;f=t;var y=n;switch(m.tag){case 1:if("function"==typeof(g=m.payload)){h=g.call(y,h,f);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(f="function"==typeof(g=m.payload)?g.call(y,h,f):g))break e;h=u({},h,f);break e;case 2:Jr=!0}}null!==(f=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=r.callbacks)?r.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=p,l=h):d=d.next=p,a|=f;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(p=s).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===d&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null===o&&(r.shared.lanes=0),du|=a,e.lanes=a,e.memoizedState=h}}function uo(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function co(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)uo(n[e],t)}var ho=D(null),fo=D(0);function po(e,t){z(fo,e=uu),z(ho,t),uu=e|t.baseLanes}function go(){z(fo,uu),z(ho,ho.current)}function mo(){uu=fo.current,F(ho),F(fo)}var yo=0,vo=null,bo=null,_o=null,Eo=!1,ko=!1,wo=!1,So=0,xo=0,To=null,Io=0;function Co(){throw Error(i(321))}function No(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hn(e[n],t[n]))return!1;return!0}function Ao(e,t,n,i,r,o){return yo=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?ja:$a,wo=!1,o=n(i,r),wo=!1,ko&&(o=Lo(t,n,i,r)),Po(e),o}function Po(e){P.H=Ga;var t=null!==bo&&null!==bo.next;if(yo=0,_o=bo=vo=null,Eo=!1,xo=0,To=null,t)throw Error(i(300));null===e||xs||null!==(e=e.dependencies)&&kr(e)&&(xs=!0)}function Lo(e,t,n,r){vo=e;var o=0;do{if(ko&&(To=null),xo=0,ko=!1,25<=o)throw Error(i(301));if(o+=1,_o=bo=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}P.H=Ha,a=t(n,r)}while(ko);return a}function Oo(){var e=P.H,t=e.useState()[0];return t="function"==typeof t.then?Bo(t):t,e=e.useState()[0],(null!==bo?bo.memoizedState:null)!==e&&(vo.flags|=1024),t}function Mo(){var e=0!==So;return So=0,e}function Ro(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Do(e){if(Eo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Eo=!1}yo=0,_o=bo=vo=null,ko=!1,xo=So=0,To=null}function Fo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_o?vo.memoizedState=_o=e:_o=_o.next=e,_o}function zo(){if(null===bo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=bo.next;var t=null===_o?vo.memoizedState:_o.next;if(null!==t)_o=t,bo=e;else{if(null===e){if(null===vo.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(bo=e).memoizedState,baseState:bo.baseState,baseQueue:bo.baseQueue,queue:bo.queue,next:null},null===_o?vo.memoizedState=_o=e:_o=_o.next=e}return _o}function Bo(e){var t=xo;return xo+=1,null===To&&(To=[]),e=Xr(To,e,t),t=vo,null===(null===_o?t.memoizedState:_o.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?ja:$a),e}function Uo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Bo(e);if(e.$$typeof===v)return Sr(e)}throw Error(i(438,String(e)))}function qo(e){var t=null,n=vo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=vo.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},vo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=x;return t.index++,n}function Vo(e,t){return"function"==typeof t?t(e):t}function Go(e){return jo(zo(),bo,e)}function jo(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var o=e.baseQueue,a=r.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}t.baseQueue=o=a,r.pending=null}if(a=e.baseState,null===o)e.memoizedState=a;else{var l=s=null,u=null,c=t=o.next,d=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(iu&h)===h:(yo&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Rr&&(d=!0);else{if((yo&f)===f){c=c.next,f===Rr&&(d=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=a):u=u.next=h,vo.lanes|=f,du|=f}h=c.action,wo&&n(a,h),a=c.hasEagerState?c.eagerState:n(a,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=a):u=u.next=f,vo.lanes|=h,du|=h;c=c.next}while(null!==c&&c!==t);if(null===u?s=a:u.next=l,!Hn(a,e.memoizedState)&&(xs=!0,d&&null!==(n=Dr)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=u,r.lastRenderedState=a}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function $o(e){var t=zo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);Hn(a,t.memoizedState)||(xs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ho(e,t,n){var r=vo,o=zo(),a=ir;if(a){if(void 0===n)throw Error(i(407));n=n()}else n=t();var s=!Hn((bo||o).memoizedState,n);if(s&&(o.memoizedState=n,xs=!0),o=o.queue,ga(2048,8,Xo.bind(null,r,o,e),[e]),o.getSnapshot!==t||s||null!==_o&&1&_o.memoizedState.tag){if(r.flags|=2048,ha(9,{destroy:void 0,resource:void 0},Wo.bind(null,r,o,n,t),null),null===tu)throw Error(i(349));a||124&yo||Yo(r,t,n)}return n}function Yo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Wo(e,t,n,i){t.value=n,t.getSnapshot=i,Ko(t)&&Qo(e)}function Xo(e,t,n){return n(function(){Ko(t)&&Qo(e)})}function Ko(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hn(e,n)}catch(i){return!0}}function Qo(e){var t=Ni(e,2);null!==t&&Mu(t,e,2)}function Zo(e){var t=Fo();if("function"==typeof e){var n=e;if(e=n(),wo){ue(!0);try{n()}finally{ue(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:e},t}function Jo(e,t,n,i){return e.baseState=n,jo(e,bo,"function"==typeof i?i:Vo)}function ea(e,t,n,r,o){if(Ua(e))throw Error(i(485));if(null!==(e=t.action)){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==P.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,ta(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ta(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var o=P.T,a={};P.T=a;try{var s=n(r,i),l=P.S;null!==l&&l(a,s),na(e,t,s)}catch(u){ra(e,t,u)}finally{P.T=o}}else try{na(e,t,o=n(r,i))}catch(c){ra(e,t,c)}}function na(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){ia(e,t,n)},function(n){return ra(e,t,n)}):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,oa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ta(e,n)))}function ra(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,oa(t),t=t.next}while(t!==i)}e.action=null}function oa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function aa(e,t){return t}function sa(e,t){if(ir){var n=tu.formState;if(null!==n){e:{var i=vo;if(ir){if(nr){t:{for(var r=nr,o=or;8!==r.nodeType;){if(!o){r=null;break t}if(null===(r=gd(r.nextSibling))){r=null;break t}}r="F!"===(o=r.data)||"F"===o?r:null}if(r){nr=gd(r.nextSibling),i="F!"===r.data;break e}}sr(i)}i=!1}i&&(t=n[0])}}return(n=Fo()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:t},n.queue=i,n=Fa.bind(null,vo,i),i.dispatch=n,i=Zo(!1),o=Ba.bind(null,vo,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=Fo()).queue=r,n=ea.bind(null,vo,r,o,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function la(e){return ua(zo(),bo,e)}function ua(e,t,n){if(t=jo(e,t,aa)[0],e=Go(Vo)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var i=Bo(t)}catch(a){if(a===Gr)throw $r;throw a}else i=t;var r=(t=zo()).queue,o=r.dispatch;return n!==t.memoizedState&&(vo.flags|=2048,ha(9,{destroy:void 0,resource:void 0},ca.bind(null,r,n),null)),[i,o,e]}function ca(e,t){e.action=t}function da(e){var t=zo(),n=bo;if(null!==n)return ua(t,n,e);zo(),t=t.memoizedState;var i=(n=zo()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ha(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=vo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},vo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function fa(){return zo().memoizedState}function pa(e,t,n,i){var r=Fo();i=void 0===i?null:i,vo.flags|=e,r.memoizedState=ha(1|t,{destroy:void 0,resource:void 0},n,i)}function ga(e,t,n,i){var r=zo();i=void 0===i?null:i;var o=r.memoizedState.inst;null!==bo&&null!==i&&No(i,bo.memoizedState.deps)?r.memoizedState=ha(t,o,n,i):(vo.flags|=e,r.memoizedState=ha(1|t,o,n,i))}function ma(e,t){pa(8390656,8,e,t)}function ya(e,t){ga(2048,8,e,t)}function va(e,t){return ga(4,2,e,t)}function ba(e,t){return ga(4,4,e,t)}function _a(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ea(e,t,n){n=null!=n?n.concat([e]):null,ga(4,4,_a.bind(null,t,e),n)}function ka(){}function wa(e,t){var n=zo();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&No(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Sa(e,t){var n=zo();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&No(t,i[1]))return i[0];if(i=e(),wo){ue(!0);try{e()}finally{ue(!1)}}return n.memoizedState=[i,t],i}function xa(e,t,n){return void 0===n||1073741824&yo?e.memoizedState=t:(e.memoizedState=n,e=Ou(),vo.lanes|=e,du|=e,n)}function Ta(e,t,n,i){return Hn(n,t)?n:null!==ho.current?(e=xa(e,n,i),Hn(e,t)||(xs=!0),e):42&yo?(e=Ou(),vo.lanes|=e,du|=e,t):(xs=!0,e.memoizedState=n)}function Ia(e,t,n,i,r){var o=L.p;L.p=0!==o&&8>o?o:8;var a,s,l,u=P.T,c={};P.T=c,Ba(e,!1,t,n);try{var d=r(),h=P.S;if(null!==h&&h(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)za(e,t,(a=i,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l),Lu());else za(e,t,i,Lu())}catch(f){za(e,t,{then:function(){},status:"rejected",reason:f},Lu())}finally{L.p=o,P.T=u}}function Ca(){}function Na(e,t,n,r){if(5!==e.tag)throw Error(i(476));var o=Aa(e).queue;Ia(e,o,t,O,null===n?Ca:function(){return Pa(e),n(r)})}function Aa(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pa(e){za(e,Aa(e).next.queue,{},Lu())}function La(){return Sr(Zd)}function Oa(){return zo().memoizedState}function Ma(){return zo().memoizedState}function Ra(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lu(),i=io(t,e=no(n),n);return null!==i&&(Mu(i,t,n),ro(i,t,n)),t={cache:Pr()},void(e.payload=t)}t=t.return}}function Da(e,t,n){var i=Lu();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ua(e)?qa(t,n):null!==(n=Ci(e,t,n,i))&&(Mu(n,e,i),Va(n,t,i))}function Fa(e,t,n){za(e,t,n,Lu())}function za(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ua(e))qa(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,Hn(s,a))return Ii(e,t,r,0),null===tu&&Ti(),!1}catch(l){}if(null!==(n=Ci(e,t,r,i)))return Mu(n,e,i),Va(n,t,i),!0}return!1}function Ba(e,t,n,r){if(r={lane:2,revertLane:Ic(),action:r,hasEagerState:!1,eagerState:null,next:null},Ua(e)){if(t)throw Error(i(479))}else null!==(t=Ci(e,n,r,2))&&Mu(t,e,2)}function Ua(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function qa(e,t){ko=Eo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Va(e,t,n){if(4194048&n){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Se(e,n)}}var Ga={readContext:Sr,use:Uo,useCallback:Co,useContext:Co,useEffect:Co,useImperativeHandle:Co,useLayoutEffect:Co,useInsertionEffect:Co,useMemo:Co,useReducer:Co,useRef:Co,useState:Co,useDebugValue:Co,useDeferredValue:Co,useTransition:Co,useSyncExternalStore:Co,useId:Co,useHostTransitionStatus:Co,useFormState:Co,useActionState:Co,useOptimistic:Co,useMemoCache:Co,useCacheRefresh:Co},ja={readContext:Sr,use:Uo,useCallback:function(e,t){return Fo().memoizedState=[e,void 0===t?null:t],e},useContext:Sr,useEffect:ma,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,pa(4194308,4,_a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pa(4194308,4,e,t)},useInsertionEffect:function(e,t){pa(4,2,e,t)},useMemo:function(e,t){var n=Fo();t=void 0===t?null:t;var i=e();if(wo){ue(!0);try{e()}finally{ue(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Fo();if(void 0!==n){var r=n(t);if(wo){ue(!0);try{n(t)}finally{ue(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Da.bind(null,vo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Fo().memoizedState=e},useState:function(e){var t=(e=Zo(e)).queue,n=Fa.bind(null,vo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ka,useDeferredValue:function(e,t){return xa(Fo(),e,t)},useTransition:function(){var e=Zo(!1);return e=Ia.bind(null,vo,e.queue,!0,!1),Fo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=vo,o=Fo();if(ir){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===tu)throw Error(i(349));124&iu||Yo(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,ma(Xo.bind(null,r,a,e),[e]),r.flags|=2048,ha(9,{destroy:void 0,resource:void 0},Wo.bind(null,r,a,n,t),null),n},useId:function(){var e=Fo(),t=tu.identifierPrefix;if(ir){var n=Ki;t="«"+t+"R"+(n=(Xi&~(1<<32-ce(Xi)-1)).toString(32)+n),0<(n=So++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=Io++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:La,useFormState:sa,useActionState:sa,useOptimistic:function(e){var t=Fo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ba.bind(null,vo,!0,n),n.dispatch=t,[e,t]},useMemoCache:qo,useCacheRefresh:function(){return Fo().memoizedState=Ra.bind(null,vo)}},$a={readContext:Sr,use:Uo,useCallback:wa,useContext:Sr,useEffect:ya,useImperativeHandle:Ea,useInsertionEffect:va,useLayoutEffect:ba,useMemo:Sa,useReducer:Go,useRef:fa,useState:function(){return Go(Vo)},useDebugValue:ka,useDeferredValue:function(e,t){return Ta(zo(),bo.memoizedState,e,t)},useTransition:function(){var e=Go(Vo)[0],t=zo().memoizedState;return["boolean"==typeof e?e:Bo(e),t]},useSyncExternalStore:Ho,useId:Oa,useHostTransitionStatus:La,useFormState:la,useActionState:la,useOptimistic:function(e,t){return Jo(zo(),0,e,t)},useMemoCache:qo,useCacheRefresh:Ma},Ha={readContext:Sr,use:Uo,useCallback:wa,useContext:Sr,useEffect:ya,useImperativeHandle:Ea,useInsertionEffect:va,useLayoutEffect:ba,useMemo:Sa,useReducer:$o,useRef:fa,useState:function(){return $o(Vo)},useDebugValue:ka,useDeferredValue:function(e,t){var n=zo();return null===bo?xa(n,e,t):Ta(n,bo.memoizedState,e,t)},useTransition:function(){var e=$o(Vo)[0],t=zo().memoizedState;return["boolean"==typeof e?e:Bo(e),t]},useSyncExternalStore:Ho,useId:Oa,useHostTransitionStatus:La,useFormState:da,useActionState:da,useOptimistic:function(e,t){var n=zo();return null!==bo?Jo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qo,useCacheRefresh:Ma},Ya=null,Wa=0;function Xa(e){var t=Wa;return Wa+=1,null===Ya&&(Ya=[]),Xr(Ya,e,t)}function Ka(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Qa(e,t){if(t.$$typeof===c)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function Ja(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Di(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Ui(n,e.mode,i)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,i){var r=n.type;return r===f?p(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===w&&Za(r)===t.type)?(Ka(t=o(t,n.props),n),t.return=e,t):(Ka(t=zi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qi(n,e.mode,i)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function p(e,t,n,i,r){return null===t||7!==t.tag?((t=Bi(n,e.mode,i,r)).return=e,t):((t=o(t,n)).return=e,t)}function g(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Ui(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return Ka(n=zi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=qi(t,e.mode,n)).return=e,t;case w:return g(e,t=(0,t._init)(t._payload),n)}if(A(t)||I(t))return(t=Bi(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return g(e,Xa(t),n);if(t.$$typeof===v)return g(e,xr(e,t),n);Qa(e,t)}return null}function m(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==r?null:l(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===r?u(e,t,n,i):null;case h:return n.key===r?c(e,t,n,i):null;case w:return m(e,t,n=(r=n._init)(n._payload),i)}if(A(n)||I(n))return null!==r?null:p(e,t,n,i,null);if("function"==typeof n.then)return m(e,t,Xa(n),i);if(n.$$typeof===v)return m(e,t,xr(e,n),i);Qa(e,n)}return null}function y(e,t,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case d:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case h:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return y(e,t,n,i=(0,i._init)(i._payload),r)}if(A(i)||I(i))return p(t,e=e.get(n)||null,i,r,null);if("function"==typeof i.then)return y(e,t,n,Xa(i),r);if(i.$$typeof===v)return y(e,t,n,xr(t,i),r);Qa(t,i)}return null}function b(l,u,c,p){if("object"==typeof c&&null!==c&&c.type===f&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case d:e:{for(var _=c.key;null!==u;){if(u.key===_){if((_=c.type)===f){if(7===u.tag){n(l,u.sibling),(p=o(u,c.props.children)).return=l,l=p;break e}}else if(u.elementType===_||"object"==typeof _&&null!==_&&_.$$typeof===w&&Za(_)===u.type){n(l,u.sibling),Ka(p=o(u,c.props),c),p.return=l,l=p;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===f?((p=Bi(c.props.children,l.mode,p,c.key)).return=l,l=p):(Ka(p=zi(c.type,c.key,c.props,null,l.mode,p),c),p.return=l,l=p)}return s(l);case h:e:{for(_=c.key;null!==u;){if(u.key===_){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(p=o(u,c.children||[])).return=l,l=p;break e}n(l,u);break}t(l,u),u=u.sibling}(p=qi(c,l.mode,p)).return=l,l=p}return s(l);case w:return b(l,u,c=(_=c._init)(c._payload),p)}if(A(c))return function(i,o,s,l){for(var u=null,c=null,d=o,h=o=0,f=null;null!==d&&h<s.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=m(i,d,s[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(i,d),o=a(p,o,h),null===c?u=p:c.sibling=p,c=p,d=f}if(h===s.length)return n(i,d),ir&&Qi(i,h),u;if(null===d){for(;h<s.length;h++)null!==(d=g(i,s[h],l))&&(o=a(d,o,h),null===c?u=d:c.sibling=d,c=d);return ir&&Qi(i,h),u}for(d=r(d);h<s.length;h++)null!==(f=y(d,i,h,s[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),o=a(f,o,h),null===c?u=f:c.sibling=f,c=f);return e&&d.forEach(function(e){return t(i,e)}),ir&&Qi(i,h),u}(l,u,c,p);if(I(c)){if("function"!=typeof(_=I(c)))throw Error(i(150));return function(o,s,l,u){if(null==l)throw Error(i(151));for(var c=null,d=null,h=s,f=s=0,p=null,v=l.next();null!==h&&!v.done;f++,v=l.next()){h.index>f?(p=h,h=null):p=h.sibling;var b=m(o,h,v.value,u);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(o,h),s=a(b,s,f),null===d?c=b:d.sibling=b,d=b,h=p}if(v.done)return n(o,h),ir&&Qi(o,f),c;if(null===h){for(;!v.done;f++,v=l.next())null!==(v=g(o,v.value,u))&&(s=a(v,s,f),null===d?c=v:d.sibling=v,d=v);return ir&&Qi(o,f),c}for(h=r(h);!v.done;f++,v=l.next())null!==(v=y(h,o,f,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?f:v.key),s=a(v,s,f),null===d?c=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(o,e)}),ir&&Qi(o,f),c}(l,u,c=_.call(c),p)}if("function"==typeof c.then)return b(l,u,Xa(c),p);if(c.$$typeof===v)return b(l,u,xr(l,c),p);Qa(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(p=o(u,c)).return=l,l=p):(n(l,u),(p=Ui(c,l.mode,p)).return=l,l=p),s(l)):n(l,u)}return function(e,t,n,i){try{Wa=0;var r=b(e,t,n,i);return Ya=null,r}catch(a){if(a===Gr||a===$r)throw a;var o=Mi(29,a,null,e.mode);return o.lanes=i,o.return=e,o}}}var es=Ja(!0),ts=Ja(!1),ns=D(null),is=null;function rs(e){var t=e.alternate;z(ls,1&ls.current),z(ns,e),null===is&&(null===t||null!==ho.current||null!==t.memoizedState)&&(is=e)}function os(e){if(22===e.tag){if(z(ls,ls.current),z(ns,e),null===is){var t=e.alternate;null!==t&&null!==t.memoizedState&&(is=e)}}else as()}function as(){z(ls,ls.current),z(ns,ns.current)}function ss(e){F(ns),is===e&&(is=null),F(ls)}var ls=D(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||pd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function cs(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:u({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ds={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Lu(),r=no(i);r.payload=t,null!=n&&(r.callback=n),null!==(t=io(e,r,i))&&(Mu(t,e,i),ro(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Lu(),r=no(i);r.tag=1,r.payload=t,null!=n&&(r.callback=n),null!==(t=io(e,r,i))&&(Mu(t,e,i),ro(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lu(),i=no(n);i.tag=2,null!=t&&(i.callback=t),null!==(t=io(e,i,n))&&(Mu(t,e,n),ro(t,e,n))}};function hs(e,t,n,i,r,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,i)||!Yn(r,o))}function fs(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ds.enqueueReplaceState(t,t.state,null)}function ps(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=u({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}var gs="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function ms(e){gs(e)}function ys(e){}function vs(e){gs(e)}function bs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function _s(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Es(e,t,n){return(n=no(n)).tag=3,n.payload={element:null},n.callback=function(){bs(e,t)},n}function ks(e){return(e=no(e)).tag=3,e}function ws(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"==typeof r){var o=i.value;e.payload=function(){return r(o)},e.callback=function(){_s(t,n,i)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){_s(t,n,i),"function"!=typeof r&&(null===ku?ku=new Set([this]):ku.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var Ss=Error(i(461)),xs=!1;function Ts(e,t,n,i){t.child=null===e?ts(t,null,n,i):es(t,e.child,n,i)}function Is(e,t,n,i,r){n=n.render;var o=t.ref;if("ref"in i){var a={};for(var s in i)"ref"!==s&&(a[s]=i[s])}else a=i;return wr(t),i=Ao(e,t,n,a,o,r),s=Mo(),null===e||xs?(ir&&s&&Ji(t),t.flags|=1,Ts(e,t,i,r),t.child):(Ro(e,t,r),Ys(e,t,r))}function Cs(e,t,n,i,r){if(null===e){var o=n.type;return"function"!=typeof o||Ri(o)||void 0!==o.defaultProps||null!==n.compare?((e=zi(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ns(e,t,o,i,r))}if(o=e.child,!Ws(e,r)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(a,i)&&e.ref===t.ref)return Ys(e,t,r)}return t.flags|=1,(e=Di(o,i)).ref=t.ref,e.return=t,t.child=e}function Ns(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(Yn(o,i)&&e.ref===t.ref){if(xs=!1,t.pendingProps=i=o,!Ws(e,r))return t.lanes=e.lanes,Ys(e,t,r);131072&e.flags&&(xs=!0)}}return Os(e,t,n,i,r)}function As(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode){if(128&t.flags){if(i=null!==o?o.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;t.childLanes=o&~i}else t.childLanes=0,t.child=null;return Ps(e,t,i,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Ps(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qr(0,null!==o?o.cachePool:null),null!==o?po(t,o):go(),os(t)}else null!==o?(qr(0,o.cachePool),po(t,o),as(),t.memoizedState=null):(null!==e&&qr(0,null),go(),as());return Ts(e,t,r,n),t.child}function Ps(e,t,n,i){var r=Ur();return r=null===r?null:{parent:Ar._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&qr(0,null),go(),os(t),null!==e&&Er(e,t,i,!0),null}function Ls(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Os(e,t,n,i,r){return wr(t),n=Ao(e,t,n,i,void 0,r),i=Mo(),null===e||xs?(ir&&i&&Ji(t),t.flags|=1,Ts(e,t,n,r),t.child):(Ro(e,t,r),Ys(e,t,r))}function Ms(e,t,n,i,r,o){return wr(t),t.updateQueue=null,n=Lo(t,i,n,r),Po(e),i=Mo(),null===e||xs?(ir&&i&&Ji(t),t.flags|=1,Ts(e,t,n,o),t.child):(Ro(e,t,o),Ys(e,t,o))}function Rs(e,t,n,i,r){if(wr(t),null===t.stateNode){var o=Li,a=n.contextType;"object"==typeof a&&null!==a&&(o=Sr(a)),o=new n(i,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ds,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=i,o.state=t.memoizedState,o.refs={},eo(t),a=n.contextType,o.context="object"==typeof a&&null!==a?Sr(a):Li,o.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(cs(t,n,a,i),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(a=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&ds.enqueueReplaceState(o,o.state,null),lo(t,i,o,r),so(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=ps(n,s);o.props=l;var u=o.context,c=n.contextType;a=Li,"object"==typeof c&&null!==c&&(a=Sr(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s||u!==a)&&fs(t,o,i,a),Jr=!1;var h=t.memoizedState;o.state=h,lo(t,i,o,r),so(),u=t.memoizedState,s||h!==u||Jr?("function"==typeof d&&(cs(t,n,d,i),u=t.memoizedState),(l=Jr||hs(t,n,l,i,h,u,a))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),o.props=i,o.state=u,o.context=a,i=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,to(e,t),c=ps(n,a=t.memoizedProps),o.props=c,d=t.pendingProps,h=o.context,u=n.contextType,l=Li,"object"==typeof u&&null!==u&&(l=Sr(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||h!==l)&&fs(t,o,i,l),Jr=!1,h=t.memoizedState,o.state=h,lo(t,i,o,r),so();var f=t.memoizedState;a!==d||h!==f||Jr||null!==e&&null!==e.dependencies&&kr(e.dependencies)?("function"==typeof s&&(cs(t,n,s,i),f=t.memoizedState),(c=Jr||hs(t,n,c,i,h,f,l)||null!==e&&null!==e.dependencies&&kr(e.dependencies))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=l,i=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return o=i,Ls(e,t),i=!!(128&t.flags),o||i?(o=t.stateNode,n=i&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&i?(t.child=es(t,e.child,null,r),t.child=es(t,null,n,r)):Ts(e,t,n,r),t.memoizedState=o.state,e=t.child):e=Ys(e,t,r),e}function Ds(e,t,n,i){return dr(),t.flags|=256,Ts(e,t,n,i),t.child}var Fs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zs(e){return{baseLanes:e,cachePool:Vr()}}function Bs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=pu),e}function Us(e,t,n){var r,o=t.pendingProps,a=!1,s=!!(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&!!(2&ls.current)),r&&(a=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(ir){if(a?rs(t):as(),ir){var l,u=nr;if(l=u){e:{for(l=u,u=or;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=gd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Wi?{id:Xi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},(l=Mi(18,null,null,0)).stateNode=u,l.return=t,t.child=l,tr=t,nr=null,l=!0):l=!1}l||sr(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return pd(u)?t.lanes=32:t.lanes=536870912,null;ss(t)}return u=o.children,o=o.fallback,a?(as(),u=Vs({mode:"hidden",children:u},a=t.mode),o=Bi(o,a,n,null),u.return=t,o.return=t,u.sibling=o,t.child=u,(a=t.child).memoizedState=zs(n),a.childLanes=Bs(e,r,n),t.memoizedState=Fs,o):(rs(t),qs(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(rs(t),t.flags&=-257,t=Gs(e,t,n)):null!==t.memoizedState?(as(),t.child=e.child,t.flags|=128,t=null):(as(),a=o.fallback,u=t.mode,o=Vs({mode:"visible",children:o.children},u),(a=Bi(a,u,n,null)).flags|=2,o.return=t,a.return=t,o.sibling=a,t.child=o,es(t,e.child,null,n),(o=t.child).memoizedState=zs(n),o.childLanes=Bs(e,r,n),t.memoizedState=Fs,t=a);else if(rs(t),pd(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(o=Error(i(419))).stack="",o.digest=r,fr({value:o,source:null,stack:null}),t=Gs(e,t,n)}else if(xs||Er(e,t,n,!1),r=0!==(n&e.childLanes),xs||r){if(null!==(r=tu)&&(0!==(o=0!==((o=42&(o=n&-n)?1:xe(o))&(r.suspendedLanes|n))?0:o)&&o!==l.retryLane))throw l.retryLane=o,Ni(e,o),Mu(r,e,o),Ss;"$?"===u.data||$u(),t=Gs(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,nr=gd(u.nextSibling),tr=t,ir=!0,rr=null,or=!1,null!==e&&(Hi[Yi++]=Xi,Hi[Yi++]=Ki,Hi[Yi++]=Wi,Xi=e.id,Ki=e.overflow,Wi=t),(t=qs(t,o.children)).flags|=4096);return t}return a?(as(),a=o.fallback,u=t.mode,c=(l=e.child).sibling,(o=Di(l,{mode:"hidden",children:o.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?a=Di(c,a):(a=Bi(a,u,n,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,null===(u=e.child.memoizedState)?u=zs(n):(null!==(l=u.cachePool)?(c=Ar._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Vr(),u={baseLanes:u.baseLanes|n,cachePool:l}),a.memoizedState=u,a.childLanes=Bs(e,r,n),t.memoizedState=Fs,o):(rs(t),e=(n=e.child).sibling,(n=Di(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function qs(e,t){return(t=Vs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vs(e,t){return(e=Mi(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gs(e,t,n){return es(t,e.child,null,n),(e=qs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),br(e.return,t,n)}function $s(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Hs(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(Ts(e,t,i.children,n),2&(i=ls.current))i=1&i|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(z(ls,i),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),$s(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===us(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}$s(t,!0,n,null,o);break;case"together":$s(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),du|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Er(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Di(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Di(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!kr(e))}function Xs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)xs=!0;else{if(!(Ws(e,n)||128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),yr(0,Ar,e.memoizedState.cache),dr();break;case 27:case 5:$(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:yr(0,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(rs(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Us(e,t,n):(rs(t),null!==(e=Ys(e,t,n))?e.sibling:null);rs(t);break;case 19:var r=!!(128&e.flags);if((i=0!==(n&t.childLanes))||(Er(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return Hs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),z(ls,ls.current),i)break;return null;case 22:case 23:return t.lanes=0,As(e,t,n);case 24:yr(0,Ar,e.memoizedState.cache)}return Ys(e,t,n)}(e,t,n);xs=!!(131072&e.flags)}else xs=!1,ir&&1048576&t.flags&&Zi(t,$i,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,o=r._init;if(r=o(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((o=r.$$typeof)===b){t.tag=11,t=Is(null,t,r,e,n);break e}if(o===k){t.tag=14,t=Cs(null,t,r,e,n);break e}}throw t=N(r)||r,Error(i(306,t,""))}Ri(r)?(e=ps(r,e),t.tag=1,t=Rs(null,t,r,e,n)):(t.tag=0,t=Os(null,t,r,e,n))}return t;case 0:return Os(e,t,t.type,t.pendingProps,n);case 1:return Rs(e,t,r=t.type,o=ps(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var a=t.memoizedState;o=a.element,to(e,t),lo(t,r,null,n);var s=t.memoizedState;if(r=s.cache,yr(0,Ar,r),r!==a.cache&&_r(t,[Ar],n,!0),so(),r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ds(e,t,r,n);break e}if(r!==o){fr(o=ki(Error(i(424)),t)),t=Ds(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(nr=gd(e.firstChild),tr=t,ir=!0,rr=null,or=!0,n=ts(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(dr(),r===o){t=Ys(e,t,n);break e}Ts(e,t,r,n)}t=t.child}return t;case 26:return Ls(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:ir||(n=t.type,e=t.pendingProps,(r=td(q.current).createElement(n))[Ne]=t,r[Ae]=e,Zc(r,n,e),Ve(r),t.stateNode=r):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&ir&&(r=t.stateNode=vd(t.type,t.pendingProps,q.current),tr=t,or=!0,o=nr,dd(t.type)?(md=o,nr=gd(r.firstChild)):nr=o),Ts(e,t,t.pendingProps.children,n),Ls(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ir&&((o=r=nr)&&(null!==(r=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[De])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===o)return e}if(null===(e=gd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,or))?(t.stateNode=r,tr=t,nr=gd(r.firstChild),or=!1,o=!0):o=!1),o||sr(t)),$(t),o=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,r=a.children,rd(o,a)?r=null:null!==s&&rd(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=Ao(e,t,Oo,null,null,n),Zd._currentValue=o),Ls(e,t),Ts(e,t,r,n),t.child;case 6:return null===e&&ir&&((e=n=nr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=gd(e.nextSibling)))return null}return e}(n,t.pendingProps,or))?(t.stateNode=n,tr=t,nr=null,e=!0):e=!1),e||sr(t)),null;case 13:return Us(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=es(t,null,r,n):Ts(e,t,r,n),t.child;case 11:return Is(e,t,t.type,t.pendingProps,n);case 7:return Ts(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ts(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,yr(0,t.type,r.value),Ts(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,wr(t),r=r(o=Sr(o)),t.flags|=1,Ts(e,t,r,n),t.child;case 14:return Cs(e,t,t.type,t.pendingProps,n);case 15:return Ns(e,t,t.type,t.pendingProps,n);case 19:return Hs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Vs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Di(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return As(e,t,n);case 24:return wr(t),r=Sr(Ar),null===e?(null===(o=Ur())&&(o=tu,a=Pr(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:r,cache:o},eo(t),yr(0,Ar,o)):(0!==(e.lanes&n)&&(to(e,t),lo(t,null,null,n),so()),o=e.memoizedState,a=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),yr(0,Ar,r)):(r=a.cache,yr(0,Ar,r),r!==o.cache&&_r(t,[Ar],n,!0))),Ts(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ks(e){e.flags|=4}function Qs(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=ns.current)&&((4194048&iu)===iu?null!==is:(62914560&iu)!==iu&&!(536870912&iu)||t!==is))throw Kr=Hr,jr;e.flags|=8192}}function Zs(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?_e():536870912,e.lanes|=t,gu|=t)}function Js(e,t){if(!ir)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function el(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function tl(e,t,n){var r=t.pendingProps;switch(er(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return el(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),vr(Ar),j(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(cr(t)?Ks(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,hr())),el(t),null;case 26:return n=t.memoizedState,null===e?(Ks(t),null!==n?(el(t),Qs(t,n)):(el(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ks(t),el(t),Qs(t,n)):(el(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ks(t),el(t),t.flags&=-16777217),null;case 27:H(t),n=q.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return el(t),null}e=B.current,cr(t)?lr(t):(e=vd(o,r,n),t.stateNode=e,Ks(t))}return el(t),null;case 5:if(H(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return el(t),null}if(e=B.current,cr(t))lr(t);else{switch(o=td(q.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?o.createElement(n,{is:r.is}):o.createElement(n)}}e[Ne]=t,e[Ae]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Zc(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ks(t)}}return el(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ks(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=q.current,cr(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=tr))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Ne]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Wc(e.nodeValue,n)))||sr(t)}else(e=td(e).createTextNode(r))[Ne]=t,t.stateNode=e}return el(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=cr(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[Ne]=t}else dr(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;el(t),o=!1}else o=hr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(ss(t),t):(ss(t),null)}if(ss(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==o&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Zs(t,t.updateQueue),el(t),null;case 4:return j(),null===e&&zc(t.stateNode.containerInfo),el(t),null;case 10:return vr(t.type),el(t),null;case 19:if(F(ls),null===(o=t.memoizedState))return el(t),null;if(r=!!(128&t.flags),null===(a=o.rendering))if(r)Js(o,!1);else{if(0!==cu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=us(e))){for(t.flags|=128,Js(o,!1),e=a.updateQueue,t.updateQueue=e,Zs(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fi(n,e),n=n.sibling;return z(ls,1&ls.current|2),t.child}e=e.sibling}null!==o.tail&&Z()>_u&&(t.flags|=128,r=!0,Js(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=us(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Zs(t,e),Js(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!ir)return el(t),null}else 2*Z()-o.renderingStartTime>_u&&536870912!==n&&(t.flags|=128,r=!0,Js(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=o.last)?e.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Z(),t.sibling=null,e=ls.current,z(ls,r?1&e|2:1&e),t):(el(t),null);case 22:case 23:return ss(t),mo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(el(t),6&t.subtreeFlags&&(t.flags|=8192)):el(t),null!==(n=t.updateQueue)&&Zs(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&F(Br),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),vr(Ar),el(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function nl(e,t){switch(er(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vr(Ar),j(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return H(t),null;case 13:if(ss(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));dr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return F(ls),null;case 4:return j(),null;case 10:return vr(t.type),null;case 22:case 23:return ss(t),mo(),null!==e&&F(Br),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return vr(Ar),null;default:return null}}function il(e,t){switch(er(t),t.tag){case 3:vr(Ar),j();break;case 26:case 27:case 5:H(t);break;case 4:j();break;case 13:ss(t);break;case 19:F(ls);break;case 10:vr(t.type);break;case 22:case 23:ss(t),mo(),null!==e&&F(Br);break;case 24:vr(Ar)}}function rl(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var o=n.create,a=n.inst;i=o(),a.destroy=i}n=n.next}while(n!==r)}}catch(s){lc(t,t.return,s)}}function ol(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var o=r.next;i=o;do{if((i.tag&e)===e){var a=i.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,r=t;var l=n,u=s;try{u()}catch(c){lc(r,l,c)}}}i=i.next}while(i!==o)}}catch(c){lc(t,t.return,c)}}function al(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{co(t,n)}catch(i){lc(e,e.return,i)}}}function sl(e,t,n){n.props=ps(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){lc(e,t,i)}}function ll(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(r){lc(e,t,r)}}function ul(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"==typeof i)try{i()}catch(r){lc(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(o){lc(e,t,o)}else n.current=null}function cl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){lc(e,e.return,r)}}function dl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,a=null,s=null,l=null,u=null,c=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:r.hasOwnProperty(p)||Kc(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":o=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:p!==h&&Kc(e,t,f,p,r,h)}}return void ft(e,s,l,u,c,d,a,o);case"select":for(a in p=s=l=f=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(a)||Kc(e,t,a,null,r,u)}for(o in r)if(a=r[o],u=n[o],r.hasOwnProperty(o)&&(null!=a||null!=u))switch(o){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==u&&Kc(e,t,o,a,r,u)}return t=l,n=s,r=p,void(null!=f?mt(e,!!n,f,!1):!!r!=!!n&&(null!=t?mt(e,!!n,t,!0):mt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Kc(e,t,l,null,r,o)}for(s in r)if(o=r[s],a=n[s],r.hasOwnProperty(s)&&(null!=o||null!=a))switch(s){case"value":f=o;break;case"defaultValue":p=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(i(91));break;default:o!==a&&Kc(e,t,s,o,r,a)}return void yt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Kc(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))if("selected"===u)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else Kc(e,t,u,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Kc(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:Kc(e,t,c,f,r,p)}return;default:if(wt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Qc(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Qc(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Kc(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Kc(e,t,h,f,r,p)}(r,e.type,n,t),r[Ae]=t}catch(o){lc(e,e.return,o)}}function hl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&dd(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&dd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function pl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Xc));else if(4!==i&&(27===i&&dd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}function gl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&dd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function ml(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Zc(t,i,n),t[Ne]=e,t[Ae]=n}catch(o){lc(e,e.return,o)}}var yl=!1,vl=!1,bl=!1,_l="function"==typeof WeakSet?WeakSet:Set,El=null;function kl(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Rl(e,n),4&i&&rl(5,n);break;case 1:if(Rl(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){lc(n,n.return,a)}else{var r=ps(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){lc(n,n.return,s)}}64&i&&al(n),512&i&&ll(n,n.return);break;case 3:if(Rl(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{co(e,t)}catch(a){lc(n,n.return,a)}}break;case 27:null===t&&4&i&&ml(n);case 26:case 5:Rl(e,n),null===t&&4&i&&cl(n),512&i&&ll(n,n.return);break;case 12:Rl(e,n);break;case 13:Rl(e,n),4&i&&Cl(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=hc.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||vl,r=yl;var o=vl;yl=i,(vl=t)&&!o?Fl(e,n,!!(8772&n.subtreeFlags)):Rl(e,n),yl=r,vl=o}break;case 30:break;default:Rl(e,n)}}function wl(e){var t=e.alternate;null!==t&&(e.alternate=null,wl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Fe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Sl=null,xl=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Il(e,t,n),n=n.sibling}function Il(e,t,n){if(le&&"function"==typeof le.onCommitFiberUnmount)try{le.onCommitFiberUnmount(se,n)}catch(o){}switch(n.tag){case 26:vl||ul(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:vl||ul(n,t);var i=Sl,r=xl;dd(n.type)&&(Sl=n.stateNode,xl=!1),Tl(e,t,n),bd(n.stateNode),Sl=i,xl=r;break;case 5:vl||ul(n,t);case 6:if(i=Sl,r=xl,Sl=null,Tl(e,t,n),xl=r,null!==(Sl=i))if(xl)try{(9===Sl.nodeType?Sl.body:"HTML"===Sl.nodeName?Sl.ownerDocument.body:Sl).removeChild(n.stateNode)}catch(a){lc(n,t,a)}else try{Sl.removeChild(n.stateNode)}catch(a){lc(n,t,a)}break;case 18:null!==Sl&&(xl?(hd(9===(e=Sl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ph(e)):hd(Sl,n.stateNode));break;case 4:i=Sl,r=xl,Sl=n.stateNode.containerInfo,xl=!0,Tl(e,t,n),Sl=i,xl=r;break;case 0:case 11:case 14:case 15:vl||ol(2,n,t),vl||ol(4,n,t),Tl(e,t,n);break;case 1:vl||(ul(n,t),"function"==typeof(i=n.stateNode).componentWillUnmount&&sl(n,t,i)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:vl=(i=vl)||null!==n.memoizedState,Tl(e,t,n),vl=i;break;default:Tl(e,t,n)}}function Cl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ph(e)}catch(n){lc(t,t.return,n)}}function Nl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var i=fc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}function Al(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(dd(l.type)){Sl=l.stateNode,xl=!1;break e}break;case 5:Sl=l.stateNode,xl=!1;break e;case 3:case 4:Sl=l.stateNode.containerInfo,xl=!0;break e}l=l.return}if(null===Sl)throw Error(i(160));Il(a,s,o),Sl=null,xl=!1,null!==(a=o.alternate)&&(a.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Pl=null;function Ll(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Al(t,e),Ol(e),4&r&&(ol(3,e,e.return),rl(3,e),ol(5,e,e.return));break;case 1:Al(t,e),Ol(e),512&r&&(vl||null===n||ul(n,n.return)),64&r&&yl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Pl;if(Al(t,e),Ol(e),512&r&&(vl||null===n||ul(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(a=o.getElementsByTagName("title")[0])||a[De]||a[Ne]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=o.createElement(r),o.head.insertBefore(a,o.querySelector("head > title"))),Zc(a,r,n),a[Ne]=e,Ve(a),r=a;break e;case"link":var s=Fd("link","href",o).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((a=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}Zc(a=o.createElement(r),r,n),o.head.appendChild(a);break;case"meta":if(s=Fd("meta","content",o).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((a=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}Zc(a=o.createElement(r),r,n),o.head.appendChild(a);break;default:throw Error(i(468,r))}a[Ne]=e,Ve(a),r=a}e.stateNode=r}else zd(o,e.type,e.stateNode);else e.stateNode=Ld(o,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?zd(o,e.type,e.stateNode):Ld(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&dl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Al(t,e),Ol(e),512&r&&(vl||null===n||ul(n,n.return)),null!==n&&4&r&&dl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Al(t,e),Ol(e),512&r&&(vl||null===n||ul(n,n.return)),32&e.flags){o=e.stateNode;try{bt(o,"")}catch(p){lc(e,e.return,p)}}4&r&&null!=e.stateNode&&dl(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(bl=!0);break;case 6:if(Al(t,e),Ol(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){lc(e,e.return,p)}}break;case 3:if(Dd=null,o=Pl,Pl=kd(t.containerInfo),Al(t,e),Pl=o,Ol(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ph(t.containerInfo)}catch(p){lc(e,e.return,p)}bl&&(bl=!1,Ml(e));break;case 4:r=Pl,Pl=kd(e.stateNode.containerInfo),Al(t,e),Ol(e),Pl=r;break;case 12:default:Al(t,e),Ol(e);break;case 13:Al(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(bu=Z()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Nl(e,r)));break;case 22:o=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=yl,d=vl;if(yl=c||o,vl=d||u,Al(t,e),vl=d,yl=c,Ol(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||u||yl||vl||Dl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(a=u.stateNode,o)"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var h=u.memoizedProps.style,f=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(p){lc(u,u.return,p)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(p){lc(u,u.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Nl(e,n))));break;case 19:Al(t,e),Ol(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Nl(e,r)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(hl(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var o=n.stateNode;gl(e,fl(e),o);break;case 5:var a=n.stateNode;32&n.flags&&(bt(a,""),n.flags&=-33),gl(e,fl(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;pl(e,fl(e),s);break;default:throw Error(i(161))}}catch(l){lc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Rl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Dl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Dl(t);break;case 1:ul(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&sl(t,t.return,n),Dl(t);break;case 27:bd(t.stateNode);case 26:case 5:ul(t,t.return),Dl(t);break;case 22:null===t.memoizedState&&Dl(t);break;default:Dl(t)}e=e.sibling}}function Fl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:Fl(r,o,n),rl(4,o);break;case 1:if(Fl(r,o,n),"function"==typeof(r=(i=o).stateNode).componentDidMount)try{r.componentDidMount()}catch(u){lc(i,i.return,u)}if(null!==(r=(i=o).updateQueue)){var s=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)uo(l[r],s)}catch(u){lc(i,i.return,u)}}n&&64&a&&al(o),ll(o,o.return);break;case 27:ml(o);case 26:case 5:Fl(r,o,n),n&&null===i&&4&a&&cl(o),ll(o,o.return);break;case 12:Fl(r,o,n);break;case 13:Fl(r,o,n),n&&4&a&&Cl(r,o);break;case 22:null===o.memoizedState&&Fl(r,o,n),ll(o,o.return);break;case 30:break;default:Fl(r,o,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Lr(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Lr(e))}function Ul(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,n,i),t=t.sibling}function ql(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Ul(e,t,n,i),2048&r&&rl(9,t);break;case 1:case 13:default:Ul(e,t,n,i);break;case 3:Ul(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Lr(e)));break;case 12:if(2048&r){Ul(e,t,n,i),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){lc(t,t.return,l)}}else Ul(e,t,n,i);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?Ul(e,t,n,i):Gl(e,t):2&o._visibility?Ul(e,t,n,i):(o._visibility|=2,Vl(e,t,n,i,!!(10256&t.subtreeFlags))),2048&r&&zl(a,t);break;case 24:Ul(e,t,n,i),2048&r&&Bl(t.alternate,t)}}function Vl(e,t,n,i,r){for(r=r&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=i,u=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(o,a,s,l,r),rl(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?Vl(o,a,s,l,r):Gl(o,a):(c._visibility|=2,Vl(o,a,s,l,r)),r&&2048&u&&zl(a.alternate,a);break;case 24:Vl(o,a,s,l,r),r&&2048&u&&Bl(a.alternate,a);break;default:Vl(o,a,s,l,r)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Gl(n,i),2048&r&&zl(i.alternate,i);break;case 24:Gl(n,i),2048&r&&Bl(i.alternate,i);break;default:Gl(n,i)}t=t.sibling}}var jl=8192;function $l(e){if(e.subtreeFlags&jl)for(e=e.child;null!==e;)Hl(e),e=e.sibling}function Hl(e){switch(e.tag){case 26:$l(e),e.flags&jl&&null!==e.memoizedState&&function(e,t,n){if(null===qd)throw Error(i(475));var r=qd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var o=Id(n.href),a=e.querySelector(Cd(o));if(a)return null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=jd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=a,void Ve(a);a=e.ownerDocument||e,n=Nd(n),(o=_d.get(o))&&Md(n,o),Ve(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Zc(a,"link",n),t.instance=a}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=jd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Pl,e.memoizedState,e.memoizedProps);break;case 5:default:$l(e);break;case 3:case 4:var t=Pl;Pl=kd(e.stateNode.containerInfo),$l(e),Pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=jl,jl=16777216,$l(e),jl=t):$l(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Wl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];El=i,Ql(i,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Wl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Wl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Kl(e)):Wl(e)}}function Kl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];El=i,Ql(i,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Kl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Kl(t));break;default:Kl(t)}e=e.sibling}}function Ql(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Lr(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,El=i;else e:for(n=e;null!==El;){var r=(i=El).sibling,o=i.return;if(wl(i),i===n){El=null;break e}if(null!==r){r.return=o,El=r;break e}El=o}}}var Zl={getCacheForType:function(e){var t=Sr(Ar),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Jl="function"==typeof WeakMap?WeakMap:Map,eu=0,tu=null,nu=null,iu=0,ru=0,ou=null,au=!1,su=!1,lu=!1,uu=0,cu=0,du=0,hu=0,fu=0,pu=0,gu=0,mu=null,yu=null,vu=!1,bu=0,_u=1/0,Eu=null,ku=null,wu=0,Su=null,xu=null,Tu=0,Iu=0,Cu=null,Nu=null,Au=0,Pu=null;function Lu(){if(2&eu&&0!==iu)return iu&-iu;if(null!==P.T){return 0!==Rr?Rr:Ic()}return Ie()}function Ou(){0===pu&&(pu=536870912&iu&&!ir?536870912:be());var e=ns.current;return null!==e&&(e.flags|=32),pu}function Mu(e,t,n){(e!==tu||2!==ru&&9!==ru)&&null===e.cancelPendingCommit||(qu(e,0),zu(e,iu,pu,!1)),ke(e,n),2&eu&&e===tu||(e===tu&&(!(2&eu)&&(hu|=n),4===cu&&zu(e,iu,pu,!1)),_c(e))}function Ru(e,t,n){if(6&eu)throw Error(i(327));for(var r=!n&&!(124&t)&&0===(t&e.expiredLanes)||ye(e,t),o=r?function(e,t){var n=eu;eu|=2;var r=Gu(),o=ju();tu!==e||iu!==t?(Eu=null,_u=Z()+500,qu(e,t)):su=ye(e,t);e:for(;;)try{if(0!==ru&&null!==nu){t=nu;var a=ou;t:switch(ru){case 1:ru=0,ou=null,Qu(e,t,a,1);break;case 2:case 9:if(Yr(a)){ru=0,ou=null,Ku(t);break}t=function(){2!==ru&&9!==ru||tu!==e||(ru=7),_c(e)},a.then(t,t);break e;case 3:ru=7;break e;case 4:ru=5;break e;case 7:Yr(a)?(ru=0,ou=null,Ku(t)):(ru=0,ou=null,Qu(e,t,a,7));break;case 5:var s=null;switch(nu.tag){case 26:s=nu.memoizedState;case 5:case 27:var l=nu;if(!s||Bd(s)){ru=0,ou=null;var u=l.sibling;if(null!==u)nu=u;else{var c=l.return;null!==c?(nu=c,Zu(c)):nu=null}break t}}ru=0,ou=null,Qu(e,t,a,5);break;case 6:ru=0,ou=null,Qu(e,t,a,6);break;case 8:Uu(),cu=6;break e;default:throw Error(i(462))}}Wu();break}catch(d){Vu(e,d)}return mr=gr=null,P.H=r,P.A=o,eu=n,null!==nu?0:(tu=null,iu=0,Ti(),cu)}(e,t):Hu(e,t,!0),a=r;;){if(0===o){su&&!r&&zu(e,t,0,!1);break}if(n=e.current.alternate,!a||Fu(n)){if(2===o){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;o=mu;var u=l.current.memoizedState.isDehydrated;if(u&&(qu(l,s).flags|=256),2!==(s=Hu(l,s,!1))){if(lu&&!u){l.errorRecoveryDisabledLanes|=a,hu|=a,o=4;break e}a=yu,yu=o,null!==a&&(null===yu?yu=a:yu.push.apply(yu,a))}o=s}if(a=!1,2!==o)continue}}if(1===o){qu(e,0),zu(e,t,0,!0);break}e:{switch(r=e,a=o){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:zu(r,t,pu,!au);break e;case 2:yu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(o=bu+300-Z())){if(zu(r,t,pu,!au),0!==me(r,0,!0))break e;r.timeoutHandle=ad(Du.bind(null,r,n,yu,Eu,vu,t,pu,hu,gu,au,a,2,-0,0),o)}else Du(r,n,yu,Eu,vu,t,pu,hu,gu,au,a,0,-0,0)}break}o=Hu(e,t,!1),a=!1}_c(e)}function Du(e,t,n,r,o,a,s,l,u,c,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||!(16785408&~h))&&(qd={stylesheets:null,count:0,unsuspend:Vd},Hl(t),null!==(h=function(){if(null===qd)throw Error(i(475));var e=qd;return e.stylesheets&&0===e.count&&Xd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Xd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ec.bind(null,e,t,a,n,r,o,s,l,u,d,1,f,p)),void zu(e,a,s,!c);ec(e,t,a,n,r,o,s,l,u)}function Fu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Hn(o(),r))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zu(e,t,n,i){t&=~fu,t&=~hu,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var o=31-ce(r),a=1<<o;i[o]=-1,r&=~a}0!==n&&we(e,n,t)}function Bu(){return!!(6&eu)||(Ec(0),!1)}function Uu(){if(null!==nu){if(0===ru)var e=nu.return;else mr=gr=null,Do(e=nu),Ya=null,Wa=0,e=nu;for(;null!==e;)il(e.alternate,e),e=e.return;nu=null}}function qu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uu(),tu=e,nu=n=Di(e.current,null),iu=t,ru=0,ou=null,au=!1,su=ye(e,t),lu=!1,gu=pu=fu=hu=du=cu=0,yu=mu=null,vu=!1,8&t&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-ce(i),o=1<<r;t|=e[r],i&=~o}return uu=t,Ti(),n}function Vu(e,t){vo=null,P.H=Ga,t===Gr||t===$r?(t=Qr(),ru=3):t===jr?(t=Qr(),ru=4):ru=t===Ss?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,ou=t,null===nu&&(cu=1,bs(e,ki(t,e.current)))}function Gu(){var e=P.H;return P.H=Ga,null===e?Ga:e}function ju(){var e=P.A;return P.A=Zl,e}function $u(){cu=4,au||(4194048&iu)!==iu&&null!==ns.current||(su=!0),!(134217727&du)&&!(134217727&hu)||null===tu||zu(tu,iu,pu,!1)}function Hu(e,t,n){var i=eu;eu|=2;var r=Gu(),o=ju();tu===e&&iu===t||(Eu=null,qu(e,t)),t=!1;var a=cu;e:for(;;)try{if(0!==ru&&null!==nu){var s=nu,l=ou;switch(ru){case 8:Uu(),a=6;break e;case 3:case 2:case 9:case 6:null===ns.current&&(t=!0);var u=ru;if(ru=0,ou=null,Qu(e,s,l,u),n&&su){a=0;break e}break;default:u=ru,ru=0,ou=null,Qu(e,s,l,u)}}Yu(),a=cu;break}catch(c){Vu(e,c)}return t&&e.shellSuspendCounter++,mr=gr=null,eu=i,P.H=r,P.A=o,null===nu&&(tu=null,iu=0,Ti()),a}function Yu(){for(;null!==nu;)Xu(nu)}function Wu(){for(;null!==nu&&!K();)Xu(nu)}function Xu(e){var t=Xs(e.alternate,e,uu);e.memoizedProps=e.pendingProps,null===t?Zu(e):nu=t}function Ku(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ms(n,t,t.pendingProps,t.type,void 0,iu);break;case 11:t=Ms(n,t,t.pendingProps,t.type.render,t.ref,iu);break;case 5:Do(t);default:il(n,t),t=Xs(n,t=nu=Fi(t,uu),uu)}e.memoizedProps=e.pendingProps,null===t?Zu(e):nu=t}function Qu(e,t,n,r){mr=gr=null,Do(t),Ya=null,Wa=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Er(t,n,o,!0),null!==(n=ns.current)){switch(n.tag){case 13:return null===is?$u():null===n.alternate&&0===cu&&(cu=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===Hr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),uc(e,r,o)),!1;case 22:return n.flags|=65536,r===Hr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),uc(e,r,o)),!1}throw Error(i(435,n.tag))}return uc(e,r,o),$u(),!1}if(ir)return null!==(t=ns.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==ar&&fr(ki(e=Error(i(422),{cause:r}),n))):(r!==ar&&fr(ki(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=ki(r,n),oo(e,o=Es(e.stateNode,r,o)),4!==cu&&(cu=2)),!1;var a=Error(i(520),{cause:r});if(a=ki(a,n),null===mu?mu=[a]:mu.push(a),4!==cu&&(cu=2),null===t)return!0;r=ki(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,oo(n,e=Es(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==ku&&ku.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,ws(o=ks(o),e,n,r),oo(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,iu))return cu=1,bs(e,ki(n,e.current)),void(nu=null)}catch(a){if(null!==o)throw nu=o,a;return cu=1,bs(e,ki(n,e.current)),void(nu=null)}32768&t.flags?(ir||1===r?e=!0:su||536870912&iu?e=!1:(au=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ns.current)&&13===r.tag&&(r.flags|=16384))),Ju(t,e)):Zu(t)}function Zu(e){var t=e;do{if(32768&t.flags)return void Ju(t,au);e=t.return;var n=tl(t.alternate,t,uu);if(null!==n)return void(nu=n);if(null!==(t=t.sibling))return void(nu=t);nu=t=e}while(null!==t);0===cu&&(cu=5)}function Ju(e,t){do{var n=nl(e.alternate,e);if(null!==n)return n.flags&=32767,void(nu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nu=e);nu=e=n}while(null!==e);cu=6,nu=null}function ec(e,t,n,r,o,a,s,l,u){e.cancelPendingCommit=null;do{oc()}while(0!==wu);if(6&eu)throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(a=t.lanes|t.childLanes,function(e,t,n,i,r,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-ce(n),d=1<<c;s[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-536870913)}n&=~d}0!==i&&we(e,i,0),0!==o&&0===r&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,a|=xi,s,l,u),e===tu&&(nu=tu=null,iu=0),xu=t,Su=e,Tu=n,Iu=a,Cu=o,Nu=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,W(ne,function(){return ac(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=P.T,P.T=null,o=L.p,L.p=2,s=eu,eu|=4;try{!function(e,t){if(e=e.containerInfo,Jc=ah,Zn(e=Qn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(m){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==a||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===o&&(l=s),f===a&&++d===r&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ed={focusedElem:e,selectionRange:n},ah=!1,El=t;null!==El;)if(e=(t=El).child,1024&t.subtreeFlags&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(a=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,o=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var g=ps(n.type,o,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){lc(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))fd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{eu=s,L.p=o,P.T=r}}wu=1,tc(),nc(),ic()}}function tc(){if(1===wu){wu=0;var e=Su,t=xu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=P.T,P.T=null;var i=L.p;L.p=2;var r=eu;eu|=4;try{Ll(t,e);var o=ed,a=Qn(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&Kn(s.ownerDocument.documentElement,s)){if(null!==l&&Zn(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=s.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(a=m,m=g,g=a);var y=Xn(s,g),v=Xn(s,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=s;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var _=d[s];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}ah=!!Jc,ed=Jc=null}finally{eu=r,L.p=i,P.T=n}}e.current=t,wu=2}}function nc(){if(2===wu){wu=0;var e=Su,t=xu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=P.T,P.T=null;var i=L.p;L.p=2;var r=eu;eu|=4;try{kl(e,t.alternate,t)}finally{eu=r,L.p=i,P.T=n}}wu=3}}function ic(){if(4===wu||3===wu){wu=0,Q();var e=Su,t=xu,n=Tu,i=Nu;10256&t.subtreeFlags||10256&t.flags?wu=5:(wu=0,xu=Su=null,rc(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(ku=null),Te(n),t=t.stateNode,le&&"function"==typeof le.onCommitFiberRoot)try{le.onCommitFiberRoot(se,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==i){t=P.T,r=L.p,L.p=2,P.T=null;try{for(var o=e.onRecoverableError,a=0;a<i.length;a++){var s=i[a];o(s.value,{componentStack:s.stack})}}finally{P.T=t,L.p=r}}3&Tu&&oc(),_c(e),r=e.pendingLanes,4194090&n&&42&r?e===Pu?Au++:(Au=0,Pu=e):Au=0,Ec(0)}}function rc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Lr(t)))}function oc(e){return tc(),nc(),ic(),ac()}function ac(){if(5!==wu)return!1;var e=Su,t=Iu;Iu=0;var n=Te(Tu),r=P.T,o=L.p;try{L.p=32>n?32:n,P.T=null,n=Cu,Cu=null;var a=Su,s=Tu;if(wu=0,xu=Su=null,Tu=0,6&eu)throw Error(i(331));var l=eu;if(eu|=4,Xl(a.current),ql(a,a.current,s,n),eu=l,Ec(0,!1),le&&"function"==typeof le.onPostCommitFiberRoot)try{le.onPostCommitFiberRoot(se,a)}catch(u){}return!0}finally{L.p=o,P.T=r,rc(e,t)}}function sc(e,t,n){t=ki(n,t),null!==(e=io(e,t=Es(e.stateNode,t,2),2))&&(ke(e,2),_c(e))}function lc(e,t,n){if(3===e.tag)sc(e,e,n);else for(;null!==t;){if(3===t.tag){sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===ku||!ku.has(i))){e=ki(n,e),null!==(i=io(t,n=ks(2),2))&&(ws(n,i,t,e),ke(i,2),_c(i));break}}t=t.return}}function uc(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Jl;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(lu=!0,r.add(n),e=cc.bind(null,e,t,n),t.then(e,e))}function cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tu===e&&(iu&n)===n&&(4===cu||3===cu&&(62914560&iu)===iu&&300>Z()-bu?!(2&eu)&&qu(e,0):fu|=n,gu===iu&&(gu=0)),_c(e)}function dc(e,t){0===t&&(t=_e()),null!==(e=Ni(e,t))&&(ke(e,t),_c(e))}function hc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),dc(e,n)}function fc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),dc(e,n)}var pc=null,gc=null,mc=!1,yc=!1,vc=!1,bc=0;function _c(e){e!==gc&&null===e.next&&(null===gc?pc=gc=e:gc=gc.next=e),yc=!0,mc||(mc=!0,ud(function(){6&eu?W(ee,kc):wc()}))}function Ec(e,t){if(!vc&&yc){vc=!0;do{for(var n=!1,i=pc;null!==i;){if(0!==e){var r=i.pendingLanes;if(0===r)var o=0;else{var a=i.suspendedLanes,s=i.pingedLanes;o=(1<<31-ce(42|e)+1)-1,o=201326741&(o&=r&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Tc(i,o))}else o=iu,!(3&(o=me(i,i===tu?o:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||ye(i,o)||(n=!0,Tc(i,o));i=i.next}}while(n);vc=!1}}function kc(){wc()}function wc(){yc=mc=!1;var e=0;0!==bc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=bc),bc=0);for(var t=Z(),n=null,i=pc;null!==i;){var r=i.next,o=Sc(i,t);0===o?(i.next=null,null===n?pc=r:n.next=r,null===r&&(gc=n)):(n=i,(0!==e||3&o)&&(yc=!0)),i=r}Ec(e)}function Sc(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-ce(o),s=1<<a,l=r[a];-1===l?0!==(s&n)&&0===(s&i)||(r[a]=ve(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=iu,n=me(e,e===(t=tu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===ru||9===ru)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&X(i),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||ye(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&X(i),Te(n)){case 2:case 8:n=te;break;case 32:default:n=ne;break;case 268435456:n=re}return i=xc.bind(null,e),n=W(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&X(i),e.callbackPriority=2,e.callbackNode=null,2}function xc(e,t){if(0!==wu&&5!==wu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(oc()&&e.callbackNode!==n)return null;var i=iu;return 0===(i=me(e,e===tu?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ru(e,i,t),Sc(e,Z()),null!=e.callbackNode&&e.callbackNode===n?xc.bind(null,e):null)}function Tc(e,t){if(oc())return null;Ru(e,t,!0)}function Ic(){return 0===bc&&(bc=be()),bc}function Cc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Tt(""+e)}function Nc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ac=0;Ac<vi.length;Ac++){var Pc=vi[Ac];_i(Pc.toLowerCase(),"on"+(Pc[0].toUpperCase()+Pc.slice(1)))}_i(ci,"onAnimationEnd"),_i(di,"onAnimationIteration"),_i(hi,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(fi,"onTransitionRun"),_i(pi,"onTransitionStart"),_i(gi,"onTransitionCancel"),_i(mi,"onTransitionEnd"),He("onMouseEnter",["mouseout","mouseover"]),He("onMouseLeave",["mouseout","mouseover"]),He("onPointerEnter",["pointerout","pointerover"]),He("onPointerLeave",["pointerout","pointerover"]),$e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$e("onBeforeInput",["compositionend","keypress","textInput","paste"]),$e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function Mc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;o=s,r.currentTarget=u;try{o(r)}catch(c){gs(c)}r.currentTarget=null,o=l}else for(a=0;a<i.length;a++){if(l=(s=i[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;o=s,r.currentTarget=u;try{o(r)}catch(c){gs(c)}r.currentTarget=null,o=l}}}}function Rc(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var i=e+"__bubble";n.has(i)||(Bc(t,e,2,!1),n.add(i))}function Dc(e,t,n){var i=0;t&&(i|=4),Bc(n,e,i,t)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function zc(e){if(!e[Fc]){e[Fc]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Oc.has(t)||Dc(t,!1,e),Dc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fc]||(t[Fc]=!0,Dc("selectionchange",!1,t))}}function Bc(e,t,n,i){switch(fh(t)){case 2:var r=sh;break;case 8:r=lh;break;default:r=uh}n=r.bind(null,t,n,e),r=void 0,!Dt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Uc(e,t,n,i,r){var a=i;if(!(1&t||2&t||null===i))e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var l=i.stateNode.containerInfo;if(l===r)break;if(4===s)for(s=i.return;null!==s;){var u=s.tag;if((3===u||4===u)&&s.stateNode.containerInfo===r)return;s=s.return}for(;null!==l;){if(null===(s=ze(l)))return;if(5===(u=s.tag)||6===u||26===u||27===u){i=a=s;continue e}l=l.parentNode}}i=i.return}Ot(function(){var i=a,r=Ct(n),s=[];e:{var l=yi.get(e);if(void 0!==l){var u=Kt,c=e;switch(e){case"keypress":if(0===Vt(n))break e;case"keydown":case"keyup":u=hn;break;case"focusin":c="focus",u=nn;break;case"focusout":c="blur",u=nn;break;case"beforeblur":case"afterblur":u=nn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=tn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=pn;break;case ci:case di:case hi:u=rn;break;case mi:u=gn;break;case"scroll":case"scrollend":u=Zt;break;case"wheel":u=mn;break;case"copy":case"cut":case"paste":u=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=fn;break;case"toggle":case"beforetoggle":u=yn}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var p,g=i;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Mt(g,f))&&d.push(qc(g,m,p)),h)break;g=g.return}0<d.length&&(l=new u(l,c,null,n,r),s.push({event:l,listeners:d}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===It||!(c=n.relatedTarget||n.fromElement)||!ze(c)&&!c[Pe])&&(u||l)&&(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=i,null!==(c=(c=n.relatedTarget||n.toElement)?ze(c):null)&&(h=o(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=i),u!==c)){if(d=en,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=fn,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==u?l:Ue(u),p=null==c?l:Ue(c),(l=new d(m,g+"leave",u,n,r)).target=h,l.relatedTarget=p,m=null,ze(r)===i&&((d=new d(f,g+"enter",c,n,r)).target=p,d.relatedTarget=h,m=d),h=m,u&&c)e:{for(f=c,g=0,p=d=u;p;p=Gc(p))g++;for(p=0,m=f;m;m=Gc(m))p++;for(;0<g-p;)d=Gc(d),g--;for(;0<p-g;)f=Gc(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gc(d),f=Gc(f)}d=null}else d=null;null!==u&&jc(s,l,u,d,!1),null!==c&&null!==h&&jc(s,h,c,d,!0)}if("select"===(u=(l=i?Ue(i):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var y=Rn;else if(Nn(l))if(Dn)y=$n;else{y=Gn;var v=Vn}else!(u=l.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?i&&wt(i.elementType)&&(y=Rn):y=jn;switch(y&&(y=y(e,i))?An(s,y,n,r):(v&&v(e,l,i),"focusout"===e&&i&&"number"===l.type&&null!=i.memoizedProps.value&&gt(l,"number",l.value)),v=i?Ue(i):window,e){case"focusin":(Nn(v)||"true"===v.contentEditable)&&(ei=v,ti=i,ni=null);break;case"focusout":ni=ti=ei=null;break;case"mousedown":ii=!0;break;case"contextmenu":case"mouseup":case"dragend":ii=!1,ri(s,n,r);break;case"selectionchange":if(Jn)break;case"keydown":case"keyup":ri(s,n,r)}var b;if(bn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else In?xn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(kn&&"ko"!==n.locale&&(In||"onCompositionStart"!==_?"onCompositionEnd"===_&&In&&(b=qt()):(Bt="value"in(zt=r)?zt.value:zt.textContent,In=!0)),0<(v=Vc(i,_)).length&&(_=new an(_,e,null,n,r),s.push({event:_,listeners:v}),b?_.data=b:null!==(b=Tn(n))&&(_.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(Sn=!0,wn);case"textInput":return(e=t.data)===wn&&Sn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!bn&&xn(e,t)?(e=qt(),Ut=Bt=zt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(_=Vc(i,"onBeforeInput")).length&&(v=new an("onBeforeInput","beforeinput",null,n,r),s.push({event:v,listeners:_}),v.data=b)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var o=Cc((r[Ae]||null).action),a=i.submitter;a&&null!==(t=(t=a[Ae]||null)?Cc(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new Kt("action","action",null,i,r);e.push({event:s,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==bc){var e=a?Nc(r,a):new FormData(r);Na(n,{pending:!0,data:e,method:r.method,action:o},null,e)}}else"function"==typeof o&&(s.preventDefault(),e=a?Nc(r,a):new FormData(r),Na(n,{pending:!0,data:e,method:r.method,action:o},o,e))},currentTarget:r}]})}}(s,e,i,n,r)}Mc(s,t)})}function qc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vc(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===o||(null!=(r=Mt(e,n))&&i.unshift(qc(e,r,o)),null!=(r=Mt(e,t))&&i.push(qc(e,r,o))),3===e.tag)return i;e=e.return}return[]}function Gc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function jc(e,t,n,i,r){for(var o=t._reactName,a=[];null!==n&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===i)break;5!==s&&26!==s&&27!==s||null===u||(l=u,r?null!=(u=Mt(n,o))&&a.unshift(qc(n,u,l)):r||null!=(u=Mt(n,o))&&a.push(qc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $c=/\r\n?/g,Hc=/\u0000|\uFFFD/g;function Yc(e){return("string"==typeof e?e:""+e).replace($c,"\n").replace(Hc,"")}function Wc(e,t){return t=Yc(t),Yc(e)===t}function Xc(){}function Kc(e,t,n,r,o,a){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||bt(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&bt(e,""+r);break;case"className":Je(e,"class",r);break;case"tabIndex":Je(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Je(e,n,r);break;case"style":kt(e,r,a);break;case"data":if("object"!==t){Je(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&Kc(e,t,"name",o.name,o,null),Kc(e,t,"formEncType",o.formEncType,o,null),Kc(e,t,"formMethod",o.formMethod,o,null),Kc(e,t,"formTarget",o.formTarget,o,null)):(Kc(e,t,"encType",o.encType,o,null),Kc(e,t,"method",o.method,o,null),Kc(e,t,"target",o.target,o,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Rc("beforetoggle",e),Rc("toggle",e),Ze(e,"popover",r);break;case"xlinkActuate":et(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":et(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":et(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":et(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":et(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":et(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":et(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":et(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":et(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Ze(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&Ze(e,n=St.get(n)||n,r)}}function Qc(e,t,n,r,o,a){switch(n){case"style":kt(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"==typeof r?bt(e,r):("number"==typeof r||"bigint"==typeof r)&&bt(e,""+r);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:je.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(a=null!=(a=e[Ae]||null)?a[n]:null)&&e.removeEventListener(t,a,o),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):Ze(e,n,r):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function Zc(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rc("error",e),Rc("load",e);var r,o=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":o=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Kc(e,t,r,s,n,null)}}return a&&Kc(e,t,"srcSet",n.srcSet,n,null),void(o&&Kc(e,t,"src",n.src,n,null));case"input":Rc("invalid",e);var l=r=s=a=null,u=null,c=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":a=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:Kc(e,t,o,d,n,null)}}return pt(e,r,l,u,c,s,a,!1),void lt(e);case"select":for(a in Rc("invalid",e),o=s=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":o=l;default:Kc(e,t,a,l,n,null)}return t=r,n=s,e.multiple=!!o,void(null!=t?mt(e,!!o,t,!1):null!=n&&mt(e,!!o,n,!0));case"textarea":for(s in Rc("invalid",e),r=a=o=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":o=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:Kc(e,t,s,l,n,null)}return vt(e,o,a,r),void lt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))if("selected"===u)e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o;else Kc(e,t,u,o,n,null);return;case"dialog":Rc("beforetoggle",e),Rc("toggle",e),Rc("cancel",e),Rc("close",e);break;case"iframe":case"object":Rc("load",e);break;case"video":case"audio":for(o=0;o<Lc.length;o++)Rc(Lc[o],e);break;case"image":Rc("error",e),Rc("load",e);break;case"details":Rc("toggle",e);break;case"embed":case"source":case"link":Rc("error",e),Rc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Kc(e,t,c,o,n,null)}return;default:if(wt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&Qc(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&Kc(e,t,l,o,n,null))}var Jc=null,ed=null;function td(e){return 9===e.nodeType?e:e.ownerDocument}function nd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function rd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ad="function"==typeof setTimeout?setTimeout:void 0,sd="function"==typeof clearTimeout?clearTimeout:void 0,ld="function"==typeof Promise?Promise:void 0,ud="function"==typeof queueMicrotask?queueMicrotask:void 0!==ld?function(e){return ld.resolve(null).then(e).catch(cd)}:ad;function cd(e){setTimeout(function(){throw e})}function dd(e){return"head"===e}function hd(e,t){var n=t,i=0,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(1&n&&bd(a.documentElement),2&n&&bd(a.body),4&n)for(bd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[De]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===r)return e.removeChild(o),void Ph(t);r--}else"$"===n||"$?"===n||"$!"===n?r++:i=n.charCodeAt(0)-48;else i=0;n=o}while(n);Ph(t)}function fd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fd(n),Fe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function pd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function gd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var md=null;function yd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function vd(e,t,n){switch(t=td(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function bd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Fe(e)}var _d=new Map,Ed=new Set;function kd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var wd=L.d;L.d={f:function(){var e=wd.f(),t=Bu();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Pa(t):wd.r(e)},D:function(e){wd.D(e),xd("dns-prefetch",e,null)},C:function(e,t){wd.C(e,t),xd("preconnect",e,t)},L:function(e,t,n){wd.L(e,t,n);var i=Sd;if(i&&e&&t){var r='link[rel="preload"][as="'+ht(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ht(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(r+='[imagesizes="'+ht(n.imageSizes)+'"]')):r+='[href="'+ht(e)+'"]';var o=r;switch(t){case"style":o=Id(e);break;case"script":o=Ad(e)}_d.has(o)||(e=u({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),_d.set(o,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(Cd(o))||"script"===t&&i.querySelector(Pd(o))||(Zc(t=i.createElement("link"),"link",e),Ve(t),i.head.appendChild(t)))}},m:function(e,t){wd.m(e,t);var n=Sd;if(n&&e){var i=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+ht(i)+'"][href="'+ht(e)+'"]',o=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Ad(e)}if(!_d.has(o)&&(e=u({rel:"modulepreload",href:e},t),_d.set(o,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pd(o)))return}Zc(i=n.createElement("link"),"link",e),Ve(i),n.head.appendChild(i)}}},X:function(e,t){wd.X(e,t);var n=Sd;if(n&&e){var i=qe(n).hoistableScripts,r=Ad(e),o=i.get(r);o||((o=n.querySelector(Pd(r)))||(e=u({src:e,async:!0},t),(t=_d.get(r))&&Rd(e,t),Ve(o=n.createElement("script")),Zc(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}},S:function(e,t,n){wd.S(e,t,n);var i=Sd;if(i&&e){var r=qe(i).hoistableStyles,o=Id(e);t=t||"default";var a=r.get(o);if(!a){var s={loading:0,preload:null};if(a=i.querySelector(Cd(o)))s.loading=5;else{e=u({rel:"stylesheet",href:e,"data-precedence":t},n),(n=_d.get(o))&&Md(e,n);var l=a=i.createElement("link");Ve(l),Zc(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Od(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:s},r.set(o,a)}}},M:function(e,t){wd.M(e,t);var n=Sd;if(n&&e){var i=qe(n).hoistableScripts,r=Ad(e),o=i.get(r);o||((o=n.querySelector(Pd(r)))||(e=u({src:e,async:!0,type:"module"},t),(t=_d.get(r))&&Rd(e,t),Ve(o=n.createElement("script")),Zc(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}}};var Sd="undefined"==typeof document?null:document;function xd(e,t,n){var i=Sd;if(i&&"string"==typeof t&&t){var r=ht(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof n&&(r+='[crossorigin="'+n+'"]'),Ed.has(r)||(Ed.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(Zc(t=i.createElement("link"),"link",e),Ve(t),i.head.appendChild(t)))}}function Td(e,t,n,r){var o,a,s,l,u=(u=q.current)?kd(u):null;if(!u)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Id(n.href),(r=(n=qe(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Id(n.href);var c=qe(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Cd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),_d.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_d.set(e,n),c||(o=u,a=e,s=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=o.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Zc(a,"link",s),Ve(a),o.head.appendChild(a))))),t&&null===r)throw Error(i(528,""));return d}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Ad(n),(r=(n=qe(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Id(e){return'href="'+ht(e)+'"'}function Cd(e){return'link[rel="stylesheet"]['+e+"]"}function Nd(e){return u({},e,{"data-precedence":e.precedence,precedence:null})}function Ad(e){return'[src="'+ht(e)+'"]'}function Pd(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ht(n.href)+'"]');if(r)return t.instance=r,Ve(r),r;var o=u({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ve(r=(e.ownerDocument||e).createElement("style")),Zc(r,"style",o),Od(r,n.precedence,e),t.instance=r;case"stylesheet":o=Id(n.href);var a=e.querySelector(Cd(o));if(a)return t.state.loading|=4,t.instance=a,Ve(a),a;r=Nd(n),(o=_d.get(o))&&Md(r,o),Ve(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Zc(a,"link",r),t.state.loading|=4,Od(a,n.precedence,e),t.instance=a;case"script":return a=Ad(n.src),(o=e.querySelector(Pd(a)))?(t.instance=o,Ve(o),o):(r=n,(o=_d.get(a))&&Rd(r=u({},n),o),Ve(o=(e=e.ownerDocument||e).createElement("script")),Zc(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Od(r,n.precedence,e));return t.instance}function Od(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,o=r,a=0;a<i.length;a++){var s=i[a];if(s.dataset.precedence===t)o=s;else if(o!==r)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Rd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Dd=null;function Fd(e,t,n){if(null===Dd){var i=new Map,r=Dd=new Map;r.set(n,i)}else(i=(r=Dd).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var o=n[r];if(!(o[De]||o[Ne]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=i.get(a);s?s.push(o):i.set(a,[o])}}return i}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var qd=null;function Vd(){}function jd(){if(this.count--,0===this.count)if(this.stylesheets)Xd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Yd=null;function Xd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Yd=new Map,t.forEach(Qd,e),Yd=null,jd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Yd.get(e);if(n)var i=n.get(null);else{n=new Map,Yd.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var a=r[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}a=(r=t.instance).getAttribute("data-precedence"),(o=n.get(a)||i)===i&&n.set(null,r),n.set(a,r),this.count++,i=jd.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),o?o.parentNode.insertBefore(r,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Zd={$$typeof:v,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Jd(e,t,n,i,r,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function eh(e,t,n,i,r,o,a,s,l,u,c,d){return e=new Jd(e,t,n,a,s,l,u,d),t=1,!0===o&&(t|=24),o=Mi(3,null,null,t),e.current=o,o.stateNode=e,(t=Pr()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:t},eo(o),e}function th(e){return e?e=Li:Li}function nh(e,t,n,i,r,o){r=th(r),null===i.context?i.context=r:i.pendingContext=r,(i=no(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(i.callback=o),null!==(n=io(e,i,t))&&(Mu(n,0,t),ro(n,e,t))}function ih(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rh(e,t){ih(e,t),(e=e.alternate)&&ih(e,t)}function oh(e){if(13===e.tag){var t=Ni(e,67108864);null!==t&&Mu(t,0,67108864),rh(e,67108864)}}var ah=!0;function sh(e,t,n,i){var r=P.T;P.T=null;var o=L.p;try{L.p=2,uh(e,t,n,i)}finally{L.p=o,P.T=r}}function lh(e,t,n,i){var r=P.T;P.T=null;var o=L.p;try{L.p=8,uh(e,t,n,i)}finally{L.p=o,P.T=r}}function uh(e,t,n,i){if(ah){var r=ch(i);if(null===r)Uc(e,t,i,dh,n),kh(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return gh=wh(gh,e,t,n,i,r),!0;case"dragenter":return mh=wh(mh,e,t,n,i,r),!0;case"mouseover":return yh=wh(yh,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return vh.set(o,wh(vh.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,bh.set(o,wh(bh.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(kh(e,i),4&t&&-1<Eh.indexOf(e)){for(;null!==r;){var o=Be(r);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ge(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-ce(a);s.entanglements[1]|=l,a&=~l}_c(o),!(6&eu)&&(_u=Z()+500,Ec(0))}}break;case 13:null!==(s=Ni(o,2))&&Mu(s,0,2),Bu(),rh(o,2)}if(null===(o=ch(i))&&Uc(e,t,i,dh,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Uc(e,t,i,null,n)}}function ch(e){return hh(e=Ct(e))}var dh=null;function hh(e){if(dh=null,null!==(e=ze(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=a(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return dh=e,null}function fh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(J()){case ee:return 2;case te:return 8;case ne:case ie:return 32;case re:return 268435456;default:return 32}default:return 32}}var ph=!1,gh=null,mh=null,yh=null,vh=new Map,bh=new Map,_h=[],Eh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kh(e,t){switch(e){case"focusin":case"focusout":gh=null;break;case"dragenter":case"dragleave":mh=null;break;case"mouseover":case"mouseout":yh=null;break;case"pointerover":case"pointerout":vh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bh.delete(t.pointerId)}}function wh(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=Be(t))&&oh(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Sh(e){var t=ze(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=a(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=Lu();e=xe(e);var t=Ni(n,e);null!==t&&Mu(t,0,e),rh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ch(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&oh(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);It=i,n.target.dispatchEvent(i),It=null,t.shift()}return!0}function Th(e,t,n){xh(e)&&n.delete(t)}function Ih(){ph=!1,null!==gh&&xh(gh)&&(gh=null),null!==mh&&xh(mh)&&(mh=null),null!==yh&&xh(yh)&&(yh=null),vh.forEach(Th),bh.forEach(Th)}function Ch(t,n){t.blockedOn===n&&(t.blockedOn=null,ph||(ph=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ih)))}var Nh=null;function Ah(t){Nh!==t&&(Nh=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Nh===t&&(Nh=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if("function"!=typeof i){if(null===hh(i||n))continue;break}var o=Be(n);null!==o&&(t.splice(e,3),e-=3,Na(o,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Ph(e){function t(t){return Ch(t,e)}null!==gh&&Ch(gh,e),null!==mh&&Ch(mh,e),null!==yh&&Ch(yh,e),vh.forEach(t),bh.forEach(t);for(var n=0;n<_h.length;n++){var i=_h[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<_h.length&&null===(n=_h[0]).blockedOn;)Sh(n),null===n.blockedOn&&_h.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],o=n[i+1],a=r[Ae]||null;if("function"==typeof o)a||Ah(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(r=o,a=o[Ae]||null)s=a.formAction;else if(null!==hh(r))continue}else s=a.action;"function"==typeof s?n[i+1]=s:(n.splice(i,3),i-=3),Ah(n)}}}function Lh(e){this._internalRoot=e}function Oh(e){this._internalRoot=e}Oh.prototype.render=Lh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));nh(t.current,Lu(),e,t,null,null)},Oh.prototype.unmount=Lh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;nh(e.current,2,null,e,null,null),Bu(),t[Pe]=null}},Oh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_h.length&&0!==t&&t<_h[n].priority;n++);_h.splice(n,0,e),0===n&&Sh(e)}};var Mh=t.version;if("19.1.1"!==Mh)throw Error(i(527,Mh,"19.1.1"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(r=a.return)){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return s(a),e;if(l===r)return s(a),t;l=l.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=l;else{for(var u=!1,c=a.child;c;){if(c===n){u=!0,n=a,r=l;break}if(c===r){u=!0,r=a,n=l;break}c=c.sibling}if(!u){for(c=l.child;c;){if(c===n){u=!0,n=l,r=a;break}if(c===r){u=!0,r=l,n=a;break}c=c.sibling}if(!u)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?l(e):null)?null:e.stateNode};var Rh={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{se=Dh.inject(Rh),le=Dh}catch(zh){}}return Ud.createRoot=function(e,t){if(!r(e))throw Error(i(299));var n=!1,o="",a=ms,s=ys,l=vs;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=eh(e,1,!1,null,0,n,o,a,s,l,0,null),e[Pe]=t.current,zc(e),new Lh(t)},Ud.hydrateRoot=function(e,t,n){if(!r(e))throw Error(i(299));var o=!1,a="",s=ms,l=ys,u=vs,c=null;return null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=eh(e,1,!0,t,0,o,a,s,l,u,0,c)).context=th(null),n=t.current,(a=no(o=xe(o=Lu()))).callback=null,io(n,a,o),n=o,t.current.lanes=n,ke(t,n),_c(t),e[Pe]=t.current,zc(e),new Oh(t)},Ud.version="19.1.1",Ud}var Zd=(Yd||(Yd=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),Bd.exports=Qd()),Bd.exports);const Jd=new class{constructor(){this.cache=new Map,this.TTL=6e5}getKey(e,t){const n=JSON.stringify(e.map(e=>[e.lat,e.lng]));return`${this.simpleHash(n)}_${t}`}simpleHash(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t).toString(36)}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.TTL?(this.cache.delete(e),null):t.data:null}set(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}clear(){this.cache.clear()}};function eh(e){if(!e)return;const t=e.trim().toLowerCase();if("walk"===t)return 7;if("none"===t)return;const n=t.includes("mph"),i=parseFloat(t);return isFinite(i)?n?Math.round(1.60934*i):i:void 0}function th(e,t){const n=(()=>{switch((e||"").toLowerCase()){case"asphalt":case"concrete":case"concrete:lanes":case"concrete:plates":return.75;case"paving_stones":case"sett":case"cobblestone":case"compacted":return.55;case"gravel":return.45;case"fine_gravel":return.48;case"dirt":case"earth":case"ground":return.35;case"grass":return.3;case"sand":return.25;default:return}})();if(n){if(t){const e=t.toLowerCase();if(e.includes("good")||e.includes("excellent"))return Math.min(.85,n+.02);if(e.includes("bad")||e.includes("horrible"))return Math.max(.2,n-.05)}return n}}function nh(e){switch(e){case"dry":return 1;case"wet":return.75;case"snow":return.3;case"ice":return.15}}function ih(e){switch(e){case"hump":case"table":case"island":return 40;case"chicane":return 35;case"cushion":case"rumble_strip":return 45;default:return}}function rh(e,t){const n=(t.lat-e.lat)*Math.PI/180,i=(t.lng-e.lng)*Math.PI/180,r=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371e3*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function oh(e,t,n){const i=e.lat-t.lat,r=e.lng-t.lng,o=n.lat-t.lat,a=n.lng-t.lng,s=i*o+r*a,l=o*o+a*a;if(0===l)return{lat:t.lat,lng:t.lng,distance:rh(e,t)};const u=s/l;let c;return c=u<0?t:u>1?n:{lat:t.lat+u*o,lng:t.lng+u*a},{...c,distance:rh(e,c)}}class ah{constructor(e){this.osmData=null,this.config=e}setOsmData(e){this.osmData=e}updateConfig(e){this.config={...this.config,...e}}getConstraintsAt(e){if(!this.osmData)return{};const t={};return this.config.useMaxspeed&&(t.maxspeedCap=this.findMaxspeedAt(e)),this.config.useTrafficCalming&&(t.calmingCap=this.findCalmingCapAt(e)),this.config.useSurface&&(t.frictionMu=this.findFrictionAt(e)),t}findMaxspeedAt(e){if(!this.osmData)return;let t,n=1/0;for(const i of this.osmData.ways)if(i.tags.maxspeed&&!(i.nodes.length<2))for(let r=0;r<i.nodes.length-1;r++){const o=oh(e,{lat:i.nodes[r].lat,lng:i.nodes[r].lon},{lat:i.nodes[r+1].lat,lng:i.nodes[r+1].lon});if(o.distance<15&&o.distance<n){const e=eh(i.tags.maxspeed);void 0!==e&&(t=e,n=o.distance)}}return t}findCalmingCapAt(e){if(!this.osmData)return;let t;for(const n of this.osmData.calming){if(rh(e,{lat:n.lat,lng:n.lon})<=25){const e=ih(n.kind);void 0!==e&&(t=void 0===t?e:Math.min(t,e))}}return t}findFrictionAt(e){if(!this.osmData)return;let t,n=1/0;for(const i of this.osmData.ways)if(i.tags.surface&&!(i.nodes.length<2))for(let r=0;r<i.nodes.length-1;r++){const o=oh(e,{lat:i.nodes[r].lat,lng:i.nodes[r].lon},{lat:i.nodes[r+1].lat,lng:i.nodes[r+1].lon});if(o.distance<15&&o.distance<n){const e=th(i.tags.surface,i.tags.smoothness);void 0!==e&&(t=e*nh(this.config.weather),n=o.distance)}}return t}applyConstraints(e,t,n){let i=e;if(void 0!==t.maxspeedCap&&(i=Math.min(i,t.maxspeedCap)),void 0!==t.calmingCap&&(i=Math.min(i,t.calmingCap)),void 0!==t.frictionMu&&void 0!==n&&n>0){const e=9.81,r=3.6*Math.sqrt(t.frictionMu*e*.95*n);i=Math.min(i,r)}return i}getFrictionLimitedAcceleration(e,t=0){if(!e.frictionMu)return;const n=9.81*e.frictionMu,i=Math.min(1,Math.abs(t)/n);return n*Math.sqrt(1-i*i)}}const sh={};var lh=6371008.8,uh={centimeters:637100880,centimetres:637100880,degrees:360/(2*Math.PI),feet:20902260.511392,inches:39.37*lh,kilometers:6371.0088,kilometres:6371.0088,meters:lh,metres:lh,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:lh/1852,radians:1,yards:6967335.223679999};function ch(e,t,n={}){const i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function dh(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!mh(e[0])||!mh(e[1]))throw new Error("coordinates must contain numbers");return ch({type:"Point",coordinates:e},t,n)}function hh(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return ch({type:"LineString",coordinates:e},t,n)}function fh(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function ph(e,t="kilometers"){const n=uh[t];if(!n)throw new Error(t+" units is invalid");return e*n}function gh(e){return e%360*Math.PI/180}function mh(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}const yh=134217729;function vh(e,t,n,i,r){let o,a,s,l,u=t[0],c=i[0],d=0,h=0;c>u==c>-u?(o=u,u=t[++d]):(o=c,c=i[++h]);let f=0;if(d<e&&h<n)for(c>u==c>-u?(a=u+o,s=o-(a-u),u=t[++d]):(a=c+o,s=o-(a-c),c=i[++h]),o=a,0!==s&&(r[f++]=s);d<e&&h<n;)c>u==c>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d]):(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++h]),o=a,0!==s&&(r[f++]=s);for(;d<e;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d],o=a,0!==s&&(r[f++]=s);for(;h<n;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++h],o=a,0!==s&&(r[f++]=s);return 0===o&&0!==f||(r[f++]=o),f}function bh(e){return new Float64Array(e)}const _h=bh(4),Eh=bh(8),kh=bh(12),wh=bh(16),Sh=bh(4);function xh(e,t,n,i,r,o){const a=(t-o)*(n-r),s=(e-r)*(i-o),l=a-s,u=Math.abs(a+s);return Math.abs(l)>=33306690738754716e-32*u?l:-function(e,t,n,i,r,o,a){let s,l,u,c,d,h,f,p,g,m,y,v,b,_,E,k,w,S;const x=e-r,T=n-r,I=t-o,C=i-o;_=x*C,h=yh*x,f=h-(h-x),p=x-f,h=yh*C,g=h-(h-C),m=C-g,E=p*m-(_-f*g-p*g-f*m),k=I*T,h=yh*I,f=h-(h-I),p=I-f,h=yh*T,g=h-(h-T),m=T-g,w=p*m-(k-f*g-p*g-f*m),y=E-w,d=E-y,_h[0]=E-(y+d)+(d-w),v=_+y,d=v-_,b=_-(v-d)+(y-d),y=b-k,d=b-y,_h[1]=b-(y+d)+(d-k),S=v+y,d=S-v,_h[2]=v-(S-d)+(y-d),_h[3]=S;let N=function(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}(4,_h),A=22204460492503146e-32*a;if(N>=A||-N>=A)return N;if(d=e-x,s=e-(x+d)+(d-r),d=n-T,u=n-(T+d)+(d-r),d=t-I,l=t-(I+d)+(d-o),d=i-C,c=i-(C+d)+(d-o),0===s&&0===l&&0===u&&0===c)return N;if(A=11093356479670487e-47*a+33306690738754706e-32*Math.abs(N),N+=x*c+C*s-(I*u+T*l),N>=A||-N>=A)return N;_=s*C,h=yh*s,f=h-(h-s),p=s-f,h=yh*C,g=h-(h-C),m=C-g,E=p*m-(_-f*g-p*g-f*m),k=l*T,h=yh*l,f=h-(h-l),p=l-f,h=yh*T,g=h-(h-T),m=T-g,w=p*m-(k-f*g-p*g-f*m),y=E-w,d=E-y,Sh[0]=E-(y+d)+(d-w),v=_+y,d=v-_,b=_-(v-d)+(y-d),y=b-k,d=b-y,Sh[1]=b-(y+d)+(d-k),S=v+y,d=S-v,Sh[2]=v-(S-d)+(y-d),Sh[3]=S;const P=vh(4,_h,4,Sh,Eh);_=x*c,h=yh*x,f=h-(h-x),p=x-f,h=yh*c,g=h-(h-c),m=c-g,E=p*m-(_-f*g-p*g-f*m),k=I*u,h=yh*I,f=h-(h-I),p=I-f,h=yh*u,g=h-(h-u),m=u-g,w=p*m-(k-f*g-p*g-f*m),y=E-w,d=E-y,Sh[0]=E-(y+d)+(d-w),v=_+y,d=v-_,b=_-(v-d)+(y-d),y=b-k,d=b-y,Sh[1]=b-(y+d)+(d-k),S=v+y,d=S-v,Sh[2]=v-(S-d)+(y-d),Sh[3]=S;const L=vh(P,Eh,4,Sh,kh);_=s*c,h=yh*s,f=h-(h-s),p=s-f,h=yh*c,g=h-(h-c),m=c-g,E=p*m-(_-f*g-p*g-f*m),k=l*u,h=yh*l,f=h-(h-l),p=l-f,h=yh*u,g=h-(h-u),m=u-g,w=p*m-(k-f*g-p*g-f*m),y=E-w,d=E-y,Sh[0]=E-(y+d)+(d-w),v=_+y,d=v-_,b=_-(v-d)+(y-d),y=b-k,d=b-y,Sh[1]=b-(y+d)+(d-k),S=v+y,d=S-v,Sh[2]=v-(S-d)+(y-d),Sh[3]=S;const O=vh(L,kh,4,Sh,wh);return wh[O-1]}(e,t,n,i,r,o,u)}function Th(e,t){var n,i,r,o,a,s,l,u,c,d=0,h=e[0],f=e[1],p=t.length;for(n=0;n<p;n++){i=0;var g=t[n],m=g.length-1;if((u=g[0])[0]!==g[m][0]&&u[1]!==g[m][1])throw new Error("First and last coordinates in a ring must be the same");for(o=u[0]-h,a=u[1]-f;i<m;i++){if(s=(c=g[i+1])[0]-h,l=c[1]-f,0===a&&0===l){if(s<=0&&o>=0||o<=0&&s>=0)return 0}else if(l>=0&&a<=0||l<=0&&a>=0){if(0===(r=xh(o,s,a,l,0,0)))return 0;(r>0&&l>0&&a<=0||r<0&&l<=0&&a>0)&&d++}u=c,a=l,o=s}}return d%2!=0}function Ih(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return[...e.geometry.coordinates];if("Point"===e.type)return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}var Ch=function(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const i=Ih(e),r="Feature"===(o=t).type?o.geometry:o;var o;const a=r.type,s=t.bbox;let l=r.coordinates;if(s&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(i,s))return!1;"Polygon"===a&&(l=[l]);let u=!1;for(var c=0;c<l.length;++c){const e=Th(i,l[c]);if(0===e)return!n.ignoreBoundary;e&&(u=!0)}return u};class Nh{constructor(e=[],t=Ah){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(n(i,o)>=0)break;t[e]=o,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1),o=t[i];const a=i+1;if(a<this.length&&n(t[a],o)<0&&(i=a,o=t[a]),n(o,r)>=0)break;t[e]=o,e=i}t[e]=r}}function Ah(e,t){return e<t?-1:e>t?1:0}function Ph(e,t){return e.p.x>t.p.x?1:e.p.x<t.p.x?-1:e.p.y!==t.p.y?e.p.y>t.p.y?1:-1:1}function Lh(e,t){return e.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?e.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}let Oh=class{constructor(e,t,n,i){this.p={x:e[0],y:e[1]},this.featureId=t,this.ringId=n,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}};let Mh=0,Rh=0,Dh=0;function Fh(e,t){const n="Feature"===e.type?e.geometry:e;let i=n.coordinates;"Polygon"!==n.type&&"MultiLineString"!==n.type||(i=[i]),"LineString"===n.type&&(i=[[i]]);for(let r=0;r<i.length;r++)for(let e=0;e<i[r].length;e++){let n=i[r][e][0],o=null;Rh+=1;for(let a=0;a<i[r][e].length-1;a++){o=i[r][e][a+1];const s=new Oh(n,Mh,Rh,Dh),l=new Oh(o,Mh,Rh,Dh+1);s.otherEvent=l,l.otherEvent=s,Ph(s,l)>0?(l.isLeftEndpoint=!0,s.isLeftEndpoint=!1):(s.isLeftEndpoint=!0,l.isLeftEndpoint=!1),t.push(s),t.push(l),n=o,Dh+=1}}Mh+=1}class zh{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function Bh(e,t){if(null===e||null===t)return!1;if(e.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.rightSweepEvent)||e.leftSweepEvent.isSamePoint(t.leftSweepEvent)||e.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;const n=e.leftSweepEvent.p.x,i=e.leftSweepEvent.p.y,r=e.rightSweepEvent.p.x,o=e.rightSweepEvent.p.y,a=t.leftSweepEvent.p.x,s=t.leftSweepEvent.p.y,l=t.rightSweepEvent.p.x,u=t.rightSweepEvent.p.y,c=(u-s)*(r-n)-(l-a)*(o-i),d=(l-a)*(i-s)-(u-s)*(n-a),h=(r-n)*(i-s)-(o-i)*(n-a);if(0===c)return!1;const f=d/c,p=h/c;if(f>=0&&f<=1&&p>=0&&p<=1){return[n+f*(r-n),i+f*(o-i)]}return!1}var Uh=function(e,t){const n=new Nh([],Ph);return function(e,t){if("FeatureCollection"===e.type){const n=e.features;for(let e=0;e<n.length;e++)Fh(n[e],t)}else Fh(e,t)}(e,n),function(e,t){t=t||!1;const n=[],i=new Nh([],Lh);for(;e.length;){const r=e.pop();if(r.isLeftEndpoint){const e=new zh(r);for(let o=0;o<i.data.length;o++){const a=i.data[o];if(t&&a.leftSweepEvent.featureId===r.featureId)continue;const s=Bh(e,a);!1!==s&&n.push(s)}i.push(e)}else!1===r.isLeftEndpoint&&i.pop()}return n}(n,t)};var qh=function(e,t,n={}){const{removeDuplicates:i=!0,ignoreSelfIntersections:r=!0}=n;let o=[];"FeatureCollection"===e.type?o=o.concat(e.features):"Feature"===e.type?o.push(e):"LineString"!==e.type&&"Polygon"!==e.type&&"MultiLineString"!==e.type&&"MultiPolygon"!==e.type||o.push(ch(e)),"FeatureCollection"===t.type?o=o.concat(t.features):"Feature"===t.type?o.push(t):"LineString"!==t.type&&"Polygon"!==t.type&&"MultiLineString"!==t.type&&"MultiPolygon"!==t.type||o.push(ch(t));const a=Uh(fh(o),r);let s=[];if(i){const e={};a.forEach(t=>{const n=t.join(",");e[n]||(e[n]=!0,s.push(t))})}else s=a;return fh(s.map(e=>dh(e)))};function Vh(e,t,n){if(null!==e)for(var i,r,o,a,s,l,u,c,d=0,h=0,f=e.type,p="FeatureCollection"===f,g="Feature"===f,m=p?e.features.length:1,y=0;y<m;y++){s=(c=!!(u=p?e.features[y].geometry:g?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var b=0,_=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var E=a.type;switch(d=0,E){case null:break;case"Point":if(!1===t(l,h,y,b,_))return!1;h++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===t(l[i],h,y,b,_))return!1;h++,"MultiPoint"===E&&b++}"LineString"===E&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-d;r++){if(!1===t(l[i][r],h,y,b,_))return!1;h++}"MultiLineString"===E&&b++,"Polygon"===E&&_++}"Polygon"===E&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(_=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-d;o++){if(!1===t(l[i][r][o],h,y,b,_))return!1;h++}_++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===Vh(a.geometries[i],t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Gh(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function jh(e,t){var n,i,r,o,a,s,l,u,c,d,h=0,f="FeatureCollection"===e.type,p="Feature"===e.type,g=f?e.features.length:1;for(n=0;n<g;n++){for(s=f?e.features[n].geometry:p?e.geometry:e,u=f?e.features[n].properties:p?e.properties:{},c=f?e.features[n].bbox:p?e.bbox:void 0,d=f?e.features[n].id:p?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,h,u,c,d))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],h,u,c,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,u,c,d))return!1;h++}}function $h(e,t){!function(e,t){jh(e,function(e,n,i,r,o){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(ch(e,i,{bbox:r,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<e.coordinates.length;l++){var u=e.coordinates[l];if(!1===t(ch({type:a,coordinates:u},i),n,l))return!1}})}(e,function(e,n,i){var r=0;if(e.geometry){var o=e.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,u=0;return!1!==Vh(e,function(o,c,d,h,f){if(void 0===a||n>s||h>l||f>u)return a=o,s=n,l=h,u=f,void(r=0);var p=hh([a,o],e.properties);if(!1===t(p,n,i,f,r))return!1;r++,a=o})&&void 0}}})}function Hh(e,t={}){const n=function(e,t={}){if(null!=e.bbox&&!0!==t.recompute)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return Vh(e,e=>{n[0]>e[0]&&(n[0]=e[0]),n[1]>e[1]&&(n[1]=e[1]),n[2]<e[0]&&(n[2]=e[0]),n[3]<e[1]&&(n[3]=e[1])}),n}(e);return dh([(n[0]+n[2])/2,(n[1]+n[3])/2],t.properties,t)}var Yh,Wh={exports:{}};var Xh=(Yh||(Yh=1,Wh.exports=function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function t(e,t,n){return t=l(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){if(c())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&d(r,n.prototype),r}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,p(i.key),i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},s.apply(null,arguments)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(c=function(){return!!e})()}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,i){var r=s(l(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof r?function(e){return r.apply(n,e)}:r}function f(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function g(t,n){if(t){if("string"==typeof t)return e(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return i(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},m(e)}var y=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=e.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=e.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==e.JOIN_ROUND&&(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(e){this._joinStyle=e}},{key:"setSimplifyFactor",value:function(e){this._simplifyFactor=e<0?0:e}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(e){this._endCapStyle=e}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(e){this._mitreLimit=e}},{key:"setSingleSided",value:function(e){this._isSingleSided=e}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}}},{key:"bufferDistanceError",value:function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)}}])}();y.CAP_ROUND=1,y.CAP_FLAT=2,y.CAP_SQUARE=3,y.JOIN_ROUND=1,y.JOIN_MITRE=2,y.JOIN_BEVEL=3,y.DEFAULT_QUADRANT_SEGMENTS=8,y.DEFAULT_MITRE_LIMIT=5,y.DEFAULT_SIMPLIFY_FACTOR=.01;var v=function(e){function i(e){var r;return n(this,i),(r=t(this,i,[e])).name=Object.keys({Exception:i})[0],r}return u(i,e),o(i,[{key:"toString",value:function(){return this.message}}])}(m(Error)),b=function(e){function i(e){var r;return n(this,i),(r=t(this,i,[e])).name=Object.keys({IllegalArgumentException:i})[0],r}return u(i,e),o(i)}(v),_=o(function e(){n(this,e)},[{key:"filter",value:function(e){}}]);function E(){}function k(){}function w(){}var S,x,T,I,C,N,A,P,L=o(function e(){n(this,e)},null,[{key:"equalsWithTolerance",value:function(e,t,n){return Math.abs(e-t)<=n}}]),O=o(function e(t,i){n(this,e),this.low=i||0,this.high=t||0},null,[{key:"toBinaryString",value:function(e){var t,n="";for(t=2147483648;t>0;t>>>=1)n+=(e.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)n+=(e.low&t)===t?"1":"0";return n}}]);function M(){}function R(){}M.NaN=NaN,M.isNaN=function(e){return Number.isNaN(e)},M.isInfinite=function(e){return!Number.isFinite(e)},M.MAX_VALUE=Number.MAX_VALUE,M.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,M.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(N=2146435072,A=new Float64Array(1),P=new Int32Array(A.buffer),M.doubleToLongBits=function(e){A[0]=e;var t=0|P[0],n=0|P[1];return(n&N)===N&&1048575&n&&0!==t&&(t=0,n=2146959360),new O(n,t)},M.longBitsToDouble=function(e){return P[0]=e.low,P[1]=e.high,A[0]}):(S=1023,x=Math.log2,T=Math.floor,I=Math.pow,C=function(){for(var e=53;e>0;e--){var t=I(2,e)-1;if(T(x(t))+1===e)return t}return 0}(),M.doubleToLongBits=function(e){var t,n,i,r,o,a,s,l,u;if(e<0||1/e===Number.NEGATIVE_INFINITY?(a=1<<31,e=-e):a=0,0===e)return new O(l=a,u=0);if(e===1/0)return new O(l=2146435072|a,u=0);if(e!=e)return new O(l=2146959360,u=0);if(r=0,u=0,(t=T(e))>1)if(t<=C)(r=T(x(t)))<=20?(u=0,l=t<<20-r&1048575):(u=t%(n=I(2,i=r-20))<<32-i,l=t/n&1048575);else for(i=t,u=0;0!==(i=T(n=i/2));)r++,u>>>=1,u|=(1&l)<<31,l>>>=1,n!==i&&(l|=524288);if(s=r+S,o=0===t,t=e-t,r<52&&0!==t)for(i=0;;){if((n=2*t)>=1?(t=n-1,o?(s--,o=!1):(i<<=1,i|=1,r++)):(t=n,o?0==--s&&(r++,o=!1):(i<<=1,r++)),20===r)l|=i,i=0;else if(52===r){u|=i;break}if(1===n){r<20?l|=i<<20-r:r<52&&(u|=i<<52-r);break}}return l|=s<<20,new O(l|=a,u)},M.longBitsToDouble=function(e){var t,n,i,r,o=e.high,a=e.low,s=o&1<<31?-1:1;for(i=((2146435072&o)>>20)-S,r=0,n=1<<19,t=1;t<=20;t++)o&n&&(r+=I(2,-t)),n>>>=1;for(n=1<<31,t=21;t<=52;t++)a&n&&(r+=I(2,-t)),n>>>=1;if(-1023===i){if(0===r)return 0*s;i=-1022}else{if(1024===i)return 0===r?s/0:NaN;r+=1}return s*r*I(2,i)});var D=function(e){function i(e){var r;return n(this,i),(r=t(this,i,[e])).name=Object.keys({RuntimeException:i})[0],r}return u(i,e),o(i)}(v),F=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,null,[{key:"constructor_",value:function(){if(0===arguments.length)D.constructor_.call(this);else if(1===arguments.length){var e=arguments[0];D.constructor_.call(this,e)}}}])}(D),z=function(){function e(){n(this,e)}return o(e,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)e.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new F("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1===arguments.length){var t=arguments[0];e.isTrue(t,null)}else if(2===arguments.length){var n=arguments[1];if(!arguments[0])throw null===n?new F:new F(n)}}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];e.equals(t,n,null)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(!r.equals(i))throw new F("Expected "+i+" but encountered "+r+(null!==o?": "+o:""))}}}])}(),B=new ArrayBuffer(8),U=new Float64Array(B),q=new Int32Array(B),V=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getM",value:function(){return M.NaN}},{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.setZ(n);break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!L.equalsWithTolerance(this.x,t.x,n)&&!!L.equalsWithTolerance(this.y,t.y,n)}}},{key:"setM",value:function(t){throw new b("Invalid ordinate index: "+e.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.getZ()}throw new b("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(e){return this.x===e.x&&this.y===e.y&&(this.getZ()===e.getZ()||M.isNaN(this.getZ())&&M.isNaN(e.getZ()))}},{key:"equals",value:function(t){return t instanceof e&&this.equals2D(t)}},{key:"equalInZ",value:function(e,t){return L.equalsWithTolerance(this.getZ(),e.getZ(),t)}},{key:"setX",value:function(e){this.x=e}},{key:"compareTo",value:function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(e){this.z=e}},{key:"clone",value:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return z.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.getZ()-e.getZ();return Math.sqrt(t*t+n*n+i*i)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(e){this.y=e}},{key:"distance",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*t+e.hashCode(this.x))+e.hashCode(this.y)}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}},{key:"interfaces_",get:function(){return[E,k,w]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)e.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){var n=arguments[0],i=arguments[1];e.constructor_.call(this,n,i,e.NULL_ORDINATE)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.x=r,this.y=o,this.z=a}}},{key:"hashCode",value:function(e){return U[0]=e,q[0]^q[1]}}])}(),G=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"compare",value:function(t,n){var i=e.compare(t.x,n.x);if(0!==i)return i;var r=e.compare(t.y,n.y);return 0!==r?r:this._dimensionsToTest<=2?0:e.compare(t.getZ(),n.getZ())}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)e.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new b("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(e,t){return e<t?-1:e>t?1:M.isNaN(e)?M.isNaN(t)?0:-1:M.isNaN(t)?1:0}}])}();V.DimensionalComparator=G,V.NULL_ORDINATE=M.NaN,V.X=0,V.Y=1,V.Z=2,V.M=3;var j=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny;return new e(n,this._maxx<t._maxx?this._maxx:t._maxx,i,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof e){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof V){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){if(arguments[0]instanceof V&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1];return!(this.isNull()||(i.x<r.x?i.x:r.x)>this._maxx||(i.x>r.x?i.x:r.x)<this._minx||(i.y<r.y?i.y:r.y)>this._maxy||(i.y>r.y?i.y:r.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||a>this._maxy||a<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return Math.sqrt(e*e+t*t)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=r,this._maxy=r):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0}},{key:"translate",value:function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(e){return!(!this.isNull()&&!e.isNull())||e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}},{key:"expandBy",value:function(){if(1===arguments.length){var e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof V){var n=arguments[0];return this.covers(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.covers(i,r)}}},{key:"centre",value:function(){return this.isNull()?null:new V((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];o<a?(this._minx=o,this._maxx=a):(this._minx=a,this._maxx=o),s<l?(this._miny=s,this._maxy=l):(this._miny=l,this._maxy=s)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return 37*(e=37*(e=37*(e=37*e+V.hashCode(this._minx))+V.hashCode(this._maxx))+V.hashCode(this._miny))+V.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[E,w]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}}},{key:"intersects",value:function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(u>l||c<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(i.y,r.y),c=Math.max(i.y,r.y),u>l||c<s))}}}])}(),$=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(e){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(e){return this===e||this.equalsExact(e,0)}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(e){return null!==e&&this.norm().equalsExact(e.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var e;if(1===arguments.length){var t=arguments[0];return e=t,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return e=n,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION)throw new b("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n}},{key:"norm",value:function(){var e=this.copy();return e.normalize(),e}},{key:"reverse",value:function(){var e=this.reverseInternal();return null!=this.envelope&&(e.envelope=this.envelope.copy()),e.setSRID(this.getSRID()),e}},{key:"copy",value:function(){var e=this.copyInternal();return e.envelope=null==this._envelope?null:this._envelope.copy(),e._SRID=this._SRID,e._userData=this._userData,e}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new j(this._envelope)}},{key:"setSRID",value:function(e){this._SRID=e}},{key:"setUserData",value:function(e){this._userData=e}},{key:"compare",value:function(e,t){for(var n=e.iterator(),i=t.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(e){return this.getClass()===e.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===e.TYPECODE_MULTIPOINT||this.getTypeCode()===e.TYPECODE_MULTILINESTRING||this.getTypeCode()===e.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[k,E,w]}},{key:"getClass",value:function(){return e}}],[{key:"hasNonEmptyElements",value:function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1}}])}();$.constructor_=function(e){e&&(this._envelope=null,this._userData=null,this._factory=e,this._SRID=e.getSRID())},$.TYPECODE_POINT=0,$.TYPECODE_MULTIPOINT=1,$.TYPECODE_LINESTRING=2,$.TYPECODE_LINEARRING=3,$.TYPECODE_MULTILINESTRING=4,$.TYPECODE_POLYGON=5,$.TYPECODE_MULTIPOLYGON=6,$.TYPECODE_GEOMETRYCOLLECTION=7,$.TYPENAME_POINT="Point",$.TYPENAME_MULTIPOINT="MultiPoint",$.TYPENAME_LINESTRING="LineString",$.TYPENAME_LINEARRING="LinearRing",$.TYPENAME_MULTILINESTRING="MultiLineString",$.TYPENAME_POLYGON="Polygon",$.TYPENAME_MULTIPOLYGON="MultiPolygon",$.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",$.geometryChangedFilter={get interfaces_(){return[_]},filter:function(e){e.geometryChangedAction()}};var H=function(){function e(){n(this,e)}return o(e,null,[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new b("Unknown location value: "+t)}}])}();H.INTERIOR=0,H.BOUNDARY=1,H.EXTERIOR=2,H.NONE=-1;var Y=o(function e(){n(this,e)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),W=function(e){function i(e){var r;return n(this,i),(r=t(this,i,[e])).name=Object.keys({NoSuchElementException:i})[0],r}return u(i,e),o(i)}(v),X=function(e){function i(e){var r;return n(this,i),(r=t(this,i,[e])).name=Object.keys({UnsupportedOperationException:i})[0],r}return u(i,e),o(i)}(v),K=function(e){function i(){return n(this,i),t(this,i,arguments)}return u(i,e),o(i,[{key:"contains",value:function(){}}])}(Y),Q=function(e){function i(e){var r;return n(this,i),(r=t(this,i)).map=new Map,e instanceof Y&&r.addAll(e),r}return u(i,e),o(i,[{key:"contains",value:function(e){var t=e.hashCode?e.hashCode():e;return!!this.map.has(t)}},{key:"add",value:function(e){var t=e.hashCode?e.hashCode():e;return!this.map.has(t)&&!!this.map.set(t,e)}},{key:"addAll",value:function(e){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.add(i)}}catch(r){n.e(r)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new X}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Z(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(K),Z=o(function e(t){n(this,e),this.iterator=t.values();var i=this.iterator.next(),r=i.done,o=i.value;this.done=r,this.value=o},[{key:"next",value:function(){if(this.done)throw new W;var e=this.value,t=this.iterator.next(),n=t.done,i=t.value;return this.done=n,this.value=i,e}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new X}}]),J=function(){function e(){n(this,e)}return o(e,null,[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}])}();J.ON=0,J.LEFT=1,J.RIGHT=2;var ee=function(e){function i(e){var r;return n(this,i),(r=t(this,i,[e])).name=Object.keys({EmptyStackException:i})[0],r}return u(i,e),o(i)}(v),te=function(e){function i(e){var r;return n(this,i),(r=t(this,i,[e])).name=Object.keys({IndexOutOfBoundsException:i})[0],r}return u(i,e),o(i)}(v),ne=function(e){function i(){return n(this,i),t(this,i,arguments)}return u(i,e),o(i,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Y),ie=function(e){function i(){var e;return n(this,i),(e=t(this,i)).array=[],e}return u(i,e),o(i,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new te;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(0===this.array.length)throw new ee;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new ee;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(ne);function re(e,t){return e.interfaces_&&e.interfaces_.indexOf(t)>-1}var oe=o(function e(t){n(this,e),this.str=t},[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),ae=function(){function e(t){n(this,e),this.value=t}return o(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(e){return this.value<e?-1:this.value>e?1:0}}],[{key:"compare",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"isNan",value:function(e){return Number.isNaN(e)}},{key:"valueOf",value:function(t){return new e(t)}}])}(),se=o(function e(){n(this,e)},null,[{key:"isWhitespace",value:function(e){return e<=32&&e>=0||127===e}},{key:"toUpperCase",value:function(e){return e.toUpperCase()}}]),le=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"le",value:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo}},{key:"extractSignificantDigits",value:function(t,n){var i=this.abs(),r=e.magnitude(i._hi),o=e.TEN.pow(r);(i=i.divide(o)).gt(e.TEN)?(i=i.divide(e.TEN),r+=1):i.lt(e.ONE)&&(i=i.multiply(e.TEN),r-=1);for(var a=r+1,s=new oe,l=e.MAX_PRINT_DIGITS-1,u=0;u<=l;u++){t&&u===a&&s.append(".");var c=Math.trunc(i._hi);if(c<0)break;var d=!1,h=0;c>9?(d=!0,h="9"):h="0"+c,s.append(h),i=i.subtract(e.valueOf(c)).multiply(e.TEN),d&&i.selfAdd(e.TEN);var f=!0,p=e.magnitude(i._hi);if(p<0&&Math.abs(p)>=l-u&&(f=!1),!f)break}return n[0]=r,s.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof e){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(e){return this.le(e)?this:e}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2===arguments.length){var i,r,o,a,s=arguments[0],l=arguments[1],u=null,c=null,d=null,h=null;return o=this._hi/s,h=(u=(d=e.SPLIT*o)-(u=d-o))*(c=(h=e.SPLIT*s)-(c=h-s))-(a=o*s)+u*(r=s-c)+(i=o-u)*c+i*r,h=o+(d=(this._hi-a-h+this._lo-o*l)/s),this._hi=h,this._lo=o-h+d,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof e){var t,n,i,r,o=arguments[0],a=null,s=null,l=null,u=null;return t=(i=this._hi/o._hi)-(a=(l=e.SPLIT*i)-(a=l-i)),u=a*(s=(u=e.SPLIT*o._hi)-(s=u-o._hi))-(r=i*o._hi)+a*(n=o._hi-s)+t*s+t*n,new e(u=i+(l=(this._hi-r-u+this._lo-i*o._lo)/o._hi),i-u+l)}if("number"==typeof arguments[0]){var c=arguments[0];return M.isNaN(c)?e.createNaN():e.copy(this).selfDivide(c,0)}}},{key:"ge",value:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),i=e.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(n),(r/=2)>0&&(n=n.sqr());else i=n;return t<0?i.reciprocal():i}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new e(t,n)}},{key:"compareTo",value:function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}}},{key:"max",value:function(e){return this.ge(e)?this:e}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,i=e.valueOf(n),r=this.subtract(i.sqr())._hi*(.5*t);return i.add(r)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n,i,r,o,a,s=arguments[0],l=null;return l=(r=this._hi+s)-(o=r-this._hi),i=(a=(l=s-o+(this._hi-l))+this._lo)+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var u,c,d,h,f=arguments[0],p=arguments[1],g=null,m=null,y=null;d=this._hi+f,c=this._lo+p,m=d-(y=d-this._hi),g=c-(h=c-this._lo);var v=(u=d+(y=(m=f-y+(this._hi-m))+c))+(y=(g=p-h+(this._lo-g))+(y+(d-u))),b=y+(u-v);return this._hi=v,this._lo=b,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2===arguments.length){var i,r,o=arguments[0],a=arguments[1],s=null,l=null,u=null,c=null;s=(u=e.SPLIT*this._hi)-this._hi,c=e.SPLIT*o,s=u-s,i=this._hi-s,l=c-o;var d=(u=this._hi*o)+(c=s*(l=c-l)-u+s*(r=o-l)+i*l+i*r+(this._hi*a+this._lo*o)),h=c+(s=u-d);return this._hi=d,this._lo=h,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return null;throw e}}},{key:"multiply",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return t.isNaN()?e.createNaN():e.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var n=arguments[0];return M.isNaN(n)?e.createNaN():e.copy(this).selfMultiply(n,0)}}},{key:"isNaN",value:function(){return M.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=e.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!0,n),r=n[0]+1,o=i;if("."===i.charAt(0))o="0"+i;else if(r<0)o="0."+e.stringOfChar("0",-r)+i;else if(-1===i.indexOf(".")){var a=r-i.length;o=i+e.stringOfChar("0",a)+".0"}return this.isNegative()?"-"+o:o}},{key:"reciprocal",value:function(){var t,n,i,r,o=null,a=null,s=null,l=null;t=(i=1/this._hi)-(o=(s=e.SPLIT*i)-(o=s-i)),a=(l=e.SPLIT*this._hi)-this._hi;var u=i+(s=(1-(r=i*this._hi)-(l=o*(a=l-a)-r+o*(n=this._hi-a)+t*a+t*n)-i*this._lo)/this._hi);return new e(u,i-u+s)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!1,n),r=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===i.charAt(0))throw new IllegalStateException("Found leading zero: "+i);var o="";i.length>1&&(o=i.substring(1));var a=i.charAt(0)+"."+o;return this.isNegative()?"-"+a+r:a+r}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo}},{key:"add",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return e.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var n=arguments[0];return e.copy(this).selfAdd(n)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof e){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this._hi=i,this._lo=r}}},{key:"gt",value:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[w,E,k]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];e.constructor_.call(this,e.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];return e.determinant(e.valueOf(t),e.valueOf(n),e.valueOf(i),e.valueOf(r))}if(arguments[3]instanceof e&&arguments[2]instanceof e&&arguments[0]instanceof e&&arguments[1]instanceof e){var o=arguments[1],a=arguments[2],s=arguments[3];return arguments[0].multiply(s).selfSubtract(o.multiply(a))}}},{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var t=arguments[0];return e.parse(t)}if("number"==typeof arguments[0])return new e(arguments[0])}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,i=t.length;se.isWhitespace(t.charAt(n));)n++;var r=!1;if(n<i){var o=t.charAt(n);"-"!==o&&"+"!==o||(n++,"-"===o&&(r=!0))}for(var a=new e,s=0,l=0,u=0,c=!1;!(n>=i);){var d=t.charAt(n);if(n++,se.isDigit(d)){var h=d-"0";a.selfMultiply(e.TEN),a.selfAdd(h),s++}else{if("."!==d){if("e"===d||"E"===d){var f=t.substring(n);try{u=ae.parseInt(f)}catch(v){throw v instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+f+" in string "+t):v}break}throw new NumberFormatException("Unexpected character '"+d+"' at position "+n+" in string "+t)}l=s,c=!0}}var p=a;c||(l=s);var g=s-l-u;if(0===g)p=a;else if(g>0){var m=e.TEN.pow(g);p=a.divide(m)}else if(g<0){var y=e.TEN.pow(-g);p=a.multiply(y)}return r?p.negate():p}},{key:"createNaN",value:function(){return new e(M.NaN,M.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=t&&(i+=1),i}},{key:"stringOfChar",value:function(e,t){for(var n=new oe,i=0;i<t;i++)n.append(e);return n.toString()}}])}();le.PI=new le(3.141592653589793,12246467991473532e-32),le.TWO_PI=new le(6.283185307179586,24492935982947064e-32),le.PI_2=new le(1.5707963267948966,6123233995736766e-32),le.E=new le(2.718281828459045,14456468917292502e-32),le.NaN=new le(M.NaN,M.NaN),le.EPS=123259516440783e-46,le.SPLIT=134217729,le.MAX_PRINT_DIGITS=32,le.TEN=le.valueOf(10),le.ONE=le.valueOf(1),le.SCI_NOT_EXPONENT_CHAR="E",le.SCI_NOT_ZERO="0.0E0";var ue=function(){function e(){n(this,e)}return o(e,null,[{key:"orientationIndex",value:function(t,n,i){var r=e.orientationIndexFilter(t,n,i);if(r<=1)return r;var o=le.valueOf(n.x).selfAdd(-t.x),a=le.valueOf(n.y).selfAdd(-t.y),s=le.valueOf(i.x).selfAdd(-n.x),l=le.valueOf(i.y).selfAdd(-n.y);return o.selfMultiply(l).selfSubtract(a.selfMultiply(s)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof le&&arguments[2]instanceof le&&arguments[0]instanceof le&&arguments[1]instanceof le){var e=arguments[1],t=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(e.multiply(t)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=le.valueOf(i),l=le.valueOf(r),u=le.valueOf(o),c=le.valueOf(a);return s.multiply(c).selfSubtract(l.multiply(u)).signum()}}},{key:"intersection",value:function(e,t,n,i){var r=new le(e.y).selfSubtract(t.y),o=new le(t.x).selfSubtract(e.x),a=new le(e.x).selfMultiply(t.y).selfSubtract(new le(t.x).selfMultiply(e.y)),s=new le(n.y).selfSubtract(i.y),l=new le(i.x).selfSubtract(n.x),u=new le(n.x).selfMultiply(i.y).selfSubtract(new le(i.x).selfMultiply(n.y)),c=o.multiply(u).selfSubtract(l.multiply(a)),d=s.multiply(a).selfSubtract(r.multiply(u)),h=r.multiply(l).selfSubtract(s.multiply(o)),f=c.selfDivide(h).doubleValue(),p=d.selfDivide(h).doubleValue();return M.isNaN(f)||M.isInfinite(f)||M.isNaN(p)||M.isInfinite(p)?null:new V(f,p)}},{key:"orientationIndexFilter",value:function(t,n,i){var r=null,o=(t.x-i.x)*(n.y-i.y),a=(t.y-i.y)*(n.x-i.x),s=o-a;if(o>0){if(a<=0)return e.signum(s);r=o+a}else{if(!(o<0))return e.signum(s);if(a>=0)return e.signum(s);r=-o-a}var l=e.DP_SAFE_EPSILON*r;return s>=l||-s>=l?e.signum(s):2}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}}])}();ue.DP_SAFE_EPSILON=1e-15;var ce=o(function e(){n(this,e)},[{key:"getM",value:function(e){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(e,t)}return M.NaN}},{key:"setOrdinate",value:function(e,t,n){}},{key:"getZ",value:function(e){return this.hasZ()?this.getOrdinate(e,2):M.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(e,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(e){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(e){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(e){}},{key:"copy",value:function(){}},{key:"getY",value:function(e){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[k]}}]);ce.X=0,ce.Y=1,ce.Z=2,ce.M=3;var de=function(){function e(){n(this,e)}return o(e,null,[{key:"index",value:function(e,t,n){return ue.orientationIndex(e,t,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],n=t.length-1;if(n<3)throw new b("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],r=0,o=1;o<=n;o++){var a=t[o];a.y>i.y&&(i=a,r=o)}var s=r;do{(s-=1)<0&&(s=n)}while(t[s].equals2D(i)&&s!==r);var l=r;do{l=(l+1)%n}while(t[l].equals2D(i)&&l!==r);var u=t[s],c=t[l];if(u.equals2D(i)||c.equals2D(i)||u.equals2D(c))return!1;var d=e.index(u,i,c);return 0===d?u.x>c.x:d>0}if(re(arguments[0],ce)){var h=arguments[0],f=h.size()-1;if(f<3)throw new b("Ring has fewer than 4 points, so orientation cannot be determined");for(var p=h.getCoordinate(0),g=0,m=1;m<=f;m++){var y=h.getCoordinate(m);y.y>p.y&&(p=y,g=m)}var v=null,_=g;do{(_-=1)<0&&(_=f),v=h.getCoordinate(_)}while(v.equals2D(p)&&_!==g);var E=null,k=g;do{k=(k+1)%f,E=h.getCoordinate(k)}while(E.equals2D(p)&&k!==g);if(v.equals2D(p)||E.equals2D(p)||v.equals2D(E))return!1;var w=e.index(v,p,E);return 0===w?v.x>E.x:w>0}}}])}();de.CLOCKWISE=-1,de.RIGHT=de.CLOCKWISE,de.COUNTERCLOCKWISE=1,de.LEFT=de.COUNTERCLOCKWISE,de.COLLINEAR=0,de.STRAIGHT=de.COLLINEAR;var he=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var e=this._minDe.getEdge().getCoordinates();z.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],i=de.index(this._minCoord,n,t),r=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&i===de.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&i===de.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(e,t){var n=e.getEdge().getCoordinates();if(t<0||t+1>=n.length)return-1;if(n[t].y===n[t+1].y)return-1;var i=J.LEFT;return n[t].y<n[t+1].y&&(i=J.RIGHT),i}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this._minCoord||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])}},{key:"findRightmostEdgeAtNode",value:function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}z.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===J.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),fe=function(e){function i(e,r){var o;return n(this,i),(o=t(this,i,[r?e+" [ "+r+" ]":e])).pt=r?new V(r):void 0,o.name=Object.keys({TopologyException:i})[0],o}return u(i,e),o(i,[{key:"getCoordinate",value:function(){return this.pt}}])}(D),pe=o(function e(){n(this,e),this.array=[]},[{key:"addLast",value:function(e){this.array.push(e)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),ge=function(e){function i(e){var r;return n(this,i),(r=t(this,i)).array=[],e instanceof Y&&r.addAll(e),r}return u(i,e),o(i,[{key:"interfaces_",get:function(){return[ne,Y]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return 1===arguments.length?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.array.push(i)}}catch(r){n.e(r)}finally{n.f()}}},{key:"set",value:function(e,t){var n=this.array[e];return this.array[e]=t,n}},{key:"iterator",value:function(){return new me(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new te;return this.array[e]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(e){e?this.array.sort(function(t,n){return e.compare(t,n)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var t=0,n=this.array.length;t<n;t++)if(this.array[t]===e)return!!this.array.splice(t,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(ne),me=o(function e(t){n(this,e),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new W;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(e){return this.arrayList.set(this.position-1,e)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),ye=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var e=this._dirEdgeList.iterator();e.hasNext();)e.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){t=i;break}}if(null===t)throw new fe("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var r=e.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:"computeDepth",value:function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(J.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(J.RIGHT)>=1&&t.getDepth(J.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(e){var t=new Q,n=new pe,i=e.getNode();for(n.addLast(i),t.add(i),e.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();t.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();t.contains(s)||(n.addLast(s),t.add(s))}}}}},{key:"compareTo",value:function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var e=new j,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)e.expandToInclude(n[i]);this._env=e}return this._env}},{key:"addReachable",value:function(e){var t=new ie;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}}},{key:"copySymDepths",value:function(e){var t=e.getSym();t.setDepth(J.LEFT,e.getDepth(J.RIGHT)),t.setDepth(J.RIGHT,e.getDepth(J.LEFT))}},{key:"add",value:function(e,t){e.setVisited(!0),this._nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||t.push(r)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new ge,this._nodes=new ge,this._rightMostCoord=null,this._env=null,this._finder=new he}}]),ve=o(function e(){n(this,e)},null,[{key:"intersection",value:function(e,t,n,i){var r=e.x<t.x?e.x:t.x,o=e.y<t.y?e.y:t.y,a=e.x>t.x?e.x:t.x,s=e.y>t.y?e.y:t.y,l=n.x<i.x?n.x:i.x,u=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,d=n.y>i.y?n.y:i.y,h=((r>l?r:l)+(a<c?a:c))/2,f=((o>u?o:u)+(s<d?s:d))/2,p=e.x-h,g=e.y-f,m=t.x-h,y=t.y-f,v=n.x-h,b=n.y-f,_=i.x-h,E=i.y-f,k=g-y,w=m-p,S=p*y-m*g,x=b-E,T=_-v,I=v*E-_*b,C=k*T-x*w,N=(w*I-T*S)/C,A=(x*S-k*I)/C;return M.isNaN(N)||M.isInfinite(N)||M.isNaN(A)||M.isInfinite(A)?null:new V(N+h,A+f)}}]),be=o(function e(){n(this,e)},null,[{key:"arraycopy",value:function(e,t,n,i,r){for(var o=0,a=t;a<t+r;a++)n[i+o]=e[a],o++}},{key:"getProperty",value:function(e){return{"line.separator":"\n"}[e]}}]),_e=function(){function e(){n(this,e)}return o(e,null,[{key:"log10",value:function(t){var n=Math.log(t);return M.isInfinite(n)||M.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function(e,t,n,i){var r=e;return t<r&&(r=t),n<r&&(r=n),i<r&&(r=i),r}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}}},{key:"wrap",value:function(e,t){return e<0?t- -e%t:e%t}},{key:"max",value:function(){if(3===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[0];return e>n&&(n=e),t>n&&(n=t),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],a=arguments[0];return i>a&&(a=i),r>a&&(a=r),o>a&&(a=o),a}}},{key:"average",value:function(e,t){return(e+t)/2}}])}();_e.LOG_10=Math.log(10);var Ee=function(){function e(){n(this,e)}return o(e,null,[{key:"segmentToSegment",value:function(t,n,i,r){if(t.equals(n))return e.pointToSegment(t,i,r);if(i.equals(r))return e.pointToSegment(r,t,n);var o=!1;if(j.intersects(t,n,i,r)){var a=(n.x-t.x)*(r.y-i.y)-(n.y-t.y)*(r.x-i.x);if(0===a)o=!0;else{var s=(t.y-i.y)*(r.x-i.x)-(t.x-i.x)*(r.y-i.y),l=((t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y))/a,u=s/a;(u<0||u>1||l<0||l>1)&&(o=!0)}}else o=!0;return o?_e.min(e.pointToSegment(t,i,r),e.pointToSegment(n,i,r),e.pointToSegment(i,t,n),e.pointToSegment(r,t,n)):0}},{key:"pointToSegment",value:function(e,t,n){if(t.x===n.x&&t.y===n.y)return e.distance(t);var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;if(r<=0)return e.distance(t);if(r>=1)return e.distance(n);var o=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Math.abs(o)*Math.sqrt(i)}},{key:"pointToLinePerpendicular",value:function(e,t,n){var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),r=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Math.abs(r)*Math.sqrt(i)}},{key:"pointToSegmentString",value:function(t,n){if(0===n.length)throw new b("Line array must contain at least one vertex");for(var i=t.distance(n[0]),r=0;r<n.length-1;r++){var o=e.pointToSegment(t,n[r],n[r+1]);o<i&&(i=o)}return i}}])}(),ke=o(function e(){n(this,e)},[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||re(arguments[0],ce);else if(2===arguments.length);else if(3===arguments.length){var e=arguments[0],t=arguments[1];return this.create(e,t)}}}]),we=o(function e(){n(this,e)},[{key:"filter",value:function(e){}}]),Se=o(function e(){n(this,e)},null,[{key:"ofLine",value:function(e){var t=e.size();if(t<=1)return 0;var n=0,i=new V;e.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<t;a++){e.getCoordinate(a,i);var s=i.x,l=i.y,u=s-r,c=l-o;n+=Math.sqrt(u*u+c*c),r=s,o=l}return n}}]),xe=o(function e(){n(this,e)}),Te=function(){function e(){n(this,e)}return o(e,null,[{key:"copyCoord",value:function(e,t,n,i){for(var r=Math.min(e.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,e.getOrdinate(t,o))}},{key:"isRing",value:function(e){var t=e.size();return 0===t||!(t<=3)&&e.getOrdinate(0,ce.X)===e.getOrdinate(t-1,ce.X)&&e.getOrdinate(0,ce.Y)===e.getOrdinate(t-1,ce.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(re(arguments[0],ce)&&Number.isInteger(arguments[1])){var t=arguments[0],n=arguments[1];e.scroll(t,n,e.isRing(t))}else if(re(arguments[0],ce)&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1],o=e.indexOf(r,i);if(o<=0)return null;e.scroll(i,o)}}else if(3===arguments.length){var a=arguments[0],s=arguments[1],l=arguments[2];if(s<=0)return null;for(var u=a.copy(),c=l?a.size()-1:a.size(),d=0;d<c;d++)for(var h=0;h<a.getDimension();h++)a.setOrdinate(d,h,u.getOrdinate((s+d)%c,h));if(l)for(var f=0;f<a.getDimension();f++)a.setOrdinate(c,f,a.getOrdinate(0,f))}}},{key:"isEqual",value:function(e,t){var n=e.size();if(n!==t.size())return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var a=e.getOrdinate(r,o),s=t.getOrdinate(r,o);if(!(e.getOrdinate(r,o)===t.getOrdinate(r,o)||M.isNaN(a)&&M.isNaN(s)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var t=arguments[0];return e.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){for(var n=arguments[0],i=arguments[2],r=-1,o=null,a=arguments[1];a<=i;a++){var s=n.getCoordinate(a);(null===o||o.compareTo(s)>0)&&(o=s,r=a)}return r}}},{key:"extend",value:function(t,n,i){var r=t.create(i,n.getDimension()),o=n.size();if(e.copy(n,0,r,0,o),o>0)for(var a=o;a<i;a++)e.copy(n,o-1,r,a,1);return r}},{key:"reverse",value:function(t){for(var n=t.size()-1,i=Math.trunc(n/2),r=0;r<=i;r++)e.swap(t,r,n-r)}},{key:"swap",value:function(e,t,n){if(t===n)return null;for(var i=0;i<e.getDimension();i++){var r=e.getOrdinate(t,i);e.setOrdinate(t,i,e.getOrdinate(n,i)),e.setOrdinate(n,i,r)}}},{key:"copy",value:function(t,n,i,r,o){for(var a=0;a<o;a++)e.copyCoord(t,n+a,i,r+a)}},{key:"ensureValidRing",value:function(t,n){var i=n.size();return 0===i?n:i<=3?e.createClosedRing(t,n,4):n.getOrdinate(0,ce.X)===n.getOrdinate(i-1,ce.X)&&n.getOrdinate(0,ce.Y)===n.getOrdinate(i-1,ce.Y)?n:e.createClosedRing(t,n,i+1)}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.size();n++)if(e.x===t.getOrdinate(n,ce.X)&&e.y===t.getOrdinate(n,ce.Y))return n;return-1}},{key:"createClosedRing",value:function(t,n,i){var r=t.create(i,n.getDimension()),o=n.size();e.copy(n,0,r,0,o);for(var a=o;a<i;a++)e.copy(n,0,r,a,1);return r}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.size();n++){var i=e.getCoordinate(n);(null===t||t.compareTo(i)>0)&&(t=i)}return t}}])}(),Ie=function(){function e(){n(this,e)}return o(e,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new b("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(se.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new b("Unknown dimension symbol: "+t)}}])}();Ie.P=0,Ie.L=1,Ie.A=2,Ie.FALSE=-1,Ie.TRUE=-2,Ie.DONTCARE=-3,Ie.SYM_FALSE="F",Ie.SYM_TRUE="T",Ie.SYM_DONTCARE="*",Ie.SYM_P="0",Ie.SYM_L="1",Ie.SYM_A="2";var Ce=o(function e(){n(this,e)},[{key:"filter",value:function(e){}}]),Ne=o(function e(){n(this,e)},[{key:"filter",value:function(e,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),Ae=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new j:this._points.expandEnvelope(new j)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new i(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),t))return!1;return!0}return h(i,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))>0){var n=this._points.copy();Te.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ie.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Te.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return $.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Se.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var e=arguments[0],t=0,n=0;t<this._points.size()&&n<e._points.size();){var i=this._points.getCoordinate(t).compareTo(e._points.getCoordinate(n));if(0!==i)return i;t++,n++}return t<this._points.size()?1:n<e._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}}},{key:"apply",value:function(){if(re(arguments[0],we))for(var e=arguments[0],t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t));else if(re(arguments[0],Ne)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(re(arguments[0],Ce)||re(arguments[0],_))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new X}},{key:"isEquivalentClass",value:function(e){return e instanceof i}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return $.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new b("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[xe]}}],[{key:"constructor_",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var e=arguments[0],t=arguments[1];$.constructor_.call(this,t),this.init(e)}}}])}($),Pe=o(function e(){n(this,e)}),Le=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new j;var e=new j;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new i(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),t))}return h(i,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Ie.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return $.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}},{key:"apply",value:function(){if(re(arguments[0],we)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(re(arguments[0],Ne)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else(re(arguments[0],Ce)||re(arguments[0],_))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return $.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),z.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Pe]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0],t=arguments[1];$.constructor_.call(this,t),this.init(e)}}])}($),Oe=function(){function e(){n(this,e)}return o(e,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(e.ofRingSigned(t))}if(re(arguments[0],ce)){var n=arguments[0];return Math.abs(e.ofRingSigned(n))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,i=1;i<e.length-1;i++){var r=e[i].x-n,o=e[i+1].y;t+=r*(e[i-1].y-o)}return t/2}if(re(arguments[0],ce)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new V,u=new V,c=new V;a.getCoordinate(0,u),a.getCoordinate(1,c);var d=u.x;c.x-=d;for(var h=0,f=1;f<s-1;f++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(f+1,c),c.x-=d,h+=u.x*(l.y-c.y);return h/2}}}])}(),Me=o(function e(){n(this,e)},null,[{key:"sort",value:function(){var e=arguments,t=arguments[0];if(1===arguments.length)t.sort(function(e,t){return e.compareTo(t)});else if(2===arguments.length)t.sort(function(t,n){return e[1].compare(t,n)});else if(3===arguments.length){var n=t.slice(arguments[1],arguments[2]);n.sort();var i=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length));t.splice(0,t.length);var r,o=a(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.push(s)}}catch(f){o.e(f)}finally{o.f()}}else if(4===arguments.length){var l=t.slice(arguments[1],arguments[2]);l.sort(function(t,n){return e[3].compare(t,n)});var u=t.slice(0,arguments[1]).concat(l,t.slice(arguments[2],t.length));t.splice(0,t.length);var c,d=a(u);try{for(d.s();!(c=d.n()).done;){var h=c.value;t.push(h)}}catch(f){d.e(f)}finally{d.f()}}}},{key:"asList",value:function(e){var t,n=new ge,i=a(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n.add(r)}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"copyOf",value:function(e,t){return e.slice(0,t)}}]),Re=o(function e(){n(this,e)}),De=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)e[++t]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),a=0;a<o.length;a++)e[++t]=o[a];return e}},{key:"getArea",value:function(){var e=0;e+=Oe.ofRing(this._shell.getCoordinateSequence());for(var t=0;t<this._holes.length;t++)e-=Oe.ofRing(this._holes[t].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),t=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)t[n]=this._holes[n].copy();return new i(e,t,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;n<5;n++){var i=e.getX(n);if(i!==t.getMinX()&&i!==t.getMaxX())return!1;var r=e.getY(n);if(r!==t.getMinY()&&r!==t.getMaxY())return!1}for(var o=e.getX(0),a=e.getY(0),s=1;s<=4;s++){var l=e.getX(s),u=e.getY(s);if(l!==o==(u!==a))return!1;o=l,a=u}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e,r=this._shell,o=n._shell;if(!r.equalsExact(o,t))return!1;if(this._holes.length!==n._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(n._holes[a],t))return!1;return!0}return h(i,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);Me.sort(this._holes)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(t.isEmpty())return null;var i=t.getCoordinateSequence(),r=Te.minCoordinateIndex(i,0,i.size()-2);Te.scroll(i,r,!0),de.isCCW(i)===n&&Te.reverse(i)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),t=new Array(this.getNumInteriorRing()).fill(null),n=0;n<t.length;n++)t[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(e,t)}},{key:"getTypeCode",value:function(){return $.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,t){var n=e.copy();return this.normalize(n,t),n}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0],t=this._shell,n=e._shell;return t.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],o=this._shell,a=r._shell,s=o.compareToSameClass(a,i);if(0!==s)return s;for(var l=this.getNumInteriorRing(),u=r.getNumInteriorRing(),c=0;c<l&&c<u;){var d=this.getInteriorRingN(c),h=r.getInteriorRingN(c),f=d.compareToSameClass(h,i);if(0!==f)return f;c++}return c<l?1:c<u?-1:0}}},{key:"apply",value:function(){if(re(arguments[0],we)){var e=arguments[0];this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(re(arguments[0],Ne)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(re(arguments[0],Ce))arguments[0].filter(this);else if(re(arguments[0],_)){var r=arguments[0];r.filter(this),this._shell.apply(r);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(r)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return $.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[Re]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],t=arguments[1],n=arguments[2];if($.constructor_.call(this,n),null===e&&(e=this.getFactory().createLinearRing()),null===t&&(t=[]),$.hasNullElements(t))throw new b("holes must not contain null elements");if(e.isEmpty()&&$.hasNonEmptyElements(t))throw new b("shell is empty but holes are not");this._shell=e,this._holes=t}}])}($),Fe=function(e){function i(){return n(this,i),t(this,i,arguments)}return u(i,e),o(i)}(K),ze=function(e){function i(e){var r;return n(this,i),(r=t(this,i)).array=[],e instanceof Y&&r.addAll(e),r}return u(i,e),o(i,[{key:"contains",value:function(e){var t,n=a(this.array);try{for(n.s();!(t=n.n()).done;)if(0===t.value.compareTo(e))return!0}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var t=0,n=this.array.length;t<n;t++)if(1===this.array[t].compareTo(e))return!!this.array.splice(t,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.add(i)}}catch(r){n.e(r)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new X}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Be(this.array)}}])}(Fe),Be=o(function e(t){n(this,e),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new W;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new X}}]),Ue=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"computeEnvelopeInternal",value:function(){for(var e=new j,t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)e[++t]=i[r];return e}},{key:"getArea",value:function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new i(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],t))return!1;return!0}return h(i,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();Me.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=Ie.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,t=new ge(e),n=0;n<e;n++)t.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(t)}},{key:"getTypeCode",value:function(){return $.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=Ie.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0],t=new ze(Me.asList(this._geometries)),n=new ze(Me.asList(e._geometries));return this.compare(t,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),a=r.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),u=r.getGeometryN(s),c=l.compareToSameClass(u,i);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}}},{key:"apply",value:function(){if(re(arguments[0],we))for(var e=arguments[0],t=0;t<this._geometries.length;t++)this._geometries[t].apply(e);else if(re(arguments[0],Ne)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(re(arguments[0],Ce)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(re(arguments[0],_)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}}},{key:"getBoundary",value:function(){return $.checkNotGeometryCollection(this),z.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return $.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var e=arguments[0],t=arguments[1];if($.constructor_.call(this,t),null===e&&(e=[]),$.hasNullElements(e))throw new b("geometries must not contain null elements");this._geometries=e}}}])}($),qe=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new i(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&h(i,"equalsExact",this,1).call(this,e,t)}return h(i,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}return h(i,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Ie.FALSE}},{key:"getTypeCode",value:function(){return $.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return $.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Pe]}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];Ue.constructor_.call(this,e,t)}}])}(Ue),Ve=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"copyInternal",value:function(){return new i(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Ie.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||h(i,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Te.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return $.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!h(i,"isClosed",this,1).call(this))throw new b("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<i.MINIMUM_VALID_SIZE)throw new b("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return $.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];Ae.constructor_.call(this,e,t),this.validateConstruction()}}])}(Ae);Ve.MINIMUM_VALID_SIZE=4;var Ge=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"setOrdinate",value:function(e,t){switch(e){case i.X:this.x=t;break;case i.Y:this.y=t;break;default:throw new b("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return V.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case i.X:return this.x;case i.Y:return this.y}throw new b("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new b("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)V.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof i){var e=arguments[0];V.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof V){var t=arguments[0];V.constructor_.call(this,t.x,t.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];V.constructor_.call(this,n,r,V.NULL_ORDINATE)}}}])}(V);Ge.X=0,Ge.Y=1,Ge.Z=-1,Ge.M=-1;var je=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,t){switch(e){case i.X:this.x=t;break;case i.Y:this.y=t;break;case i.M:this._m=t;break;default:throw new b("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return V.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case i.X:return this.x;case i.Y:return this.y;case i.M:return this._m}throw new b("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new b("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)V.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof i){var e=arguments[0];V.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof V){var t=arguments[0];V.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];V.constructor_.call(this,n,r,V.NULL_ORDINATE),this._m=o}}}])}(V);je.X=0,je.Y=1,je.Z=-1,je.M=2;var $e=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,t){switch(e){case V.X:this.x=t;break;case V.Y:this.y=t;break;case V.Z:this.z=t;break;case V.M:this._m=t;break;default:throw new b("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case V.X:return this.x;case V.Y:return this.y;case V.Z:return this.getZ();case V.M:return this.getM()}throw new b("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)V.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof i){var e=arguments[0];V.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof V){var t=arguments[0];V.constructor_.call(this,t),this._m=this.getM()}}else if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3];V.constructor_.call(this,n,r,o),this._m=a}}}])}(V),He=function(){function e(){n(this,e)}return o(e,null,[{key:"measures",value:function(e){return e instanceof Ge?0:e instanceof je||e instanceof $e?1:0}},{key:"dimension",value:function(e){return e instanceof Ge?2:e instanceof je?3:e instanceof $e?4:3}},{key:"create",value:function(){if(1===arguments.length){var t=arguments[0];return e.create(t,0)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return 2===n?new Ge:3===n&&0===i?new V:3===n&&1===i?new je:4===n&&1===i?new $e:new V}}}])}(),Ye=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&re(arguments[0],Y)){for(var e=arguments[1],t=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),e),t=!0;return t}return h(i,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=h(i,"clone",this,1).call(this),t=0;t<this.size();t++)e.add(t,this.get(t).clone());return e}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(i.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(i.coordArrayType);for(var e=this.size(),t=new Array(e).fill(null),n=0;n<e;n++)t[n]=this.get(e-n-1);return t}}},{key:"add",value:function(){if(1===arguments.length){var e=arguments[0];return h(i,"add",this,1).call(this,e)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return this.add(t,n,!0),!0}if(arguments[0]instanceof V&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;h(i,"add",this,1).call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],l);else for(var c=s.length-1;c>=0;c--)this.add(s[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof V){var d=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(d>0&&this.get(d-1).equals2D(f))return null;if(d<p&&this.get(d).equals2D(f))return null}}h(i,"add",this,1).call(this,d,f)}}else if(4===arguments.length){var g=arguments[0],m=arguments[1],y=arguments[2],v=arguments[3],b=1;y>v&&(b=-1);for(var _=y;_!==v;_+=b)this.add(g[_],m);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.ensureCapacity(t.length),this.add(t,n)}}}])}(ge);Ye.coordArrayType=new Array(0).fill(null);var We=function(){function e(){n(this,e)}return o(e,null,[{key:"isRing",value:function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))}},{key:"ptNotInList",value:function(t,n){for(var i=0;i<t.length;i++){var r=t[i];if(e.indexOf(r,n)<0)return r}return null}},{key:"scroll",value:function(t,n){var i=e.indexOf(n,t);if(i<0)return null;var r=new Array(t.length).fill(null);be.arraycopy(t,i,r,0,t.length-i),be.arraycopy(t,0,r,t.length-i,i),be.arraycopy(r,0,t,0,t.length)}},{key:"equals",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(0!==o.compare(i[a],r[a]))return!1;return!0}}},{key:"intersection",value:function(e,t){for(var n=new Ye,i=0;i<e.length;i++)t.intersects(e[i])&&n.add(e[i],!0);return n.toCoordinateArray()}},{key:"measures",value:function(e){if(null===e||0===e.length)return 0;var t,n=0,i=a(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n=Math.max(n,He.measures(r))}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"hasRepeatedPoints",value:function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return e.hasRepeatedPoints(t)?new Ye(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(e){for(var t=e.length-1,n=Math.trunc(t/2),i=0;i<=n;i++){var r=e[i];e[i]=e[t-i],e[t-i]=r}}},{key:"removeNull",value:function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var i=new Array(t).fill(null);if(0===t)return i;for(var r=0,o=0;o<e.length;o++)null!==e[o]&&(i[r++]=e[o]);return i}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=e[n].copy();return t}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=i[r+l].copy()}},{key:"isEqualReversed",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=t[e.length-n-1];if(0!==i.compareTo(r))return!1}return!0}},{key:"envelope",value:function(e){for(var t=new j,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"dimension",value:function(e){if(null===e||0===e.length)return 3;var t,n=0,i=a(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n=Math.max(n,He.dimension(r))}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(e,t){return t.length>=e?t:[]}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}},{key:"increasingDirection",value:function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,i=e[t].compareTo(e[n]);if(0!==i)return i}return 1}},{key:"compare",value:function(e,t){for(var n=0;n<e.length&&n<t.length;){var i=e[n].compareTo(t[n]);if(0!==i)return i;n++}return n<t.length?-1:n<e.length?1:0}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t}},{key:"extract",value:function(e,t,n){t=_e.clamp(t,0,e.length);var i=(n=_e.clamp(n,-1,e.length))-t+1;n<0&&(i=0),t>=e.length&&(i=0),n<t&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=t;a<=n;a++)r[o++]=e[a];return r}}])}(),Xe=o(function e(){n(this,e)},[{key:"compare",value:function(e,t){var n=e,i=t;return We.compare(n,i)}},{key:"interfaces_",get:function(){return[R]}}]),Ke=o(function e(){n(this,e)},[{key:"compare",value:function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=We.compare(n,i);return We.isEqualReversed(n,i)?0:r}},{key:"OLDcompare",value:function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=We.increasingDirection(n),o=We.increasingDirection(i),a=r>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(i[s]);if(0!==u)return u;a+=r,s+=o}return 0}},{key:"interfaces_",get:function(){return[R]}}]);We.ForwardComparator=Xe,We.BidirectionalComparator=Ke,We.coordArrayType=new Array(0).fill(null);var Qe=o(function e(t){n(this,e),this.str=t},[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),Ze=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getM",value:function(e){return this.hasM()?this._coordinates[e].getM():M.NaN}},{key:"setOrdinate",value:function(e,t,n){switch(t){case ce.X:this._coordinates[e].x=n;break;case ce.Y:this._coordinates[e].y=n;break;default:this._coordinates[e].setOrdinate(t,n)}}},{key:"getZ",value:function(e){return this.hasZ()?this._coordinates[e].getZ():M.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(e,t){switch(t){case ce.X:return this._coordinates[e].x;case ce.Y:return this._coordinates[e].y;default:return this._coordinates[e].getOrdinate(t)}}},{key:"getCoordinate",value:function(){if(1===arguments.length){var e=arguments[0];return this._coordinates[e]}if(2===arguments.length){var t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}},{key:"getCoordinateCopy",value:function(e){var t=this.createCoordinate();return t.setCoordinate(this._coordinates[e]),t}},{key:"createCoordinate",value:function(){return He.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(e){return this._coordinates[e].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++){var i=this.createCoordinate();i.setCoordinate(this._coordinates[n]),t[n]=i}return new e(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var e=new Qe(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"}},{key:"getY",value:function(e){return this._coordinates[e].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ce,w]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];e.constructor_.call(this,t,We.dimension(t),We.measures(t))}else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var i=0;i<n;i++)this._coordinates[i]=new V}else if(re(arguments[0],ce)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=r.getCoordinateCopy(o)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];e.constructor_.call(this,a,s,We.measures(a))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],u=arguments[1];this._coordinates=new Array(l).fill(null),this._dimension=u;for(var c=0;c<l;c++)this._coordinates[c]=He.create(u)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var d=arguments[0],h=arguments[1],f=arguments[2];this._dimension=h,this._measures=f,this._coordinates=null===d?new Array(0).fill(null):d}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var p=arguments[0],g=arguments[1],m=arguments[2];this._coordinates=new Array(p).fill(null),this._dimension=g,this._measures=m;for(var y=0;y<p;y++)this._coordinates[y]=this.createCoordinate()}}}])}(),Je=function(){function e(){n(this,e)}return o(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Ze(arguments[0]);if(re(arguments[0],ce))return new Ze(arguments[0])}else{if(2===arguments.length){var e=arguments[1];return e>3&&(e=3),e<2&&(e=2),new Ze(arguments[0],e)}if(3===arguments.length){var t=arguments[2],n=arguments[1]-t;return t>1&&(t=1),n>3&&(n=3),n<2&&(n=2),new Ze(arguments[0],n+t,t)}}}},{key:"interfaces_",get:function(){return[ke,w]}}],[{key:"instance",value:function(){return e.instanceObject}}])}();Je.instanceObject=new Je;var et=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new i(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&h(i,"equalsExact",this,1).call(this,e,t)}return h(i,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return $.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new ge,t=0;t<this._geometries.length;t++)for(var n=this._geometries[t].getBoundary(),i=0;i<n.getNumGeometries();i++)e.add(n.getGeometryN(i));var r=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(r))}},{key:"getGeometryType",value:function(){return $.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Re]}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];Ue.constructor_.call(this,e,t)}}])}(Ue),tt=o(function e(){n(this,e)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),nt=function(e){function i(){var e;return n(this,i),(e=t(this,i)).map=new Map,e}return u(i,e),o(i,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,t){return this.map.set(e,t),t}},{key:"values",value:function(){for(var e=new ge,t=this.map.values(),n=t.next();!n.done;)e.add(n.value),n=t.next();return e}},{key:"entrySet",value:function(){var e=new Q;return this.map.entries().forEach(function(t){return e.add(t)}),e}},{key:"size",value:function(){return this.map.size()}}])}(tt),it=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this._modelType===n._modelType&&this._scale===n._scale}},{key:"compareTo",value:function(e){var t=e,n=this.getMaximumSignificantDigits(),i=t.getMaximumSignificantDigits();return ae.compare(n,i)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===e.FLOATING||this._modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===e.FLOATING?t="Floating":this._modelType===e.FLOATING_SINGLE?t="Floating-Single":this._modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return M.isNaN(t)||this._modelType===e.FLOATING_SINGLE?t:this._modelType===e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof V){var n=arguments[0];if(this._modelType===e.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===e.FLOATING?t=16:this._modelType===e.FLOATING_SINGLE?t=6:this._modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(e){this._scale=Math.abs(e)}},{key:"interfaces_",get:function(){return[w,E]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof rt){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}}},{key:"mostPrecise",value:function(e,t){return e.compareTo(t)>=0?e:t}}])}(),rt=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,e.nameToTypeMap.put(t,this)}}])}();rt.nameToTypeMap=new nt,it.Type=rt,it.FIXED=new rt("FIXED"),it.FLOATING=new rt("FLOATING"),it.FLOATING_SINGLE=new rt("FLOATING SINGLE"),it.maximumPreciseValue=9007199254740992;var ot=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new i(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof $){var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&h(i,"equalsExact",this,1).call(this,e,t)}return h(i,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ie.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return $.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new X}},{key:"getGeometryType",value:function(){return $.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[xe]}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];Ue.constructor_.call(this,e,t)}}])}(Ue),at=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"createEmpty",value:function(e){switch(e){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new b("Invalid dimension: "+e)}}},{key:"toGeometry",value:function(e){return e.isNull()?this.createPoint():e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new V(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new V(e.getMinX(),e.getMinY()),new V(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new V(e.getMinX(),e.getMinY()),new V(e.getMinX(),e.getMaxY()),new V(e.getMaxX(),e.getMaxY()),new V(e.getMaxX(),e.getMinY()),new V(e.getMinX(),e.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLineString(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(re(arguments[0],ce))return new Ae(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new ot(null,this):1===arguments.length?new ot(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var n=null,i=!1,r=!1,o=t.iterator();o.hasNext();){var a=o.next(),s=a.getTypeCode();null===n&&(n=s),s!==n&&(i=!0),a instanceof Ue&&(r=!0)}if(null===n)return this.createGeometryCollection();if(i||r)return this.createGeometryCollection(e.toGeometryArray(t));var l=t.iterator().next();if(t.size()>1){if(l instanceof De)return this.createMultiPolygon(e.toPolygonArray(t));if(l instanceof Ae)return this.createMultiLineString(e.toLineStringArray(t));if(l instanceof Le)return this.createMultiPoint(e.toPointArray(t));z.shouldNeverReachHere("Unhandled geometry type: "+l.getGeometryType())}return l}},{key:"createMultiPointFromCoords",value:function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof V){var e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(re(arguments[0],ce))return new Le(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(re(arguments[0],ce)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Ve){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new De(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new Ue(null,this):1===arguments.length?new Ue(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(re(arguments[0],ce))return new Ve(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new et(null,this):1===arguments.length?new et(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new qe(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new qe(arguments[0],this);if(re(arguments[0],ce)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var t=new Array(e.size()).fill(null),n=0;n<e.size();n++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension(),e.getMeasures());Te.copy(e,n,i,0,1),t[n]=this.createPoint(i)}return this.createMultiPoint(t)}}}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)e.constructor_.call(this,new it,0);else if(1===arguments.length){if(re(arguments[0],ke)){var t=arguments[0];e.constructor_.call(this,new it,0,t)}else if(arguments[0]instanceof it){var n=arguments[0];e.constructor_.call(this,n,0,e.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];e.constructor_.call(this,i,r,e.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this._precisionModel=o,this._coordinateSequenceFactory=s,this._SRID=a}}},{key:"toMultiPolygonArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toGeometryArray",value:function(e){if(null===e)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Je.instance()}},{key:"toMultiLineStringArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toLineStringArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toMultiPointArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toLinearRingArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toPointArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toPolygonArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}}])}(),st="XY",lt="XYZ",ut="XYM",ct="XYZM",dt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},ht="EMPTY",ft=1,pt=2,gt=3,mt=4,yt=5,vt=6;for(var bt in dt)dt[bt].toUpperCase();var _t=o(function e(t){n(this,e),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}},{key:"isNumeric_",value:function(e,t){return e>="0"&&e<="9"||"."==e&&!(void 0!==t&&t)}},{key:"isWhiteSpace_",value:function(e){return" "==e||"\t"==e||"\r"==e||"\n"==e}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var e,t=this.nextChar_(),n=this.index_,i=t;if("("==t)e=pt;else if(","==t)e=yt;else if(")"==t)e=gt;else if(this.isNumeric_(t)||"-"==t)e=mt,i=this.readNumber_();else if(this.isAlpha_(t))e=ft,i=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e=vt}return{position:n,value:i,type:e}}},{key:"readNumber_",value:function(){var e,t=this.index_,n=!1,i=!1;do{"."==e?n=!0:"e"!=e&&"E"!=e||(i=!0),e=this.nextChar_()}while(this.isNumeric_(e,n)||!i&&("e"==e||"E"==e)||i&&("-"==e||"+"==e));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var e,t=this.index_;do{e=this.nextChar_()}while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}]),Et=o(function e(t,i){n(this,e),this.lexer_=t,this.token_,this.layout_=st,this.factory=i},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(e){return this.token_.type==e}},{key:"match",value:function(e){var t=this.isTokenType(e);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var e=st,t=this.token_;if(this.isTokenType(ft)){var n=t.value;"Z"===n?e=lt:"M"===n?e=ut:"ZM"===n&&(e=ct),e!==st&&this.consume_()}return e}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(pt)){var e=[];do{e.push(this.parseGeometry_())}while(this.match(yt));if(this.match(gt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(pt)){var e=this.parsePoint_();if(this.match(gt))return e}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(pt)){var e=this.parsePointList_();if(this.match(gt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(pt)){var e=this.parseLineStringTextList_();if(this.match(gt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var e;if(this.match(pt)){if(e=this.token_.type==pt?this.parsePointTextList_():this.parsePointList_(),this.match(gt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(pt)){var e=this.parseLineStringTextList_();if(this.match(gt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(pt)){var e=this.parsePolygonTextList_();if(this.match(gt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var e=[],t=this.layout_.length,n=0;n<t;++n){var i=this.token_;if(!this.match(mt))break;e.push(i.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var e=[this.parsePoint_()];this.match(yt);)e.push(this.parsePoint_());return e}},{key:"parsePointTextList_",value:function(){for(var e=[this.parsePointText_()];this.match(yt);)e.push(this.parsePointText_());return e}},{key:"parseLineStringTextList_",value:function(){for(var e=[this.parseLineStringText_()];this.match(yt);)e.push(this.parseLineStringText_());return e}},{key:"parsePolygonTextList_",value:function(){for(var e=[this.parsePolygonText_()];this.match(yt);)e.push(this.parsePolygonText_());return e}},{key:"isEmptyGeometry_",value:function(){var e=this.isTokenType(ft)&&this.token_.value==ht;return e&&this.consume_(),e}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var e=this.factory,t=function(e){return i(V,f(e))},n=function(n){var i=n.map(function(n){return e.createLinearRing(n.map(t))});return i.length>1?e.createPolygon(i[0],i.slice(1)):e.createPolygon(i[0])},r=this.token_;if(this.match(ft)){var o=r.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==o){var a=this.parseGeometryCollectionText_();return e.createGeometryCollection(a)}switch(o){case"POINT":var s=this.parsePointText_();return s?e.createPoint(i(V,f(s))):e.createPoint();case"LINESTRING":var l=this.parseLineStringText_().map(t);return e.createLineString(l);case"LINEARRING":var u=this.parseLineStringText_().map(t);return e.createLinearRing(u);case"POLYGON":var c=this.parsePolygonText_();return c&&0!==c.length?n(c):e.createPolygon();case"MULTIPOINT":var d=this.parseMultiPointText_();if(!d||0===d.length)return e.createMultiPoint();var h=d.map(t).map(function(t){return e.createPoint(t)});return e.createMultiPoint(h);case"MULTILINESTRING":var p=this.parseMultiLineStringText_().map(function(n){return e.createLineString(n.map(t))});return e.createMultiLineString(p);case"MULTIPOLYGON":var g=this.parseMultiPolygonText_();if(!g||0===g.length)return e.createMultiPolygon();var m=g.map(n);return e.createMultiPolygon(m);default:throw new Error("Invalid geometry type: "+o)}}throw new Error(this.formatErrorMessage_())}}]);function kt(e){if(e.isEmpty())return"";var t=e.getCoordinate(),n=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||n.push(t.z),void 0===t.m||Number.isNaN(t.m)||n.push(t.m),n.join(" ")}function wt(e){for(var t=e.getCoordinates().map(function(e){var t=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||t.push(e.z),void 0===e.m||Number.isNaN(e.m)||t.push(e.m),t}),n=[],i=0,r=t.length;i<r;++i)n.push(t[i].join(" "));return n.join(", ")}function St(e){var t=[];t.push("("+wt(e.getExteriorRing())+")");for(var n=0,i=e.getNumInteriorRing();n<i;++n)t.push("("+wt(e.getInteriorRingN(n))+")");return t.join(", ")}var xt={Point:kt,LineString:wt,LinearRing:wt,Polygon:St,MultiPoint:function(e){for(var t=[],n=0,i=e.getNumGeometries();n<i;++n)t.push("("+kt(e.getGeometryN(n))+")");return t.join(", ")},MultiLineString:function(e){for(var t=[],n=0,i=e.getNumGeometries();n<i;++n)t.push("("+wt(e.getGeometryN(n))+")");return t.join(", ")},MultiPolygon:function(e){for(var t=[],n=0,i=e.getNumGeometries();n<i;++n)t.push("("+St(e.getGeometryN(n))+")");return t.join(", ")},GeometryCollection:function(e){for(var t=[],n=0,i=e.getNumGeometries();n<i;++n)t.push(Tt(e.getGeometryN(n)));return t.join(", ")}};function Tt(e){var t=e.getGeometryType(),n=xt[t];t=t.toUpperCase();var i=function(e){var t="";if(e.isEmpty())return t;var n=e.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(t+="Z"),void 0===n.m||Number.isNaN(n.m)||(t+="M"),t}(e);return i.length>0&&(t+=" "+i),e.isEmpty()?t+" "+ht:t+" ("+n(e)+")"}var It=o(function e(t){n(this,e),this.geometryFactory=t||new at,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(e){var t=new _t(e);return new Et(t,this.geometryFactory).parse()}},{key:"write",value:function(e){return Tt(e)}}]),Ct=o(function e(t){n(this,e),this.parser=new It(t)},[{key:"write",value:function(e){return this.parser.write(e)}}],[{key:"toLineString",value:function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}]),Nt=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getIndexAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]}},{key:"getTopologySummary",value:function(){var e=new Qe;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}},{key:"computeIntersection",value:function(e,t,n,i){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(e,t,n,i)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var e=arguments[0];this.getEdgeDistance(e,0)>this.getEdgeDistance(e,1)?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(e){this._precisionModel=e}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}},{key:"getIntersection",value:function(e){return this._intPt[e]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){return e.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Ct.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ct.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(e,t){return this._inputLines[e][t]}},{key:"isIntersection",value:function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new V,this._intPt[1]=new V,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(e,t,n){var i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))o=i>r?i:r;else{var a=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);0!==(o=i>r?a:s)||e.equals(t)||(o=Math.max(a,s))}return z.isTrue(!(0===o&&!e.equals(t)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(e,t,n){var i=e.x-t.x,r=e.y-t.y,o=Math.sqrt(i*i+r*r);return z.isTrue(!(0===o&&!e.equals(t)),"Invalid distance calculation"),o}}])}();Nt.DONT_INTERSECT=0,Nt.DO_INTERSECT=1,Nt.COLLINEAR=2,Nt.NO_INTERSECTION=0,Nt.POINT_INTERSECTION=1,Nt.COLLINEAR_INTERSECTION=2;var At=function(e){function i(){return n(this,i),t(this,i)}return u(i,e),o(i,[{key:"isInSegmentEnvelopes",value:function(e){var t=new j(this._inputLines[0][0],this._inputLines[0][1]),n=new j(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&n.contains(e)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return h(i,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],t=arguments[1],n=arguments[2];if(this._isProper=!1,j.intersects(t,n,e)&&0===de.index(t,n,e)&&0===de.index(n,t,e))return this._isProper=!0,(e.equals(t)||e.equals(n))&&(this._isProper=!1),this._result=Nt.POINT_INTERSECTION,null;this._result=Nt.NO_INTERSECTION}},{key:"intersection",value:function(e,t,n,r){var o=this.intersectionSafe(e,t,n,r);return this.isInSegmentEnvelopes(o)||(o=new V(i.nearestEndpoint(e,t,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o}},{key:"checkDD",value:function(e,t,n,i,r){var o=ue.intersection(e,t,n,i),a=this.isInSegmentEnvelopes(o);be.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&be.out.println("Distance = "+r.distance(o))}},{key:"intersectionSafe",value:function(e,t,n,r){var o=ve.intersection(e,t,n,r);return null===o&&(o=i.nearestEndpoint(e,t,n,r)),o}},{key:"computeCollinearIntersection",value:function(e,t,n,i){var r=j.intersects(e,t,n),o=j.intersects(e,t,i),a=j.intersects(n,i,e),s=j.intersects(n,i,t);return r&&o?(this._intPt[0]=n,this._intPt[1]=i,Nt.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=e,this._intPt[1]=t,Nt.COLLINEAR_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?Nt.COLLINEAR_INTERSECTION:Nt.POINT_INTERSECTION):r&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?Nt.COLLINEAR_INTERSECTION:Nt.POINT_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||s?Nt.COLLINEAR_INTERSECTION:Nt.POINT_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?Nt.COLLINEAR_INTERSECTION:Nt.POINT_INTERSECTION):Nt.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,t,n,i){if(this._isProper=!1,!j.intersects(e,t,n,i))return Nt.NO_INTERSECTION;var r=de.index(e,t,n),o=de.index(e,t,i);if(r>0&&o>0||r<0&&o<0)return Nt.NO_INTERSECTION;var a=de.index(n,i,e),s=de.index(n,i,t);return a>0&&s>0||a<0&&s<0?Nt.NO_INTERSECTION:0===r&&0===o&&0===a&&0===s?this.computeCollinearIntersection(e,t,n,i):(0===r||0===o||0===a||0===s?(this._isProper=!1,e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:0===r?this._intPt[0]=new V(n):0===o?this._intPt[0]=new V(i):0===a?this._intPt[0]=new V(e):0===s&&(this._intPt[0]=new V(t))):(this._isProper=!0,this._intPt[0]=this.intersection(e,t,n,i)),Nt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,t,n,i){var r=e,o=Ee.pointToSegment(e,n,i),a=Ee.pointToSegment(t,n,i);return a<o&&(o=a,r=t),(a=Ee.pointToSegment(n,e,t))<o&&(o=a,r=n),(a=Ee.pointToSegment(i,e,t))<o&&(o=a,r=i),r}}])}(Nt),Pt=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"countSegment",value:function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,i=t.x;return n>i&&(n=t.x,i=e.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var r=de.index(e,t,this._p);if(r===de.COLLINEAR)return this._isPointOnSegment=!0,null;t.y<e.y&&(r=-r),r===de.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==H.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?H.BOUNDARY:this._crossingCount%2==1?H.INTERIOR:H.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof V&&re(arguments[1],ce)){for(var t=arguments[1],n=new e(arguments[0]),i=new V,r=new V,o=1;o<t.size();o++)if(t.getCoordinate(o,i),t.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof V&&arguments[1]instanceof Array){for(var a=arguments[1],s=new e(arguments[0]),l=1;l<a.length;l++){var u=a[l],c=a[l-1];if(s.countSegment(u,c),s.isOnSegment())return s.getLocation()}return s.getLocation()}}}])}(),Lt=function(){function e(){n(this,e)}return o(e,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof V&&re(arguments[1],ce)){for(var e=arguments[0],t=arguments[1],n=new At,i=new V,r=new V,o=t.size(),a=1;a<o;a++)if(t.getCoordinate(a-1,i),t.getCoordinate(a,r),n.computeIntersection(e,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof V&&arguments[1]instanceof Array){for(var s=arguments[0],l=arguments[1],u=new At,c=1;c<l.length;c++){var d=l[c-1],h=l[c];if(u.computeIntersection(s,d,h),u.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(e,t){return Pt.locatePointInRing(e,t)}},{key:"isInRing",value:function(t,n){return e.locateInRing(t,n)!==H.EXTERIOR}}])}(),Ot=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"setAllLocations",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}},{key:"isNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==H.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]===H.NONE&&(this.location[t]=e)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(e){if(e.location.length>this.location.length){var t=new Array(3).fill(null);t[J.ON]=this.location[J.ON],t[J.LEFT]=H.NONE,t[J.RIGHT]=H.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===H.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var e=this.location[J.LEFT];this.location[J.LEFT]=this.location[J.RIGHT],this.location[J.RIGHT]=e}},{key:"toString",value:function(){var e=new oe;return this.location.length>1&&e.append(H.toLocationSymbol(this.location[J.LEFT])),e.append(H.toLocationSymbol(this.location[J.ON])),this.location.length>1&&e.append(H.toLocationSymbol(this.location[J.RIGHT])),e.toString()}},{key:"setLocations",value:function(e,t,n){this.location[J.ON]=e,this.location[J.LEFT]=t,this.location[J.RIGHT]=n}},{key:"get",value:function(e){return e<this.location.length?this.location[e]:H.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===H.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1===arguments.length){var e=arguments[0];this.setLocation(J.ON,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.location[t]=n}}},{key:"init",value:function(e){this.location=new Array(e).fill(null),this.setAllLocations(H.NONE)}},{key:"isEqualOnSide",value:function(e,t){return this.location[t]===e.location[t]}},{key:"allPositionsEqual",value:function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[J.ON]=n}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[J.ON]=o,this.location[J.LEFT]=a,this.location[J.RIGHT]=s}}}])}(),Mt=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getGeometryCount",value:function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}},{key:"setAllLocations",value:function(e,t){this.elt[e].setAllLocations(t)}},{key:"isNull",value:function(e){return this.elt[e].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(e){return this.elt[e].isLine()}},{key:"merge",value:function(e){for(var t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new Ot(e.elt[t]):this.elt[t].merge(e.elt[t])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1===arguments.length){var e=arguments[0];return this.elt[e].get(J.ON)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}}},{key:"toString",value:function(){var e=new oe;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}},{key:"isArea",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var e=arguments[0];return this.elt[e].isArea()}}},{key:"isAnyNull",value:function(e){return this.elt[e].isAnyNull()}},{key:"setLocation",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(J.ON,t)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}}},{key:"isEqualOnSide",value:function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}},{key:"allPositionsEqual",value:function(e,t){return this.elt[e].allPositionsEqual(t)}},{key:"toLine",value:function(e){this.elt[e].isArea()&&(this.elt[e]=new Ot(this.elt[e].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Ot(t),this.elt[1]=new Ot(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Ot(n.elt[0]),this.elt[1]=new Ot(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Ot(H.NONE),this.elt[1]=new Ot(H.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Ot(o,a,s),this.elt[1]=new Ot(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],d=arguments[3];this.elt[0]=new Ot(H.NONE,H.NONE,H.NONE),this.elt[1]=new Ot(H.NONE,H.NONE,H.NONE),this.elt[l].setLocations(u,c,d)}}},{key:"toLineLabel",value:function(t){for(var n=new e(H.NONE),i=0;i<2;i++)n.setLocation(i,t.getLocation(i));return n}}])}(),Rt=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=de.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(e){this._startDe=e;var t=e,n=!0;do{if(null===t)throw new fe("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new fe("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var i=t.getLabel();z.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(e){return this._pts.get(e)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var e=this._startDe;do{var t=e.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(e,t,n){var i=e.getCoordinates();if(t){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var a=i.length-2;n&&(a=i.length-1);for(var s=a;s>=0;s--)this._pts.add(i[s])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var e=this._startDe;do{e.getEdge().setInResult(!0),e=e.getNext()}while(e!==this._startDe)}},{key:"containsPoint",value:function(e){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e))return!1;if(!Lt.isInRing(e,t.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(e))return!1;return!0}},{key:"addHole",value:function(e){this._holes.add(e)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){var t=arguments[1],n=arguments[0].getLocation(t,J.RIGHT);if(n===H.NONE)return null;if(this._label.getLocation(t)===H.NONE)return this._label.setLocation(t,n),null}}},{key:"setShell",value:function(e){this._shell=e,null!==e&&e.addHole(this)}},{key:"toPolygon",value:function(e){for(var t=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n).getLinearRing();return e.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new ge,this._pts=new ge,this._label=new Mt(H.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ge,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()}}}]),Dt=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"setEdgeRing",value:function(e,t){e.setMinEdgeRing(t)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];Rt.constructor_.call(this,e,t)}}])}(Rt),Ft=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"buildMinimalRings",value:function(){var e=new ge,t=this._startDe;do{if(null===t.getMinEdgeRing()){var n=new Dt(t,this._geometryFactory);e.add(n)}t=t.getNext()}while(t!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,t){e.setEdgeRing(t)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do{e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];Rt.constructor_.call(this,e,t)}}])}(Rt),zt=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(e){this._label=e}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(e){this._isCovered=e,this._isCoveredSet=!0}},{key:"updateIM",value:function(e){z.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._label=e}}}]),Bt=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,t){var n=H.NONE;if(n=this._label.getLocation(t),!e.isNull(t)){var i=e.getLocation(t);n!==H.BOUNDARY&&(n=i)}return n}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return h(i,"setLabel",this,1).apply(this,arguments);var e=arguments[0],t=arguments[1];null===this._label?this._label=new Mt(e,t):this._label.setLocation(e,t)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof i){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof Mt)for(var t=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(t,n);this._label.getLocation(n)===H.NONE&&this._label.setLocation(n,r)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(null===this._label)return null;var t=H.NONE;null!==this._label&&(t=this._label.getLocation(e));var n=null;switch(t){case H.BOUNDARY:n=H.INTERIOR;break;case H.INTERIOR:default:n=H.BOUNDARY}this._label.setLocation(e,n)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var e=arguments[0],t=arguments[1];this._coord=e,this._edges=t,this._label=new Mt(0,H.NONE)}}])}(zt),Ut=function(e){function i(){return n(this,i),t(this,i,arguments)}return u(i,e),o(i)}(tt);function qt(e){return null==e?0:e.color}function Vt(e){return null==e?null:e.parent}function Gt(e,t){null!==e&&(e.color=t)}function jt(e){return null==e?null:e.left}function $t(e){return null==e?null:e.right}var Ht=function(e){function i(){var e;return n(this,i),(e=t(this,i)).root_=null,e.size_=0,e}return u(i,e),o(i,[{key:"get",value:function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null}},{key:"put",value:function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=e.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=t,o}r=r.right}}while(null!==r);var a={key:e,left:null,right:null,value:t,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var t;for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)Vt(e)===jt(Vt(Vt(e)))?1===qt(t=$t(Vt(Vt(e))))?(Gt(Vt(e),0),Gt(t,0),Gt(Vt(Vt(e)),1),e=Vt(Vt(e))):(e===$t(Vt(e))&&(e=Vt(e),this.rotateLeft(e)),Gt(Vt(e),0),Gt(Vt(Vt(e)),1),this.rotateRight(Vt(Vt(e)))):1===qt(t=jt(Vt(Vt(e))))?(Gt(Vt(e),0),Gt(t,0),Gt(Vt(Vt(e)),1),e=Vt(Vt(e))):(e===jt(Vt(e))&&(e=Vt(e),this.rotateRight(e)),Gt(Vt(e),0),Gt(Vt(Vt(e)),1),this.rotateLeft(Vt(Vt(e))));this.root_.color=0}},{key:"values",value:function(){var e=new ge,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=i.successor(t));)e.add(t.value);return e}},{key:"entrySet",value:function(){var e=new Q,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=i.successor(t));)e.add(t);return e}},{key:"rotateLeft",value:function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}}},{key:"rotateRight",value:function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(n>0))return!0;t=t.right}}return!1}}],[{key:"successor",value:function(e){var t;if(null===e)return null;if(null!==e.right){for(t=e.right;null!==t.left;)t=t.left;return t}t=e.parent;for(var n=e;null!==t&&n===t.right;)n=t,t=t.parent;return t}}])}(Ut),Yt=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"addNode",value:function(){if(arguments[0]instanceof V){var e=arguments[0],t=this.nodeMap.get(e);return null===t&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof Bt){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}}},{key:"print",value:function(e){for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(e){for(var t=new ge,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(e)===H.BOUNDARY&&t.add(i)}return t}},{key:"add",value:function(e){var t=e.getCoordinate();this.addNode(t).add(e)}}],[{key:"constructor_",value:function(){this.nodeMap=new Ht,this.nodeFact=null;var e=arguments[0];this.nodeFact=e}}]),Wt=function(){function e(){n(this,e)}return o(e,null,[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(e,t){return e!==t&&2==(e-t+4)%4}},{key:"commonHalfPlane",value:function(e,t){if(e===t)return e;if(2==(e-t+4)%4)return-1;var n=e<t?e:t;return 0===n&&3===(e>t?e:t)?3:n}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new b("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?e.NE:e.SE:n>=0?e.NW:e.SW}if(arguments[0]instanceof V&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new b("Cannot compute the quadrant for two identical points "+i);return r.x>=i.x?r.y>=i.y?e.NE:e.SE:r.y>=i.y?e.NW:e.SW}}}])}();Wt.NE=0,Wt.NW=1,Wt.SW=2,Wt.SE=3;var Xt=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"compareDirection",value:function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:de.index(e._p0,e._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(e){this._node=e}},{key:"print",value:function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);e.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label}},{key:"computeLabel",value:function(e){}},{key:"init",value:function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Wt.quadrant(this._dx,this._dy),z.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];e.constructor_.call(this,n,i,r,null)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];e.constructor_.call(this,o),this.init(a,s),this._label=l}}}])}(),Kt=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new Mt(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new fe("assigned depths do not match",this.getCoordinate());this._depth[e]=t}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,t=0;t<2;t++)this._label.isArea(t)&&this._label.getLocation(t,J.LEFT)===H.INTERIOR&&this._label.getLocation(t,J.RIGHT)===H.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){h(i,"print",this,1).call(this,e),e.print(" "+this._depth[J.LEFT]+"/"+this._depth[J.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,H.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,H.EXTERIOR);return e&&t&&n}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;e===J.LEFT&&(i=-1);var r=J.opposite(e),o=t+n*i;this.setDepth(e,t),this.setDepth(r,o)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],t=arguments[1];if(Xt.constructor_.call(this,e),this._isForward=t,t)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,t){return e===H.EXTERIOR&&t===H.INTERIOR?1:e===H.INTERIOR&&t===H.EXTERIOR?-1:0}}])}(Xt),Qt=o(function e(){n(this,e)},[{key:"createNode",value:function(e){return new Bt(e,null)}}]),Zt=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(e){e.println("Edges:");for(var t=0;t<this._edges.size();t++){e.println("edge "+t+":");var n=this._edges.get(t);n.print(e),n.eiList.print(e)}}},{key:"find",value:function(e){return this._nodes.find(e)}},{key:"addNode",value:function(){if(arguments[0]instanceof Bt){var e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof V){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(e){be.out.println(e)}},{key:"isBoundaryNode",value:function(e,t){var n=this._nodes.find(t);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(e)===H.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(e,t,n,i){return!!e.equals(n)&&de.index(e,t,i)===de.COLLINEAR&&Wt.quadrant(e,t)===Wt.quadrant(n,i)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(e){be.out.print(e)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(e,t){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(e,t,r[0],r[1]))return i;if(this.matchInSameDirection(e,t,r[r.length-1],r[r.length-2]))return i}return null}},{key:"insertEdge",value:function(e){this._edges.add(e)}},{key:"findEdgeEnd",value:function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}},{key:"addEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this._edges.add(n);var i=new Kt(n,!0),r=new Kt(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}}},{key:"add",value:function(e){this._nodes.add(e),this._edgeEndList.add(e)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(e,t){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(e.equals(r[0])&&t.equals(r[1]))return i}return null}}],[{key:"constructor_",value:function(){if(this._edges=new ge,this._nodes=null,this._edgeEndList=new ge,0===arguments.length)this._nodes=new Yt(new Qt);else if(1===arguments.length){var e=arguments[0];this._nodes=new Yt(e)}}},{key:"linkResultDirectedEdges",value:function(e){for(var t=e.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}]),Jt=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"sortShellsAndHoles",value:function(e,t,n){for(var i=e.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):t.add(r)}}},{key:"computePolygons",value:function(e){for(var t=new ge,n=e.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);t.add(i)}return t}},{key:"placeFreeHoles",value:function(t,n){for(var i=n.iterator();i.hasNext();){var r=i.next();if(null===r.getShell()){var o=e.findEdgeRingContaining(r,t);if(null===o)throw new fe("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(o)}}}},{key:"buildMinimalEdgeRings",value:function(e,t,n){for(var i=new ge,r=e.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),t.add(s)):n.addAll(a)}else i.add(o)}return i}},{key:"buildMaximalEdgeRings",value:function(e){for(var t=new ge,n=e.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Ft(i,this._geometryFactory);t.add(r),r.setInResult()}}return t}},{key:"placePolygonHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(e)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(e){for(var t=0,n=null,i=e.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,t++)}return z.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){var t=arguments[0],n=arguments[1];Zt.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(t),r=new ge,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new ge;var e=arguments[0];this._geometryFactory=e}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=t.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();if(!c.equals(i)&&c.contains(i)){r=We.ptNotInList(n.getCoordinates(),u.getCoordinates());var d=!1;Lt.isInRing(r,u.getCoordinates())&&(d=!0),d&&(null===o||a.contains(c))&&(a=(o=l).getLinearRing().getEnvelopeInternal())}}return o}}])}(),en=o(function e(){n(this,e)},[{key:"getBounds",value:function(){}}]),tn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[en,w]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t}}]),nn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(e){for(var t=null,n=this._items.get(e);2*e<=this._size&&((t=2*e)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(n)<0);e=t)this._items.set(e,this._items.get(t));this._items.set(e,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,e)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new ge,this._items.add(null)}}]),rn=o(function e(){n(this,e)},[{key:"insert",value:function(e,t){}},{key:"remove",value:function(e,t){}},{key:"query",value:function(){}}]),on=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(e){z.isTrue(null===this._bounds),this._childBoundables.add(e)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[en,w]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new ge,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._level=e}}}]),an={reverseOrder:function(){return{compare:function(e,t){return t.compareTo(e)}}},min:function(e){return an.sort(e),e.get(0)},sort:function(e,t){var n=e.toArray();t?Me.sort(n,t):Me.sort(n);for(var i=e.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},singletonList:function(e){var t=new ge;return t.add(e),t}},sn=function(){function e(){n(this,e)}return o(e,null,[{key:"maxDistance",value:function(t,n,i,r,o,a,s,l){var u=e.distance(t,n,o,a);return u=Math.max(u,e.distance(t,n,s,l)),u=Math.max(u,e.distance(i,r,o,a)),Math.max(u,e.distance(i,r,s,l))}},{key:"distance",value:function(e,t,n,i){var r=n-e,o=i-t;return Math.sqrt(r*r+o*o)}},{key:"maximumDistance",value:function(t,n){var i=Math.min(t.getMinX(),n.getMinX()),r=Math.min(t.getMinY(),n.getMinY()),o=Math.max(t.getMaxX(),n.getMaxX()),a=Math.max(t.getMaxY(),n.getMaxY());return e.distance(i,r,o,a)}},{key:"minMaxDistance",value:function(t,n){var i=t.getMinX(),r=t.getMinY(),o=t.getMaxX(),a=t.getMaxY(),s=n.getMinX(),l=n.getMinY(),u=n.getMaxX(),c=n.getMaxY(),d=e.maxDistance(i,r,i,a,s,l,s,c);return d=Math.min(d,e.maxDistance(i,r,i,a,s,l,u,l)),d=Math.min(d,e.maxDistance(i,r,i,a,u,c,s,c)),d=Math.min(d,e.maxDistance(i,r,i,a,u,c,u,l)),d=Math.min(d,e.maxDistance(i,r,o,r,s,l,s,c)),d=Math.min(d,e.maxDistance(i,r,o,r,s,l,u,l)),d=Math.min(d,e.maxDistance(i,r,o,r,u,c,s,c)),d=Math.min(d,e.maxDistance(i,r,o,r,u,c,u,l)),d=Math.min(d,e.maxDistance(o,a,i,a,s,l,s,c)),d=Math.min(d,e.maxDistance(o,a,i,a,s,l,u,l)),d=Math.min(d,e.maxDistance(o,a,i,a,u,c,s,c)),d=Math.min(d,e.maxDistance(o,a,i,a,u,c,u,l)),d=Math.min(d,e.maxDistance(o,a,o,r,s,l,s,c)),d=Math.min(d,e.maxDistance(o,a,o,r,s,l,u,l)),d=Math.min(d,e.maxDistance(o,a,o,r,u,c,s,c)),Math.min(d,e.maxDistance(o,a,o,r,u,c,u,l))}}])}(),ln=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"maximumDistance",value:function(){return sn.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,n){var i=e.isComposite(this._boundable1),r=e.isComposite(this._boundable2);if(i&&r)return e.area(this._boundable1)>e.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,n),null):(this.expand(this._boundable2,this._boundable1,!0,t,n),null);if(i)return this.expand(this._boundable1,this._boundable2,!1,t,n),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,t,n),null;throw new b("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this._boundable1)||e.isComposite(this._boundable2))}},{key:"compareTo",value:function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(t,n,i,r,o){for(var a=t.getChildBoundables().iterator();a.hasNext();){var s=a.next(),l=null;(l=i?new e(n,s,this._itemDistance):new e(s,n,this._itemDistance)).getDistance()<o&&r.add(l)}}},{key:"getBoundable",value:function(e){return 0===e?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(e){return e.getBounds().getArea()}},{key:"isComposite",value:function(e){return e instanceof on}}])}(),un=o(function e(){n(this,e)},[{key:"visitItem",value:function(e){}}]),cn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"queryInternal",value:function(){if(re(arguments[2],un)&&arguments[0]instanceof Object&&arguments[1]instanceof on)for(var e=arguments[0],t=arguments[2],n=arguments[1].getChildBoundables(),i=0;i<n.size();i++){var r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),e)&&(r instanceof on?this.queryInternal(e,r,t):r instanceof tn?t.visitItem(r.getItem()):z.shouldNeverReachHere())}else if(re(arguments[2],ne)&&arguments[0]instanceof Object&&arguments[1]instanceof on)for(var o=arguments[0],a=arguments[2],s=arguments[1].getChildBoundables(),l=0;l<s.size();l++){var u=s.get(l);this.getIntersectsOp().intersects(u.getBounds(),o)&&(u instanceof on?this.queryInternal(o,u,a):u instanceof tn?a.add(u.getItem()):z.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(e){return e.get(e.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();n instanceof on?e+=this.size(n):n instanceof tn&&(e+=1)}return e}}},{key:"removeItem",value:function(e,t){for(var n=null,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof tn&&r.getItem()===t&&(n=r)}return null!==n&&(e.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new ge:e}if(1===arguments.length){for(var t=arguments[0],n=new ge,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof on){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof tn?n.add(r.getItem()):z.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(e,t){z.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new tn(e,t))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var e=arguments[0],t=new ge;return this.boundablesAtLevel(e,this._root,t),t}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(z.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof on?this.boundablesAtLevel(n,a,r):(z.isTrue(a instanceof tn),-1===n&&r.add(a))}return null}}},{key:"query",value:function(){if(1===arguments.length){var e=arguments[0];this.build();var t=new ge;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.queryInternal(e,this._root,t),t}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var a=null,s=i.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof on&&(o=this.remove(n,l,r))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),o}}},{key:"createHigherLevels",value:function(e,t){z.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();if(n instanceof on){var i=this.depth(n);i>e&&(e=i)}}return e+1}}},{key:"createParentBoundables",value:function(e,t){z.isTrue(!e.isEmpty());var n=new ge;n.add(this.createNode(t));var i=new ge(e);an.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(o)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new ge,this._nodeCapacity=null,0===arguments.length)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];z.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(e,t){return e>t?1:e<t?-1:0}}])}();cn.IntersectsOp=function(){},cn.DEFAULT_NODE_CAPACITY=10;var dn=o(function e(){n(this,e)},[{key:"distance",value:function(e,t){}}]),hn=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,t){z.isTrue(e.length>0);for(var n=new ge,i=0;i<e.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[i],t));return n}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.nearestNeighbourK(e,M.POSITIVE_INFINITY,t)}if(3===arguments.length){var n=arguments[0],r=arguments[2],o=arguments[1],a=new nn;a.add(n);for(var s=new nn;!a.isEmpty()&&o>=0;){var l=a.poll(),u=l.getDistance();if(u>=o)break;l.isLeaves()?s.size()<r?s.add(l):(s.peek().getDistance()>u&&(s.poll(),s.add(l)),o=s.peek().getDistance()):l.expandToQueue(a,o)}return i.getItems(s)}}},{key:"createNode",value:function(e){return new fn(e)}},{key:"size",value:function(){return 0===arguments.length?h(i,"size",this,1).call(this):h(i,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof j))return h(i,"insert",this,1).apply(this,arguments);var e=arguments[0],t=arguments[1];if(e.isNull())return null;h(i,"insert",this,1).call(this,e,t)}},{key:"getIntersectsOp",value:function(){return i.intersectsOp}},{key:"verticalSlices",value:function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),i=new Array(t).fill(null),r=e.iterator(),o=0;o<t;o++){i[o]=new ge;for(var a=0;r.hasNext()&&a<n;){var s=r.next();i[o].add(s),a++}}return i}},{key:"query",value:function(){if(1===arguments.length){var e=arguments[0];return h(i,"query",this,1).call(this,e)}if(2===arguments.length){var t=arguments[0],n=arguments[1];h(i,"query",this,1).call(this,t,n)}}},{key:"getComparator",value:function(){return i.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,t){return h(i,"createParentBoundables",this,1).call(this,e,t)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof j){var e=arguments[0],t=arguments[1];return h(i,"remove",this,1).call(this,e,t)}return h(i,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?h(i,"depth",this,1).call(this):h(i,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,t){z.isTrue(!e.isEmpty());var n=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),r=new ge(e);an.sort(r,i.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,t)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(re(arguments[0],dn)){var e=arguments[0];if(this.isEmpty())return null;var t=new ln(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(t)}if(arguments[0]instanceof ln){var n=arguments[0],i=M.POSITIVE_INFINITY,r=null,o=new nn;for(o.add(n);!o.isEmpty()&&i>0;){var a=o.poll(),s=a.getDistance();if(s>=i)break;a.isLeaves()?(i=s,r=a):a.expandToQueue(o,i)}return null===r?null:[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]}}else{if(2===arguments.length){var l=arguments[0],u=arguments[1];if(this.isEmpty()||l.isEmpty())return null;var c=new ln(this.getRoot(),l.getRoot(),u);return this.nearestNeighbour(c)}if(3===arguments.length){var d=arguments[2],h=new tn(arguments[0],arguments[1]),f=new ln(this.getRoot(),h,d);return this.nearestNeighbour(f)[0]}if(4===arguments.length){var p=arguments[2],g=arguments[3],m=new tn(arguments[0],arguments[1]),y=new ln(this.getRoot(),m,p);return this.nearestNeighbourK(y,g)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=M.POSITIVE_INFINITY,i=new nn;for(i.add(e);!i.isEmpty();){var r=i.poll(),o=r.getDistance();if(o>t)return!1;if(r.maximumDistance()<=t)return!0;if(r.isLeaves()){if((n=o)<=t)return!0}else r.expandToQueue(i,n)}return!1}if(3===arguments.length){var a=arguments[0],s=arguments[1],l=arguments[2],u=new ln(this.getRoot(),a.getRoot(),s);return this.isWithinDistance(u,l)}}},{key:"interfaces_",get:function(){return[rn,w]}}],[{key:"constructor_",value:function(){if(0===arguments.length)i.constructor_.call(this,i.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var e=arguments[0];cn.constructor_.call(this,e)}}},{key:"centreX",value:function(e){return i.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"getItems",value:function(e){for(var t=new Array(e.size()).fill(null),n=0;!e.isEmpty();){var i=e.poll();t[n]=i.getBoundable(0).getItem(),n++}return t}},{key:"centreY",value:function(e){return i.avg(e.getMinY(),e.getMaxY())}}])}(cn),fn=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"computeBounds",value:function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new j(n.getBounds()):e.expandToInclude(n.getBounds())}return e}}],[{key:"constructor_",value:function(){var e=arguments[0];on.constructor_.call(this,e)}}])}(on);hn.STRtreeNode=fn,hn.xComparator=new(o(function e(){n(this,e)},[{key:"interfaces_",get:function(){return[R]}},{key:"compare",value:function(e,t){return cn.compareDoubles(hn.centreX(e.getBounds()),hn.centreX(t.getBounds()))}}])),hn.yComparator=new(o(function e(){n(this,e)},[{key:"interfaces_",get:function(){return[R]}},{key:"compare",value:function(e,t){return cn.compareDoubles(hn.centreY(e.getBounds()),hn.centreY(t.getBounds()))}}])),hn.intersectsOp=new(o(function e(){n(this,e)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(e,t){return e.intersects(t)}}])),hn.DEFAULT_NODE_CAPACITY=10;var pn=function(){function e(){n(this,e)}return o(e,null,[{key:"relativeSign",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"compare",value:function(t,n,i){if(n.equals2D(i))return 0;var r=e.relativeSign(n.x,i.x),o=e.relativeSign(n.y,i.y);switch(t){case 0:return e.compareValue(r,o);case 1:return e.compareValue(o,r);case 2:return e.compareValue(o,-r);case 3:return e.compareValue(-r,o);case 4:return e.compareValue(-r,-o);case 5:return e.compareValue(-o,-r);case 6:return e.compareValue(-o,r);case 7:return e.compareValue(r,-o)}return z.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0}}])}(),gn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?pn.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._segString=e,this.coord=new V(t),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!t.equals2D(e.getCoordinate(n))}}]),mn=o(function e(){n(this,e)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),yn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var e=new Ye;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next();this.addEdgeCoordinates(n,i,e),n=i}return e.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var e=new ge;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"createSplitEdgePts",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2;if(2===n)return[new V(e.coord),new V(t.coord)];var i=this._edge.getCoordinate(t.segmentIndex),r=t.isInterior()||!t.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new V(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return r&&(o[a]=new V(t.coord)),o}},{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"findCollapsesFromExistingVertices",value:function(e){for(var t=0;t<this._edge.size()-2;t++){var n=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var i=this._edge.getCoordinate(t+2);n.equals2D(i)&&e.add(ae.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(e,t,n){var i=this.createSplitEdgePts(e,t);n.add(i,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next(),r=this.createSplitEdge(n,i);e.add(r),n=i}}},{key:"findCollapseIndex",value:function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var i=t.segmentIndex-e.segmentIndex;return t.isInterior()||i--,1===i&&(n[0]=e.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(e){for(var t=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,t)&&e.add(ae.valueOf(t[0])),i=r}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)}},{key:"createSplitEdge",value:function(e,t){var n=this.createSplitEdgePts(e,t);return new En(n,this._edge.getData())}},{key:"add",value:function(e,t){var n=new gn(this._edge,e,t,this._edge.getSegmentOctant(t)),i=this._nodeMap.get(n);return null!==i?(z.isTrue(i.coord.equals2D(e),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(e){var t=this._edge.getCoordinates(),n=e.get(0).getCoordinate(0);if(!n.equals2D(t[0]))throw new D("bad split edge start point at "+n);var i=e.get(e.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(t[t.length-1]))throw new D("bad split edge end point at "+r)}}],[{key:"constructor_",value:function(){this._nodeMap=new Ht,this._edge=null;var e=arguments[0];this._edge=e}}]),vn=function(){function e(){n(this,e)}return o(e,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new b("Cannot compute the octant for point ( "+t+", "+n+" )");var i=Math.abs(t),r=Math.abs(n);return t>=0?n>=0?i>=r?0:1:i>=r?7:6:n>=0?i>=r?3:2:i>=r?4:5}if(arguments[0]instanceof V&&arguments[1]instanceof V){var o=arguments[0],a=arguments[1],s=a.x-o.x,l=a.y-o.y;if(0===s&&0===l)throw new b("Cannot compute the octant for two identical points "+o);return e.octant(s,l)}}}])}(),bn=o(function e(){n(this,e)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(e){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(e){}},{key:"getData",value:function(){}}]),_n=o(function e(){n(this,e)},[{key:"addIntersection",value:function(e,t){}},{key:"interfaces_",get:function(){return[bn]}}]),En=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(e){return this._pts[e]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this._data=e}},{key:"safeOctant",value:function(e,t){return e.equals2D(t)?0:vn.octant(e,t)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new V(arguments[0].getIntersection(i));this.addIntersection(r,n)}}},{key:"toString",value:function(){return Ct.toLineString(new Ze(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(e,t){var n=t,i=n+1;if(i<this._pts.length){var r=this._pts[i];e.equals2D(r)&&(n=i)}return this._nodeList.add(e,n)}},{key:"addIntersections",value:function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++)this.addIntersection(e,t,n,i)}},{key:"interfaces_",get:function(){return[_n]}}],[{key:"constructor_",value:function(){this._nodeList=new yn(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var t=arguments[0],n=new ge;return e.getNodedSubstrings(t,n),n}if(2===arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)}}])}(),kn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=de.index(this.p0,this.p1,t.p0),i=de.index(this.p0,this.p1,t.p1);return n>=0&&i>=0||n<=0&&i<=0?Math.max(n,i):0}if(arguments[0]instanceof V){var r=arguments[0];return de.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(e){return e.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(e){var t=new At;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof V){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new V(t);var n=this.projectionFactor(t),i=new V;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof e){var r=arguments[0],o=this.projectionFactor(r.p0),a=this.projectionFactor(r.p1);if(o>=1&&a>=1)return null;if(o<=0&&a<=0)return null;var s=this.project(r.p0);o<0&&(s=this.p0),o>1&&(s=this.p1);var l=this.project(r.p1);return a<0&&(l=this.p0),a>1&&(l=this.p1),new e(s,l)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(e){return 0===e?this.p0:this.p1}},{key:"distancePerpendicular",value:function(e){return Ee.pointToLinePerpendicular(e,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=t*t+n*n;return i<=0?M.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/i}},{key:"closestPoints",value:function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2).fill(null),i=M.MAX_VALUE,r=null,o=this.closestPoint(e.p0);i=o.distance(e.p0),n[0]=o,n[1]=e.p0;var a=this.closestPoint(e.p1);(r=a.distance(e.p1))<i&&(i=r,n[0]=a,n[1]=e.p1);var s=e.closestPoint(this.p0);(r=s.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=s);var l=e.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n}},{key:"closestPoint",value:function(e){var t=this.projectionFactor(e);return t>0&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var e=this.p0;this.p0=this.p1,this.p1=e}},{key:"equalsTopo",value:function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}},{key:"lineIntersection",value:function(e){return ve.intersection(this.p0,this.p1,e.p0,e.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),i=this.p0.y+e*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,l=0;if(0!==t){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=t*r/a,l=t*o/a}return new V(n-l,i+s)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||M.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(e){var t=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=t*t+n*n,o=t*t-n*n,a=e.getX(),s=e.getY();return new V((-o*a-2*t*n*s-2*t*i)/r,(o*s-2*t*n*a-2*n*i)/r)}},{key:"distance",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return Ee.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof V){var n=arguments[0];return Ee.pointToSegment(n,this.p0,this.p1)}}},{key:"pointAlong",value:function(e){var t=new V;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}},{key:"hashCode",value:function(){var e=M.doubleToLongBits(this.p0.x);e^=31*M.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=M.doubleToLongBits(this.p1.x);return n^=31*M.doubleToLongBits(this.p1.y),t^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[E,w]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)e.constructor_.call(this,new V,new V);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.p0=n,this.p1=i}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e.constructor_.call(this,new V(r,o),new V(a,s))}}},{key:"midPoint",value:function(e,t){return new V((e.x+t.x)/2,(e.y+t.y)/2)}}])}(),wn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(2===arguments.length);else if(4===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[3];arguments[0].getLineSegment(e,this._overlapSeg1),t.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new kn,this._overlapSeg2=new kn}}]),Sn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]}},{key:"computeSelect",value:function(e,t,n,i){var r=this._pts[t],o=this._pts[n];if(n-t==1)return i.select(this,t),null;if(!e.intersects(r,o))return null;var a=Math.trunc((t+n)/2);t<a&&this.computeSelect(e,t,a,i),a<n&&this.computeSelect(e,a,n,i)}},{key:"getCoordinates",value:function(){for(var e=new Array(this._end-this._start+1).fill(null),t=0,n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,e,e._start,e._end,t)}else if(6===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5];if(i-n==1&&a-o==1)return s.overlap(this,n,r,o),null;if(!this.overlaps(n,i,r,o,a))return null;var l=Math.trunc((n+i)/2),u=Math.trunc((o+a)/2);n<l&&(o<u&&this.computeOverlaps(n,l,r,o,u,s),u<a&&this.computeOverlaps(n,l,r,u,a,s)),l<i&&(o<u&&this.computeOverlaps(l,i,r,o,u,s),u<a&&this.computeOverlaps(l,i,r,u,a,s))}}},{key:"setId",value:function(e){this._id=e}},{key:"select",value:function(e,t){this.computeSelect(e,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(null===this._env){var e=this._pts[this._start],t=this._pts[this._end];this._env=new j(e,t)}return this._env}},{key:"overlaps",value:function(e,t,n,i,r){return j.intersects(this._pts[e],this._pts[t],n._pts[i],n._pts[r])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=i}}]),xn=function(){function e(){n(this,e)}return o(e,null,[{key:"findChainEnd",value:function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var i=Wt.quadrant(e[n],e[n+1]),r=t+1;r<e.length&&(e[r-1].equals2D(e[r])||Wt.quadrant(e[r-1],e[r])===i);)r++;return r-1}},{key:"getChains",value:function(){if(1===arguments.length){var t=arguments[0];return e.getChains(t,null)}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new ge,o=0;do{var a=e.findChainEnd(n,o),s=new Sn(n,o,a,i);r.add(s),o=a}while(o<n.length-1);return r}}}])}(),Tn=o(function e(){n(this,e)},[{key:"computeNodes",value:function(e){}},{key:"getNodedSubstrings",value:function(){}}]),In=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(e){this._segInt=e}},{key:"interfaces_",get:function(){return[Tn]}}],[{key:"constructor_",value:function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setSegmentIntersector(e)}}}]),Cn=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return En.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var t=xn.getChains(e.getCoordinates(),e).iterator();t.hasNext();){var n=t.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new Nn(this._segInt),t=this._monoChains.iterator();t.hasNext();)for(var n=t.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new ge,this._index=new hn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var e=arguments[0];In.constructor_.call(this,e)}}}])}(In),Nn=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"overlap",value:function(){if(4!==arguments.length)return h(i,"overlap",this,1).apply(this,arguments);var e=arguments[1],t=arguments[2],n=arguments[3],r=arguments[0].getContext(),o=t.getContext();this._si.processIntersections(r,e,o,n)}}],[{key:"constructor_",value:function(){this._si=null;var e=arguments[0];this._si=e}}])}(wn);Cn.SegmentOverlapAction=Nn;var An=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"isDeletable",value:function(e,t,n,i){var r=this._inputLine[e],o=this._inputLine[t],a=this._inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,e,n,i)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var o=!1;this.isDeletable(t,n,i,this._distanceTol)&&(this._isDeleted[n]=e.DELETE,o=!0,r=!0),t=o?i:n,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n)}return r}},{key:"isShallowConcavity",value:function(e,t,n,i){return de.index(e,t,n)===this._angleOrientation&&Ee.pointToSegment(t,e,n)<i}},{key:"isShallowSampled",value:function(t,n,i,r,o){var a=Math.trunc((r-i)/e.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(var s=i;s<r;s+=a)if(!this.isShallow(t,n,this._inputLine[s],o))return!1;return!0}},{key:"isConcave",value:function(e,t,n){return de.index(e,t,n)===this._angleOrientation}},{key:"simplify",value:function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=de.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var t=!1;do{t=this.deleteShallowConcavities()}while(t);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(e,t,n,i){return Ee.pointToSegment(t,e,n)<i}},{key:"collapseLine",value:function(){for(var t=new Ye,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==e.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=de.COUNTERCLOCKWISE;var e=arguments[0];this._inputLine=e}},{key:"simplify",value:function(t,n){return new e(t).simplify(n)}}])}();An.INIT=0,An.DELETE=1,An.KEEP=1,An.NUM_PTS_TO_CHECK=10;var Pn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getCoordinates",value:function(){return this._ptList.toArray(e.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(e){this._precisionModel=e}},{key:"addPt",value:function(e){var t=new V(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var i=e.length-1;i>=0;i--)this.addPt(e[i])}},{key:"isRedundant",value:function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new at).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var e=new V(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)}},{key:"setMinimumVertexDistance",value:function(e){this._minimimVertexDistance=e}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ge}}])}();Pn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Ln=function(){function e(){n(this,e)}return o(e,null,[{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1===arguments.length){var e=arguments[0];return Math.atan2(e.y,e.x)}if(2===arguments.length){var t=arguments[0],n=arguments[1],i=n.x-t.x,r=n.y-t.y;return Math.atan2(r,i)}}},{key:"isAcute",value:function(e,t,n){var i=e.x-t.x,r=e.y-t.y;return i*(n.x-t.x)+r*(n.y-t.y)>0}},{key:"isObtuse",value:function(e,t,n){var i=e.x-t.x,r=e.y-t.y;return i*(n.x-t.x)+r*(n.y-t.y)<0}},{key:"interiorAngle",value:function(t,n,i){var r=e.angle(n,t),o=e.angle(n,i);return Math.abs(o-r)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,i){var r=e.angle(n,t),o=e.angle(n,i);return e.diff(r,o)}},{key:"diff",value:function(e,t){var n=null;return(n=e<t?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(e){return e*Math.PI/180}},{key:"getTurn",value:function(t,n){var i=Math.sin(n-t);return i>0?e.COUNTERCLOCKWISE:i<0?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,i){var r=e.angle(n,t),o=e.angle(n,i)-r;return o<=-Math.PI?o+e.PI_TIMES_2:o>Math.PI?o-e.PI_TIMES_2:o}}])}();Ln.PI_TIMES_2=2*Math.PI,Ln.PI_OVER_2=Math.PI/2,Ln.PI_OVER_4=Math.PI/4,Ln.COUNTERCLOCKWISE=de.COUNTERCLOCKWISE,Ln.CLOCKWISE=de.CLOCKWISE,Ln.NONE=de.COLLINEAR;var On=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"addNextSegment",value:function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=de.index(this._s0,this._s1,this._s2),i=n===de.CLOCKWISE&&this._side===J.LEFT||n===de.COUNTERCLOCKWISE&&this._side===J.RIGHT;0===n?this.addCollinear(t):i?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},{key:"addLineEndCap",value:function(e,t){var n=new kn(e,t),i=new kn;this.computeOffsetSegment(n,J.LEFT,this._distance,i);var r=new kn;this.computeOffsetSegment(n,J.RIGHT,this._distance,r);var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case y.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(t,s+Math.PI/2,s-Math.PI/2,de.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case y.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case y.CAP_SQUARE:var l=new V;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new V(i.p1.x+l.x,i.p1.y+l.y),c=new V(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(e,t,n,i){var r=ve.intersection(t.p0,t.p1,n.p0,n.p1);if(null!==r&&(i<=0?1:r.distance(e)/Math.abs(i))<=this._bufParams.getMitreLimit())return this._segList.addPt(r),null;this.addLimitedMitreJoin(t,n,i,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===y.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===y.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(e){this._segList.addPt(new V(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new V(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new V(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new V(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(e,t){this._segList.addPts(e,t)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(e,t,n,i,r){var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o),l=n.x-e.x,u=n.y-e.y,c=Math.atan2(u,l);i===de.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(t),this.addDirectedFillet(e,s,c,i,r),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(e,t,n,i){var r=this._seg0.p1,o=Ln.angle(r,this._seg0.p0),a=Ln.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,s=Ln.normalize(o+a),l=Ln.normalize(s+Math.PI),u=i*n,c=n-u*Math.abs(Math.sin(a)),d=r.x+u*Math.cos(l),h=r.y+u*Math.sin(l),f=new V(d,h),p=new kn(r,f),g=p.pointAlongOffset(1,c),m=p.pointAlongOffset(1,-c);this._side===J.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))}},{key:"addDirectedFillet",value:function(e,t,n,i,r){var o=i===de.CLOCKWISE?-1:1,a=Math.abs(t-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=new V,c=0;c<s;c++){var d=t+o*c*l;u.x=e.x+r*Math.cos(d),u.y=e.y+r*Math.sin(d),this._segList.addPt(u)}}},{key:"computeOffsetSegment",value:function(e,t,n,i){var r=t===J.LEFT?1:-1,o=e.p1.x-e.p0.x,a=e.p1.y-e.p0.y,s=Math.sqrt(o*o+a*a),l=r*n*o/s,u=r*n*a/s;i.p0.x=e.p0.x-u,i.p0.y=e.p0.y+l,i.p1.x=e.p1.x-u,i.p1.y=e.p1.y+l}},{key:"addInsideTurn",value:function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new V((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var r=new V((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(e){var t=new V(e.x+this._distance,e.y);this._segList.addPt(t),this.addDirectedFillet(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Pn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===y.JOIN_BEVEL||this._bufParams.getJoinStyle()===y.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,de.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new kn,this._seg1=new kn,this._offset0=new kn,this._offset1=new kn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new At,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===y.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)}}])}();On.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,On.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,On.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,On.MAX_CLOSING_SEG_LEN_FACTOR=80;var Mn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getOffsetCurve",value:function(e,t){if(this._distance=t,0===t)return null;var n=t<0,i=Math.abs(t),r=this.getSegGen(i);e.length<=1?this.computePointCurve(e[0],r):this.computeOffsetCurve(e,n,r);var o=r.getCoordinates();return n&&We.reverse(o),o}},{key:"computeSingleSidedBufferCurve",value:function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var r=An.simplify(e,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],J.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(e,!1);var s=An.simplify(e,i),l=s.length-1;n.initSideSegments(s[0],s[1],J.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(e,t,n){var i=this.simplifyTolerance(this._distance);t===J.RIGHT&&(i=-i);var r=An.simplify(e,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],t);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(r[a],s)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(e,t){var n=this.simplifyTolerance(this._distance),i=An.simplify(e,n),r=i.length-1;t.initSideSegments(i[0],i[1],J.LEFT);for(var o=2;o<=r;o++)t.addNextSegment(i[o],!0);t.addLastSegment(),t.addLineEndCap(i[r-1],i[r]);var a=An.simplify(e,-n),s=a.length-1;t.initSideSegments(a[s],a[s-1],J.LEFT);for(var l=s-2;l>=0;l--)t.addNextSegment(a[l],!0);t.addLastSegment(),t.addLineEndCap(a[1],a[0]),t.closeRing()}},{key:"computePointCurve",value:function(e,t){switch(this._bufParams.getEndCapStyle()){case y.CAP_ROUND:t.createCircle(e);break;case y.CAP_SQUARE:t.createSquare(e)}}},{key:"getLineCurve",value:function(e,t){if(this._distance=t,this.isLineOffsetEmpty(t))return null;var n=Math.abs(t),i=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],i);else if(this._bufParams.isSingleSided()){var r=t<0;this.computeSingleSidedBufferCurve(e,r,i)}else this.computeLineBufferCurve(e,i);return i.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(e){return e*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return e.copyCoordinates(t);var r=this.getSegGen(i);return this.computeRingBufferCurve(t,n,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){var r=An.simplify(e,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],J.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var s=An.simplify(e,i),l=s.length-1;n.initSideSegments(s[0],s[1],J.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(e){return 0===e||e<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(e){return new On(this._precisionModel,this._bufParams,e)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t}},{key:"copyCoordinates",value:function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new V(e[n]);return t}}])}(),Rn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var e=arguments[0],t=new ge,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();e.y<r.getMinY()||e.y>r.getMaxY()||this.findStabbedSegments(e,i.getDirectedEdges(),t)}return t}if(3===arguments.length)if(re(arguments[2],ne)&&arguments[0]instanceof V&&arguments[1]instanceof Kt){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||de.index(this._seg.p0,this._seg.p1,o)===de.RIGHT)){var c=a.getDepth(J.LEFT);this._seg.p0.equals(l[u])||(c=a.getDepth(J.RIGHT));var d=new Dn(this._seg,c);s.add(d)}}else if(re(arguments[2],ne)&&arguments[0]instanceof V&&re(arguments[1],ne))for(var h=arguments[0],f=arguments[2],p=arguments[1].iterator();p.hasNext();){var g=p.next();g.isForward()&&this.findStabbedSegments(h,g,f)}}},{key:"getDepth",value:function(e){var t=this.findStabbedSegments(e);return 0===t.size()?0:an.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new kn;var e=arguments[0];this._subgraphs=e}}]),Dn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==n||0!=(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new kn(e),this._leftDepth=t}}]);Rn.DepthSegment=Dn;var Fn=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,null,[{key:"constructor_",value:function(){v.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(v),zn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getY",value:function(){var e=this.y/this.w;if(M.isNaN(e)||M.isInfinite(e))throw new Fn;return e}},{key:"getX",value:function(){var e=this.x/this.w;if(M.isNaN(e)||M.isInfinite(e))throw new Fn;return e}},{key:"getCoordinate",value:function(){var e=new V;return e.x=this.getX(),e.y=this.getY(),e}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof V&&arguments[1]instanceof V){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var d=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3],g=d.y-h.y,m=h.x-d.x,y=d.x*h.y-h.x*d.y,v=f.y-p.y,b=p.x-f.x,_=f.x*p.y-p.x*f.y;this.x=m*_-b*y,this.y=v*y-g*_,this.w=g*b-v*m}}}])}(),Bn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new b("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.p0=e,this.p1=t,this.p2=n}},{key:"area",value:function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}},{key:"signedArea",value:function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}},{key:"det",value:function(e,t,n,i){return e*i-t*n}},{key:"interpolateZ",value:function(e,t,n,i){var r=t.x,o=t.y,a=n.x-r,s=i.x-r,l=n.y-o,u=i.y-o,c=a*u-s*l,d=e.x-r,h=e.y-o,f=(u*d-s*h)/c,p=(-l*d+a*h)/c;return t.getZ()+f*(n.getZ()-t.getZ())+p*(i.getZ()-t.getZ())}},{key:"longestSideLength",value:function(e,t,n){var i=e.distance(t),r=t.distance(n),o=n.distance(e),a=i;return r>a&&(a=r),o>a&&(a=o),a}},{key:"circumcentreDD",value:function(e,t,n){var i=le.valueOf(e.x).subtract(n.x),r=le.valueOf(e.y).subtract(n.y),o=le.valueOf(t.x).subtract(n.x),a=le.valueOf(t.y).subtract(n.y),s=le.determinant(i,r,o,a).multiply(2),l=i.sqr().add(r.sqr()),u=o.sqr().add(a.sqr()),c=le.determinant(r,l,a,u),d=le.determinant(i,l,o,u),h=le.valueOf(n.x).subtract(c.divide(s)).doubleValue(),f=le.valueOf(n.y).add(d.divide(s)).doubleValue();return new V(h,f)}},{key:"isAcute",value:function(e,t,n){return!!Ln.isAcute(e,t,n)&&!!Ln.isAcute(t,n,e)&&!!Ln.isAcute(n,e,t)}},{key:"circumcentre",value:function(t,n,i){var r=i.x,o=i.y,a=t.x-r,s=t.y-o,l=n.x-r,u=n.y-o,c=2*e.det(a,s,l,u),d=e.det(s,a*a+s*s,u,l*l+u*u),h=e.det(a,a*a+s*s,l,l*l+u*u);return new V(r-d/c,o+h/c)}},{key:"perpendicularBisector",value:function(e,t){var n=t.x-e.x,i=t.y-e.y,r=new zn(e.x+n/2,e.y+i/2,1),o=new zn(e.x-i+n/2,e.y+n+i/2,1);return new zn(r,o)}},{key:"angleBisector",value:function(e,t,n){var i=t.distance(e),r=i/(i+t.distance(n)),o=n.x-e.x,a=n.y-e.y;return new V(e.x+r*o,e.y+r*a)}},{key:"area3D",value:function(e,t,n){var i=t.x-e.x,r=t.y-e.y,o=t.getZ()-e.getZ(),a=n.x-e.x,s=n.y-e.y,l=n.getZ()-e.getZ(),u=r*l-o*s,c=o*a-i*l,d=i*s-r*a,h=u*u+c*c+d*d;return Math.sqrt(h)/2}},{key:"centroid",value:function(e,t,n){var i=(e.x+t.x+n.x)/3,r=(e.y+t.y+n.y)/3;return new V(i,r)}},{key:"inCentre",value:function(e,t,n){var i=t.distance(n),r=e.distance(n),o=e.distance(t),a=i+r+o,s=(i*e.x+r*t.x+o*n.x)/a,l=(i*e.y+r*t.y+o*n.y)/a;return new V(s,l)}}])}(),Un=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(e,t,n,i,r){if(0===t&&e.length<Ve.MINIMUM_VALID_SIZE)return null;var o=i,a=r;e.length>=Ve.MINIMUM_VALID_SIZE&&de.isCCW(e)&&(o=r,a=i,n=J.opposite(n));var s=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(s,o,a)}},{key:"addRingBothSides",value:function(e,t){this.addRingSide(e,t,J.LEFT,H.EXTERIOR,H.INTERIOR),this.addRingSide(e,t,J.RIGHT,H.INTERIOR,H.EXTERIOR)}},{key:"addPoint",value:function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,H.EXTERIOR,H.INTERIOR)}},{key:"addPolygon",value:function(e){var t=this._distance,n=J.LEFT;this._distance<0&&(t=-this._distance,n=J.RIGHT);var i=e.getExteriorRing(),r=We.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addRingSide(r,t,n,H.EXTERIOR,H.INTERIOR);for(var o=0;o<e.getNumInteriorRing();o++){var a=e.getInteriorRingN(o),s=We.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addRingSide(s,t,J.opposite(n),H.INTERIOR,H.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(e,t){var n=new Bn(e[0],e[1],e[2]),i=n.inCentre();return Ee.pointToSegment(i,n.p0,n.p1)<Math.abs(t)}},{key:"addLineString",value:function(e){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=We.removeRepeatedPoints(e.getCoordinates());if(We.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,H.EXTERIOR,H.INTERIOR)}}},{key:"addCurve",value:function(e,t,n){if(null===e||e.length<2)return null;var i=new En(e,new Mt(0,H.BOUNDARY,t,n));this._curveList.add(i)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(e){if(e.isEmpty())return null;if(e instanceof De)this.addPolygon(e);else if(e instanceof Ae)this.addLineString(e);else if(e instanceof Le)this.addPoint(e);else if(e instanceof qe)this.addCollection(e);else if(e instanceof ot)this.addCollection(e);else if(e instanceof et)this.addCollection(e);else{if(!(e instanceof Ue))throw new X(e.getGeometryType());this.addCollection(e)}}},{key:"isErodedCompletely",value:function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var i=e.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return t<0&&2*Math.abs(t)>r}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ge;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n}}]),qn=o(function e(){n(this,e)},[{key:"locate",value:function(e){}}]),Vn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,e.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new W;var t=this._parent.getGeometryN(this._index++);return t instanceof Ue?(this._subcollectionIterator=new e(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new X(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[mn]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()}},{key:"isAtomic",value:function(e){return!(e instanceof Ue)}}])}(),Gn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"locate",value:function(t){return e.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[qn]}}],[{key:"constructor_",value:function(){this._geom=null;var e=arguments[0];this._geom=e}},{key:"locatePointInPolygon",value:function(t,n){if(n.isEmpty())return H.EXTERIOR;var i=n.getExteriorRing(),r=e.locatePointInRing(t,i);if(r!==H.INTERIOR)return r;for(var o=0;o<n.getNumInteriorRing();o++){var a=n.getInteriorRingN(o),s=e.locatePointInRing(t,a);if(s===H.BOUNDARY)return H.BOUNDARY;if(s===H.INTERIOR)return H.EXTERIOR}return H.INTERIOR}},{key:"locatePointInRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?Lt.locateInRing(e,t.getCoordinates()):H.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,n){return H.EXTERIOR!==e.locatePointInPolygon(t,n)}},{key:"locateInGeometry",value:function(t,n){if(n instanceof De)return e.locatePointInPolygon(t,n);if(n instanceof Ue)for(var i=new Vn(n);i.hasNext();){var r=i.next();if(r!==n){var o=e.locateInGeometry(t,r);if(o!==H.EXTERIOR)return o}}return H.EXTERIOR}},{key:"isContained",value:function(t,n){return H.EXTERIOR!==e.locate(t,n)}},{key:"locate",value:function(t,n){return n.isEmpty()?H.EXTERIOR:n.getEnvelopeInternal().intersects(t)?e.locateInGeometry(t,n):H.EXTERIOR}}])}(),jn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return 0===t&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(e){for(var t=H.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(e)&&i.getLocation(e,J.LEFT)!==H.NONE&&(t=i.getLocation(e,J.LEFT))}if(t===H.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(e,J.ON)===H.NONE&&s.setLocation(e,J.ON,r),s.isArea(e)){var l=s.getLocation(e,J.LEFT),u=s.getLocation(e,J.RIGHT);if(u!==H.NONE){if(u!==r)throw new fe("side location conflict",a.getCoordinate());l===H.NONE&&z.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=l}else z.isTrue(s.getLocation(e,J.LEFT)===H.NONE,"found single null side"),s.setLocation(e,J.RIGHT,r),s.setLocation(e,J.LEFT,r)}}}},{key:"getCoordinate",value:function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null}},{key:"print",value:function(e){be.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"isAreaLabelsConsistent",value:function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,i=t.get(n).getLabel().getLocation(e,J.LEFT);z.isTrue(i!==H.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var a=o.next().getLabel();z.isTrue(a.isArea(e),"Found non-area edge");var s=a.getLocation(e,J.LEFT),l=a.getLocation(e,J.RIGHT);if(s===l)return!1;if(l!==r)return!1;r=s}return!0}},{key:"findIndex",value:function(e){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===e)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new ge(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(e,t,n){return this._ptInAreaLocation[e]===H.NONE&&(this._ptInAreaLocation[e]=Gn.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]}},{key:"toString",value:function(){var e=new oe;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()}},{key:"computeEdgeEndLabels",value:function(e){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(e)}},{key:"computeLabelling",value:function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===H.BOUNDARY&&(t[r]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=H.NONE;if(t[l])u=H.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,e)}s.setAllLocationsIfNull(l,u)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(e,t){this._edgeMap.put(e,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Ht,this._edgeList=null,this._ptInAreaLocation=[H.NONE,H.NONE]}}]),$n=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,t=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===e&&r.isInResult()&&(e=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;t=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;t.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new fe("no outgoing dirEdge found",this.getCoordinate());z.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}}},{key:"insert",value:function(e){var t=e;this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var n=e.get(0);if(1===t)return n;var i=e.get(t-1),r=n.getQuadrant(),o=i.getQuadrant();return Wt.isNorthern(r)&&Wt.isNorthern(o)?n:Wt.isNorthern(r)||Wt.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(z.shouldNeverReachHere("found two horizontal edges incident on node"),null):i}},{key:"print",value:function(e){be.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ge;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next().getLabel();n.setAllLocationsIfNull(0,e.getLocation(0)),n.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,t=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===t&&(t=r),null!==e&&r.setNext(e),e=i}t.setNext(e)}},{key:"computeDepths",value:function(){if(1===arguments.length){var e=arguments[0],t=this.findIndex(e),n=e.getDepth(J.LEFT),i=e.getDepth(J.RIGHT),r=this.computeDepths(t+1,this._edgeList.size(),n);if(this.computeDepths(0,t,r)!==i)throw new fe("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(J.RIGHT,a),a=l.getDepth(J.LEFT)}return a}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var t=e.next();t.getLabel().merge(t.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var t=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),a=o.getSym();switch(null===t&&o.getEdgeRing()===e&&(t=o),i){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==e)continue;n=a,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(z.isTrue(null!==t,"found null for first outgoing dirEdge"),z.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var e=0,t=this.iterator();t.hasNext();)t.next().isInResult()&&e++;return e}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=H.NONE,t=this.iterator();t.hasNext();){var n=t.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=H.INTERIOR;break}if(i.isInResult()){e=H.EXTERIOR;break}}}if(e===H.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(r===H.INTERIOR):(a.isInResult()&&(r=H.EXTERIOR),s.isInResult()&&(r=H.INTERIOR))}}},{key:"computeLabelling",value:function(e){h(i,"computeLabelling",this,1).call(this,e),this._label=new Mt(H.NONE);for(var t=this.iterator();t.hasNext();)for(var n=t.next().getEdge().getLabel(),r=0;r<2;r++){var o=n.getLocation(r);o!==H.INTERIOR&&o!==H.BOUNDARY||this._label.setLocation(r,H.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(jn),Hn=function(e){function i(){return n(this,i),t(this,i)}return u(i,e),o(i,[{key:"createNode",value:function(e){return new Bt(e,new $n)}}])}(Qt),Yn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"compareTo",value:function(t){var n=t;return e.compareOriented(this._pts,this._orientation,n._pts,n._orientation)}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)}},{key:"orientation",value:function(e){return 1===We.increasingDirection(e)}},{key:"compareOriented",value:function(e,t,n,i){for(var r=t?1:-1,o=i?1:-1,a=t?e.length:-1,s=i?n.length:-1,l=t?0:e.length-1,u=i?0:n.length-1;;){var c=e[l].compareTo(n[u]);if(0!==c)return c;var d=(l+=r)===a,h=(u+=o)===s;if(d&&!h)return-1;if(!d&&h)return 1;if(d&&h)return 0}}}])}(),Wn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"print",value:function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t);t>0&&e.print(","),e.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&e.print(","),e.print(i[r].x+" "+i[r].y);e.println(")")}e.print(")  ")}},{key:"addAll",value:function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(e){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(e){return this._edges.get(e)}},{key:"findEqualEdge",value:function(e){var t=new Yn(e.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(e){this._edges.add(e);var t=new Yn(e.getCoordinates());this._ocaMap.put(t,e)}}],[{key:"constructor_",value:function(){this._edges=new ge,this._ocaMap=new Ht}}]),Xn=o(function e(){n(this,e)},[{key:"processIntersections",value:function(e,t,n,i){}},{key:"isDone",value:function(){}}]),Kn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"isTrivialIntersection",value:function(t,n,i,r){if(t===i&&1===this._li.getIntersectionNum()){if(e.isAdjacentSegments(n,r))return!0;if(t.isClosed()){var o=t.size()-1;if(0===n&&r===o||0===r&&n===o)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,i)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Xn]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e}},{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}])}(),Qn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}},{key:"compareTo",value:function(e){var t=e;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new V(e),this.segmentIndex=t,this.dist=n}}]),Zn=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next(),r=this.createSplitEdge(n,i);e.add(r),n=i}}},{key:"addEndpoints",value:function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],r=t.dist>0||!t.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new V(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this.edge.pts[s];return r&&(o[a]=t.coord),new ri(o,new Mt(this.edge._label))}},{key:"add",value:function(e,t,n){var i=new Qn(e,t,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}},{key:"isIntersection",value:function(e){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(e))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Ht,this.edge=null;var e=arguments[0];this.edge=e}}]),Jn=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(e.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])||e.isTrue(this._matrix[H.INTERIOR][H.BOUNDARY])||e.isTrue(this._matrix[H.BOUNDARY][H.INTERIOR])||e.isTrue(this._matrix[H.BOUNDARY][H.BOUNDARY]))&&this._matrix[H.EXTERIOR][H.INTERIOR]===Ie.FALSE&&this._matrix[H.EXTERIOR][H.BOUNDARY]===Ie.FALSE}},{key:"isCoveredBy",value:function(){return(e.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])||e.isTrue(this._matrix[H.INTERIOR][H.BOUNDARY])||e.isTrue(this._matrix[H.BOUNDARY][H.INTERIOR])||e.isTrue(this._matrix[H.BOUNDARY][H.BOUNDARY]))&&this._matrix[H.INTERIOR][H.EXTERIOR]===Ie.FALSE&&this._matrix[H.BOUNDARY][H.EXTERIOR]===Ie.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var e=arguments[0],t=0;t<e.length;t++){var n=Math.trunc(t/3),i=t%3;this._matrix[n][i]=Ie.toDimensionValue(e.charAt(t))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this._matrix[r][o]=a}}},{key:"isContains",value:function(){return e.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&this._matrix[H.EXTERIOR][H.INTERIOR]===Ie.FALSE&&this._matrix[H.EXTERIOR][H.BOUNDARY]===Ie.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var e=arguments[0],t=0;t<e.length;t++){var n=Math.trunc(t/3),i=t%3;this.setAtLeast(n,i,Ie.toDimensionValue(e.charAt(t)))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this._matrix[r][o]<a&&(this._matrix[r][o]=a)}}},{key:"setAtLeastIfValid",value:function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}},{key:"isWithin",value:function(){return e.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&this._matrix[H.INTERIOR][H.EXTERIOR]===Ie.FALSE&&this._matrix[H.BOUNDARY][H.EXTERIOR]===Ie.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):(t===Ie.A&&n===Ie.A||t===Ie.L&&n===Ie.L||t===Ie.L&&n===Ie.A||t===Ie.P&&n===Ie.A||t===Ie.P&&n===Ie.L)&&this._matrix[H.INTERIOR][H.INTERIOR]===Ie.FALSE&&(e.isTrue(this._matrix[H.INTERIOR][H.BOUNDARY])||e.isTrue(this._matrix[H.BOUNDARY][H.INTERIOR])||e.isTrue(this._matrix[H.BOUNDARY][H.BOUNDARY]))}},{key:"isOverlaps",value:function(t,n){return t===Ie.P&&n===Ie.P||t===Ie.A&&n===Ie.A?e.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&e.isTrue(this._matrix[H.INTERIOR][H.EXTERIOR])&&e.isTrue(this._matrix[H.EXTERIOR][H.INTERIOR]):t===Ie.L&&n===Ie.L&&1===this._matrix[H.INTERIOR][H.INTERIOR]&&e.isTrue(this._matrix[H.INTERIOR][H.EXTERIOR])&&e.isTrue(this._matrix[H.EXTERIOR][H.INTERIOR])}},{key:"isEquals",value:function(t,n){return t===n&&e.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&this._matrix[H.INTERIOR][H.EXTERIOR]===Ie.FALSE&&this._matrix[H.BOUNDARY][H.EXTERIOR]===Ie.FALSE&&this._matrix[H.EXTERIOR][H.INTERIOR]===Ie.FALSE&&this._matrix[H.EXTERIOR][H.BOUNDARY]===Ie.FALSE}},{key:"toString",value:function(){for(var e=new Qe("123456789"),t=0;t<3;t++)for(var n=0;n<3;n++)e.setCharAt(3*t+n,Ie.toDimensionSymbol(this._matrix[t][n]));return e.toString()}},{key:"setAll",value:function(e){for(var t=0;t<3;t++)for(var n=0;n<3;n++)this._matrix[t][n]=e}},{key:"get",value:function(e,t){return this._matrix[e][t]}},{key:"transpose",value:function(){var e=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=e,e=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=e,e=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=e,this}},{key:"matches",value:function(t){if(9!==t.length)throw new b("Should be length 9: "+t);for(var n=0;n<3;n++)for(var i=0;i<3;i++)if(!e.matches(this._matrix[n][i],t.charAt(3*n+i)))return!1;return!0}},{key:"add",value:function(e){for(var t=0;t<3;t++)for(var n=0;n<3;n++)this.setAtLeast(t,n,e.get(t,n))}},{key:"isDisjoint",value:function(){return this._matrix[H.INTERIOR][H.INTERIOR]===Ie.FALSE&&this._matrix[H.INTERIOR][H.BOUNDARY]===Ie.FALSE&&this._matrix[H.BOUNDARY][H.INTERIOR]===Ie.FALSE&&this._matrix[H.BOUNDARY][H.BOUNDARY]===Ie.FALSE}},{key:"isCrosses",value:function(t,n){return t===Ie.P&&n===Ie.L||t===Ie.P&&n===Ie.A||t===Ie.L&&n===Ie.A?e.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&e.isTrue(this._matrix[H.INTERIOR][H.EXTERIOR]):t===Ie.L&&n===Ie.P||t===Ie.A&&n===Ie.P||t===Ie.A&&n===Ie.L?e.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&e.isTrue(this._matrix[H.EXTERIOR][H.INTERIOR]):t===Ie.L&&n===Ie.L&&0===this._matrix[H.INTERIOR][H.INTERIOR]}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Ie.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];e.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof e){var n=arguments[0];e.constructor_.call(this),this._matrix[H.INTERIOR][H.INTERIOR]=n._matrix[H.INTERIOR][H.INTERIOR],this._matrix[H.INTERIOR][H.BOUNDARY]=n._matrix[H.INTERIOR][H.BOUNDARY],this._matrix[H.INTERIOR][H.EXTERIOR]=n._matrix[H.INTERIOR][H.EXTERIOR],this._matrix[H.BOUNDARY][H.INTERIOR]=n._matrix[H.BOUNDARY][H.INTERIOR],this._matrix[H.BOUNDARY][H.BOUNDARY]=n._matrix[H.BOUNDARY][H.BOUNDARY],this._matrix[H.BOUNDARY][H.EXTERIOR]=n._matrix[H.BOUNDARY][H.EXTERIOR],this._matrix[H.EXTERIOR][H.INTERIOR]=n._matrix[H.EXTERIOR][H.INTERIOR],this._matrix[H.EXTERIOR][H.BOUNDARY]=n._matrix[H.EXTERIOR][H.BOUNDARY],this._matrix[H.EXTERIOR][H.EXTERIOR]=n._matrix[H.EXTERIOR][H.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return n===Ie.SYM_DONTCARE||n===Ie.SYM_TRUE&&(t>=0||t===Ie.TRUE)||n===Ie.SYM_FALSE&&t===Ie.FALSE||n===Ie.SYM_P&&t===Ie.P||n===Ie.SYM_L&&t===Ie.L||n===Ie.SYM_A&&t===Ie.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var i=arguments[1];return new e(arguments[0]).matches(i)}}},{key:"isTrue",value:function(e){return e>=0||e===Ie.TRUE}}])}(),ei=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(e){return null===e||0===e.length?null:(this.ensureCapacity(this._size+e.length),be.arraycopy(e,0,this._data,this._size,e.length),void(this._size+=e.length))}},{key:"ensureCapacity",value:function(e){if(e<=this._data.length)return null;var t=Math.max(e,2*this._data.length);this._data=Me.copyOf(this._data,t)}},{key:"toArray",value:function(){var e=new Array(this._size).fill(null);return be.arraycopy(this._data,0,e,0,this._size),e}},{key:"add",value:function(e){this.ensureCapacity(this._size+1),this._data[this._size]=e,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,0===arguments.length)e.constructor_.call(this,10);else if(1===arguments.length){var t=arguments[0];this._data=new Array(t).fill(null)}}}])}(),ti=function(){function e(){n(this,e)}return o(e,[{key:"getChainStartIndices",value:function(e){var t=0,n=new ei(Math.trunc(e.length/2));n.add(t);do{var i=this.findChainEnd(e,t);n.add(i),t=i}while(t<e.length-1);return n.toArray()}},{key:"findChainEnd",value:function(e,t){for(var n=Wt.quadrant(e[t],e[t+1]),i=t+1;i<e.length&&Wt.quadrant(e[i-1],e[i])===n;)i++;return i-1}},{key:"OLDgetChainStartIndices",value:function(t){var n=0,i=new ge;i.add(n);do{var r=this.findChainEnd(t,n);i.add(r),n=r}while(n<t.length-1);return e.toIntArray(i)}}],[{key:"toIntArray",value:function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}])}(),ni=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}},{key:"getMinX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5];if(o-r==1&&l-s==1)return u.addIntersections(this.e,r,a.e,s),null;if(!this.overlaps(r,o,a,s,l))return null;var c=Math.trunc((r+o)/2),d=Math.trunc((s+l)/2);r<c&&(s<d&&this.computeIntersectsForChain(r,c,a,s,d,u),d<l&&this.computeIntersectsForChain(r,c,a,d,l,u)),c<o&&(s<d&&this.computeIntersectsForChain(c,o,a,s,d,u),d<l&&this.computeIntersectsForChain(c,o,a,d,l,u))}}},{key:"overlaps",value:function(e,t,n,i,r){return j.intersects(this.pts[e],this.pts[t],n.pts[i],n.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<e.startIndex.length-1;i++)this.computeIntersectsForChain(n,e,i,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new ti;this.startIndex=t.getChainStartIndices(this.pts)}}]),ii=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"getDepth",value:function(e,t){return this._depth[e][t]}},{key:"setDepth",value:function(e,t,n){this._depth[e][t]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(this._depth[t][n]!==e.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===e.NULL_VALUE}if(2===arguments.length){var r=arguments[0],o=arguments[1];return this._depth[r][o]===e.NULL_VALUE}}},{key:"normalize",value:function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var i=0;this._depth[e][n]>t&&(i=1),this._depth[e][n]=i}}}},{key:"getDelta",value:function(e){return this._depth[e][J.RIGHT]-this._depth[e][J.LEFT]}},{key:"getLocation",value:function(e,t){return this._depth[e][t]<=0?H.EXTERIOR:H.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var t=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=t.getLocation(n,i);r!==H.EXTERIOR&&r!==H.INTERIOR||(this.isNull(n,i)?this._depth[n][i]=e.depthAtLocation(r):this._depth[n][i]+=e.depthAtLocation(r))}else if(3===arguments.length){var o=arguments[0],a=arguments[1];arguments[2]===H.INTERIOR&&this._depth[o][a]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===H.EXTERIOR?0:t===H.INTERIOR?1:e.NULL_VALUE}}])}();ii.NULL_VALUE=-1;var ri=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new i(e,Mt.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof i))return!1;var t=e;if(this.pts.length!==t.pts.length)return!1;for(var n=!0,r=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(t.pts[a])||(n=!1),this.pts[a].equals2D(t.pts[--o])||(r=!1),!n&&!r)return!1;return!0}},{key:"getCoordinate",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var e=arguments[0];return this.pts[e]}}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){i.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new ni(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new j;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,t,n,i){var r=new V(e.getIntersection(i)),o=t,a=e.getEdgeDistance(n,i),s=o+1;if(s<this.pts.length){var l=this.pts[s];r.equals2D(l)&&(o=s,a=0)}this.eiList.add(r,o,a)}},{key:"toString",value:function(){var e=new Qe;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++)this.addIntersection(e,t,n,i)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Zn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ii,this._depthDelta=0,1===arguments.length){var e=arguments[0];i.constructor_.call(this,e,null)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.pts=t,this._label=n}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Jn&&arguments[0]instanceof Mt))return h(i,"updateIM",this).apply(this,arguments);var e=arguments[0],t=arguments[1];t.setAtLeastIfValid(e.getLocation(0,J.ON),e.getLocation(1,J.ON),1),e.isArea()&&(t.setAtLeastIfValid(e.getLocation(0,J.LEFT),e.getLocation(1,J.LEFT),2),t.setAtLeastIfValid(e.getLocation(0,J.RIGHT),e.getLocation(1,J.RIGHT),2))}}])}(zt),oi=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"setWorkingPrecisionModel",value:function(e){this._workingPrecisionModel=e}},{key:"insertUniqueEdge",value:function(t){var n=this._edgeList.findEqualEdge(t);if(null!==n){var i=n.getLabel(),r=t.getLabel();n.isPointwiseEqual(t)||(r=new Mt(t.getLabel())).flip(),i.merge(r);var o=e.depthDelta(r),a=n.getDepthDelta()+o;n.setDepthDelta(a)}else this._edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(e,t){for(var n=new ge,i=e.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new Rn(n).getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),t.add(r.getDirectedEdges(),r.getNodes())}}},{key:"createSubgraphs",value:function(e){for(var t=new ge,n=e.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new ye;r.create(i),t.add(r)}}return an.sort(t,an.reverseOrder()),t}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(e){if(null!==this._workingNoder)return this._workingNoder;var t=new Cn,n=new At;return n.setPrecisionModel(e),t.setSegmentIntersector(new Kn(n)),t}},{key:"buffer",value:function(e,t){var n=this._workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var i=new Mn(n,this._bufParams),r=new Un(e,t,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Zt(new Hn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Jt(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)}},{key:"computeNodedEdges",value:function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=r.getData(),s=new ri(r.getCoordinates(),new Mt(a));this.insertUniqueEdge(s)}}}},{key:"setNoder",value:function(e){this._workingNoder=e}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wn;var e=arguments[0];this._bufParams=e}},{key:"depthDelta",value:function(e){var t=e.getLocation(0,J.LEFT),n=e.getLocation(0,J.RIGHT);return t===H.INTERIOR&&n===H.EXTERIOR?1:t===H.EXTERIOR&&n===H.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(e){for(var t=new at,n=new ge;e.hasNext();){var i=e.next(),r=t.createLineString(i.getCoordinates());n.add(r)}return t.buildGeometry(n)}}])}(),ai=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"rescale",value:function(){if(re(arguments[0],Y))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.rescale(t.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&be.out.println(n)}}},{key:"scale",value:function(){if(re(arguments[0],Y)){for(var e=arguments[0],t=new ge(e.size()),n=e.iterator();n.hasNext();){var i=n.next();t.add(new En(this.scale(i.getCoordinates()),i.getData()))}return t}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),a=0;a<r.length;a++)o[a]=new V(Math.round((r[a].x-this._offsetX)*this._scaleFactor),Math.round((r[a].y-this._offsetY)*this._scaleFactor),r[a].getZ());return We.removeRepeatedPoints(o)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e}},{key:"computeNodes",value:function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)}},{key:"interfaces_",get:function(){return[Tn]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],n=arguments[1];e.constructor_.call(this,t,n,0,0)}else if(4===arguments.length){var i=arguments[0],r=arguments[1];this._noder=i,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}])}(),si=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next().getCoordinates();this.checkEndPtVertexIntersections(t[0],this._segStrings),this.checkEndPtVertexIntersections(t[t.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new D("found endpt/interior pt intersection at index "+o+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var t=e.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(t,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(r,l,o,u);else if(4===arguments.length){var c=arguments[0],d=arguments[1],h=arguments[2],f=arguments[3];if(c===h&&d===f)return null;var p=c.getCoordinates()[d],g=c.getCoordinates()[d+1],m=h.getCoordinates()[f],y=h.getCoordinates()[f+1];if(this._li.computeIntersection(p,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,p,g)||this.hasInteriorIntersection(this._li,m,y)))throw new D("found non-noded intersection at "+p+"-"+g+" and "+m+"-"+y)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next();this.checkCollapses(t)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])}},{key:"hasInteriorIntersection",value:function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++){var r=e.getIntersection(i);if(!r.equals(t)&&!r.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,i){if(t.equals(i))throw new D("found non-noded collapse at "+e.fact.createLineString([t,n,i]))}}],[{key:"constructor_",value:function(){this._li=new At,this._segStrings=null;var e=arguments[0];this._segStrings=e}}])}();si.fact=new at;var li=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"intersectsScaled",value:function(e,t){var n=Math.min(e.x,t.x),i=Math.max(e.x,t.x),r=Math.min(e.y,t.y),o=Math.max(e.y,t.y),a=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(e,t);return z.isTrue(!(a&&s),"Found bad envelope test"),s}},{key:"initCorners",value:function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new V(this._maxx,this._maxy),this._corner[1]=new V(this._minx,this._maxy),this._corner[2]=new V(this._minx,this._miny),this._corner[3]=new V(this._maxx,this._miny)}},{key:"intersects",value:function(e,t){return 1===this._scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(e){return Math.round(e*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new j(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(e,t){var n=!1,i=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||e.equals(this._pt)||t.equals(this._pt)))))}},{key:"addSnappedNode",value:function(e,t){var n=e.getCoordinate(t),i=e.getCoordinate(t+1);return!!this.intersects(n,i)&&(e.addIntersection(this.getCoordinate(),t),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new b("Scale factor must be non-zero");1!==t&&(this._pt=new V(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new V,this._p1Scaled=new V),this.initCorners(this._pt)}}])}();li.SAFE_ENV_EXPANSION_FACTOR=.75;var ui=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(1===arguments.length);else if(2===arguments.length){var e=arguments[1];arguments[0].getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new kn}}]),ci=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var t=arguments[0],i=arguments[1],r=arguments[2],a=t.getSafeEnvelope(),s=new di(t,i,r);return this._index.query(a,new(o(function e(){n(this,e)},[{key:"interfaces_",get:function(){return[un]}},{key:"visitItem",value:function(e){e.select(a,s)}}]))),s.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var e=arguments[0];this._index=e}}]),di=function(e){function i(){var e;return n(this,i),e=t(this,i),i.constructor_.apply(e,arguments),e}return u(i,e),o(i,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof Sn))return h(i,"select",this,1).apply(this,arguments);var e=arguments[1],t=arguments[0].getContext();if(this._parentEdge===t&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(t,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=t,this._hotPixelVertexIndex=n}}])}(ui);ci.HotPixelSnapAction=di;var hi=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(e,t,n,i){if(e===n&&t===i)return null;var r=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Xn]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new ge}}]),fi=o(function e(){n(this,e),e.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(e){var t=En.getNodedSubstrings(e),n=new si(t);try{n.checkValid()}catch(i){if(!(i instanceof v))throw i;i.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return En.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}},{key:"findInteriorIntersections",value:function(e,t){var n=new hi(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(re(arguments[0],Y))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof En)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new li(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e,this._noder=new Cn,this._pointSnapper=new ci(this._noder.getIndex()),this.snapRound(e,this._li)}},{key:"computeIntersectionSnaps",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),i=new li(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}},{key:"interfaces_",get:function(){return[Tn]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new At,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()}}]),pi=function(){function e(){n(this,e),e.constructor_.apply(this,arguments)}return o(e,[{key:"bufferFixedPrecision",value:function(e){var t=new ai(new fi(new it(1)),e.getScale()),n=new oi(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var t=e.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(o){if(!(o instanceof fe))throw o;this._saveException=o}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=e.precisionScaleFactor(this._argGeom,this._distance,n),r=new it(i);this.bufferFixedPrecision(r)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===it.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(e){this._bufParams.setQuadrantSegments(e)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new oi(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof D))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(e){this._bufParams.setEndCapStyle(e)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new y,this._resultGeometry=null,this._saveException=null,1===arguments.length){var e=arguments[0];this._argGeom=e}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}}},{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[1];return new e(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof $&&"number"==typeof arguments[1]){var n=arguments[1],i=arguments[2],r=new e(arguments[0]);return r.setQuadrantSegments(i),r.getResultGeometry(n)}if(arguments[2]instanceof y&&arguments[0]instanceof $&&"number"==typeof arguments[1]){var o=arguments[1];return new e(arguments[0],arguments[2]).getResultGeometry(o)}}else if(4===arguments.length){var a=arguments[1],s=arguments[2],l=arguments[3],u=new e(arguments[0]);return u.setQuadrantSegments(s),u.setEndCapStyle(l),u.getResultGeometry(a)}}},{key:"precisionScaleFactor",value:function(e,t,n){var i=e.getEnvelopeInternal(),r=_e.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(t>0?t:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)}}])}();pi.CAP_ROUND=y.CAP_ROUND,pi.CAP_BUTT=y.CAP_FLAT,pi.CAP_FLAT=y.CAP_FLAT,pi.CAP_SQUARE=y.CAP_SQUARE,pi.MAX_PRECISION_DIGITS=12;var gi=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],mi=o(function e(t){n(this,e),this.geometryFactory=t||new at},[{key:"read",value:function(e){var t,n=(t="string"==typeof e?JSON.parse(e):e).type;if(!yi[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==gi.indexOf(n)?yi[n].call(this,t.coordinates):"GeometryCollection"===n?yi[n].call(this,t.geometries):yi[n].call(this,t)}},{key:"write",value:function(e){var t=e.getGeometryType();if(!vi[t])throw new Error("Geometry is not supported");return vi[t].call(this,e)}}]),yi={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var i=e.geometry.type;if(!yi[i])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=yi.bbox.call(this,e.bbox)),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.call(this,e.bbox)),t},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(i(V,f(r)))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new V(e[0],e[1]),new V(e[2],e[1]),new V(e[2],e[3]),new V(e[0],e[3]),new V(e[0],e[1])])},Point:function(e){var t=i(V,f(e));return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(yi.Point.call(this,e[n]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=yi.coordinates.call(this,e);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(yi.LineString.call(this,e[n]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=yi.coordinates.call(this,e[0]),n=this.geometryFactory.createLinearRing(t),i=[],r=1;r<e.length;++r){var o=e[r],a=yi.coordinates.call(this,o),s=this.geometryFactory.createLinearRing(a);i.push(s)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var i=e[n];t.push(yi.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var i=e[n];t.push(this.read(i))}return this.geometryFactory.createGeometryCollection(t)}},vi={coordinate:function(e){var t=[e.x,e.y];return e.z&&t.push(e.z),e.m&&t.push(e.m),t},Point:function(e){return{type:"Point",coordinates:vi.coordinate.call(this,e.getCoordinate())}},MultiPoint:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],r=vi.Point.call(this,i);t.push(r.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=e.getCoordinates(),i=0;i<n.length;++i){var r=n[i];t.push(vi.coordinate.call(this,r))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],r=vi.LineString.call(this,i);t.push(r.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=vi.LineString.call(this,e._shell);t.push(n.coordinates);for(var i=0;i<e._holes.length;++i){var r=e._holes[i],o=vi.LineString.call(this,r);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],r=vi.Polygon.call(this,i);t.push(r.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var i=e._geometries[n],r=i.getGeometryType();t.push(vi[r].call(this,i))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:pi,GeoJSONReader:o(function e(t){n(this,e),this.parser=new mi(t||new at)},[{key:"read",value:function(e){return this.parser.read(e)}}]),GeoJSONWriter:o(function e(){n(this,e),this.parser=new mi(this.geometryFactory)},[{key:"write",value:function(e){return this.parser.write(e)}}])}}()),Wh.exports);const Kh=fi(Xh);function Qh(){return new Zh}function Zh(){this.reset()}Zh.prototype={constructor:Zh,reset:function(){this.s=this.t=0},add:function(e){ef(Jh,e,this.t),ef(this,Jh.s,this.s),this.s?this.t+=Jh.t:this.s=Jh.t},valueOf:function(){return this.s}};var Jh=new Zh;function ef(e,t,n){var i=e.s=t+n,r=i-t,o=i-r;e.t=t-o+(n-r)}var tf=1e-6,nf=Math.PI,rf=nf/2,of=nf/4,af=2*nf,sf=180/nf,lf=nf/180,uf=Math.abs,cf=Math.atan,df=Math.atan2,hf=Math.cos,ff=Math.sin,pf=Math.sqrt;function gf(e){return e>1?0:e<-1?nf:Math.acos(e)}function mf(e){return e>1?rf:e<-1?-rf:Math.asin(e)}function yf(){}function vf(e,t){e&&kf.hasOwnProperty(e.type)&&kf[e.type](e,t)}var bf,_f,Ef={Feature:function(e,t){vf(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)vf(n[i].geometry,t)}},kf={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){wf(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)wf(n[i],t,0)},Polygon:function(e,t){Sf(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Sf(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)vf(n[i],t)}};function wf(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function Sf(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)wf(e[n],t,1);t.polygonEnd()}function xf(e){return[df(e[1],e[0]),mf(e[2])]}function Tf(e){var t=e[0],n=e[1],i=hf(n);return[i*hf(t),i*ff(t),ff(n)]}function If(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Cf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Nf(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Af(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Pf(e){var t=pf(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Lf(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function Of(e,t){return[e>nf?e-af:e<-nf?e+af:e,t]}function Mf(e){return function(t,n){return[(t+=e)>nf?t-af:t<-nf?t+af:t,n]}}function Rf(e){var t=Mf(e);return t.invert=Mf(-e),t}function Df(e,t){var n=hf(e),i=ff(e),r=hf(t),o=ff(t);function a(e,t){var a=hf(t),s=hf(e)*a,l=ff(e)*a,u=ff(t),c=u*n+s*i;return[df(l*r-c*o,s*n-u*i),mf(c*r+l*o)]}return a.invert=function(e,t){var a=hf(t),s=hf(e)*a,l=ff(e)*a,u=ff(t),c=u*r-l*o;return[df(l*r+u*o,s*n+c*i),mf(c*n-s*i)]},a}function Ff(e,t){(t=Tf(t))[0]-=e,Pf(t);var n=gf(-t[1]);return((-t[2]<0?-n:n)+af-tf)%af}function zf(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:yf,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Bf(e,t){return uf(e[0]-t[0])<tf&&uf(e[1]-t[1])<tf}function Uf(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function qf(e,t,n,i,r){var o,a,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(Bf(i,a)){for(r.lineStart(),o=0;o<t;++o)r.point((i=e[o])[0],i[1]);r.lineEnd()}else s.push(n=new Uf(i,e,null,!0)),l.push(n.o=new Uf(i,null,n,!1)),s.push(n=new Uf(a,e,null,!1)),l.push(n.o=new Uf(a,null,n,!0))}}),s.length){for(l.sort(t),Vf(s),Vf(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,d=s[0];;){for(var h=d,f=!0;h.v;)if((h=h.n)===d)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(o=0,a=u.length;o<a;++o)r.point((c=u[o])[0],c[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(f)for(u=h.p.z,o=u.length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(h.x,h.p.x,-1,r);h=h.p}u=(h=h.o).z,f=!f}while(!h.v);r.lineEnd()}}}function Vf(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function Gf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jf(e){for(var t,n,i,r=e.length,o=-1,a=0;++o<r;)a+=e[o].length;for(n=new Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n}Qh(),Qh(),Qh(),Of.invert=Of,1===(bf=Gf).length&&(_f=bf,bf=function(e,t){return Gf(_f(e),t)});var $f=1e9,Hf=-$f;function Yf(e,t,n,i){function r(r,o){return e<=r&&r<=n&&t<=o&&o<=i}function o(r,o,s,u){var c=0,d=0;if(null==r||(c=a(r,s))!==(d=a(o,s))||l(r,o)<0^s>0)do{u.point(0===c||3===c?e:n,c>1?i:t)}while((c=(c+s+4)%4)!==d);else u.point(o[0],o[1])}function a(i,r){return uf(i[0]-e)<tf?r>0?0:3:uf(i[0]-n)<tf?r>0?2:1:uf(i[1]-t)<tf?r>0?1:0:r>0?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,u,c,d,h,f,p,g,m,y,v,b=a,_=zf(),E={point:k,lineStart:function(){E.point=w,u&&u.push(c=[]);y=!0,m=!1,p=g=NaN},lineEnd:function(){l&&(w(d,h),f&&m&&_.rejoin(),l.push(_.result()));E.point=k,m&&b.lineEnd()},polygonStart:function(){b=_,l=[],u=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=u.length;n<r;++n)for(var o,a,s=u[n],l=1,c=s.length,d=s[0],h=d[0],f=d[1];l<c;++l)o=h,a=f,h=(d=s[l])[0],f=d[1],a<=i?f>i&&(h-o)*(i-a)>(f-a)*(e-o)&&++t:f<=i&&(h-o)*(i-a)<(f-a)*(e-o)&&--t;return t}(),n=v&&t,r=(l=jf(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&qf(l,s,t,o,a),a.polygonEnd());b=a,l=u=c=null}};function k(e,t){r(e,t)&&b.point(e,t)}function w(o,a){var s=r(o,a);if(u&&c.push([o,a]),y)d=o,h=a,f=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&m)b.point(o,a);else{var l=[p=Math.max(Hf,Math.min($f,p)),g=Math.max(Hf,Math.min($f,g))],_=[o=Math.max(Hf,Math.min($f,o)),a=Math.max(Hf,Math.min($f,a))];!function(e,t,n,i,r,o){var a,s=e[0],l=e[1],u=0,c=1,d=t[0]-s,h=t[1]-l;if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<u)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>u&&(u=a)}if(a=r-s,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>u&&(u=a)}else if(d>0){if(a<u)return;a<c&&(c=a)}if(a=i-l,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}return u>0&&(e[0]=s+u*d,e[1]=l+u*h),c<1&&(t[0]=s+c*d,t[1]=l+c*h),!0}}}}}(l,_,e,t,n,i)?s&&(b.lineStart(),b.point(o,a),v=!1):(m||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),s||b.lineEnd(),v=!1)}p=o,g=a,m=s}return E}}var Wf=Qh();function Xf(e){return e}Qh(),Qh(),Qh();var Kf=1/0,Qf=Kf,Zf=-Kf,Jf=Zf,ep={point:function(e,t){e<Kf&&(Kf=e);e>Zf&&(Zf=e);t<Qf&&(Qf=t);t>Jf&&(Jf=t)},lineStart:yf,lineEnd:yf,polygonStart:yf,polygonEnd:yf,result:function(){var e=[[Kf,Qf],[Zf,Jf]];return Zf=Jf=-(Qf=Kf=1/0),e}};function tp(e,t,n,i){return function(r,o){var a,s,l,u=t(o),c=r.invert(i[0],i[1]),d=zf(),h=t(d),f=!1,p={point:g,lineStart:y,lineEnd:v,polygonStart:function(){p.point=b,p.lineStart=_,p.lineEnd=E,s=[],a=[]},polygonEnd:function(){p.point=g,p.lineStart=y,p.lineEnd=v,s=jf(s);var e=function(e,t){var n=t[0],i=t[1],r=[ff(n),-hf(n),0],o=0,a=0;Wf.reset();for(var s=0,l=e.length;s<l;++s)if(c=(u=e[s]).length)for(var u,c,d=u[c-1],h=d[0],f=d[1]/2+of,p=ff(f),g=hf(f),m=0;m<c;++m,h=v,p=_,g=E,d=y){var y=u[m],v=y[0],b=y[1]/2+of,_=ff(b),E=hf(b),k=v-h,w=k>=0?1:-1,S=w*k,x=S>nf,T=p*_;if(Wf.add(df(T*w*ff(S),g*E+T*hf(S))),o+=x?k+w*af:k,x^h>=n^v>=n){var I=Cf(Tf(d),Tf(y));Pf(I);var C=Cf(r,I);Pf(C);var N=(x^k>=0?-1:1)*mf(C[2]);(i>N||i===N&&(I[0]||I[1]))&&(a+=x^k>=0?1:-1)}}return(o<-tf||o<tf&&Wf<-tf)^1&a}(a,c);s.length?(f||(o.polygonStart(),f=!0),qf(s,ip,e,n,o)):e&&(f||(o.polygonStart(),f=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&o.point(t,n)}function m(e,t){var n=r(e,t);u.point(n[0],n[1])}function y(){p.point=m,u.lineStart()}function v(){p.point=g,u.lineEnd()}function b(e,t){l.push([e,t]);var n=r(e,t);h.point(n[0],n[1])}function _(){h.lineStart(),l=[]}function E(){b(l[0][0],l[0][1]),h.lineEnd();var e,t,n,i,r=h.clean(),u=d.result(),c=u.length;if(l.pop(),a.push(l),l=null,c)if(1&r){if((t=(n=u[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),e=0;e<t;++e)o.point((i=n[e])[0],i[1]);o.lineEnd()}}else c>1&&2&r&&u.push(u.pop().concat(u.shift())),s.push(u.filter(np))}return p}}function np(e){return e.length>1}function ip(e,t){return((e=e.x)[0]<0?e[1]-rf-tf:rf-e[1])-((t=t.x)[0]<0?t[1]-rf-tf:rf-t[1])}Qh();const rp=tp(function(){return!0},function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?nf:-nf,l=uf(o-n);uf(l-nf)<tf?(e.point(n,i=(i+a)/2>0?rf:-rf),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(o,i),t=0):r!==s&&l>=nf&&(uf(n-r)<tf&&(n-=r*tf),uf(o-s)<tf&&(o-=s*tf),i=function(e,t,n,i){var r,o,a=ff(e-n);return uf(a)>tf?cf((ff(t)*(o=hf(i))*ff(n)-ff(i)*(r=hf(t))*ff(e))/(r*o*a)):(t+i)/2}(n,i,o,a),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=o,i=a),r=s},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*rf,i.point(-nf,r),i.point(0,r),i.point(nf,r),i.point(nf,0),i.point(nf,-r),i.point(0,-r),i.point(-nf,-r),i.point(-nf,0),i.point(-nf,r);else if(uf(e[0]-t[0])>tf){var o=e[0]<t[0]?nf:-nf;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-nf,-rf]);function op(e,t){var n=hf(e),i=n>0,r=uf(n)>tf;function o(e,t){return hf(e)*hf(t)>n}function a(e,t,i){var r=[1,0,0],o=Cf(Tf(e),Tf(t)),a=If(o,o),s=o[0],l=a-s*s;if(!l)return!i&&e;var u=n*a/l,c=-n*s/l,d=Cf(r,o),h=Af(r,u);Nf(h,Af(o,c));var f=d,p=If(h,f),g=If(f,f),m=p*p-g*(If(h,h)-1);if(!(m<0)){var y=pf(m),v=Af(f,(-p-y)/g);if(Nf(v,h),v=xf(v),!i)return v;var b,_=e[0],E=t[0],k=e[1],w=t[1];E<_&&(b=_,_=E,E=b);var S=E-_,x=uf(S-nf)<tf;if(!x&&w<k&&(b=k,k=w,w=b),x||S<tf?x?k+w>0^v[1]<(uf(v[0]-_)<tf?k:w):k<=v[1]&&v[1]<=w:S>nf^(_<=v[0]&&v[0]<=E)){var T=Af(f,(-p+y)/g);return Nf(T,h),[v,xf(T)]}}}function s(t,n){var r=i?e:nf-e,o=0;return t<-r?o|=1:t>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return tp(o,function(e){var t,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,h){var f,p=[d,h],g=o(d,h),m=i?g?0:s(d,h):g?s(d+(d<0?nf:-nf),h):0;if(!t&&(u=l=g)&&e.lineStart(),g!==l&&(!(f=a(t,p))||Bf(t,f)||Bf(p,f))&&(p[0]+=tf,p[1]+=tf,g=o(p[0],p[1])),g!==l)c=0,g?(e.lineStart(),f=a(p,t),e.point(f[0],f[1])):(f=a(t,p),e.point(f[0],f[1]),e.lineEnd()),t=f;else if(r&&t&&i^g){var y;m&n||!(y=a(p,t,!0))||(c=0,i?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1])))}!g||t&&Bf(t,p)||e.point(p[0],p[1]),t=p,l=g,n=m},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return c|(u&&l)<<1}}},function(n,i,r,o){!function(e,t,n,i,r,o){if(n){var a=hf(t),s=ff(t),l=i*n;null==r?(r=t+i*af,o=t-l/2):(r=Ff(a,r),o=Ff(a,o),(i>0?r<o:r>o)&&(r+=i*af));for(var u,c=r;i>0?c>o:c<o;c-=l)u=xf([a,-s*hf(c),-s*ff(c)]),e.point(u[0],u[1])}}(o,e,t,r,n,i)},i?[0,-e]:[-nf,e-nf])}function ap(e){return function(t){var n=new sp;for(var i in e)n[i]=e[i];return n.stream=t,n}}function sp(){}function lp(e,t,n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),function(e,t){e&&Ef.hasOwnProperty(e.type)?Ef[e.type](e,t):vf(e,t)}(n,e.stream(ep));var a=ep.result(),s=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+t[0][0]+(i-s*(a[1][0]+a[0][0]))/2,u=+t[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([l,u])}sp.prototype={constructor:sp,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var up=hf(30*lf);function cp(e,t){return+t?function(e,t){function n(i,r,o,a,s,l,u,c,d,h,f,p,g,m){var y=u-i,v=c-r,b=y*y+v*v;if(b>4*t&&g--){var _=a+h,E=s+f,k=l+p,w=pf(_*_+E*E+k*k),S=mf(k/=w),x=uf(uf(k)-1)<tf||uf(o-d)<tf?(o+d)/2:df(E,_),T=e(x,S),I=T[0],C=T[1],N=I-i,A=C-r,P=v*N-y*A;(P*P/b>t||uf((y*N+v*A)/b-.5)>.3||a*h+s*f+l*p<up)&&(n(i,r,o,a,s,l,I,C,x,_/=w,E/=w,k,g,m),m.point(I,C),n(I,C,x,_,E,k,u,c,d,h,f,p,g,m))}}return function(t){var i,r,o,a,s,l,u,c,d,h,f,p,g={point:m,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),g.lineStart=_},polygonEnd:function(){t.polygonEnd(),g.lineStart=y}};function m(n,i){n=e(n,i),t.point(n[0],n[1])}function y(){c=NaN,g.point=v,t.lineStart()}function v(i,r){var o=Tf([i,r]),a=e(i,r);n(c,d,u,h,f,p,c=a[0],d=a[1],u=i,h=o[0],f=o[1],p=o[2],16,t),t.point(c,d)}function b(){g.point=m,t.lineEnd()}function _(){y(),g.point=E,g.lineEnd=k}function E(e,t){v(i=e,t),r=c,o=d,a=h,s=f,l=p,g.point=v}function k(){n(c,d,u,h,f,p,r,o,i,a,s,l,16,t),g.lineEnd=b,b()}return g}}(e,t):function(e){return ap({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var dp=ap({point:function(e,t){this.stream.point(e*lf,t*lf)}});function hp(e){return function(e){var t,n,i,r,o,a,s,l,u,c,d=150,h=480,f=250,p=0,g=0,m=0,y=0,v=0,b=null,_=rp,E=null,k=Xf,w=.5,S=cp(I,w);function x(e){return[(e=o(e[0]*lf,e[1]*lf))[0]*d+n,i-e[1]*d]}function T(e){return(e=o.invert((e[0]-n)/d,(i-e[1])/d))&&[e[0]*sf,e[1]*sf]}function I(e,r){return[(e=t(e,r))[0]*d+n,i-e[1]*d]}function C(){o=Lf(r=function(e,t,n){return(e%=af)?t||n?Lf(Rf(e),Df(t,n)):Rf(e):t||n?Df(t,n):Of}(m,y,v),t);var e=t(p,g);return n=h-e[0]*d,i=f+e[1]*d,N()}function N(){return u=c=null,x}return x.stream=function(e){return u&&c===e?u:u=dp(_(r,S(k(c=e))))},x.clipAngle=function(e){return arguments.length?(_=+e?op(b=e*lf,6*lf):(b=null,rp),N()):b*sf},x.clipExtent=function(e){return arguments.length?(k=null==e?(E=a=s=l=null,Xf):Yf(E=+e[0][0],a=+e[0][1],s=+e[1][0],l=+e[1][1]),N()):null==E?null:[[E,a],[s,l]]},x.scale=function(e){return arguments.length?(d=+e,C()):d},x.translate=function(e){return arguments.length?(h=+e[0],f=+e[1],C()):[h,f]},x.center=function(e){return arguments.length?(p=e[0]%360*lf,g=e[1]%360*lf,C()):[p*sf,g*sf]},x.rotate=function(e){return arguments.length?(m=e[0]%360*lf,y=e[1]%360*lf,v=e.length>2?e[2]%360*lf:0,C()):[m*sf,y*sf,v*sf]},x.precision=function(e){return arguments.length?(S=cp(I,w=e*e),N()):pf(w)},x.fitExtent=function(e,t){return lp(x,e,t)},x.fitSize=function(e,t){return function(e,t,n){return lp(e,[[0,0],t],n)}(x,e,t)},function(){return t=e.apply(this,arguments),x.invert=t.invert&&T,C()}}(function(){return e})()}function fp(e){return function(t,n){var i=hf(t),r=hf(n),o=e(i*r);return[o*r*ff(t),o*ff(n)]}}function pp(e){return function(t,n){var i=pf(t*t+n*n),r=e(i),o=ff(r),a=hf(r);return[df(t*o,i*a),mf(i&&n*o/i)]}}fp(function(e){return pf(2/(1+e))}).invert=pp(function(e){return 2*mf(e/2)});var gp=fp(function(e){return(e=gf(e))&&e/ff(e)});function mp(e,t){return[e,t]}gp.invert=pp(function(e){return e}),mp.invert=mp;var{BufferOp:yp,GeoJSONReader:vp,GeoJSONWriter:bp}=Kh;function _p(e,t,n,i){var r=e.properties||{},o="Feature"===e.type?e.geometry:e;if("GeometryCollection"===o.type){var a=[];return jh(e,function(e){var r=_p(e,t,n,i);r&&a.push(r)}),fh(a)}var s=function(e){var t=Hh(e).geometry.coordinates,n=[-t[0],-t[1]];return hp(gp).scale(79.4188).clipAngle(179.999).rotate(n).scale(lh)}(o),l={type:o.type,coordinates:kp(o.coordinates,s)},u=(new vp).read(l),c=ph(function(e,t="kilometers"){const n=uh[t];if(!n)throw new Error(t+" units is invalid");return e/n}(t,n),"meters"),d=yp.bufferOp(u,c,i);if(!Ep((d=(new bp).write(d)).coordinates))return ch({type:d.type,coordinates:wp(d.coordinates,s)},r)}function Ep(e){return Array.isArray(e[0])?Ep(e[0]):isNaN(e[0])}function kp(e,t){return"object"!=typeof e[0]?t(e):e.map(function(e){return kp(e,t)})}function wp(e,t){return"object"!=typeof e[0]?t.invert(e):e.map(function(e){return wp(e,t)})}var Sp=function(e,t,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!e)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===t)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return jh(e,function(e){var n=_p(e,t,i,r);n&&o.push(n)}),fh(o);case"FeatureCollection":return Gh(e,function(e){var n=_p(e,t,i,r);n&&Gh(n,function(e){e&&o.push(e)})}),fh(o)}return _p(e,t,i,r)};var xp=function(e,t={}){return function(e,t,n){var i=n,r=!1;return $h(e,function(e,o,a,s,l){i=!1===r&&void 0===n?e:t(i,e,o,a,s,l),r=!0}),i}(e,(e,n)=>{const i=n.geometry.coordinates;return e+function(e,t,n={}){var i=Ih(e),r=Ih(t),o=gh(r[1]-i[1]),a=gh(r[0]-i[0]),s=gh(i[1]),l=gh(r[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return ph(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}(i[0],i[1],t)},0)};function Tp(e,t){return Ch(dh(t),e)}function Ip(e,t){return qh(e,t).features.map(e=>e.geometry.coordinates)}function Cp(e){return 1e3*xp(e,{units:"meters"})}function Np(e){if(e.length<3)return 1;let t=0;for(let n=1;n<e.length-1;n++){const i=e[n-1],r=Ap(e[n],i,e[n+1]);t+=Math.abs(Math.PI-r)}return 1-Math.min(t/(Math.PI*(e.length-2)),1)}function Ap(e,t,n){const i=[t[0]-e[0],t[1]-e[1]],r=[n[0]-e[0],n[1]-e[1]],o=i[0]*r[0]+i[1]*r[1],a=Math.hypot(i[0],i[1]),s=Math.hypot(r[0],r[1]);return Math.acos(Math.max(-1,Math.min(1,o/(a*s))))}function Pp(e,t){const n=String(e),i=String(t);return n<i?`${n}_${i}`:`${i}_${n}`}function Lp(e,t){const n={adj:new Map,nodes:new Map(e.map(e=>[e.id,e])),ways:new Map(t.map(e=>[e.id,e])),edgeWays:new Map},i=e=>{n.adj.has(e)||n.adj.set(e,new Set)};for(const r of t)for(let e=0;e<r.nodeIds.length-1;e++){const t=r.nodeIds[e],o=r.nodeIds[e+1];i(t),i(o),n.adj.get(t).add(o),n.adj.get(o).add(t);const a=Pp(t,o),s=n.edgeWays.get(a)??[];s.push(r.id),n.edgeWays.set(a,s)}return n}function Op(e,t){return hh(t.map(t=>{const n=e.nodes.get(t);if(!n)throw new Error("missing node "+t);return[n.lon,n.lat]}))}function Mp(e,t,n){const i=function(e,t=30){return Sp(e,t,{units:"meters"})}(t,n),r=[];for(const[o,a]of e.nodes){const e=[a.lon,a.lat];!Tp(t,e)&&Tp(i,e)&&r.push(o)}return r}function Rp(e,t,n,i=6e3){const r=[n],o=new Map([[n,null]]);let a=0;for(;r.length&&a<i;){a++;const n=r.shift(),i=e.adj.get(n);if(i)for(const a of i){if(o.has(a))continue;o.set(a,n);const i=Ip(Op(e,[n,a]),t);if(i.length>0){const e=[];let t=n;for(;null!==t;)e.push(t),t=o.get(t)??null;return e.reverse(),e.push(a),{path:e,hitPoint:i[0]}}r.push(a)}}return{}}function Dp(e,t){var n;if(0===t.length)return 0;let i=0;for(const o of t){const t=(null==(n=e.adj.get(o))?void 0:n.size)??0;i+=Math.min(t,4)}const r=i/t.length;return Math.min(r/4,1)}function Fp(e,t,n,i){const r=Math.min(e/200,1),o=.1*Math.min(i/10,1),a=.4*r+.3*t+.3*n;return Math.max(0,Math.min(1,a+o))}function zp(e){const t=[],n=[];if(e.nodes&&Array.isArray(e.nodes)&&e.nodes.length>0&&void 0!==e.nodes[0].id)return{nodes:e.nodes,ways:e.ways||[]};for(const i of e.ways||[]){if(!i.nodes||!Array.isArray(i.nodes))continue;const e=[];for(let n=0;n<i.nodes.length;n++){const r=i.nodes[n];if(r&&"number"==typeof r.lon&&"number"==typeof r.lat){const o=`${i.id}-${n}`,a={id:o,lon:r.lon,lat:r.lat};t.push(a),e.push(o)}else if("number"==typeof r||"string"==typeof r)break}if(e.length>0){const t={id:i.id||`way-${n.length}`,nodeIds:e,tags:i.tags||{}};n.push(t)}}return{nodes:t,ways:n}}const Bp=Object.freeze(Object.defineProperty({__proto__:null,buildGraph:Lp,convertFromExistingOsmData:zp,detectEntryCandidates:function(e){const t=performance.now(),{polygon:n,osm:i,outerBufferMeters:r=30}=e,o=Lp(i.nodes,i.ways),a=Mp(o,n,r),s=[],l=new Set;for(const d of a){const e=Rp(o,n,d);if(!e.path||!e.hitPoint)continue;const t=Op(o,e.path),i=Cp(t),r=Np(t.geometry.coordinates),a=Dp(o,e.path),u=`${e.hitPoint[0].toFixed(7)},${e.hitPoint[1].toFixed(7)}`;if(l.has(u))continue;l.add(u);const c=Fp(i,r,a,e.path.length),h=new Set;for(let n=0;n<e.path.length-1;n++){const t=Pp(e.path[n],e.path[n+1]);(o.edgeWays.get(t)??[]).forEach(e=>h.add(String(e)))}s.push({id:`entry-${u}`,intersectionPoint:e.hitPoint,pathNodeIds:e.path,path:t,distanceMeters:i,straightness:r,continuity:a,confidence:c,wayIds:Array.from(h)})}const u=performance.now()-t,c=Array.from(o.edgeWays.values()).reduce((e,t)=>e+t.length,0);return{candidates:s.sort((e,t)=>t.confidence-e.confidence),processingTimeMs:u,graphStats:{nodeCount:o.nodes.size,wayCount:o.ways.size,edgeCount:c}}}},Symbol.toStringTag,{value:"Module"}));const Up=new class{constructor(){this.candidates=[],this.loading=!1,this.error=null,this.lastResult=null}async detectEntries(e,t){if(!e||!t)return this.error="Missing polygon or OSM data",this.candidates=[],void this.notifyUpdate();this.loading=!0,this.error=null,this.notifyUpdate();try{const n=function(e,t,n=30){try{if(!e||!t)return null;let i,r;if(t.nodes&&t.ways)i=t.nodes,r=t.ways;else{const e=zp(t);i=e.nodes,r=e.ways}return 0===i.length||0===r.length?null:{polygon:e,osm:{nodes:i,ways:r},outerBufferMeters:n,maxSearchMeters:2*n}}catch(i){return null}}(this.convertLeafletPolygonToGeoJSON(e),t,30);if(!n)throw new Error("Failed to prepare detection input");const i=await this.runEntryDetection(n);this.candidates=i.candidates,this.lastResult=i,this.error=null}catch(n){const e=String((null==n?void 0:n.message)??n);this.error=e,this.candidates=[]}finally{this.loading=!1,this.notifyUpdate()}}clearCandidates(){this.candidates=[],this.lastResult=null,this.error=null,this.notifyUpdate()}deleteCandidate(e){const t=this.candidates.length;this.candidates=this.candidates.filter(t=>t.id!==e),this.candidates.length<t&&this.notifyUpdate()}setOnUpdate(e){this.onUpdateCallback=e}notifyUpdate(){this.onUpdateCallback&&this.onUpdateCallback(this.candidates)}convertLeafletPolygonToGeoJSON(e){const t=e.getLatLngs()[0].map(e=>[e.lng,e.lat]);if(t.length>0){const e=t[0],n=t[t.length-1];e[0]===n[0]&&e[1]===n[1]||t.push([e[0],e[1]])}return{type:"Feature",geometry:{type:"Polygon",coordinates:[t]},properties:{}}}async runEntryDetection(e){const{detectEntryCandidates:t}=await function(e,t){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),r=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));n=e(t.map(e=>{if((e=function(e){return"/Barricadix_MWP/"+e}(e))in sh)return;sh[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})}(async()=>{const{detectEntryCandidates:e}=await Promise.resolve().then(()=>Bp);return{detectEntryCandidates:e}},void 0);return t(e)}};const qp="barricadix_authenticated";function Vp(){const e=document.getElementById("welcome-screen"),t=document.getElementById("app-container");e&&t&&(e.style.display="flex",t.style.display="none")}function Gp(){const e=document.getElementById("welcome-screen"),t=document.getElementById("app-container");e&&t&&(e.style.display="none",t.style.display="flex",async function(){var e,t,n;(function(){const e=window.loadOsmDataForCurrentPolygon;e&&(window.loadOsmDataForCurrentPolygon=async function(...t){const n=await e.apply(this,t),i=window.drawnPolygon,r=window.currentOsmData;return i&&r&&await Up.detectEntries(i,r),n}),window.entryDetectionManager=Up})(),function(){const e=document.createElement("style");e.textContent='\n    .entry-detection-panel {\n      background: rgba(12, 47, 77, 0.95);\n      backdrop-filter: blur(10px);\n      border-radius: 12px;\n      padding: 16px;\n      margin: 16px 0;\n      color: white;\n      max-height: 400px;\n      overflow-y: auto;\n    }\n\n    .entry-detection-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 12px;\n    }\n\n    .entry-detection-header h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 600;\n    }\n\n    .entry-detection-controls {\n      display: flex;\n      gap: 8px;\n    }\n\n    .btn-primary, .btn-secondary {\n      padding: 6px 12px;\n      border: none;\n      border-radius: 6px;\n      font-size: 12px;\n      cursor: pointer;\n      transition: all 0.2s ease;\n    }\n\n    .btn-primary {\n      background: #3b82f6;\n      color: white;\n    }\n\n    .btn-primary:hover {\n      background: #2563eb;\n    }\n\n    .btn-secondary {\n      background: rgba(255, 255, 255, 0.2);\n      color: white;\n    }\n\n    .btn-secondary:hover {\n      background: rgba(255, 255, 255, 0.3);\n    }\n\n    .entry-detection-status {\n      margin-bottom: 12px;\n    }\n\n    .status-indicator {\n      padding: 6px 12px;\n      border-radius: 6px;\n      font-size: 12px;\n      font-weight: 500;\n    }\n\n    .status-indicator.loading {\n      background: rgba(251, 191, 36, 0.2);\n      color: #fbbf24;\n    }\n\n    .status-indicator.success {\n      background: rgba(74, 222, 128, 0.2);\n      color: #4ade80;\n    }\n\n    .status-indicator.error {\n      background: rgba(248, 113, 113, 0.2);\n      color: #f87171;\n    }\n\n    .candidates-list {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .candidate-item {\n      background: rgba(255, 255, 255, 0.1);\n      border-radius: 8px;\n      padding: 12px;\n      border-left: 4px solid transparent;\n    }\n\n    .candidate-item[data-confidence*="0.7"] {\n      border-left-color: #4ade80;\n    }\n\n    .candidate-item[data-confidence*="0.4"]:not([data-confidence*="0.7"]) {\n      border-left-color: #fbbf24;\n    }\n\n    .candidate-item[data-confidence*="0.3"]:not([data-confidence*="0.4"]) {\n      border-left-color: #f87171;\n    }\n\n    .candidate-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .candidate-id {\n      font-family: monospace;\n      font-size: 11px;\n      color: #ccc;\n    }\n\n    .confidence-badge {\n      background: rgba(255, 255, 255, 0.2);\n      padding: 2px 6px;\n      border-radius: 4px;\n      font-size: 10px;\n      font-weight: 600;\n    }\n\n    .candidate-details {\n      display: grid;\n      grid-template-columns: 1fr 1fr 1fr;\n      gap: 8px;\n      font-size: 10px;\n    }\n\n    .metric {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n    }\n\n    .metric .label {\n      color: #aaa;\n      font-size: 9px;\n    }\n\n    .metric .value {\n      font-weight: 600;\n    }\n  ',document.head.appendChild(e)}(),kg(),qg(),ag=new ah({useMaxspeed:!0,useTrafficCalming:!0,useSurface:!1,weather:"dry"}),function(){try{const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface"),i=document.getElementById("weather-select");e&&(e.checked="false"!==localStorage.getItem("osm-maxspeed")),t&&(t.checked="false"!==localStorage.getItem("osm-traffic-calming")),n&&(n.checked="true"===localStorage.getItem("osm-surface")),i&&(i.value=localStorage.getItem("osm-weather")||"dry"),Im()}catch(e){}}(),function(){const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface"),i=document.getElementById("weather-select"),r=()=>{Im(),function(){try{const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface"),i=document.getElementById("weather-select");e&&localStorage.setItem("osm-maxspeed",e.checked.toString()),t&&localStorage.setItem("osm-traffic-calming",t.checked.toString()),n&&localStorage.setItem("osm-surface",n.checked.toString()),i&&localStorage.setItem("osm-weather",i.value)}catch(e){}}(),ng&&Nm()};e&&e.addEventListener("change",r),t&&t.addEventListener("change",r),n&&n.addEventListener("change",r),i&&i.addEventListener("change",r)}();let i=0;const r=3;for(;i<r&&(!_g.de||!_g.en);)await Bg(),i++,!(i<r)||_g.de&&_g.en||await new Promise(e=>setTimeout(e,500));_g.de&&_g.en||(_g=Eg);bg="de",await zg(),Om();const o=localStorage.getItem("language")||"de";o!==bg&&await Ug(o);document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.dataset.lang;t&&t!==bg&&Ug(t)})});const a=document.getElementById("tooltip");document.querySelectorAll(".info-icon").forEach(e=>{e.addEventListener("mouseover",e=>{const t=e.currentTarget,n=t.dataset.tooltip||"";a.textContent=n,a.style.opacity="1";const i=t.getBoundingClientRect();a.style.left=`${i.left+window.scrollX}px`,a.style.top=`${i.bottom+window.scrollY+5}px`}),e.addEventListener("mouseout",()=>{a.style.opacity="0"})});const s=document.getElementById("map-search-input"),l=document.getElementById("map-search-button"),u=document.getElementById("toggle-sidebar"),c=document.querySelector(".sidebar");setTimeout(()=>{Sm()},500),setTimeout(()=>{xm()},1e3),setTimeout(()=>{Tm()},2e3),document.addEventListener("click",e=>{const t=e.target;("nav-param-input"===t.id||"tab-param-input"===t.id||t.closest("#nav-param-input")||t.closest("#tab-param-input"))&&setTimeout(()=>{const e=document.getElementById("parameter-bubble"),t=document.getElementById("parameter-strip");if(e&&t){e.style.transform="translateX(0)",e.style.opacity="1",t.style.display="none";const n=document.getElementById("toggle-parameter-bubble"),i=null==n?void 0:n.querySelector("i");i&&(i.className="fas fa-chevron-left")}},100)},!0);const d=async()=>{const e=s.value.trim();if(!e)return;const t=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(e)}`;try{const e=await fetch(t,{headers:{"Accept-Language":bg}});if(!e.ok)throw new Error(`API request failed with status ${e.status}`);const n=await e.json();if(n&&n.length>0){const{lat:e,lon:t,display_name:i}=n[0];Yp.setView([e,t],15),Kp&&Yp.removeLayer(Kp),Kp&&(Yp.removeLayer(Kp),Kp=null);const r=L.divIcon({className:"search-marker",html:'<i class="fas fa-map-marker-alt" style="color: #dc2626; font-size: 20px;"></i>',iconSize:[25,41],iconAnchor:[12,41]});Kp=L.marker([e,t],{icon:r,zIndexOffset:1e3}).addTo(Yp),Kp.bindPopup(`<b>${i}</b>`).openPopup(),Yp.invalidateSize()}else alert(Fg("alerts.locationNotFound"))}catch(n){alert(Fg("alerts.searchError"))}};l.addEventListener("click",d),s.addEventListener("keypress",e=>{"Enter"===e.key&&d()}),u&&c&&u.addEventListener("click",()=>{c.classList.toggle("open")});const h=document.getElementById("toggle-draw-mode"),f=document.getElementById("reset-drawing"),p=document.getElementById("map"),g=e=>{Qp=e;const t=h.querySelector("span");e?(h.classList.add("active"),t&&(t.textContent=Fg("map.setWaypointsActive")),null==p||p.classList.add("drawing-mode")):(h.classList.remove("active"),t&&(t.textContent=Fg("map.setWaypoints")),null==p||p.classList.remove("drawing-mode"))},m=()=>{eg.forEach(e=>Yp.removeLayer(e)),eg=[],tg&&Yp.removeLayer(tg),tg=null,ng&&Yp.removeLayer(ng),ng=null,ig&&Yp.removeLayer(ig),ig=null,Zp=[],Qp&&g(!1)},y=()=>{tg&&Yp.removeLayer(tg),Zp.length>1&&(tg=L.polyline(Zp,{color:"var(--accent-color)",weight:3}).addTo(Yp))},v=()=>{if(Zp.length<3)return;ng&&Yp.removeLayer(ng),ng=L.polygon(Zp,{color:"yellow",fillColor:"#FFFF00",fillOpacity:.3,weight:2}).addTo(Yp);const e=ng.getBounds().getCenter();ig=L.marker(e,{icon:L.divIcon({className:"polygon-label",html:Fg("map.securityAreaLabel"),iconSize:[150,24]})}).addTo(Yp),tg&&Yp.removeLayer(tg),tg=null,eg.forEach(e=>Yp.removeLayer(e)),eg=[],Cm()&&Nm(),Zp=[],g(!1)},b=e=>{if(!Qp)return;const t=e.latlng,n=L.marker(t).addTo(Yp);0===Zp.length&&n.on("click",()=>{Qp&&Zp.length>=3&&v()}),Zp.push(t),eg.push(n),y()};Yp.on("click",b);const _=document.querySelectorAll(".main-nav a"),E=document.querySelectorAll(".map-tabs a"),k=document.getElementById("analyze-threats"),w=document.getElementById("create-report-btn"),S=document.getElementById("download-report-btn"),x=document.getElementById("report-iframe"),T=document.getElementById("map"),I=document.getElementById("report-preview-area"),C=document.getElementById("vehicle-select"),N=async(e,t)=>{Jp=e;const n=document.getElementById("deletion-bubble");n&&n.remove(),t&&(_.forEach(e=>e.classList.remove("active")),t.classList.add("active")),E.forEach(t=>{const n=t;n.classList.toggle("active",n.getAttribute("data-target")===e)}),"nav-param-input"===e&&(m(),Hg(),cg=null),"nav-marking-area"===e&&(cg=null,Vg()),"nav-threat-analysis"===e&&(cg=null,Vg()),"nav-product-selection"===e?await hm():bm(),"nav-project-description"===e&&(Hg(),cg=null),h.classList.add("hidden"),f.classList.add("hidden"),k.classList.add("hidden"),w.classList.add("hidden"),S.classList.add("hidden");const i="nav-risk-report"===e;T.classList.toggle("view-hidden",i),I.classList.toggle("view-hidden",!i),Yp&&(i||Yp.invalidateSize()),cg||(x.src="about:blank",S.disabled=!0),"nav-marking-area"===e?(h.classList.remove("hidden"),f.classList.remove("hidden")):"nav-threat-analysis"===e?k.classList.remove("hidden"):"nav-risk-report"===e&&(w.classList.remove("hidden"),S.classList.remove("hidden"),S.disabled=!cg)};_.forEach(e=>{e.addEventListener("click",async e=>{e.preventDefault();const t=e.currentTarget,n=t.id;if("nav-threat-analysis"===n){const e=document.getElementById("tab-threat-analysis"),t=document.getElementById("threat-analysis-submenu");if(e&&t){if(!t.classList.contains("show"))return t.style.display="",t.classList.add("show"),void e.classList.add("submenu-open")}}await N(n,t)})}),E.forEach(e=>{e.addEventListener("click",async e=>{e.preventDefault();const t=e.currentTarget,n=t.getAttribute("data-target");if("nav-threat-analysis"===n){const e=document.getElementById("threat-analysis-submenu"),n=null==e?void 0:e.classList.contains("show");if(document.querySelectorAll(".threat-submenu").forEach(e=>{e.classList.remove("show"),e.style.display="none"}),e&&(n?(e.classList.remove("show"),e.style.display="none"):(e.style.display="",e.classList.add("show")),t.classList.toggle("submenu-open",!n)),!n)return}else document.querySelectorAll(".threat-submenu").forEach(e=>{e.classList.remove("show"),e.style.display="none"}),document.querySelectorAll(".has-submenu").forEach(e=>{e.classList.remove("submenu-open")});const i=document.getElementById(n);await N(n,i??void 0)})});const A=document.getElementById("threat-analysis-submenu");A&&A.addEventListener("click",async e=>{const t=e.target.closest(".submenu-item");if(!t)return;e.preventDefault(),e.stopPropagation();const n=t.getAttribute("data-submenu-action");if(t.classList.contains("disabled")){const e=document.getElementById("module-contact-modal");e&&(e.style.display="flex")}else if("access-analysis"===n){const e=document.getElementById("tab-threat-analysis");if(e){A.style.display="none",e.classList.remove("submenu-open");const t=document.getElementById("nav-threat-analysis");await N("nav-threat-analysis",t??void 0)}}});document.addEventListener("click",e=>{const t=e.target;t.closest(".has-submenu")||t.closest(".threat-submenu")||t.closest(".tab-with-submenu")||(document.querySelectorAll(".threat-submenu").forEach(e=>{e.classList.remove("show"),e.style.display="none"}),document.querySelectorAll(".has-submenu").forEach(e=>{e.classList.remove("submenu-open")}))});const P=document.getElementById("module-contact-modal"),O=document.getElementById("close-module-modal-btn"),M=document.getElementById("close-module-modal");function R(){P&&(P.style.display="none")}O&&O.addEventListener("click",R);M&&M.addEventListener("click",R);P&&(null==(e=P.querySelector(".modal-overlay"))||e.addEventListener("click",R),null==(t=P.querySelector(".modal-content-box"))||t.addEventListener("click",e=>{e.stopPropagation()}));function D(){if(ng&&Yp){const e=ng.getLatLngs()[0],t=ng.getBounds();window.savedSecurityArea={polygonData:e,bounds:t,center:t.getCenter(),hasPolygon:!0}}else window.savedSecurityArea={hasPolygon:!1}}function F(){const e=window.savedSecurityArea;e&&e.hasPolygon&&e.polygonData&&Yp&&(ng&&Yp.removeLayer(ng),ig&&Yp.removeLayer(ig),ng=L.polygon(e.polygonData,{color:"#2563eb",weight:3,fillOpacity:.1}).addTo(Yp),ig=L.marker(e.center,{icon:L.divIcon({className:"polygon-label",html:`<div class="polygon-label-content">${Fg("map.securityArea")}</div>`,iconSize:[100,20],iconAnchor:[50,10]})}).addTo(Yp))}function z(){const e=L.Polygon.prototype.addTo;L.Polygon.prototype.addTo=function(t){const n=e.call(this,t);return this===ng&&setTimeout(()=>{D()},100),n}}function B(){var e,t,n,i;const r=document.getElementById("nav-marking-area"),o=document.getElementById("nav-param-input");if(r){const t=r.cloneNode(!0);null==(e=r.parentNode)||e.replaceChild(t,r),t.addEventListener("click",e=>{e.preventDefault(),N("nav-marking-area",t),setTimeout(()=>{F()},100)})}if(o){const e=o.cloneNode(!0);null==(t=o.parentNode)||t.replaceChild(e,o),e.addEventListener("click",t=>{t.preventDefault(),D(),N("nav-param-input",e)})}const a=document.getElementById("tab-marking-area"),s=document.getElementById("tab-param-input");if(a){const e=a.cloneNode(!0);null==(n=a.parentNode)||n.replaceChild(e,a),e.addEventListener("click",e=>{e.preventDefault();const t=document.getElementById("nav-marking-area");t&&N("nav-marking-area",t)})}if(s){const e=s.cloneNode(!0);null==(i=s.parentNode)||i.replaceChild(e,s),e.addEventListener("click",e=>{e.preventDefault();const t=document.getElementById("nav-param-input");t&&N("nav-param-input",t)})}}C.addEventListener("change",async()=>{var e;og.size>0&&await um(),!1===(null==(e=document.querySelector(".product-recommendations-container"))?void 0:e.classList.contains("hidden"))&&await hm()}),h.addEventListener("click",()=>{ng&&m(),g(!Qp)}),f.addEventListener("click",()=>{m(),Hg()}),k.addEventListener("click",um),w.addEventListener("click",km),S.addEventListener("click",wm),null==(n=document.getElementById("nav-marking-area"))||n.click();const U=()=>{const e=document.querySelector(".osm-controls");if(e){e.querySelectorAll(".checkbox-label").forEach(e=>{e.style.cssText+="\n                margin: 0 !important;\n                padding: 1px 0 !important;\n                line-height: 1.3 !important;\n                min-height: auto !important;\n                height: auto !important;\n            "});e.querySelectorAll(".checkbox-group").forEach(e=>{e.style.cssText+="\n                margin: 2px 0 !important;\n                padding: 1px 0 !important;\n                line-height: 1.3 !important;\n            "})}};setTimeout(U,100),setTimeout(U,500),setTimeout(U,1e3),z(),setTimeout(()=>{B()},1e3);const q=document.getElementById("chatbot-react-root");if(q)try{Zd.createRoot(q).render(ki.createElement(Dd))}catch(V){}kg()}(),setTimeout(()=>{Yp&&Yp.invalidateSize()},200),setTimeout(()=>{Yp&&Yp.invalidateSize()},500))}function jp(){const e=document.getElementById("auth-form"),t=document.getElementById("password-input"),n=document.getElementById("auth-error"),i=document.getElementById("auth-submit");e&&t&&n&&i&&(e.addEventListener("submit",e=>{e.preventDefault(),$p(t.value)}),t.addEventListener("keypress",e=>{"Enter"===e.key&&(e.preventDefault(),$p(t.value))}),t.addEventListener("input",()=>{!function(){const e=document.getElementById("auth-error");e&&(e.style.display="none")}()}),t.focus())}function $p(e){const t=document.getElementById("auth-error"),n=document.getElementById("auth-submit"),i=document.getElementById("password-input");t&&n&&i&&(n.style.opacity="0.7",n.style.pointerEvents="none",i.disabled=!0,setTimeout(()=>{"1919"===e?(sessionStorage.setItem(qp,"true"),n.innerHTML='<i class="fas fa-check"></i> Erfolgreich!',n.style.background="linear-gradient(45deg, #10b981, #059669)",setTimeout(()=>{Gp()},800)):(!function(){const e=document.getElementById("auth-error");e&&(e.style.display="flex",setTimeout(()=>{e.style.display="none"},3e3))}(),n.style.opacity="1",n.style.pointerEvents="auto",i.disabled=!1,i.value="",i.focus(),n.innerHTML='<i class="fas fa-sign-in-alt"></i> Anmelden')},500))}function Hp(){sessionStorage.removeItem(qp),Vp(),jp()}let Yp,Wp;window.logout=Hp,window.getCurrentTab=()=>Jp;let Xp=null,Kp=null,Qp=!1,Zp=[],Jp="nav-marking-area",eg=[],tg=null,ng=null,ig=null,rg=new Map,og=new Map,ag=null,sg=null,lg=null,ug=null,cg=null,dg=null,hg=null,fg=new Map,pg=!1,gg=new Set,mg=new Map,yg=[],vg=[],bg="de",_g={};const Eg={de:{header:{planning:"Planer",manufacturer:"Hersteller"},nav:{paramInput:"Parameter",markingArea:"Sicherheitsbereich",threatAnalysis:"Gefahrenanalyse",riskReport:"Risikobericht",productSelection:"Produktauswahl",projectDescription:"Ausschreibung",publishProject:"Projektausschreibung veröffentlichen"},aria:{search:"Suche",email:"E-Mail",settings:"Einstellungen"},user:{loggedIn:"Angemeldet: BarricadiX Admin"},sidebar:{osmLimits:{title:"Einfluss auf Geschwindigkeit:",maxspeed:"Tempolimit",trafficCalming:"Verkehrsberuhiger",weather:"Wetter",weatherOptions:{dry:"trocken",wet:"nass",snow:"Schnee",ice:"Eis"},surface:"Fahrbahnbelag"},trafficData:"Parameterwahl",vehicleSelect:"Fahrzeugauswahl",accessRoads:"Zufahrten",curbs:"Bordsteinkanten",obstacles:"Hindernisse",protectionSelection:"Schutzauswahl",protectionPeriod:"Schutzzeitraum",protectionProducts:"Schutzprodukte",productProperty:"Produkteigenschaft",riskAssessment:"Risikobewertung",assetToProtect:"Was geschützt werden soll",securityRisk:"Sicherheitsrisiko",recommendedProductClass:"Empfohlene Produktklasse",low:"niedrig",high:"hoch",options:{vehicle:{all:"alle",motorcycle:"Motorrad",car_light:"KFZ <3.5t",truck_light:"LKW <7.5t",truck_medium:"LKW <12t",truck_heavy:"LKW <40t"},access:{all:"alle",meadow:"Wiese",forest_path:"Waldweg",pedestrian_path:"Fußgängerweg",one_way:"Einbahnstraße",two_lane:"Zweispur",three_lane:"Dreispur",four_lane:"Vierspur"},curbs:{yes:"ja",no:"nein"},obstacles:{none:"keine",trees:"Bäume",posts:"Pfosten",bins:"Mülltonnen"},period:{permanent:"dauerhaft",temporary:"temporär",eventual:"eventuell"},products:{bollard:"Poller",barrier:"Barriere",post:"Pfosten",ditch:"Graben"},property:{automatic_rigid:"aut./starr",retractable:"versenkbar",removable:"entfernbar"}}},products:{resistanceMedium:"Widerstandsmedium",resistanceHigh:"Hoher Widerstand",resistanceLow:"Niedriger Widerstand",contactAdvice:"Kontaktempfehlung",requiredSpeed:"Erforderliche Geschwindigkeit",noSuitableProduct:"Kein passendes Produkt in der Datenbank gefunden. Bitte kontaktieren Sie einen zertifizierten Sicherheitsberater",pinned:"Angepinnt",clickToPin:"Klicken zum Anpinnen"},ai:{reportPrompt:"Du bist ein Spezialist für physischen Zufahrtsschutz und erstellst einen Sicherheitsbericht für den Schutz vor Fahrzeugangriffen und unbefugtem Eindringen mit Kraftfahrzeugen (Vehicle Security Barriers / Hostile Vehicle Mitigation). Der Fokus liegt auf dem physischen Schutz von Gebäuden, Plätzen und Infrastruktur vor Terroranschlägen mit Fahrzeugen, Amokfahrten oder Unfällen. WICHTIG: Dies ist KEIN Cybersecurity-Bericht! Generiere ein JSON-Objekt mit sechs Schlüsseln: 'purpose', 'threatAnalysis', 'vulnerabilities', 'hvmMeasures', 'siteConsiderations', 'operationalImpact'. Die Sprache des Inhalts muss {language} sein. Fokussiere ausschließlich auf: Fahrzeugbarrieren, Poller, physische Sperren, Fahrzeuganprallschutz, Rammangriffe, Teststandards wie PAS 68 oder IWA 14, Geschwindigkeiten, Fahrzeugmassen, Anprallwinkel, Eindringtiefen. Erwähne NIEMALS: Malware, Cyberangriffe, Netzwerksicherheit, Software, IT-Systeme.",chatbot:{title:"Zufahrtsschutz-Assistent",welcome:"Willkommen zum Zufahrtsschutz-Assistenten. Ich stelle nur Fragen, die noch fehlen oder unsicher sind. Bereit?",assetQuestion:"Welche Schutzgüter möchten Sie absichern?",assetOptions:"Menschenmenge,Gebäude,KRITIS-Prozess,Veranstaltungsfläche",assetPlaceholder:"z. B. Menschenmenge, Bühne",assetQuestionInfo:"Grundlage für Schutzziel & Schutzklasse (DIN SPEC 91414-2 / ISO 22343-2)",inputPlaceholder:"Antwort eingeben...",sendButton:"Senden",stakeholderQuestion:"Wer sind die relevanten Stakeholder (Behörden, Veranstalter, Betreiber)?",stakeholderOptions:"Behörden,Veranstalter,Betreiber",restRiskQuestion:"Welches akzeptable Restrisiko gilt?",restRiskOptions:"niedrig,mittel,hoch",restRiskQuestionInfo:"Steuert Schutzklasse/Sicherungsgrad (DIN SPEC 91414-2)",operationalQuestion:"Betriebsanforderungen (mehrfach wählbar)",operationalOptions:"Feuerwehrzufahrt,Fluchtwege,Verkehrssicherheit,Betriebssicherheit",threatQuestion:"Welche Art fahrzeuggestützter Bedrohung ist zu erwarten?",threatOptions:"intentional,unbeabsichtigt,beides",vehicleTypesQuestion:"Welche Fahrzeugtypen sind relevant?",vehicleOptions:"PKW,Transporter,LKW,Bus",accessCorridorsQuestion:"Wo könnten Fahrzeuge eindringen? (Karte markieren oder beschreiben)",accessCorridorsPlaceholder:"Polyline/Polygon auswählen oder kurz beschreiben",speedQuestion:"Maximale Zufahrtsgeschwindigkeit (km/h)",speedQuestionInfo:"Pflichtparameter für FSB-Performance (ISO 22343-2/-1)",angleQuestion:"Wahrscheinlicher Anprallwinkel (°)",angleQuestionInfo:"Pflichtparameter für FSB-Performance (ISO 22343-2/-1)",groundQuestion:"Untergrund/Fundamente am Standort",groundOptions:"Asphalt,Beton,Pflaster,Erde,Unbekannt",riskMatrixQuestion:"Risikobewertung: Eintrittswahrscheinlichkeit & Schadensausmaß",riskMatrixOptions:"EW:niedrig|SA:gering,EW:niedrig|SA:mittel,EW:mittel|SA:mittel,EW:hoch|SA:schwer",riskMatrixQuestionInfo:"Erzeugt Sicherungsgrad & Schutzklasse (DIN SPEC 91414-2)",infoPrefix:"Hinweis: ",completionMessage:"Danke! Alle erforderlichen Angaben sind vorhanden. Möchten Sie den normkonformen PDF-Plan erzeugen?"},error:"Fehler bei der KI-Analyse",retry:"Erneut versuchen",loading:"KI-Analyse wird erstellt...",timeout:"Zeitüberschreitung bei der Analyse",networkError:"Netzwerkfehler bei der KI-Analyse",serviceUnavailable:"KI-Service vorübergehend nicht verfügbar"},manufacturer:{title:"Herstelleransicht",subtitle:"Verwalten Sie Ihren Produktkatalog und Kundenanfragen",products:"Produkte",quotations:"Angebote",customers:"Kunden",analytics:"Analysen",manageCatalog:"Verwalten Sie Ihren Produktkatalog",createQuotations:"Erstellen und verwalten Sie Angebote",manageContacts:"Verwalten Sie Ihre Kundenkontakte",businessAnalytics:"Betriebs- und Verkaufsanalysen",open:"Öffnen",nav:{products:"Produkte",quotations:"Angebote",customers:"Kunden",analytics:"Analysen",settings:"Einstellungen"},sidebar:{productManagement:"Produktverwaltung",productCategory:"Produktkategorie",productStatus:"Produktstatus",customerManagement:"Kundenverwaltung",customerType:"Kundentyp",customerRegion:"Region",analytics:"Analysen",dateRange:"Zeitraum",options:{category:{all:"Alle Kategorien",bollards:"Poller",barriers:"Barrieren",posts:"Pfosten",ditches:"Gräben"},status:{all:"Alle Status",active:"Aktiv",inactive:"Inaktiv",draft:"Entwurf"},customerType:{all:"Alle Typen",private:"Privat",business:"Geschäft",government:"Behörde"},region:{all:"Alle Regionen",north:"Nord",south:"Süd",east:"Ost",west:"West"},dateRange:{"7days":"Letzte 7 Tage","30days":"Letzte 30 Tage","90days":"Letzte 90 Tage","1year":"Letztes Jahr"},manufacturer:{all:"Alle Hersteller"},standard:{all:"Alle Standards"},vehicleType:{all:"Alle Fahrzeugtypen"}},productDatabase:{title:"Produktdatenbank",subtitle:"Technische Daten und Spezifikationen aller verfügbaren Produkte",search:"Produktsuche",searchPlaceholder:"Produktname, Hersteller, Standard oder Fahrzeugtyp eingeben...",filterBy:"Filtern nach",manufacturer:"Hersteller",type:"Typ",standard:"Standard",vehicleWeight:"Fahrzeuggewicht (kg)",vehicleType:"Fahrzeugtyp",speed:"Geschwindigkeit (km/h)",impactAngle:"Anprallwinkel (°)",penetration:"Penetration (m)",debrisDistance:"Trümmerdistanz (m)",actions:"Aktionen",noProducts:"Keine Produkte gefunden",loading:"Produkte werden geladen...",technicalSpecs:"Technische Spezifikationen",performanceData:"Leistungsdaten",certification:"Zertifizierung",certificationStandard:"Zertifizierungsstandard",testConditions:"Testbedingungen",atSpeed:"bei",viewDetails:"Details anzeigen",closeDetails:"Schließen",exportData:"Daten exportieren",printSpecs:"Spezifikationen drucken",modal:{title:"Produktdetails",technicalSpecs:"Technische Spezifikationen",performanceData:"Leistungsdaten",certification:"Zertifizierung",exportData:"Daten exportieren",printSpecs:"Spezifikationen drucken"},toggleToGrid:"Kachelansicht",toggleToTable:"Tabellenansicht",table:{manufacturer:"Hersteller",type:"Typ",standard:"Standard",vehicleWeight:"Fahrzeuggewicht (kg)",vehicleType:"Fahrzeugtyp",speed:"Geschwindigkeit (km/h)",impactAngle:"Anprallwinkel (°)",penetration:"Penetration (m)",debrisDistance:"Trümmerdistanz (m)",actions:"Aktionen"}}}},tooltips:{securityRisk:"Informationen zum Sicherheitsrisiko.",productClass:"Informationen zur empfohlenen Produktklasse."},report:{mainTitle:"Risikobewertung für Zufahrtsschutz",watermark:"VERTRAULICH",undefinedAsset:"Nicht definiertes Schutzgut",undefinedValue:"Nicht definierter Wert",noThreatAnalysis:"Keine Gefahrenanalyse verfügbar",generating:"Bericht wird generiert...",status:{draft:"Entwurf",final:"Final",approved:"Genehmigt"},metadata:{date:"Datum",author:"Autor",version:"Version",classification:"Klassifizierung"},sections:{purpose:{title:"Zweck und Zielsetzung",description:"Dieser Bericht dient der Bewertung der Sicherheitsrisiken für die zu schützenden Zufahrten und der Empfehlung geeigneter Schutzmaßnahmen."},threatAnalysis:{title:"Gefahrenanalyse",description:"Analyse der identifizierten Bedrohungen und deren potenzielle Auswirkungen."},riskAssessment:{title:"Risikobewertung",description:"Bewertung der identifizierten Risiken und deren Klassifizierung."},recommendations:{title:"Empfehlungen",description:"Konkrete Handlungsempfehlungen für die Implementierung von Schutzmaßnahmen."},vulnerabilities:{title:"Schwachstellenanalyse",description:"Identifizierung und Bewertung von Sicherheitsschwachstellen."},hvmMeasures:{title:"HVM-Schutzmaßnahmen",description:"Spezifische Schutzmaßnahmen gegen High-Velocity Missile Angriffe."},siteConsiderations:{title:"Standortbetrachtungen",description:"Besondere Aspekte des Standorts und der Umgebung."},operationalImpact:{title:"Betriebliche Auswirkungen",description:"Auswirkungen der Schutzmaßnahmen auf den laufenden Betrieb."}},threatsTable:{title:"Identifizierte Bedrohungen",street:"Straße",distance:"Strecke",maxSpeed:"Max. erreichbare Geschw."},identifiedCorridors:"{count} identifizierte Korridore",noChatGeometry:"keine Geometrie aus Chatbot übergeben",actions:{save:"Speichern",print:"Drucken",export:"Exportieren",share:"Teilen"},generation:{failed:"Berichterstellung fehlgeschlagen",networkError:"Netzwerkfehler bei der Berichterstellung",retry:"Bericht erneut generieren",loading:"Bericht wird erstellt..."},ai:{error:"Fehler bei der KI-Berichterstellung",loading:"KI-Bericht wird generiert...",timeout:"Zeitüberschreitung bei der KI-Berichterstellung"}},threats:{title:"Gefahrenanalyse",speed:"Geschwindigkeit",analysisFailed:"Gefahrenanalyse fehlgeschlagen",noCrossingWaysBoundary:"Keine kreuzenden Wege an der Grenze gefunden",popupHeader:"Gefahreninformationen",loading:"Lade Gefahrenanalyse...",minimize:"Minimieren",maximize:"Maximieren",close:"Schließen",editMode:"Zufahrten bearbeiten"},map:{createReport:"Bericht erstellen",downloadReport:"Bericht herunterladen",searchPlaceholder:"Soest, Marktplatz",searchButton:"Suchen",setWaypoints:"Wegpunkte setzen",setWaypointsActive:"Zeichnen aktiv",reset:"Zurücksetzen",securityAreaLabel:"Sicherheitsbereich",securityArea:"Sicherheitsbereich",analyzeAccess:"Zugang analysieren"},placeholders:{assetToProtect:"Bitte eintragen"},alerts:{noPolygon:"Bitte zeichnen Sie zuerst einen Sicherheitsbereich auf der Karte.",overpassError:"Fehler beim Laden der Straßendaten (Status: {status}).",analysisError:"Fehler bei der Gefahrenanalyse. Bitte versuchen Sie es erneut.",invalidPolygon:"Ungültiges Polygon. Bitte zeichnen Sie den Sicherheitsbereich neu.",emptyPolygon:"Das gezeichnete Polygon hat keine gültigen Koordinaten.",polygonCoordinateError:"Fehler beim Verarbeiten der Polygon-Koordinaten.",locationNotFound:"Standort nicht gefunden. Bitte überprüfen Sie die Eingabe.",noThreatsFound:"Keine Bedrohungen in diesem Bereich gefunden.",reportGenerationError:"Fehler beim Erstellen des Berichts. Bitte versuchen Sie es erneut.",reportCreationError:"Fehler bei der Berichtserstellung. Bitte versuchen Sie es erneut."}},en:{header:{planning:"Planner",manufacturer:"Manufacturer"},nav:{paramInput:"Parameters",markingArea:"Security Area",threatAnalysis:"Threat Analysis",riskReport:"Risk Report",productSelection:"Product Selection",projectDescription:"Specification",publishProject:"Publish Project Specification"},aria:{search:"Search",email:"Email",settings:"Settings"},user:{loggedIn:"Logged in: BarricadiX Admin"},sidebar:{osmLimits:{title:"Speed Influence:",maxspeed:"Speed limit",trafficCalming:"Traffic calming",weather:"Weather",weatherOptions:{dry:"dry",wet:"wet",snow:"snow",ice:"ice"},surface:"Road surface"},trafficData:"Parameter Selection",vehicleSelect:"Vehicle Selection",accessRoads:"Access Roads",curbs:"Curbs",obstacles:"Obstacles",protectionSelection:"Protection Selection",protectionPeriod:"Protection Period",protectionProducts:"Protection Products",productProperty:"Product Property",riskAssessment:"Risk Assessment",assetToProtect:"What to Protect",securityRisk:"Security Risk",recommendedProductClass:"Recommended Product Class",low:"low",high:"high",options:{vehicle:{all:"all",motorcycle:"Motorcycle",car_light:"Car <3.5t",truck_light:"Truck <7.5t",truck_medium:"Truck <12t",truck_heavy:"Truck <40t"},access:{all:"all",meadow:"Meadow",forest_path:"Forest Path",pedestrian_path:"Pedestrian Path",one_way:"One Way",two_lane:"Two Lane",three_lane:"Three Lane",four_lane:"Four Lane"},curbs:{yes:"yes",no:"no"},obstacles:{none:"none",trees:"Trees",posts:"Posts",bins:"Bins"},period:{permanent:"permanent",temporary:"temporary",eventual:"eventual"},products:{bollard:"Bollard",barrier:"Barrier",post:"Post",ditch:"Ditch"},property:{automatic_rigid:"auto/rigid",retractable:"retractable",removable:"removable"}}},products:{resistanceMedium:"Resistance Medium",resistanceHigh:"High Resistance",resistanceLow:"Low Resistance",contactAdvice:"Contact Recommendation",requiredSpeed:"Required Speed",noSuitableProduct:"No suitable product found in database. Please contact a certified security consultant",pinned:"Pinned",clickToPin:"Click to pin"},ai:{reportPrompt:"You are a specialist for physical vehicle access protection creating a security report for protection against vehicle attacks and unauthorized vehicle intrusion (Vehicle Security Barriers / Hostile Vehicle Mitigation). The focus is on physical protection of buildings, squares and infrastructure against vehicle terrorist attacks, rampage attacks or accidents. IMPORTANT: This is NOT a cybersecurity report! Generate a JSON object with six keys: 'purpose', 'threatAnalysis', 'vulnerabilities', 'hvmMeasures', 'siteConsiderations', 'operationalImpact'. The content's language must be {language}. Focus exclusively on: vehicle barriers, bollards, physical barriers, vehicle impact protection, ram attacks, test standards like PAS 68 or IWA 14, speeds, vehicle masses, impact angles, penetration depths. NEVER mention: malware, cyber attacks, network security, software, IT systems.",chatbot:{title:"Access Protection Assistant",welcome:"Welcome to the Access Protection Assistant. I only ask questions that are still missing or uncertain. Ready?",assetQuestion:"Which protective assets would you like to secure?",assetOptions:"Crowd,Building,KRITIS Process,Event Area",assetPlaceholder:"e.g. Crowd, Stage",assetQuestionInfo:"Basis for Protection Goal & Protection Class (DIN SPEC 91414-2 / ISO 22343-2)",inputPlaceholder:"Enter answer...",sendButton:"Send",stakeholderQuestion:"Who are the relevant stakeholders (authorities, organizers, operators)?",stakeholderOptions:"Authorities,Organizers,Operators",restRiskQuestion:"What acceptable residual risk applies?",restRiskOptions:"low,medium,high",restRiskQuestionInfo:"Controls protection class/security level (DIN SPEC 91414-2)",operationalQuestion:"Operational requirements (multiple choice)",operationalOptions:"Fire brigade access,Escape routes,Traffic safety,Operational safety",threatQuestion:"What type of vehicle-based threat is expected?",threatOptions:"intentional,unintentional,both",vehicleTypesQuestion:"Which vehicle types are relevant?",vehicleOptions:"Car,Van,Truck,Bus",accessCorridorsQuestion:"Where could vehicles penetrate? (Mark on map or describe)",accessCorridorsPlaceholder:"Select polyline/polygon or describe briefly",speedQuestion:"Maximum access speed (km/h)",speedQuestionInfo:"Mandatory parameter for FSB performance (ISO 22343-2/-1)",angleQuestion:"Probable impact angle (°)",angleQuestionInfo:"Mandatory parameter for FSB performance (ISO 22343-2/-1)",groundQuestion:"Ground/foundations at the site",groundOptions:"Asphalt,Concrete,Paving,Earth,Unknown",riskMatrixQuestion:"Risk assessment: probability of occurrence & extent of damage",riskMatrixOptions:"Prob:low|Damage:minor,Prob:low|Damage:medium,Prob:medium|Damage:medium,Prob:high|Damage:severe",riskMatrixQuestionInfo:"Generates security level & protection class (DIN SPEC 91414-2)",infoPrefix:"Note: ",completionMessage:"Thank you! All required information is available. Would you like to generate the standards-compliant PDF plan?"},error:"Error in AI analysis",retry:"Try again",loading:"AI analysis is being created...",timeout:"Analysis timeout",networkError:"Network error in AI analysis",serviceUnavailable:"AI service temporarily unavailable"},manufacturer:{title:"Manufacturer View",subtitle:"Manage your product catalog and customer inquiries",products:"Products",quotations:"Quotations",customers:"Customers",analytics:"Analytics",manageCatalog:"Manage your product catalog",createQuotations:"Create and manage quotations",manageContacts:"Manage your customer contacts",businessAnalytics:"Business and sales analytics",open:"Open",nav:{products:"Products",quotations:"Quotations",customers:"Customers",analytics:"Analytics",settings:"Settings"},sidebar:{productManagement:"Product Management",productCategory:"Product Category",productStatus:"Product Status",customerManagement:"Customer Management",customerType:"Customer Type",customerRegion:"Region",analytics:"Analytics",dateRange:"Date Range",options:{category:{all:"All Categories",bollards:"Bollards",barriers:"Barriers",posts:"Posts",ditches:"Ditches"},status:{all:"All Status",active:"Active",inactive:"Inactive",draft:"Draft"},customerType:{all:"All Types",private:"Private",business:"Business",government:"Government"},region:{all:"All Regions",north:"North",south:"South",east:"East",west:"West"},dateRange:{"7days":"Last 7 Days","30days":"Last 30 Days","90days":"Last 90 Days","1year":"Last Year"},manufacturer:{all:"All Manufacturers"},standard:{all:"All Standards"},vehicleType:{all:"All Vehicle Types"}},productDatabase:{title:"Product Database",subtitle:"Technical data and specifications of all available products",search:"Product Search",searchPlaceholder:"Enter product name, manufacturer, standard or vehicle type...",filterBy:"Filter by",manufacturer:"Manufacturer",type:"Type",standard:"Standard",vehicleWeight:"Vehicle Weight (kg)",vehicleType:"Vehicle Type",speed:"Speed (km/h)",impactAngle:"Impact Angle (°)",penetration:"Penetration (m)",debrisDistance:"Debris Distance (m)",actions:"Actions",noProducts:"No products found",loading:"Loading products...",technicalSpecs:"Technical Specifications",performanceData:"Performance Data",certification:"Certification",certificationStandard:"Certification Standard",testConditions:"Test Conditions",atSpeed:"at",viewDetails:"View Details",closeDetails:"Close",exportData:"Export Data",printSpecs:"Print Specifications",modal:{title:"Product Details",technicalSpecs:"Technical Specifications",performanceData:"Performance Data",certification:"Certification",exportData:"Export Data",printSpecs:"Print Specifications"},toggleToGrid:"Grid View",toggleToTable:"Table View",table:{manufacturer:"Manufacturer",type:"Type",standard:"Standard",vehicleWeight:"Vehicle Weight (kg)",vehicleType:"Vehicle Type",speed:"Speed (km/h)",impactAngle:"Impact Angle (°)",penetration:"Penetration (m)",debrisDistance:"Debris Distance (m)",actions:"Actions"}}}},tooltips:{securityRisk:"Information about security risk.",productClass:"Information about recommended product class."},report:{mainTitle:"Risk Assessment for Access Protection",watermark:"CONFIDENTIAL",undefinedAsset:"Undefined asset",undefinedValue:"Undefined value",noThreatAnalysis:"No threat analysis available",generating:"Generating report...",identifiedCorridors:"{count} identified corridors",noChatGeometry:"no geometry from chatbot",status:{draft:"Draft",final:"Final",approved:"Approved"},metadata:{date:"Date",author:"Author",version:"Version",classification:"Classification"},sections:{purpose:{title:"Purpose and Objectives",description:"This report serves to assess security risks for the access routes to be protected and to recommend appropriate protective measures."},threatAnalysis:{title:"Threat Analysis",description:"Analysis of identified threats and their potential impacts."},riskAssessment:{title:"Risk Assessment",description:"Assessment of identified risks and their classification."},recommendations:{title:"Recommendations",description:"Concrete action recommendations for implementing protective measures."},vulnerabilities:{title:"Vulnerability Analysis",description:"Identification and assessment of security vulnerabilities."},hvmMeasures:{title:"HVM Protection Measures",description:"Specific protection measures against High-Velocity Missile attacks."},siteConsiderations:{title:"Site Considerations",description:"Special aspects of the site and environment."},operationalImpact:{title:"Operational Impact",description:"Impact of protection measures on ongoing operations."}},threatsTable:{title:"Identified Threats",street:"Street",distance:"Distance",maxSpeed:"Max. achievable speed"},actions:{save:"Save",print:"Print",export:"Export",share:"Share"},generation:{failed:"Report generation failed",networkError:"Network error in report generation",retry:"Generate report again",loading:"Report is being created..."},ai:{error:"Error in AI report generation",loading:"AI report is being generated...",timeout:"Timeout in AI report generation"}},threats:{title:"Threat Analysis",speed:"Speed",analysisFailed:"Threat analysis failed",noCrossingWaysBoundary:"No crossing ways found at boundary",popupHeader:"Threat Information",loading:"Loading threat analysis...",minimize:"Minimize",maximize:"Maximize",close:"Close",editMode:"Edit access points"},map:{createReport:"Create Report",downloadReport:"Download Report",searchPlaceholder:"Soest, Marktplatz",searchButton:"Search",setWaypoints:"Set Waypoints",setWaypointsActive:"Drawing Active",reset:"Reset",securityAreaLabel:"Security Area",securityArea:"Security Area",analyzeAccess:"Analyze Access"},placeholders:{assetToProtect:"Please enter"}}};function kg(){setTimeout(()=>{const e=document.getElementById("planning-view-btn"),t=document.getElementById("manufacturer-view-btn");e&&t&&(e.addEventListener("click",()=>{!function(){const e=document.getElementById("planning-view-btn"),t=document.getElementById("manufacturer-view-btn");e&&t&&(e.classList.add("active"),t.classList.remove("active"));!function(){bm();const e=document.getElementById("manufacturer-view");e&&(e.style.display="none");const t=document.querySelector(".manufacturer-sidebar");t&&(t.innerHTML="");const n=document.getElementById("planning-view");n&&(n.style.display="block");["map","map-area","sidebar","map-tabs","map-toolbar","chatbot-react-root"].forEach(e=>{const t=document.getElementById(e);t&&(t.classList.remove("view-hidden"),t.style.display="block",t.style.visibility="visible",t.style.opacity="1")}),Yp&&(Yp.remove(),Yp=null);if(setTimeout(()=>{if(qg(),window.savedMapState){const e=window.savedMapState;Yp&&(Yp.setView(e.center,e.zoom),Yp.invalidateSize(),setTimeout(()=>null==Yp?void 0:Yp.invalidateSize(),100),setTimeout(()=>null==Yp?void 0:Yp.invalidateSize(),300))}},100),window.savedChatbotState&&window.savedChatbotState.open){const e=document.querySelector('#chatbot-react-root [aria-label="Zufahrtsschutz-Assistent öffnen"]');e&&e.click()}Rg("Planungs-Ansicht aktiviert - Map neu initialisiert","success")}()}()}),t.addEventListener("click",()=>{!function(){const e=document.getElementById("planning-view-btn"),t=document.getElementById("manufacturer-view-btn");e&&t&&(t.classList.add("active"),e.classList.remove("active"));(function(){bm(),Yp&&(window.savedMapState={center:Yp.getCenter(),zoom:Yp.getZoom(),waypoints:Zp,drawnPolygon:ng?ng.getLatLngs()[0]:null,waypointMarkers:eg.length>0,pathLine:null!==tg});const e=document.querySelector('#chatbot-react-root aside[aria-label="Zufahrtsschutz-Assistent Panel"]');window.savedChatbotState={open:e&&!e.classList.contains("hidden")};const t=document.getElementById("planning-view");t&&(t.style.display="none");const n=document.getElementById("manufacturer-view");n&&(n.style.display="block",n.style.position="relative",n.style.width="100%",n.style.height="100%",n.style.zIndex="auto",n.style.backgroundColor="transparent");const i=document.querySelector(".sidebar");i&&(i.style.display="none");const r=document.getElementById("map-area");r&&(r.style.display="none",r.style.visibility="hidden",r.style.opacity="0",r.classList.add("view-hidden"));const o=document.getElementById("map");o&&(o.style.display="none",o.style.visibility="hidden",o.style.opacity="0",o.classList.add("view-hidden"));const a=document.getElementById("map-tabs"),s=document.getElementById("map-toolbar");a&&(a.style.display="none",a.classList.add("view-hidden"));s&&(s.style.display="none",s.classList.add("view-hidden"));wg(),setTimeout(()=>{zg()},50),Rg("Hersteller-Ansicht aktiviert","success")})(),setTimeout(()=>{Sg()},100)}()}));const n=document.querySelectorAll(".manufacturer-tab");n.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();const t=e.target;n.forEach(e=>e.classList.remove("active")),t.classList.add("active");t.id;Rg(`${t.textContent||"Tab"} wird geladen...`,"info")})}),setTimeout(()=>{Sg()},500)},100)}function wg(){const e=document.querySelector(".manufacturer-sidebar");if(!e)return;const t=function(){const e=window.productDatabase||[];const t={vehicleMass:{},standard:{},foundation:{},operation:{},deployment:{},category:{},manufacturer:{}};return e.forEach(e=>{const n=e.technical_data;if(!n)return;const i=n.pr_mass_kg,r=n.pr_veh;if(i&&r){const e=`${i} [${r}]`;t.vehicleMass[e]=(t.vehicleMass[e]||0)+1}const o=n.standard;o&&(t.standard[o]=(t.standard[o]||0)+1);const a=n.foundation_depth;a&&(t.foundation[a]=(t.foundation[a]||0)+1);"A - Free standing (no ground fixings)"===n.foundation_depth&&(t.deployment.temporary=(t.deployment.temporary||0)+1),t.deployment.permanent=(t.deployment.permanent||0)+1;const s=e.product_type;s&&(t.category[s]=(t.category[s]||0)+1);const l=e.manufacturer;l&&(t.manufacturer[l]=(t.manufacturer[l]||0)+1)}),t}();e.innerHTML="";const n="de"===bg,i=n?"Anprallgeschwindigkeit (km/h)":"Impact Speed (Km/h)",r=n?"Anprallwinkel (°)":"Impact Angle (°)",o=n?"Eindringtiefe (m)":"Penetration Distance (m)",a="Standard",s=n?"Fundament":"Foundation",l=n?"Betrieb":"Operation",u=n?"Einsatz":"Deployment",c=n?"Kategorien / VSB-Art":"Categories / Style of VSB",d=n?"Hersteller":"Manufacturer",h=n?"bis":"to",f=n?"Zurücksetzen":"Reset",p=n?"Alle Hersteller":"All Manufacturers",g=`\n        <section class="sidebar-section">\n            <div class="filter-content">\n            \n        \x3c!-- Vehicle Mass Filter --\x3e\n        <div class="form-group collapsible-dropdown-group">\n            <div class="dropdown-header" onclick="toggleDropdown('vehicle-mass')">\n                <label>${n?"Fahrzeuggewicht (kg)":"Vehicle Mass (kg)"}</label>\n                <span class="dropdown-icon" id="vehicle-mass-icon">▼</span>\n            </div>\n            <div class="dropdown-content" id="vehicle-mass-content" style="display: none;">\n                <div class="checkbox-group">\n                    ${function(e){return[{mass:1500,category:"M1"},{mass:2500,category:"IT"},{mass:2500,category:"N1G"},{mass:3500,category:"N1"},{mass:7200,category:"N2A"},{mass:7200,category:"N2B"},{mass:7200,category:"N3C"},{mass:7500,category:"N2"},{mass:7500,category:"N3"},{mass:12e3,category:"N3D"},{mass:3e4,category:"N3F"}].map(t=>{const n=`${t.mass} [${t.category}]`,i=e[n]||0;return`<label><input type="checkbox" value="${t.mass} [${t.category}]" data-category="${t.category}"> ${t.mass} [${t.category}] (${i})</label>`}).join("")}(t.vehicleMass)}\n                </div>\n            </div>\n        </div>\n\n            \x3c!-- Impact Speed Filter --\x3e\n            <div class="form-group collapsible-range-group">\n                <div class="range-header" onclick="toggleRangeInput('impact-speed')">\n                    <label>${i}</label>\n                    <span class="dropdown-icon" id="impact-speed-icon">▼</span>\n                </div>\n                <div class="range-content" id="impact-speed-content" style="display: none;">\n                    <div style="display: flex; gap: 8px; align-items: center;">\n                        <input type="number" id="min-speed" value="16" min="0" max="200" class="form-control" style="flex: 1;">\n                        <span style="font-size: 12px; color: var(--secondary-text);">${h}</span>\n                        <input type="number" id="max-speed" value="112" min="0" max="200" class="form-control" style="flex: 1;">\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- Impact Angle Filter --\x3e\n            <div class="form-group collapsible-range-group">\n                <div class="range-header" onclick="toggleRangeInput('impact-angle')">\n                    <label>${r}</label>\n                    <span class="dropdown-icon" id="impact-angle-icon">▼</span>\n                </div>\n                <div class="range-content" id="impact-angle-content" style="display: none;">\n                    <div style="display: flex; gap: 8px; align-items: center;">\n                        <input type="number" id="min-angle" value="15" min="0" max="180" class="form-control" style="flex: 1;">\n                        <span style="font-size: 12px; color: var(--secondary-text);">${h}</span>\n                        <input type="number" id="max-angle" value="90" min="0" max="180" class="form-control" style="flex: 1;">\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- Penetration Distance Filter --\x3e\n            <div class="form-group collapsible-range-group">\n                <div class="range-header" onclick="toggleRangeInput('penetration-distance')">\n                    <label>${o}</label>\n                    <span class="dropdown-icon" id="penetration-distance-icon">▼</span>\n                </div>\n                <div class="range-content" id="penetration-distance-content" style="display: none;">\n                    <div style="display: flex; gap: 8px; align-items: center;">\n                        <input type="number" id="min-distance" value="0" min="0" max="100" step="0.1" class="form-control" style="flex: 1;">\n                        <span style="font-size: 12px; color: var(--secondary-text);">${h}</span>\n                        <input type="number" id="max-distance" value="60" min="0" max="100" step="0.1" class="form-control" style="flex: 1;">\n                    </div>\n                </div>\n            </div>\n\n        \x3c!-- Standards Filter --\x3e\n        <div class="form-group collapsible-dropdown-group">\n            <div class="dropdown-header" onclick="toggleDropdown('standards')">\n                <label>${a}</label>\n                <span class="dropdown-icon" id="standards-icon">▼</span>\n            </div>\n            <div class="dropdown-content" id="standards-content" style="display: none;">\n                <div class="checkbox-group">\n                    ${function(e){const t="de"===bg,n=[{value:"Development test meeting PAS 68:2005",label:t?"Virtuell getestet nach PAS 68:2005":"Development test meeting PAS 68:2005"},{value:"ISO 22343-1:2023",label:"ISO 22343-1:2023"},{value:"IWA 14-1:2013",label:"IWA 14-1:2013"},{value:"PAS 68:2005",label:"PAS 68:2005"},{value:"PAS 68:2007",label:"PAS 68:2007"},{value:"PAS 68:2010",label:"PAS 68:2010"},{value:"PAS 68:2013",label:"PAS 68:2013"}];return n.map(t=>{const n=e[t.value]||0;return`<label><input type="checkbox" value="${t.value}"> ${t.label} (${n})</label>`}).join("")}(t.standard)}\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Foundation Filter --\x3e\n        <div class="form-group collapsible-dropdown-group">\n            <div class="dropdown-header" onclick="toggleDropdown('foundation')">\n                <label>${s}</label>\n                <span class="dropdown-icon" id="foundation-icon">▼</span>\n            </div>\n            <div class="dropdown-content" id="foundation-content" style="display: none;">\n                <div class="checkbox-group">\n                    ${function(e){const t="de"===bg,n=[{value:"A - Free standing (no ground fixings)",label:t?"Freistehend (ohne Bodenbefestigung)":"Free standing (no ground fixings)"},{value:"Ap - Surface mounted (pinned or bolted to ground)",label:t?"Oberflächenmontiert (gedübbelt oder geschraubt)":"Surface mounted (pinned or bolted to ground)"},{value:"B - Depth <= 0.5m below ground level",label:t?"Tiefe <= 0,5m unter Geländeoberkante":"Depth <= 0.5m below ground level"},{value:"C - Depth >0.5m below ground level",label:t?"Tiefe >0,5m unter Geländeoberkante":"Depth >0.5m below ground level"}];return n.map(t=>{const n=e[t.value]||0;return`<label><input type="checkbox" value="${t.value}"> ${t.label} (${n})</label>`}).join("")}(t.foundation)}\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Operation Filter --\x3e\n        <div class="form-group collapsible-dropdown-group">\n            <div class="dropdown-header" onclick="toggleDropdown('operation')">\n                <label>${l}</label>\n                <span class="dropdown-icon" id="operation-icon">▼</span>\n            </div>\n            <div class="dropdown-content" id="operation-content" style="display: none;">\n                <div class="checkbox-group">\n                    ${function(e){const t="de"===bg,n=[{value:"active",label:t?"Aktiv":"active"},{value:"passive",label:t?"Passiv":"passive"}];return n.map(t=>{const n=e[t.value]||0;return`<label><input type="checkbox" value="${t.value}"> ${t.label} (${n})</label>`}).join("")}(t.operation)}\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Deployment Filter --\x3e\n        <div class="form-group collapsible-dropdown-group">\n            <div class="dropdown-header" onclick="toggleDropdown('deployment')">\n                <label>${u}</label>\n                <span class="dropdown-icon" id="deployment-icon">▼</span>\n            </div>\n            <div class="dropdown-content" id="deployment-content" style="display: none;">\n                <div class="checkbox-group">\n                    ${function(e){const t="de"===bg,n=[{value:"permanent",label:t?"Permanent":"permanent"},{value:"temporary",label:t?"Temporär":"temporary"}];return n.map(t=>{const n=e[t.value]||0;return`<label><input type="checkbox" value="${t.value}"> ${t.label} (${n})</label>`}).join("")}(t.deployment)}\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Categories Filter --\x3e\n        <div class="form-group collapsible-dropdown-group">\n            <div class="dropdown-header" onclick="toggleDropdown('categories')">\n                <label>${c}</label>\n                <span class="dropdown-icon" id="categories-icon">▼</span>\n            </div>\n            <div class="dropdown-content" id="categories-content" style="display: none;">\n                <div class="hierarchical-checkbox">\n                    ${function(e){const t="de"===bg,n={Poller:t?"Poller":"Bollards",Zaun:t?"Zaun":"Perimeter Barriers",Tor:t?"Tor":"Gates",Haltestelle:t?"Straßenmöbel":"Street Furniture",Durchfahrtsperre:t?"Sperrblocker":"Blockers",Unknown:t?"Sonstige":"Other"},i={};return Object.entries(n).forEach(([e,t])=>{i[t]||(i[t]=[]),i[t].push(e)}),Object.entries(i).map(([t,i])=>{const r=i.reduce((t,n)=>t+(e[n]||0),0),o=i.map(i=>{const r=e[i]||0,o=n[i]||i;return`<label><input type="checkbox" value="${i}" data-category="${t}"> ${o} (${r})</label>`}).join("");return`\n            <div class="category-item">\n                <div class="category-header">\n                    <label><input type="checkbox" value="${t}" data-category="${t}"> ${t} (${r})</label>\n                </div>\n                <div class="category-children">\n                    ${o}\n                </div>\n            </div>\n        `}).join("")}(t.category)}\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Manufacturer Filter --\x3e\n        <div class="form-group collapsible-dropdown-group">\n            <div class="dropdown-header" onclick="toggleDropdown('manufacturer')">\n                <label>${d}</label>\n                <span class="dropdown-icon" id="manufacturer-icon">▼</span>\n            </div>\n            <div class="dropdown-content" id="manufacturer-content" style="display: none;">\n                <select id="manufacturer-select" class="form-control">\n                    <option value="">${p}</option>\n                    ${function(e){return["ATGAccess","Avon-Barrier","Barkers Fencing","Blockaxess","Delta Scientific","Eagle Auto Gate","Frontier Pitts","Heald","Highway Care","Marshalls","Perimeter Protection","Reidsteel","Securiscape","Smith Ltd","Tiso Production","Urbaco","Zaun"].map(t=>`<option value="${t}">${t} (${e[t]||0})</option>`).join("")}(t.manufacturer)}\n                </select>\n            </div>\n        </div>\n            \n            \x3c!-- Reset Button immediately below menu items --\x3e\n            <button id="reset-all-filters" class="reset-button" style="\n                background: var(--accent-color);\n                color: white;\n                border: none;\n                padding: 8px 16px;\n                border-radius: 6px;\n                cursor: pointer;\n                font-size: 12px;\n                margin-top: 16px;\n                width: 100%;\n            ">${f}</button>\n            </div>\n        </section>\n    `;e.innerHTML=g,function(){const e=document.getElementById("reset-all-filters");e&&e.addEventListener("click",()=>{!function(){[{id:"min-speed",value:"16"},{id:"max-speed",value:"112"},{id:"min-angle",value:"15"},{id:"max-angle",value:"90"},{id:"min-distance",value:"0"},{id:"max-distance",value:"60"}].forEach(({id:e,value:t})=>{const n=document.getElementById(e);n&&(n.value=t)});["vehicle-mass-content","standards-content","foundation-content","operation-content","deployment-content","categories-content"].forEach(e=>{const t=document.getElementById(e);if(t){t.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.checked=!1})}});const e=document.getElementById("manufacturer-select");e&&(e.value="")}(),Rm()});document.querySelectorAll(".manufacturer-sidebar select").forEach(e=>{e.addEventListener("change",()=>{Rm()})});document.querySelectorAll('.manufacturer-sidebar input[type="number"]').forEach(e=>{e.addEventListener("input",()=>{Rm()})});document.querySelectorAll('.manufacturer-sidebar input[type="checkbox"]').forEach(e=>{e.addEventListener("change",()=>{Rm()})})}(),setTimeout(()=>{Rm()},100)}function Sg(){Pg(),async function(){const e=document.getElementById("products-loading");e&&(e.style.display="block");try{const t=await fetch("/Barricadix_MWP/product-database.json",{cache:"no-cache"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();window.productDatabase=n,function(e){const t=document.getElementById("manufacturer-filter");if(t){[...new Set(e.map(e=>e.manufacturer).filter(Boolean))].forEach(e=>{const n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)})}const n=document.getElementById("standard-filter");if(n){[...new Set(e.map(e=>{var t;return null==(t=e.technical_data)?void 0:t.standard}).filter(Boolean))].forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)})}const i=document.getElementById("vehicle-type-filter");if(i){[...new Set(e.map(e=>{var t;return null==(t=e.technical_data)?void 0:t.material}).filter(Boolean))].forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,i.appendChild(t)})}}(n),await xg(n),e&&(e.style.display="none"),Pg(),setTimeout(()=>{document.getElementById("toggle-view-btn")&&Ng("grid")},100)}catch(t){Rg("Fehler beim Laden der Produktdatenbank","error");const e=document.getElementById("no-products");e&&(e.style.display="block",e.textContent="Fehler beim Laden der Produktdatenbank")}}(),function(){const e=document.getElementById("product-search"),t=document.getElementById("search-btn"),n=document.getElementById("manufacturer-filter"),i=document.getElementById("standard-filter"),r=document.getElementById("vehicle-type-filter");e&&e.addEventListener("input",Ag);t&&t.addEventListener("click",Ag);n&&n.addEventListener("change",Ag);i&&i.addEventListener("change",Ag);r&&r.addEventListener("change",Ag);const o=document.getElementById("speed-filter");o&&o.addEventListener("change",Ag);const a=document.getElementById("product-property-select");a&&a.addEventListener("change",Ag);const s=document.getElementById("vehicle-select");s&&s.addEventListener("change",Ag);!function(){const e=document.getElementById("toggle-view-btn");if(!e)return;e.addEventListener("click",Cg),Ng("grid")}()}(),function(){const e=document.getElementById("close-modal"),t=document.getElementById("export-product"),n=document.getElementById("print-product");e&&e.addEventListener("click",()=>{const e=document.getElementById("product-modal");e&&(e.style.display="none",e.currentProductIndex=void 0)});t&&t.addEventListener("click",Og);n&&n.addEventListener("click",Mg);const i=document.getElementById("product-modal");i&&i.addEventListener("click",e=>{e.target===i&&(i.style.display="none",i.currentProductIndex=void 0)})}()}async function xg(e){document.getElementById("products-tbody"),document.getElementById("products-grid");!function(e){const t=document.getElementById("products-tbody");if(!t)return;if(t.innerHTML="",0===e.length){const e=document.getElementById("no-products");return void(e&&(e.style.display="block"))}const n=document.getElementById("no-products");n&&(n.style.display="none");const i=Tg(e);i.forEach((e,n)=>{var i,r,o,a,s,l,u;const c=document.createElement("tr"),d=e.product_type_confidence||0,h=d>=.9?"🟢":d>=.7?"🟡":d>=.5?"🟠":"🔴";c.innerHTML=`\n            <td>${e.manufacturer||"N/A"}</td>\n            <td>${e.product_name||"N/A"}</td>\n            <td><span title="Produkttyp: ${e.product_type||"N/A"}">${e.product_type||"N/A"}</span></td>\n            <td><span title="Cluster: ${e.product_cluster||"N/A"}">${e.product_cluster||"N/A"}</span></td>\n            <td><span title="Vertrauen: ${(100*d).toFixed(0)}%">${h} ${(100*d).toFixed(0)}%</span></td>\n            <td>${(null==(i=e.technical_data)?void 0:i.standard)||"N/A"}</td>\n            <td>${(null==(r=e.technical_data)?void 0:r.pr_mass_kg)||"N/A"}</td>\n            <td>${(null==(o=e.technical_data)?void 0:o.pr_veh)||"N/A"}</td>\n            <td>${(null==(a=e.technical_data)?void 0:a.pr_speed_kph)||"N/A"}</td>\n            <td>${(null==(s=e.technical_data)?void 0:s.pr_angle_deg)||"N/A"}</td>\n            <td>${(null==(l=e.technical_data)?void 0:l.pr_pen_m)||"N/A"}</td>\n            <td>${(null==(u=e.technical_data)?void 0:u.pr_debris_m)||"N/A"}</td>\n            <td>\n                <button class="view-details-btn" data-product-index="${n}">\n                    ${Fg("manufacturer.sidebar.productDatabase.viewDetails")}\n                </button>\n            </td>\n        `,t.appendChild(c)});t.querySelectorAll(".view-details-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.target,n=parseInt(t.getAttribute("data-product-index")||"0"),r=i[n],o=(window.productDatabase||[]).findIndex(e=>e.manufacturer===r.manufacturer&&e.product_name===r.product_name);Lg(o>=0?o:n)})})}(e),await async function(e){const t=document.getElementById("products-grid");if(!t)return;if(t.innerHTML="",0===e.length){const e=document.getElementById("no-products-grid");return void(e&&(e.style.display="block"))}const n=document.getElementById("no-products-grid");n&&(n.style.display="none");const i=Tg(e),r=await async function(e){const t=await Promise.all(e.map(async e=>{const t=Ig(e),n=await function(e){return new Promise(t=>{const n=new Image,i=setTimeout(()=>{t(!1)},1500);n.onload=()=>{clearTimeout(i),t(!0)},n.onerror=()=>{clearTimeout(i),t(!1)},n.loading="lazy",n.decoding="async",n.src=e,setTimeout(()=>{t(!1)},2e3)})}(t),i=e.product_image_file&&null!==e.product_image_file&&""!==e.product_image_file.trim();return{...e,hasRealImage:n,hasDatabaseFilename:i}})),n=t.sort((e,t)=>!e.hasDatabaseFilename||!e.hasRealImage||t.hasDatabaseFilename&&t.hasRealImage?!t.hasDatabaseFilename||!t.hasRealImage||e.hasDatabaseFilename&&e.hasRealImage?e.hasRealImage&&!t.hasRealImage?-1:!e.hasRealImage&&t.hasRealImage?1:0:1:-1),i=n.filter(e=>e.hasDatabaseFilename&&e.hasRealImage);n.filter(e=>!e.hasDatabaseFilename&&e.hasRealImage),n.filter(e=>!e.hasRealImage);return i.slice(0,5).forEach((e,t)=>{}),n}(i);r.filter(e=>e.hasRealImage),r.filter(e=>!e.hasRealImage);r.forEach((e,n)=>{var i,r,o,a,s,l;const u=document.createElement("div");u.className="product-card";const c=Ig(e),d=e.hasRealImage;d&&n<20&&(u.className="product-card product-card-priority"),u.innerHTML=`\n            <div class="product-card-image ${d?"":"no-image"}">\n                <img src="${c}" alt="${e.product_name||"Produkt"}" \n                     loading="lazy" decoding="async"\n                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"\n                     class="product-image">\n                <div class="product-image-placeholder" style="display: none;">\n                    <i class="fas fa-image"></i>\n                    <span>Kein Bild verfügbar</span>\n                </div>\n            </div>\n            <div class="product-card-content">\n                <div class="product-card-header">\n                    <div class="product-card-title">${e.product_name||"N/A"}</div>\n                    <div class="product-card-manufacturer">${e.manufacturer||"N/A"}</div>\n                </div>\n                <div class="product-card-classification">\n                    <div class="product-card-type">\n                        <span class="type-badge ${(null==(i=e.product_cluster)?void 0:i.toLowerCase())||"unknown"}">${e.product_type||"N/A"}</span>\n                        <span class="cluster-badge">${e.product_cluster||"N/A"}</span>\n                    </div>\n                    <div class="confidence-indicator">\n                        <span class="confidence-label">Vertrauen:</span>\n                        <span class="confidence-value">${e.product_type_confidence?(100*e.product_type_confidence).toFixed(0)+"%":"N/A"}</span>\n                    </div>\n                </div>\n                <div class="product-card-specs">\n                    <div class="product-card-spec">\n                        <div class="product-card-spec-label">Standard</div>\n                        <div class="product-card-spec-value">${(null==(r=e.technical_data)?void 0:r.standard)||"N/A"}</div>\n                    </div>\n                    <div class="product-card-spec highlight-speed">\n                        <div class="product-card-spec-label">Testgeschwindigkeit</div>\n                        <div class="product-card-spec-value"><strong>${(null==(o=e.technical_data)?void 0:o.pr_speed_kph)||"N/A"} km/h</strong></div>\n                    </div>\n                    <div class="product-card-spec">\n                        <div class="product-card-spec-label">Fahrzeugtyp</div>\n                        <div class="product-card-spec-value">${(null==(a=e.technical_data)?void 0:a.pr_veh)||"N/A"}</div>\n                    </div>\n                    <div class="product-card-spec">\n                        <div class="product-card-spec-label">Anprallwinkel</div>\n                        <div class="product-card-spec-value">${(null==(s=e.technical_data)?void 0:s.pr_angle_deg)||"N/A"}°</div>\n                    </div>\n                    <div class="product-card-spec">\n                        <div class="product-card-spec-label">Eindringtiefe</div>\n                        <div class="product-card-spec-value">${(null==(l=e.technical_data)?void 0:l.pr_pen_m)||"N/A"} m</div>\n                    </div>\n                </div>\n                <div class="product-card-actions">\n                    <button class="product-card-btn secondary" data-product-index="${n}">\n                        Details anzeigen\n                    </button>\n                </div>\n            </div>\n        `,t.appendChild(u)});t.querySelectorAll(".product-card").forEach(e=>{e.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("product-card-btn")){const e=parseInt(t.getAttribute("data-product-index")||"0"),n=r[e],i=(window.productDatabase||[]).findIndex(e=>e.manufacturer===n.manufacturer&&e.product_name===n.product_name);Lg(i>=0?i:e)}})})}(e)}function Tg(e){return e.filter(e=>{const t=e.product_name&&""!==e.product_name.trim(),n=e.manufacturer&&""!==e.manufacturer.trim();return t&&n}).filter((e,t,n)=>{const i=`${e.manufacturer.trim()}|${e.product_name.trim()}`;return!(n.findIndex(e=>`${e.manufacturer.trim()}|${e.product_name.trim()}`===i)!==t)})}function Ig(e){if(e.product_image_file&&null!==e.product_image_file&&""!==e.product_image_file.trim()){const t=`/Barricadix_MWP/images/${e.product_image_file}`,n=new Image;return n.onload=()=>{},n.onerror=()=>{},n.src=t,t}if(!e.product_name||""===e.product_name){return"/Barricadix_MWP/images/default_product_img01.jpg"}let t=e.product_name.replace(/[^a-zA-Z0-9\s\-_]/g,"").replace(/\s+/g,"_").replace(/[_-]+/g,"_").trim();return`/Barricadix_MWP/images/${[`${t}_img01.jpg`,`${t}_img02.jpg`,`${t}_img03.jpg`,`${t}.jpg`,`${t}_01.jpg`,`${t}_02.jpg`][0]}`}function Cg(){const e=document.getElementById("toggle-view-btn");if(!e)return;Ng("table"===e.getAttribute("data-view")?"grid":"table")}function Ng(e){const t=document.getElementById("toggle-view-btn"),n=document.getElementById("products-table-container"),i=document.getElementById("products-grid-container");if(!t||!n||!i)return;t.setAttribute("data-view",e);const r=t.querySelector("span"),o=t.querySelector("i");if("grid"===e)n.style.display="none",i.style.display="block",r&&(r.textContent=Fg("manufacturer.sidebar.productDatabase.toggleToTable")),o&&(o.className="fas fa-table");else{n.style.display="block",i.style.display="none";const e=document.getElementById("products-table");e&&(e.style.display="table"),r&&(r.textContent=Fg("manufacturer.sidebar.productDatabase.toggleToGrid")),o&&(o.className="fas fa-th-large")}}async function Ag(){var e,t,n,i,r,o,a;const s=window.productDatabase||[],l=(null==(e=document.getElementById("product-search"))?void 0:e.value.toLowerCase())||"",u=(null==(t=document.getElementById("manufacturer-filter"))?void 0:t.value)||"",c=(null==(n=document.getElementById("standard-filter"))?void 0:n.value)||"",d=(null==(i=document.getElementById("vehicle-type-filter"))?void 0:i.value)||"",h=(null==(r=document.getElementById("speed-filter"))?void 0:r.value)||"",f=(null==(o=document.getElementById("product-property-select"))?void 0:o.value)||"",p=(null==(a=document.getElementById("vehicle-select"))?void 0:a.value)||"",g=function(){if(0===og.size)return 0;let e=0;return og.forEach(t=>{t.maxSpeed&&t.maxSpeed>e&&(e=t.maxSpeed)}),e}(),m=s.filter(e=>{var t,n,i,r,o,a;const s=!l||(null==(t=e.manufacturer)?void 0:t.toLowerCase().includes(l))||(null==(n=e.product_name)?void 0:n.toLowerCase().includes(l))||(null==(r=null==(i=e.technical_data)?void 0:i.standard)?void 0:r.toLowerCase().includes(l)),m=!u||e.manufacturer===u,y=!c||(null==(o=e.technical_data)?void 0:o.standard)===c,v=!d||(null==(a=e.technical_data)?void 0:a.material)===d,b=g>0?g:h?parseFloat(h):0,_=0===b||(()=>{var t,n;let i=0;if(null==(t=e.technical_data)?void 0:t.pr_speed_kph)i=parseFloat(e.technical_data.pr_speed_kph);else if(e.speed)i=parseFloat(e.speed);else if(null==(n=e.technical_data)?void 0:n.performance_rating){const t=e.technical_data.performance_rating.split("/");if(t.length>=3){const e=t[2];i=parseFloat(e)||0}}return!isNaN(i)&&i>=b})(),E=!p||"alle"===p||(()=>{var t;const n=parseFloat(p);if(isNaN(n))return!0;const i=null==(t=e.technical_data)?void 0:t.pr_mass_kg;return!!i&&i>=n})(),k=!f||"aut./starr"===f||"versenkbar"===f||(()=>{var t;if("entfernbar"===f){return((null==(t=e.technical_data)?void 0:t.foundation_depth)||"").includes("A - Free standing (no ground fixings)")}return!0})();return s&&m&&y&&v&&_&&E&&k});await xg(m)}function Pg(){}function Lg(e){var t,n,i,r,o,a,s,l,u,c,d,h,f,p;const g=(window.productDatabase||[])[e];if(!g)return;const m=document.getElementById("modal-product-name");m&&(m.textContent=`${g.manufacturer} - ${g.product_name}`);const y=document.getElementById("modal-technical-specs");y&&(y.innerHTML=`\n            <p><strong>${Fg("manufacturer.sidebar.productDatabase.manufacturer")}:</strong> ${g.manufacturer||"N/A"}</p>\n            <p><strong>Produktname:</strong> ${g.product_name||"N/A"}</p>\n            <p><strong>${Fg("manufacturer.sidebar.productDatabase.standard")}:</strong> ${(null==(t=g.technical_data)?void 0:t.standard)||"N/A"}</p>\n            <p><strong>${Fg("manufacturer.sidebar.productDatabase.dimensions")}:</strong> ${(null==(n=g.technical_data)?void 0:n.dimensions)||"N/A"}</p>\n            <p><strong>${Fg("manufacturer.sidebar.productDatabase.material")}:</strong> ${(null==(i=g.technical_data)?void 0:i.material)||"N/A"}</p>\n        `);const v=document.getElementById("modal-performance-data");v&&(v.innerHTML=`\n            <p><strong>${Fg("manufacturer.sidebar.productDatabase.performance")}:</strong> ${(null==(r=g.technical_data)?void 0:r.performance_rating)||"N/A"}</p>\n            <p><strong>${Fg("manufacturer.sidebar.productDatabase.foundation")}:</strong> ${(null==(o=g.technical_data)?void 0:o.foundation_depth)||"N/A"}</p>\n            <p><strong>Standard getestet nach:</strong> ${(null==(a=g.technical_data)?void 0:a.standard_tested_to)||"N/A"}</p>\n            <p><strong>Download Datum:</strong> ${(null==(s=g.technical_data)?void 0:s.download_date)||"N/A"}</p>\n            <div style="margin-top: 20px; padding: 15px; background-color: #e3f2fd; border-radius: 8px;">\n                <h4 style="margin-bottom: 12px; color: #1565c0;">🏷️ Produktklassifizierung</h4>\n                <p><strong>Produkttyp:</strong> ${g.product_type||"N/A"}</p>\n                <p><strong>Cluster:</strong> ${g.product_cluster||"N/A"}</p>\n                <p><strong>Vertrauenswert:</strong> ${g.product_type_confidence?(100*g.product_type_confidence).toFixed(0)+"%":"N/A"}</p>\n                <p><strong>Erkennungsquelle:</strong> ${g.product_type_source||"N/A"}</p>\n            </div>\n            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">\n                <h4 style="margin-bottom: 12px; color: #495057;">⚡ Testparameter</h4>\n                <p><strong>Fahrzeuggewicht:</strong> ${(null==(l=g.technical_data)?void 0:l.pr_mass_kg)||"N/A"} kg</p>\n                <p><strong>Fahrzeugtyp:</strong> ${(null==(u=g.technical_data)?void 0:u.pr_veh)||"N/A"}</p>\n                <p><strong>Testgeschwindigkeit:</strong> ${(null==(c=g.technical_data)?void 0:c.pr_speed_kph)||"N/A"} km/h</p>\n                <p><strong>Anprallwinkel:</strong> ${(null==(d=g.technical_data)?void 0:d.pr_angle_deg)||"N/A"}°</p>\n                <p><strong>Eindringtiefe:</strong> ${(null==(h=g.technical_data)?void 0:h.pr_pen_m)||"N/A"} m</p>\n                <p><strong>Trümmerstreuweite:</strong> ${(null==(f=g.technical_data)?void 0:f.pr_debris_m)||"N/A"} m</p>\n            </div>\n        `);const b=document.getElementById("modal-certification");b&&(b.innerHTML=`\n            <p><strong>${Fg("manufacturer.sidebar.productDatabase.standard")}:</strong> ${(null==(p=g.technical_data)?void 0:p.standard)||"N/A"}</p>\n            <p><strong>Datenblatt URL:</strong> ${g.datasheet_url?`<a href="${g.datasheet_url}" target="_blank">${g.datasheet_url}</a>`:"N/A"}</p>\n            <p><strong>Produktbild:</strong> ${g.product_image_file||"N/A"}</p>\n        `);const _=document.getElementById("product-modal");_&&(_.style.display="flex",_.currentProductIndex=e)}function Og(){Rg("Export-Funktionalität wird implementiert...","info")}function Mg(){Rg("Druck-Funktionalität wird implementiert...","info")}function Rg(e,t="info"){document.querySelectorAll(".custom-notification").forEach(e=>e.remove());const n=document.createElement("div");n.className=`custom-notification custom-notification-${t}`,n.innerHTML=`\n        <div class="notification-content">\n            <span class="notification-message">${e}</span>\n            <button class="notification-close">&times;</button>\n        </div>\n    `,n.style.cssText=`\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ${"info"===t?"#2563eb":"success"===t?"#22c55e":"warning"===t?"#f59e0b":"#ef4444"};\n        color: white;\n        padding: 16px 20px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        z-index: 10000;\n        max-width: 400px;\n        font-family: 'Open Sans', sans-serif;\n        font-size: 14px;\n        line-height: 1.4;\n    `,document.body.appendChild(n);const i=n.querySelector(".notification-close");i&&i.addEventListener("click",()=>n.remove()),setTimeout(()=>{n.parentNode&&n.remove()},5e3)}function Dg(e,t){return t.split(".").reduce((e,t)=>e?e[t]:void 0,e)}function Fg(e,t){_g&&_g[bg]||(_g=Eg);let n=Dg(_g[bg],e);if("string"!=typeof n&&(n=Dg(Eg[bg],e),"string"!=typeof n)){const t=function(e){return{"sidebar.trafficData":"Parameterwahl","sidebar.vehicleSelect":"Fahrzeugauswahl","sidebar.accessRoads":"Zufahrten","sidebar.curbs":"Bordsteinkanten","sidebar.obstacles":"Hindernisse","sidebar.protectionSelection":"Schutzauswahl","sidebar.protectionPeriod":"Schutzzeitraum","sidebar.protectionProducts":"Schutzprodukte","sidebar.productProperty":"Produkteigenschaft","sidebar.riskAssessment":"Risikobewertung","sidebar.assetToProtect":"Was geschützt werden soll","sidebar.securityRisk":"Sicherheitsrisiko","sidebar.recommendedProductClass":"Empfohlene Produktklasse","sidebar.low":"niedrig","sidebar.high":"hoch","nav.paramInput":"Parameter","nav.markingArea":"Sicherheitsbereich","nav.threatAnalysis":"Gefahrenanalyse","nav.riskReport":"Risikobericht","nav.productSelection":"Produktauswahl","nav.projectDescription":"Ausschreibung","header.planning":"Planung","header.manufacturer":"Hersteller"}[e]||null}(e);return t||e}if(t)for(const i in t)n=n.replace(`{${i}}`,String(t[i]));return n}async function zg(){if(!_g[bg]&&(await Bg(),!_g[bg]))return;document.querySelectorAll("[data-translate-key]").forEach(e=>{try{const t=e.getAttribute("data-translate-key"),n=Fg(t);if(n&&n!==t){if(e.hasAttribute("placeholder"))e.placeholder=n;else if("INPUT"===e.tagName&&"text"===e.type)e.value=n;else{const t=Array.from(e.childNodes).find(e=>{var t;return e.nodeType===Node.TEXT_NODE&&(null==(t=e.textContent)?void 0:t.trim())});t?t.textContent=n:e.textContent=n}0}else 0}catch(t){0}}),document.querySelectorAll("[data-translate-key-placeholder]").forEach(e=>{try{const t=e.getAttribute("data-translate-key-placeholder"),n=Fg(t);n&&n!==t&&(e.placeholder=n)}catch(t){0}}),document.querySelectorAll("[data-translate-key-aria]").forEach(e=>{try{const t=e.getAttribute("data-translate-key-aria"),n=Fg(t);n&&n!==t&&e.setAttribute("aria-label",n)}catch(t){0}}),document.querySelectorAll("[data-translate-key-tooltip]").forEach(e=>{try{const t=e.getAttribute("data-translate-key-tooltip"),n=Fg(t);n&&n!==t&&(e.dataset.tooltip=n)}catch(t){0}});const e=document.getElementById("toggle-draw-mode");if(e){const t=e.querySelector("span");if(t){const e=Fg(Qp?"map.setWaypointsActive":"map.setWaypoints");e&&"map.setWaypointsActive"!==e&&"map.setWaypoints"!==e&&(t.textContent=e)}}!function(){const e=document.getElementById("products-grid");if(!e)return;e.querySelectorAll(".product-card").forEach(e=>{e.querySelectorAll(".product-card-spec-label, .tech-spec-item, .tech-spec-label, .spec-label").forEach(e=>{let t=e.textContent||"";t="en"===bg?t.replace(/Fahrzeuggewicht \(kg\)/gi,Fg("manufacturer.sidebar.productDatabase.vehicleWeight")).replace(/Fahrzeugtyp/gi,Fg("manufacturer.sidebar.productDatabase.vehicleType")).replace(/Geschwindigkeit \(km\/h\)/gi,Fg("manufacturer.sidebar.productDatabase.speed")).replace(/Aufprallwinkel \(°\)/gi,Fg("manufacturer.sidebar.productDatabase.impactAngle")).replace(/Penetration \(m\)/gi,Fg("manufacturer.sidebar.productDatabase.penetration")).replace(/Trümmerentfernung \(m\)/gi,Fg("manufacturer.sidebar.productDatabase.debrisDistance")).replace(/Standard/gi,Fg("manufacturer.sidebar.productDatabase.standard")).replace(/Hersteller/gi,Fg("manufacturer.sidebar.productDatabase.manufacturer")).replace(/Typ/gi,Fg("manufacturer.sidebar.productDatabase.type")).replace(/FAHRZEUGGEWICHT \(KG\)/gi,Fg("manufacturer.sidebar.productDatabase.vehicleWeight").toUpperCase()).replace(/FAHRZEUGTYP/gi,Fg("manufacturer.sidebar.productDatabase.vehicleType").toUpperCase()).replace(/GESCHWINDIGKEIT \(KM\/H\)/gi,Fg("manufacturer.sidebar.productDatabase.speed").toUpperCase()).replace(/AUFPRALLWINKEL \(°\)/gi,Fg("manufacturer.sidebar.productDatabase.impactAngle").toUpperCase()).replace(/PENETRATION \(M\)/gi,Fg("manufacturer.sidebar.productDatabase.penetration").toUpperCase()).replace(/STANDARD/gi,Fg("manufacturer.sidebar.productDatabase.standard").toUpperCase()).replace(/HERSTELLER/gi,Fg("manufacturer.sidebar.productDatabase.manufacturer").toUpperCase()).replace(/TYP/gi,Fg("manufacturer.sidebar.productDatabase.type").toUpperCase()):t.replace(/Vehicle Weight \(kg\)/gi,"Fahrzeuggewicht (kg)").replace(/Vehicle Type/gi,"Fahrzeugtyp").replace(/Speed \(km\/h\)/gi,"Geschwindigkeit (km/h)").replace(/Impact Angle \(°\)/gi,"Aufprallwinkel (°)").replace(/Penetration \(m\)/gi,"Penetration (m)").replace(/Debris Distance \(m\)/gi,"Trümmerentfernung (m)").replace(/Standard/gi,"Standard").replace(/Manufacturer/gi,"Hersteller").replace(/Type/gi,"Typ").replace(/VEHICLE WEIGHT \(KG\)/gi,"FAHRZEUGGEWICHT (KG)").replace(/VEHICLE TYPE/gi,"FAHRZEUGTYP").replace(/SPEED \(KM\/H\)/gi,"GESCHWINDIGKEIT (KM/H)").replace(/IMPACT ANGLE \(°\)/gi,"AUFPRALLWINKEL (°)").replace(/PENETRATION \(M\)/gi,"PENETRATION (M)").replace(/STANDARD/gi,"STANDARD").replace(/MANUFACTURER/gi,"HERSTELLER").replace(/TYPE/gi,"TYP"),e.textContent=t});const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),n=[];let i;for(;i=t.nextNode();)i.nodeValue&&i.nodeValue.trim()&&n.push(i);n.forEach(e=>{let t=e.nodeValue||"";t="en"===bg?t.replace(/FAHRZEUGGEWICHT \(KG\)/gi,"VEHICLE WEIGHT (KG)").replace(/FAHRZEUGTYP/gi,"VEHICLE TYPE").replace(/GESCHWINDIGKEIT \(KM\/H\)/gi,"SPEED (KM/H)").replace(/AUFPRALLWINKEL \(°\)/gi,"IMPACT ANGLE (°)").replace(/PENETRATION \(M\)/gi,"PENETRATION (M)").replace(/STANDARD/gi,"STANDARD").replace(/HERSTELLER/gi,"MANUFACTURER").replace(/TYP/gi,"TYPE"):t.replace(/VEHICLE WEIGHT \(KG\)/gi,"FAHRZEUGGEWICHT (KG)").replace(/VEHICLE TYPE/gi,"FAHRZEUGTYP").replace(/SPEED \(KM\/H\)/gi,"GESCHWINDIGKEIT (KM/H)").replace(/IMPACT ANGLE \(°\)/gi,"AUFPRALLWINKEL (°)").replace(/PENETRATION \(M\)/gi,"PENETRATION (M)").replace(/STANDARD/gi,"STANDARD").replace(/MANUFACTURER/gi,"HERSTELLER").replace(/TYPE/gi,"TYP"),e.nodeValue=t})})}();const t=document.getElementById("manufacturer-view");if(t&&"none"!==t.style.display){const e=window.productDatabase;e&&e.length>0&&xg(e);const t=document.getElementById("product-modal");if(t&&"block"===t.style.display){const e=t.currentProductIndex;void 0!==e&&Lg(e)}}setTimeout(()=>{document.querySelectorAll("[data-translate-key]").forEach(e=>{try{const t=e.getAttribute("data-translate-key"),n=Fg(t);n&&n!==t&&e.textContent!==n&&(e.textContent=n)}catch(t){}})},200)}async function Bg(){_g=Eg}async function Ug(e){var t;const n={center:Yp?Yp.getCenter():null,zoom:Yp?Yp.getZoom():null,drawnPolygon:ng?ng.getLatLngs():null,threatsMap:new Map(og),waypoints:[...Zp]};bg=e,localStorage.setItem("language",e),document.documentElement.lang=e,document.querySelectorAll(".lang-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-lang")===e)}),await zg();const i=document.getElementById("manufacturer-view");if(i&&"none"!==i.style.display&&(zg(),wg()),Om(),window.dispatchEvent(new Event("languageChanged")),Yp&&n.center&&n.zoom){await new Promise(e=>setTimeout(e,500));try{if(Yp.setView(n.center,n.zoom,{animate:!1}),n.drawnPolygon&&n.drawnPolygon.length>0){ng&&Yp.removeLayer(ng),ng=L.polygon(n.drawnPolygon,{color:"#ff7800",weight:3,opacity:.8,fillColor:"#ff7800",fillOpacity:.2}).addTo(Yp),ig&&Yp.removeLayer(ig);const e=ng.getBounds().getCenter();ig=L.marker(e,{icon:L.divIcon({className:"polygon-label",html:`<div style="background: white; padding: 5px; border: 2px solid #ff7800; border-radius: 5px; font-weight: bold; color: #ff7800;">${Fg("map.securityArea")}</div>`,iconSize:[120,40],iconAnchor:[60,20]})}).addTo(Yp)}n.threatsMap.size>0&&(og=n.threatsMap,og.size>0&&sm()),n.waypoints.length>0&&(Zp=n.waypoints,Zp.forEach((e,t)=>{const n=L.marker(e,{icon:L.divIcon({className:"waypoint-marker",html:`<div style="background: #ff7800; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">${t+1}</div>`,iconSize:[20,20],iconAnchor:[10,10]})}).addTo(Yp);eg.push(n)}),Zp.length>1&&(tg=L.polyline(Zp,{color:"#ff7800",weight:3,opacity:.8,dashArray:"10, 10"}).addTo(Yp))),Yp.invalidateSize()}catch(r){}}og.size>0&&sm(),!1===(null==(t=document.querySelector(".product-recommendations-container"))?void 0:t.classList.contains("hidden"))&&await hm()}function qg(){const e=document.getElementById("map");if(!e)return;e.style.display="block",e.style.visibility="visible",e.style.opacity="1",e.classList.remove("view-hidden");let t;Yp=L.map(e,{zoomControl:!1,preferCanvas:!0}).setView([51.5711,8.106],16),L.control.zoom({position:"bottomright"}).addTo(Yp),Wp=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(Yp),setTimeout(()=>{Yp&&Yp.invalidateSize()},100),Wp.once("load",()=>{Yp&&Yp.invalidateSize()}),Yp.on("move",()=>{t&&clearTimeout(t),t=window.setTimeout(()=>{requestAnimationFrame(()=>{_m(),jg()})},150)}),Yp.on("zoom",()=>{_m(),jg()}),Yp.on("zoomstart",()=>{}),Yp.on("zoomend",()=>{_m();Yp.getZoom()<14&&hg&&tm()}),Yp.on("resize",()=>{_m()})}_g=Eg,window.restoreMapState=function(){if(!window.savedMapState)return;return window.savedMapState};const Vg=()=>{if(!(0!==og.size||window.entryDetectionManager&&window.entryDetectionManager.candidates&&0!==window.entryDetectionManager.candidates.length))return;if(og.size>0){if(Xp)try{Xp.clearLayers(),Yp.removeLayer(Xp)}catch{}Xp=L.layerGroup().addTo(Yp),og.forEach((e,t)=>{if(0===e.entryPoints.length)return;const n=document.getElementById("vehicle-select"),i=Zg((null==n?void 0:n.value)||"alle"),r=i?i[1]:3;let o,a,s;const l=Math.min(Math.round(10*r),10);l>=8?(o="#DC143C",a="#FF6347",s=6):l>=5?(o="#FF8C00",a="#FFA500",s=5):(o="#DAA520",a="#FFD700",s=4);const u=[];e.entryPoints.forEach(n=>{const i=`\n                    <b>${Fg("threats.popupHeader")}</b><br>\n                    <b>Straße:</b> ${t}<br>\n                    <b>Straßentyp:</b> ${e.roadType||"unbekannt"}<br>\n                    <b>Bedrohungslevel:</b> ${l}/10<br>\n                    <b>Max. Geschwindigkeit:</b> ${e.maxSpeed||"unbekannt"} km/h\n                `,r=L.circle([n.lat,n.lon],{radius:s,color:o,fillColor:a,fillOpacity:.8,weight:3}).bindPopup(i);Xp.addLayer(r),u.push(r)}),rg.set(t,u)})}window.entryDetectionManager&&window.entryDetectionManager.candidates&&window.entryDetectionManager.candidates.length>0&&pm();const e=document.querySelector(".threat-list");e&&(e.innerHTML="",og.size>0&&sm(),window.entryDetectionManager&&window.entryDetectionManager.candidates&&window.entryDetectionManager.candidates.length>0&&Lm(e),lm(og.size>0||window.entryDetectionManager&&window.entryDetectionManager.candidates&&window.entryDetectionManager.candidates.length>0));const t=document.getElementById("floating-threats");t&&(og.size>0||window.entryDetectionManager&&window.entryDetectionManager.candidates&&window.entryDetectionManager.candidates.length>0)&&t.classList.remove("view-hidden")},Gg=(e,t,n)=>{const i=document.getElementById("deletion-bubble");i&&i.remove();const r=e.getLatLng(),o=Yp.latLngToContainerPoint(r),a=document.createElement("div");a.id="deletion-bubble",a.style.cssText=`\n        position: absolute;\n        left: ${o.x+15}px;\n        top: ${o.y-10}px;\n        background: rgba(12, 47, 77, 0.95);\n        backdrop-filter: blur(10px);\n        border: 1px solid rgba(255, 255, 255, 0.2);\n        border-radius: 12px;\n        padding: 12px 16px;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n        z-index: 10000;\n        color: white;\n        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n        font-size: 14px;\n        min-width: 200px;\n        max-width: 250px;\n        pointer-events: auto;\n    `,a.innerHTML='\n        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">\n            <div style="font-weight: 600; color: #FFD700;">\n                🗑️ Zufahrtspunkt löschen\n            </div>\n            <button id="close-deletion-bubble" style="\n                background: none;\n                border: none;\n                color: #ccc;\n                font-size: 18px;\n                cursor: pointer;\n                padding: 0;\n                width: 20px;\n                height: 20px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            ">×</button>\n        </div>\n        <div style="display: flex; gap: 8px;">\n            <button id="confirm-deletion" style="\n                background: #dc3545;\n                color: white;\n                border: none;\n                padding: 8px 16px;\n                border-radius: 6px;\n                cursor: pointer;\n                font-size: 13px;\n                font-weight: 500;\n                flex: 1;\n                transition: background-color 0.2s;\n            " onmouseover="this.style.background=\'#c82333\'" onmouseout="this.style.background=\'#dc3545\'">\n                Entfernen\n            </button>\n        </div>\n    ';const s=document.getElementById("map");s&&s.appendChild(a);const l=document.getElementById("close-deletion-bubble"),u=document.getElementById("confirm-deletion");l&&l.addEventListener("click",()=>{a.remove()}),u&&u.addEventListener("click",()=>{$g(e,t),a.remove()});const c=e=>{a.contains(e.target)||(a.remove(),document.removeEventListener("click",c))};return setTimeout(()=>{document.addEventListener("click",c)},100),a},jg=()=>{const e=document.getElementById("deletion-bubble");if(!e||!Yp)return;const t=rg.get("entry-detection");t&&0!==t.length&&e.remove()},$g=(e,t)=>{const n=e.getLatLng(),i=window.entryDetectionManager;i&&i.deleteCandidate(t.id);const r=[];Yp.eachLayer(e=>{if(e!==ng&&e!==ig&&e!==Kp&&!eg.includes(e))if(e instanceof L.Circle){const t=e.getLatLng();n.distanceTo(t)<2&&r.push(e)}else if(e instanceof L.Polyline){const t=e.getLatLngs();if(t&&t.length>0){let i=!1;for(const e of t){const t=Array.isArray(e)?L.latLng(e[0],e[1]):e;if(n.distanceTo(t)<10){i=!0;break}}i&&r.push(e)}}else if(e instanceof L.Marker){const t=e.getLatLng();n.distanceTo(t)<2&&r.push(e)}}),r.forEach((e,t)=>{try{Xp&&Xp.hasLayer(e)?Xp.removeLayer(e):Yp.removeLayer(e)}catch(n){}}),rg.forEach((t,i)=>{const r=t.length,o=t.filter(t=>{if(t===ng)return!0;if(t===ig)return!0;if(t===Kp)return!0;if(eg.includes(t))return!0;if(t&&t.getLatLng){const e=t.getLatLng();return n.distanceTo(e)>=2}if(t&&t.getLatLngs){const e=t.getLatLngs();if(e&&e.length>0)for(const t of e){const e=Array.isArray(t)?L.latLng(t[0],t[1]):t;if(n.distanceTo(e)<10)return!1}return!0}return t!==e});o.length!==r&&rg.set(i,o)}),(()=>{const e=document.querySelector(".threat-list");if(e){e.innerHTML="",og.size>0&&sm(),Lm(e);const t=window.entryDetectionManager;lm(og.size>0||t&&t.candidates&&t.candidates.length>0)}})();Yp.eachLayer(e=>{if(e instanceof L.Circle){e.getLatLng()}else if(e instanceof L.Marker){e.getLatLng()}else if(e instanceof L.Polyline){e.getLatLngs()}else L.Polygon}),setTimeout(()=>{const e=[];Yp.eachLayer(t=>{if(t!==ng&&t!==ig&&t!==Kp&&!eg.includes(t))if(t instanceof L.Circle){const i=t.getLatLng();n.distanceTo(i)<2&&e.push(t)}else if(t instanceof L.Polyline){const i=t.getLatLngs();if(i&&i.length>0){let r=!1;for(const e of i){const t=Array.isArray(e)?L.latLng(e[0],e[1]):e;if(n.distanceTo(t)<10){r=!0;break}}r&&e.push(t)}}else if(t instanceof L.Marker){const i=t.getLatLng();n.distanceTo(i)<2&&e.push(t)}}),e.length>0&&e.forEach(e=>{try{Yp.removeLayer(e)}catch(t){}})},100)},Hg=()=>{if(tm(),pg){pg=!1;const e=document.getElementById("edit-threats-btn");e&&(e.classList.remove("active"),e.title="Zufahrten bearbeiten"),rm()}if(gg.clear(),mg.clear(),Xp){try{Xp.clearLayers(),Yp.removeLayer(Xp)}catch(i){}Xp=null}rg.forEach(e=>{e.forEach(e=>Yp.removeLayer(e))}),rg.clear(),window.entryDetectionManager&&window.entryDetectionManager.clearCandidates(),og.clear();const e=document.querySelector(".threat-list");e&&(e.innerHTML="");const t=document.getElementById("floating-threats");t&&t.classList.add("view-hidden"),lm(!1);const n=document.querySelector(".product-recommendations-container");n&&n.classList.add("hidden")};function Yg(e,t,n,i){const r=e.lon,o=e.lat,a=t.lon,s=t.lat,l=n.lon,u=n.lat,c=i.lon,d=i.lat,h=(r-a)*(u-d)-(o-s)*(l-c);if(0===h)return null;const f=((r-l)*(u-d)-(o-u)*(l-c))/h,p=-((r-a)*(o-u)-(o-s)*(r-l))/h;return f>0&&f<1&&p>0&&p<1?{lat:o+f*(s-o),lon:r+f*(a-r)}:null}function Wg(e,t){const n=e.replace(/\(ID:\d+\)/g,"").replace(/(straße|weg|gasse|platz|allee)$/i,"").trim().toLowerCase(),i=t.replace(/\(ID:\d+\)/g,"").replace(/(straße|weg|gasse|platz|allee)$/i,"").trim().toLowerCase();if(n===i&&n.length>2)return!0;if(function(e,t){const n=Array(t.length+1).fill(null).map(()=>Array(e.length+1).fill(null));for(let i=0;i<=e.length;i++)n[0][i]=i;for(let i=0;i<=t.length;i++)n[i][0]=i;for(let i=1;i<=t.length;i++)for(let r=1;r<=e.length;r++){const o=e[r-1]===t[i-1]?0:1;n[i][r]=Math.min(n[i][r-1]+1,n[i-1][r]+1,n[i-1][r-1]+o)}return n[t.length][e.length]}(n,i)<=1&&Math.min(n.length,i.length)>3)return!0;const r=n.replace(/^(haupt|neben|ober|unter|neu|alt)\s*/i,"");return r===i.replace(/^(haupt|neben|ober|unter|neu|alt)\s*/i,"")&&r.length>2}const Xg=(e,t)=>{let n=!1;for(let i=0,r=t.length-1;i<t.length;r=i++){const o=t[i].lon,a=t[i].lat,s=t[r].lon,l=t[r].lat;a>e.lat!=l>e.lat&&e.lon<(s-o)*(e.lat-a)/(l-a)+o&&(n=!n)}return n};function Kg(e,t){const n=e.lat*Math.PI/180,i=t.lat*Math.PI/180,r=(t.lat-e.lat)*Math.PI/180,o=(t.lon-e.lon)*Math.PI/180,a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n)*Math.cos(i)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function Qg(e,t,n){const i=e.lon-t.lon,r=e.lat-t.lat,o=n.lon-t.lon,a=n.lat-t.lat,s=i*o+r*a,l=Math.sqrt(i*i+r*r),u=Math.sqrt(o*o+a*a);if(0===l||0===u)return 180;const c=s/(l*u),d=Math.max(-1,Math.min(1,c));return Math.acos(d)*(180/Math.PI)}function Zg(e){switch(e){case"500":return[4,6];case"3500":return[3,4];case"7500":return[1.5,2.5];case"12000":return[1,1.5];case"40000":return[.5,1];default:return null}}function Jg(e,t){if(t<=0)return 0;return 3.6*Math.sqrt(2*e*t)}function em(e,t,n,i=1e3){let r=0;if(t>0){const t=e[0];for(const[,e]of Object.entries(n)){const n=e;if(n.nodes&&n.nodes.length>1){const e=n.nodes,o=e[e.length-1],a=e[0];if(o===t.id||a===t.id){let t=0;for(let n=0;n<Math.min(e.length-1,10)&&(t+=50,!(t>=i));n++);r=Math.max(r,t);break}}}}return Math.min(r,i)}function tm(){if(!hg)return;const e=rg.get(hg),t=fg.get(hg);e&&t&&e.forEach((e,n)=>{const i=t[n];e.setStyle&&i&&e.setStyle({weight:i.weight,opacity:i.opacity})}),fg.delete(hg),hg=null}function nm(){pg=!pg;const e=document.getElementById("edit-threats-btn");e&&(pg?(e.classList.add("active"),e.title="Edit-Modus beenden",Yp&&(Yp.getContainer().style.cursor="crosshair",Yp.on("click",om)),im()):(e.classList.remove("active"),e.title="Zufahrten bearbeiten",rm(),document.querySelectorAll(".delete-threat-btn").forEach(e=>e.remove())))}function im(){const e=document.querySelector(".threat-list");e&&e.querySelectorAll("li").forEach(e=>{var t,n;if(!e.querySelector(".delete-threat-btn")){const i=document.createElement("button");i.className="delete-threat-btn",i.innerHTML='<i class="fas fa-trash"></i>',i.title="Zufahrt entfernen",i.style.cssText="\n                float: right;\n                background: rgba(239, 68, 68, 0.2);\n                border: none;\n                color: #ef4444;\n                padding: 2px 6px;\n                border-radius: 3px;\n                cursor: pointer;\n                margin-left: 8px;\n                font-size: 12px;\n            ";const r=(null==(n=null==(t=e.textContent)?void 0:t.split(" (")[0])?void 0:n.replace(/^[🔴🟠🟡🟢⚪]\s/,""))||"";i.addEventListener("click",t=>{t.stopPropagation(),function(e,t){gg.add(e),og.has(e)&&og.delete(e);const n=rg.get(e);n&&(n.forEach(e=>{Xp&&Xp.hasLayer(e)&&Xp.removeLayer(e)}),rg.delete(e));t.remove(),lm(og.size>0)}(r,e)}),e.appendChild(i)}})}function rm(){Yp&&(Yp.getContainer().style.cursor="",Yp.off("click",om))}function om(e){const{lat:t,lng:n}=e.latlng,i=`Manueller Zufahrtspunkt ${Date.now()}`,r={lat:t,lon:n},o=function(e){if(!ng)return 100;const t=ng.getLatLngs()[0].map(e=>({lat:e.lat,lon:e.lng}));let n=1/0;for(let i=0;i<t.length;i++){const r=am(e,t[i],t[(i+1)%t.length]);n=Math.min(n,r)}return Math.max(n,10)}(r),a={entryPoints:[{lat:t,lon:n,distance:o}],pathSegments:[[r]],totalLength:o,threatLevel:5,roadType:"manual",maxSpeed:50};og.set(i,a),mg.set(i,a),function(e,t){if(!Xp)return;const n=[];t.entryPoints.forEach(t=>{const i=L.circle([t.lat,t.lon],{radius:6,color:"red",fillColor:"#f03",fillOpacity:.8,weight:3}),r=`\n            <b>Manueller Zufahrtspunkt</b><br>\n            <b>Name:</b> ${e}<br>\n            <b>Beschleunigungsweg:</b> ${Math.round(t.distance)}m\n        `;i.bindPopup(r),Xp.addLayer(i),n.push(i)}),rg.set(e,n)}(i,a),sm()}function am(e,t,n){const i=Kg(e,t),r=Kg(e,n),o=Kg(e,{lat:(t.lat+n.lat)/2,lon:(t.lon+n.lon)/2});return Math.min(i,r,o)}function sm(){const e=document.querySelector(".threat-list");if(!e)return;if(e.innerHTML="",0===og.size)return void lm();const t=Zg(document.getElementById("vehicle-select").value),n=Array.from(og.entries()).map(([e,n])=>{if(0===n.entryPoints.length)return null;const i=Math.round(n.totalLength);let r=0;if(t&&i>0){const[,e]=t,o=n.entryPoints.length>0?[{lat:n.entryPoints[0].lat,lng:n.entryPoints[0].lon}]:void 0;r=Math.round(Pm(e,i,o))}return{name:e,data:n,maxSpeed:r,lengthInMeters:i,threatLevel:n.threatLevel||5,roadType:n.roadType||"unbekannt",roadMaxSpeed:n.maxSpeed||50}}).filter(e=>null!==e);if(n.sort((e,t)=>e.threatLevel!==t.threatLevel?t.threatLevel-e.threatLevel:t.maxSpeed-e.maxSpeed),n.forEach(({name:t,maxSpeed:n,lengthInMeters:i,threatLevel:r,roadType:o})=>{const a=document.createElement("li");let s=`${r>=9?"🔴":r>=7?"🟠":r>=5?"🟡":r>=3?"🟢":"⚪"} ${t}`;s+=` (${o}, Level ${r})`,s+=` - ${i} m`,n>0&&(s+=` / ${n} km/h`),a.textContent=s,a.setAttribute("role","button"),a.setAttribute("tabindex","0"),a.addEventListener("click",()=>{e.querySelectorAll("li").forEach(e=>e.classList.remove("active")),a.classList.add("active");const n=rg.get(t);if(n&&n.length>0){const e=L.featureGroup(n);Yp.fitBounds(e.getBounds().pad(.5)),function(e){tm();const t=rg.get(e);if(!t||0===t.length)return;hg=e;const n=[];t.forEach(e=>{const t={weight:e.options.weight||5,opacity:e.options.opacity||.9};n.push(t),e.setStyle&&e.setStyle({weight:2*(t.weight||5),opacity:Math.min((t.opacity||.9)+.2,1)})}),fg.set(e,n)}(t)}}),a.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||a.click()}),e.appendChild(a)}),0===e.children.length){const t=document.createElement("li");t.textContent=Fg("threats.noCrossingWaysBoundary"),e.appendChild(t)}Lm(e),lm(!0),pg&&im()}function lm(e=!1){const t=document.querySelector("#floating-threats h4");t&&(t.textContent=e?`${Fg("threats.title")} (Strecke / Endgeschw.)`:Fg("threats.title"))}const um=async()=>{var e,t,n,i,r;if(!ng)return void alert(Fg("alerts.noPolygon"));if(!ng.getLatLngs||"function"!=typeof ng.getLatLngs)return void alert(Fg("alerts.invalidPolygon"));const o=ng.getLatLngs();if(!o||0===o.length)return void alert(Fg("alerts.emptyPolygon"));const a=document.querySelector(".loading-indicator");if(a){Hg(),a.classList.remove("hidden");try{let l=function(e){if(e.length<4)return!1;let t=0,n=0;for(let o=1;o<e.length-1;o++){const i=e[o-1],r=e[o],a=e[o+1],s=Math.atan2(r.lat-i.lat,r.lon-i.lon),l=Math.atan2(a.lat-r.lat,a.lon-r.lon);let u=Math.abs(l-s);u>Math.PI&&(u=2*Math.PI-u),n+=u,u>Math.PI/4&&t++}const i=n/(e.length-2),r=t/e.length>.3&&i>Math.PI/6;return r},u=function(e,t,n){for(const i of g.names)if(i.test(e))return!0;if(null==t?void 0:t.tags){for(const[e,n]of Object.entries(g.tags)){const i=t.tags[e];if(i&&n.includes(i)){if(("bicycle"===e||"foot"===e)&&t.tags.highway&&!["cycleway","footway","path"].includes(t.tags.highway))continue;return!0}}if(t.tags.leisure||t.tags.sport||t.tags.tourism)return!0;if("no"===t.tags.motor_vehicle||"no"===t.tags.motorcar||"no"===t.tags.vehicle)return!0;if("private"===t.tags.access||"no"===t.tags.access)return!0;if("designated"===t.tags.bicycle&&"cycleway"===t.tags.highway||"designated"===t.tags.foot&&"footway"===t.tags.highway)return!0}return!!l(n)};const c=ng.getBounds();if(!c||!c.isValid())throw new Error("Invalid polygon bounds");const d=.005,h=c.getSouthWest(),f=c.getNorthEast(),p=`${h.lat-d},${h.lng-d},${f.lat+d},${f.lng+d}`,g={names:[/bikepark/i,/bike\s*park/i,/mountainbike/i,/mtb/i,/singletrail/i,/trail/i,/downhill/i,/freeride/i,/pumptrack/i,/pump\s*track/i,/bmx/i,/skatepark/i,/skate\s*park/i,/spielplatz/i,/playground/i,/golfplatz/i,/golf/i,/wanderweg/i,/hiking/i,/spazierweg/i,/serpentin/i,/kurve/i,/schleife/i],tags:{sport:["cycling","mtb","bmx","skateboard","golf","hiking"],leisure:["park","playground","sports_centre","track","golf_course"],tourism:["attraction","viewpoint"],mtb:["yes","designated"],motor_vehicle:["no","private"],access:["private","no","forestry","agricultural"]}},m=`\n            [out:json][timeout:30];\n            (\n              way["highway"~"^(primary|secondary|tertiary|residential|unclassified|service|living_street|track)$"](bbox:${p});\n              way["highway"~"^(motorway|trunk)$"](bbox:${p});\n              way["highway"="cycleway"]["motor_vehicle"!="no"](bbox:${p});\n              way["railway"="tram"](bbox:${p});\n              way["access"~"^(yes|permissive)$"]["highway"](bbox:${p});\n            );\n            (._;>;);\n            out geom;\n        `,y=`https://overpass-api.de/api/interpreter?data=${encodeURIComponent(m)}`;let v;try{const i=await fetch(y);if(!i.ok)throw new Error(Fg("alerts.overpassError",{status:i.status}));v=await i.json();null==(e=null==v?void 0:v.elements)||e.length;const r={};null==(t=null==v?void 0:v.elements)||t.forEach(e=>{var t;"way"===e.type&&(null==(t=e.tags)?void 0:t.highway)&&(r[e.tags.highway]=(r[e.tags.highway]||0)+1)});let o=0;null==(n=null==v?void 0:v.elements)||n.forEach(e=>{var t;if("way"===e.type&&(null==(t=e.tags)?void 0:t.highway)){let t=e.tags.name;t||(t="residential"===e.tags.highway?`Wohnstraße (ID:${e.id})`:"service"===e.tags.highway?`Erschließungsstraße (ID:${e.id})`:`${e.tags.highway} (ID:${e.id})`),u(t,e,[])&&o++}})}catch(s){return alert(Fg("alerts.analysisError")),void a.classList.add("hidden")}const b={},_={};let E=0,k=0,w=0;v.elements.forEach(e=>{if("node"===e.type)b[e.id]={lat:e.lat,lon:e.lon},E++;else if("way"===e.type&&e.tags&&(e.tags.highway||e.tags.railway)){let t=e.tags.name;t||(t="residential"===e.tags.highway?`Wohnstraße (ID:${e.id})`:"service"===e.tags.highway?`Erschließungsstraße (ID:${e.id})`:"unclassified"===e.tags.highway?`Nebenstraße (ID:${e.id})`:"track"===e.tags.highway?`Wirtschaftsweg (ID:${e.id})`:e.tags.ref?e.tags.ref:`${e.tags.highway||"Straße"} (ID:${e.id})`),e.nodes&&Array.isArray(e.nodes)&&e.nodes.length>0?(_[e.id]={name:t,nodes:e.nodes,id:e.id},k++):w++}else"way"===e.type&&w++});const S=new Map;let x=[];try{if(x=Array.isArray(o[0])?Array.isArray(o[0][0])?o[0][0].map(e=>({lat:e.lat||e.lat,lon:e.lng||e.lon})):o[0].map(e=>({lat:e.lat||e.lat,lon:e.lng||e.lon})):o.map(e=>({lat:e.lat||e.lat,lon:e.lng||e.lon})),x.length<3)throw new Error("Invalid polygon: insufficient vertices");if(x=x.filter(e=>"number"==typeof e.lat&&"number"==typeof e.lon&&!isNaN(e.lat)&&!isNaN(e.lon)),x.length<3)throw new Error("Invalid polygon: insufficient valid coordinates")}catch(s){return alert(Fg("alerts.polygonCoordinateError")),void a.classList.add("hidden")}let T=0,I=0;for(const e in _){if(!_.hasOwnProperty(e))continue;const t=_[e];if(!t||!t.nodes)continue;const n=t.nodes.map(e=>({id:e,...b[e]})).filter(e=>e.lat&&e.lon);if(n.length<2)continue;T++;const o=[],a=[];for(let e=0;e<n.length-1;e++){const t=n[e],i=n[e+1],r=Xg(t,x),s=Xg(i,x);if(r!==s){let r=null;for(let e=0;e<x.length;e++){const n=x[e],o=Yg(t,i,n,x[(e+1)%x.length]);if(o){r=o;break}}if(r){let l=0;for(let t=0;t<e;t++)l+=Kg(n[t],n[t+1]);l+=Kg(t,r);let u=0;if(s)for(let t=e+1;t<n.length-1;t++){const e=n[t],i=n[t+1],r=Xg(e,x),o=Xg(i,x);if(!r)break;if(u+=Kg(e,i),!o||u>1e3)break}else{const t=Math.min(.5*l,500),i=em(n,e,_,800);u=Math.max(t,i)}const c=l+u,d={lat:r.lat,lon:r.lon,distance:Math.max(c,10)};a.push(d);const h=[r];let f,p;s?(h.push({lat:t.lat,lon:t.lon}),f=e-1,p=-1):(h.push({lat:i.lat,lon:i.lon}),f=e+1,p=1);for(let e=f;e>=0&&e<n.length;e+=p){const t=n[e];if(h.length>=2){const e=h[h.length-2],n=h[h.length-1],i={lat:t.lat,lon:t.lon};if(Qg(e,n,i)<120)break}h.push({lat:t.lat,lon:t.lon})}o.push(h)}}}if(a.length>0){const e=v.elements.find(e=>e.id===t.id);if(!S.has(t.name)){const n=(null==(i=null==e?void 0:e.tags)?void 0:i.highway)||"unknown";let o=50;const a=v.elements.find(e=>e.id===t.id);if(null==(r=null==a?void 0:a.tags)?void 0:r.maxspeed){const e=a.tags.maxspeed.match(/\d+/);e&&(o=parseInt(e[0]))}const s=5;S.set(t.name,{entryPoints:[],pathSegments:[],totalLength:0,threatLevel:s,roadType:n,maxSpeed:o}),I++}const n=S.get(t.name);n.entryPoints.push(...a),n.pathSegments.push(...o);let s=0;o.forEach(e=>{for(let t=0;t<e.length-1;t++)s+=Kg(e[t],e[t+1])}),n.totalLength+=s}}const C=new Map;for(const[e,t]of S){let n=e,i=t;for(const[r,o]of C)if(Wg(e,r)){n=r,i={entryPoints:[...o.entryPoints,...t.entryPoints],pathSegments:[...o.pathSegments,...t.pathSegments],totalLength:o.totalLength+t.totalLength,threatLevel:Math.max(o.threatLevel,t.threatLevel),roadType:o.threatLevel>=t.threatLevel?o.roadType:t.roadType,maxSpeed:Math.max(o.maxSpeed,t.maxSpeed)};break}C.set(n,i)}if(og=C,og.size>0){if(Xp)try{Xp.clearLayers(),Yp.removeLayer(Xp)}catch{}Xp=L.layerGroup().addTo(Yp);const e=document.getElementById("vehicle-select"),t=Zg((null==e?void 0:e.value)||"alle"),n=t?t[1]:3;og.forEach((e,t)=>{if(0===e.entryPoints.length)return;const i=e.threatLevel||5;let r="red",o="#f03",a=5;i>=9?(r="#8B0000",o="#DC143C",a=10):i>=7?(r="#B22222",o="#FF6347",a=8):i>=5?(r="red",o="#f03",a=6):i>=3?(r="#FF8C00",o="#FFA500",a=5):(r="#DAA520",o="#FFD700",a=4);const s=[];e.entryPoints.forEach(n=>{const l=`\n                        <b>${Fg("threats.popupHeader")}</b><br>\n                        <b>Straße:</b> ${t}<br>\n                        <b>Straßentyp:</b> ${e.roadType||"unbekannt"}<br>\n                        <b>Bedrohungslevel:</b> ${i}/10<br>\n                        <b>Max. Geschwindigkeit:</b> ${e.maxSpeed||"unbekannt"} km/h\n                    `,u=L.circle([n.lat,n.lon],{radius:a,color:r,fillColor:o,fillOpacity:.8,weight:3}).bindPopup(l);Xp.addLayer(u),s.push(u)}),e.pathSegments.forEach(e=>{if(e.length>1){const t=e.map(e=>[e.lat,e.lon]);let i=0;for(let n=0;n<e.length-1;n++)i+=Kg(e[n],e[n+1]);const r=Jg(n,i);let o="#e74c3c";r<=30?o="#39b54a":r<=50&&(o="#f1c40f");const a=L.polyline(t,{color:o,weight:5,opacity:.9});Xp.addLayer(a),s.push(a)}}),s.length>0&&rg.set(t,s)}),sm();const i=document.getElementById("floating-threats");i&&(i.classList.remove("view-hidden"),i.classList.remove("minimized"));const r=document.querySelector(".product-recommendations-container");r&&(r.classList.remove("hidden"),await hm())}else{const e=document.querySelector(".threat-list"),t=document.createElement("li");t.textContent=Fg("threats.noCrossingWaysArea"),e.appendChild(t);const n=document.getElementById("floating-threats");n&&(n.classList.remove("view-hidden"),n.classList.remove("minimized"))}}catch(s){alert(Fg("alerts.analysisError"));const e=document.querySelector(".threat-list"),t=document.createElement("li");t.textContent=Fg("threats.analysisFailed"),e.appendChild(t)}finally{a.classList.add("hidden"),window.entryDetectionManager&&sg&&(await window.entryDetectionManager.detectEntries(ng,sg),pm()),await Ag()}}};async function cm(e){try{const t="undefined"!=typeof window&&window.location.hostname.endsWith("github.io"),n="AIzaSyAu89J9B0b57XIao133a19Wd64T6oiCA9A";if(!n||t)return function(e){var t,n,i,r,o,a,s,l,u,c;try{const d=window.planningState||{},h=(null==(t=d.schutzgüter)?void 0:t.join(", "))||e.assetToProtect||Fg("report.undefinedAsset"),f=(null==(i=null==(n=d.risiko)?void 0:n.bedrohung)?void 0:i.art)||Fg("report.undefinedValue"),p=(null==(o=null==(r=d.risiko)?void 0:r.dynamik)?void 0:o.v_kmh)||e.estimatedSpeedKmH||Fg("report.undefinedValue"),g=(null==(s=null==(a=d.risiko)?void 0:a.site)?void 0:s.untergrund)||Fg("report.undefinedValue"),m=(null==(l=d.restrisiko)?void 0:l.klasse)||e.securityLevel||Fg("report.undefinedValue"),y=(null==(c=null==(u=d.risiko)?void 0:u.site)?void 0:c.anfahrkorridore)&&d.risiko.site.anfahrkorridore.length>0?Fg("report.identifiedCorridors",{count:d.risiko.site.anfahrkorridore.length}):Fg("report.noChatGeometry");return"de"===bg?{purpose:`Schutzziel: Sicherung von ${h} am Standort ${e.locationName}. Der Assistent lieferte ergänzende Eingaben (Normbezug DIN SPEC 91414‑2 / ISO 22343‑2).`,threatAnalysis:`Bedrohungsannahme: ${f}. Aus der Karten-/Chat-Analyse ergibt sich eine Zufahrtsgeschwindigkeit von ca. ${p} km/h. Anfahrkorridore laut Chat: ${y}.`,vulnerabilities:`Untergrund/Fundamente: ${g}. Restrisiko (Chat/Slider): ${m}. Kritische Zufahrtswinkel bzw. Engstellen sind bei der Maßnahmendefinition zu berücksichtigen.`,hvmMeasures:`Empfohlene Maßnahmen orientieren sich an der erwarteten Geschwindigkeit und den Schutzzielen. Für ${h} mit Geschwindigkeit ~${p} km/h sind FSB mit entsprechendem Leistungsniveau, geprüften Fundamenten und Berücksichtigung des Anprallwinkels anzusetzen.`,siteConsiderations:`Betriebliche Rahmenbedingungen (z. B. Feuerwehrzufahrt, Fluchtwege) aus Chat sollten in die Detailplanung einfließen. Untergrund: ${g}.`,operationalImpact:"Maßnahmen sind so auszulegen, dass Betrieb, Rettungswege und Gestaltung berücksichtigt sind; temporäre Anpassungen (Events) werden unterstützt."}:{purpose:`Protection objective: Securing ${h} at location ${e.locationName}. The assistant provided additional inputs (standard reference DIN SPEC 91414‑2 / ISO 22343‑2).`,threatAnalysis:`Threat assumption: ${f}. From the map/chat analysis, an access speed of approximately ${p} km/h results. Access corridors according to chat: ${y}.`,vulnerabilities:`Ground/foundations: ${g}. Residual risk (Chat/Slider): ${m}. Critical impact angles or bottlenecks must be considered in measure definition.`,hvmMeasures:`Recommended measures are oriented to expected speed and protection objectives. For ${h} with speed ~${p} km/h, FSB with corresponding performance level, tested foundations and consideration of impact angle should be applied.`,siteConsiderations:`Operational framework conditions (e.g., fire brigade access, escape routes) from chat should flow into detailed planning. Ground: ${g}.`,operationalImpact:"Measures are designed so that operations, rescue routes and design are considered; temporary adaptations (events) are supported."}}catch{return"de"===bg?{purpose:`Schutzziel und Rahmenbedingungen für ${e.locationName}.`,threatAnalysis:"Zusammenfassung der Gefahren basierend auf Karten-/Chat-Eingaben.",vulnerabilities:"Allgemeine Schwachstellen am Standort.",hvmMeasures:"Empfohlene HVM‑Maßnahmen gemäß Annahmen.",siteConsiderations:"Standortspezifische Hinweise.",operationalImpact:"Betriebliche Auswirkungen und Gestaltung."}:{purpose:`Protection objective and framework conditions for ${e.locationName}.`,threatAnalysis:"Summary of hazards based on map/chat inputs.",vulnerabilities:"General vulnerabilities at the site.",hvmMeasures:"Recommended HVM measures according to assumptions.",siteConsiderations:"Site-specific notes.",operationalImpact:"Operational impacts and design."}}}(e);const i=new hi({apiKey:n}),r=Array.from(og.values()),o=r.length>0?r.reduce((e,t)=>e+(t.threatLevel||5),0)/r.length:5,a=function(){const e=window.planningState||{},t=e.schutzgüter||e.schutzgueter||"",n=Array.from(og.entries());let i="unbekannt";if(n.length>0){const e=n.map(([,e])=>e.roadType).filter(Boolean),r=n.some(([,e])=>(e.maxSpeed||0)>70),o=e.includes("residential"),a=e.includes("primary")||e.includes("motorway");i=r&&a?"industriell/verkehrsreich":o&&!a?"wohngebiet":t.toLowerCase().includes("innenstadt")||t.toLowerCase().includes("event")?"innenstadt/öffentlich":"gemischt"}return i}(),s=function(e){const{assetToProtect:t,securityLevel:n,protectionGrade:i,locationContext:r,threatLevel:o}=e,a=t.toLowerCase(),s=r.toLowerCase();let l=[];a.includes("atomkraftwerk")||a.includes("nuclear")||a.includes("kraftwerk")||a.includes("power plant")?l=["Tor","Schranke","Zaun","Poller"]:a.includes("industrie")||a.includes("industrial")||a.includes("fabrik")||a.includes("factory")||a.includes("werk")||a.includes("plant")?l=["Tor","Schranke","Zaun"]:a.includes("regierung")||a.includes("government")||a.includes("militär")||a.includes("military")||a.includes("ministerium")||a.includes("embassy")?l=["Tor","Zaun","Poller","Durchfahrtsperre"]:a.includes("krankenhaus")||a.includes("hospital")||a.includes("flughafen")||a.includes("airport")||a.includes("bahnhof")||a.includes("station")?l=["Poller","Durchfahrtsperre","Zaun"]:a.includes("büro")||a.includes("office")||a.includes("zentrum")||a.includes("center")||a.includes("gebäude")||a.includes("building")||a.includes("event")||a.includes("veranstaltung")||a.includes("festival")||a.includes("markt")||a.includes("market")||a.includes("platz")||a.includes("square")||a.includes("innenstadt")?l=["Poller","Durchfahrtsperre"]:(a.includes("schule")||a.includes("school")||a.includes("universität")||a.includes("university")||a.includes("campus"))&&(l=["Poller","Durchfahrtsperre","Zaun"]);(s.includes("innenstadt")||s.includes("city center")||s.includes("downtown")||s.includes("pedestrian"))&&(l=l.filter(e=>"Zaun"!==e&&"Tor"!==e));"high"===n||o>=8?(l.includes("Tor")||l.unshift("Tor"),l.includes("Zaun")||l.push("Zaun")):("low"===n||o<=4)&&(l=l.filter(e=>"Tor"!==e&&"Schranke"!==e));"permanent"===i?l.includes("Zaun")||l.push("Zaun"):"temporary"===i&&(l=l.filter(e=>"Zaun"!==e&&"Tor"!==e),l.includes("Poller")||l.unshift("Poller"));0===l.length&&(l=["Poller","Durchfahrtsperre"]);return[...new Set(l)]}({assetToProtect:e.assetToProtect||"",securityLevel:e.securityLevel||"medium",protectionGrade:e.protectionGrade||"permanent",locationContext:a,threatLevel:o}),l={...e,threatAnalysis:mm(),highestThreatRoads:ym(),threatLevelDistribution:vm(),locationContext:a,recommendedProductTypes:s.join(", "),averageThreatLevel:o.toFixed(1),productTypeJustification:gm(s,e.assetToProtect||"",a,o)},u=Fg("ai.reportPrompt",l)+`\n\nENHANCED THREAT ANALYSIS:\n        ${l.threatAnalysis}\n        \n        HIGHEST THREAT ROADS:\n        ${l.highestThreatRoads}\n        \n        THREAT LEVEL DISTRIBUTION:\n        ${l.threatLevelDistribution}\n        \n        RECOMMENDED PRODUCT TYPES:\n        ${l.recommendedProductTypes}\n        \n        PRODUCT TYPE JUSTIFICATION:\n        ${l.productTypeJustification}\n        \n        LOCATION CONTEXT: ${l.locationContext}\n        AVERAGE THREAT LEVEL: ${l.averageThreatLevel}/10\n        \n        IMPORTANT: Generate the report in ${"de"===bg?"German":"English"} language only. All text must be in ${"de"===bg?"German":"English"}. \n        Focus on the threat level analysis and provide specific justifications for each threat level based on road type, traffic speed, and vehicle access capabilities.\n        Include the recommended product types and explain why they are suitable for this specific context and threat level.`,c=((await i.models.generateContent({model:"gemini-2.5-flash",contents:u,config:{responseMimeType:"application/json",responseSchema:{type:ne.OBJECT,properties:{purpose:{type:ne.STRING},threatAnalysis:{type:ne.STRING},vulnerabilities:{type:ne.STRING},hvmMeasures:{type:ne.STRING},siteConsiderations:{type:ne.STRING},operationalImpact:{type:ne.STRING}},required:["purpose","threatAnalysis","vulnerabilities","hvmMeasures","siteConsiderations","operationalImpact"]}}})).text||"").trim();return function(e){const t="de"===bg,n=e.purpose||e.threatAnalysis||"",i=["the","and","for","of","with","at","on","in","to","from","by","as","is","are"],r=["der","die","das","und","für","von","mit","bei","auf","in","an","zu","zur","zum"].filter(e=>n.toLowerCase().includes(e)).length,o=i.filter(e=>n.toLowerCase().includes(e)).length,a=r>o;if(!(t&&!a||!t&&a))return e;const s={};for(const[l,u]of Object.entries(e))s[l]="string"==typeof u?dm(u,t):u;return s}(JSON.parse(c))}catch(t){return alert(Fg("alerts.geminiError")),null}}function dm(e,t){return t?e.replace(/\bThis report\b/gi,"Dieser Bericht").replace(/\baims to\b/gi,"zielt darauf ab").replace(/\bidentify\b/gi,"zu identifizieren").replace(/\bassess\b/gi,"zu bewerten").replace(/\bmitigate\b/gi,"zu mindern").replace(/\bpotential\b/gi,"potenzielle").replace(/\brisks\b/gi,"Risiken").replace(/\bassets\b/gi,"Schutzgüter").replace(/\bensuring\b/gi,"um sicherzustellen").replace(/\bbusiness continuity\b/gi,"Geschäftskontinuität").replace(/\bstrategic\b/gi,"strategische").replace(/\bsecurity\b/gi,"Sicherheits").replace(/\binvestments\b/gi,"Investitionen").replace(/\bThe primary threat\b/gi,"Die primäre Bedrohung").replace(/\bis\b/gi,"ist").replace(/\buse of vehicles\b/gi,"die Nutzung von Fahrzeugen").replace(/\bvehicle as weapon\b/gi,"Fahrzeug als Waffe").replace(/\bram attack\b/gi,"Rammangriff").replace(/\bvehicle impact\b/gi,"Fahrzeuganprall").replace(/\bcrash barrier\b/gi,"Anprallbarriere").replace(/\bsecurity barrier\b/gi,"Sicherheitsbarriere").replace(/\bpenetration depth\b/gi,"Eindringtiefe").replace(/\bdebris scatter\b/gi,"Trümmerstreuung").replace(/\bas\b/gi,"als").replace(/\bweapon\b/gi,"Waffe").replace(/\bPotential\b/gi,"Potenzielle").replace(/\badversaries\b/gi,"Gegner").replace(/\binclude\b/gi,"umfassen").replace(/\bstate-sponsored\b/gi,"staatsgestützte").replace(/\bterrorist\b/gi,"terroristische").replace(/\bvehicle threats\b/gi,"Fahrzeugbedrohungen").replace(/\bvehicle attacks\b/gi,"Fahrzeugangriffe").replace(/\bram attacks\b/gi,"Rammangriffe").replace(/\battacks\b/gi,"Angriffe").replace(/\bGiven\b/gi,"Angesichts").replace(/\bglobal\b/gi,"globaler").replace(/\btrends\b/gi,"Trends").replace(/\band\b/gi,"und").replace(/\bthe\b/gi,"der").replace(/\bof\b/gi,"von").replace(/\bto\b/gi,"zu").replace(/\bin\b/gi,"in").replace(/\bon\b/gi,"auf").replace(/\bat\b/gi,"bei").replace(/\bwith\b/gi,"mit").replace(/\bfor\b/gi,"für").replace(/\bfrom\b/gi,"von").replace(/\bby\b/gi,"durch").replace(/\bas\b/gi,"als").replace(/\bis\b/gi,"ist").replace(/\bare\b/gi,"sind").replace(/\bwas\b/gi,"war").replace(/\bwere\b/gi,"waren").replace(/\bwill\b/gi,"wird").replace(/\bwould\b/gi,"würde").replace(/\bcould\b/gi,"könnte").replace(/\bshould\b/gi,"sollte").replace(/\bmay\b/gi,"kann").replace(/\bmight\b/gi,"könnte").replace(/\bcan\b/gi,"kann"):e.replace(/\bDieser Bericht\b/gi,"This report").replace(/\bzielt darauf ab\b/gi,"aims to").replace(/\bzu identifizieren\b/gi,"identify").replace(/\bzu bewerten\b/gi,"assess").replace(/\bzu mindern\b/gi,"mitigate").replace(/\bpotenzielle\b/gi,"potential").replace(/\bRisiken\b/gi,"risks").replace(/\bSchutzgüter\b/gi,"assets").replace(/\bum sicherzustellen\b/gi,"ensuring").replace(/\bGeschäftskontinuität\b/gi,"business continuity").replace(/\bstrategische\b/gi,"strategic").replace(/\bSicherheits\b/gi,"security").replace(/\bInvestitionen\b/gi,"investments").replace(/\bDie primäre Bedrohung\b/gi,"The primary threat").replace(/\bist\b/gi,"is").replace(/\bdie Nutzung von Fahrzeugen\b/gi,"use of vehicles").replace(/\bals\b/gi,"as").replace(/\bWaffe\b/gi,"weapon").replace(/\bPotenzielle\b/gi,"Potential").replace(/\bGegner\b/gi,"adversaries").replace(/\bumfassen\b/gi,"include").replace(/\bstaatsgestützte\b/gi,"state-sponsored").replace(/\bterroristische\b/gi,"terrorist").replace(/\bFahrzeugbedrohungen\b/gi,"vehicle threats").replace(/\bFahrzeugangriffe\b/gi,"vehicle attacks").replace(/\bRammangriffe\b/gi,"ram attacks").replace(/\bAngriffe\b/gi,"attacks").replace(/\bAngesichts\b/gi,"Given").replace(/\bglobaler\b/gi,"global").replace(/\bTrends\b/gi,"trends").replace(/\bund\b/gi,"and").replace(/\bder\b/gi,"the").replace(/\bvon\b/gi,"of").replace(/\bzu\b/gi,"to").replace(/\bin\b/gi,"in").replace(/\bauf\b/gi,"on").replace(/\bbei\b/gi,"at").replace(/\bmit\b/gi,"with").replace(/\bfür\b/gi,"for").replace(/\bdurch\b/gi,"by").replace(/\bist\b/gi,"is").replace(/\bsind\b/gi,"are").replace(/\bwar\b/gi,"was").replace(/\bwaren\b/gi,"were").replace(/\bwird\b/gi,"will").replace(/\bwürde\b/gi,"would").replace(/\bkönnte\b/gi,"could").replace(/\bsollte\b/gi,"should").replace(/\bkann\b/gi,"may")}async function hm(){let e=window.productDatabase||[];if(0===e.length)try{const t=await fetch("/Barricadix_MWP/product-database.json");if(!t.ok)throw new Error("Product database fetch failed");e=await t.json(),window.productDatabase=e}catch(t){return}await async function(){const e=document.getElementById("map");if(!e||!Yp)return;e.classList.remove("view-hidden"),setTimeout(()=>{Yp&&Yp.invalidateSize()},100),og.size>0&&await async function(){bm(),rg.forEach((e,n)=>{const i=og.get(n);i&&e&&e.forEach((e,r)=>{const o=function(e,t){if(!e.entryPoints||0===e.entryPoints.length||t>=e.entryPoints.length)return 0;const n=document.getElementById("vehicle-select"),i=Zg(n.value);if(!i)return 0;const r=e.entryPoints[t],o=r.distance||e.totalLength;const a=Jg(i[1],o);return Math.round(a)}(i,r),a=function(e){var t,n;const i=window.productDatabase||[];i.map(e=>{var t;let n=0;return(null==(t=e.technical_data)?void 0:t.pr_speed_kph)?n=e.technical_data.pr_speed_kph:e.speed&&(n=parseFloat(e.speed)),{name:e.product_name,speed:n}}).filter(e=>e.speed>0).sort((e,t)=>e.speed-t.speed);if(!i||0===i.length)return[];function r(e){if(!e||"string"!=typeof e)return 0;const t=e.split("/");if(t.length>=3){const e=t[2],n=parseFloat(e);if(!isNaN(n))return n}return 0}const o=i.filter(t=>{let n=0;t.technical_data&&t.technical_data.pr_speed_kph?n=parseFloat(t.technical_data.pr_speed_kph):t.speed?n=parseFloat(t.speed):t.technical_data&&t.technical_data.performance_rating?n=r(t.technical_data.performance_rating):t.performance_rating&&(n=r(t.performance_rating));const i=!isNaN(n)&&n>0&&n>=e;return i});const a=i.filter(t=>{var n;let i=0;return(null==(n=t.technical_data)?void 0:n.pr_speed_kph)?i=t.technical_data.pr_speed_kph:t.speed&&(i=parseFloat(t.speed)),i>0&&i<e});a.length;const s=o.sort((e,t)=>{function n(e){var t,n;return(null==(t=e.technical_data)?void 0:t.pr_speed_kph)?parseFloat(e.technical_data.pr_speed_kph):e.speed?parseFloat(e.speed):r((null==(n=e.technical_data)?void 0:n.performance_rating)||e.performance_rating||"0")}const i=n(e);return n(t)-i});if(s.length>0){const e=s[0];let i=0;i=(null==(t=e.technical_data)?void 0:t.pr_speed_kph)?parseFloat(e.technical_data.pr_speed_kph):e.speed?parseFloat(e.speed):r((null==(n=e.technical_data)?void 0:n.performance_rating)||e.performance_rating||"0")}return s}(o);if(a.length>0){const i=function(e,t,n,i){if(1===e.length)return e[0];function r(e){var t,n;if(null==(t=e.technical_data)?void 0:t.pr_speed_kph)return parseFloat(e.technical_data.pr_speed_kph);if(e.speed)return parseFloat(e.speed);if(null==(n=e.technical_data)?void 0:n.performance_rating){const t=e.technical_data.performance_rating.split("/");if(t.length>=3)return parseFloat(t[2])||0}return 0}let o=e[0],a=1/0;for(const s of e){const e=r(s)-t;e>=0&&e<a&&(a=e,o=s)}if(a<20){const s=e.filter(e=>{const n=r(e)-t;return n>=0&&n<=a+15});if(s.length>1){const e=n.split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0)+1e3*(i||0);o=s[Math.abs(e)%s.length]}}return o}(a,o,n,r);!function(e,n,i,r){var o;let a=null,s=!1,l=null;const u=null==(o=e.getElement)?void 0:o.call(e);u&&u.classList.add("has-tooltip");const c=()=>{var e;const t=Ig(r);return`\n            <div class="product-tooltip">\n                <div class="tooltip-header">\n                    <h4>${n}</h4>\n                    <span class="tooltip-close">×</span>\n                </div>\n                <div class="tooltip-content">\n                    <div class="product-image">\n                        <img src="${t}" alt="${r.product_name||r.type||"Produkt"}" \n                             onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">\n                        <div class="product-image-placeholder" style="display: none;">\n                            <i class="fas fa-image"></i>\n                        </div>\n                    </div>\n                    <div class="product-info">\n                        <h5>${r.product_name||r.type||"Unbekanntes Produkt"}</h5>\n                        <p><strong>Hersteller:</strong> ${r.manufacturer}</p>\n                        <p><strong>Getestete Geschw.:</strong> ${r.speed||r.pr_speed_kph||(null==(e=r.technical_data)?void 0:e.pr_speed_kph)||"N/A"} km/h</p>\n                        <p><strong>Erforderlich:</strong> ${i} km/h</p>\n                        <p><strong>Fahrzeugtyp:</strong> ${r.pr_veh||"N/A"}</p>\n                        <p><strong>Standard:</strong> ${r.standard}</p>\n                    </div>\n                </div>\n                <div class="tooltip-pin-indicator ${s?"pinned":""}">\n                    <i class="fas fa-thumbtack"></i> ${s?"Angepinnt":"Klicken zum Anpinnen"}\n                </div>\n            </div>\n        `};e.on("mouseover",e=>{if(s)return;a=document.createElement("div"),a.className="leaflet-tooltip-pane",a.innerHTML=c(),document.body.appendChild(a);const t=e=>{a&&(a.style.left=`${e.clientX+10}px`,a.style.top=e.clientY-10+"px")};t(e.originalEvent),document.addEventListener("mousemove",t),a.cleanup=()=>{document.removeEventListener("mousemove",t)}}),e.on("mouseout",()=>{s||a&&(a.cleanup&&a.cleanup(),document.body.removeChild(a),a=null)}),e.on("click",n=>{if(n.originalEvent.stopPropagation(),s){if(s=!1,l&&(Yp.closePopup(l),l=null),a){const e=vg.findIndex(e=>e.element===a);-1!==e&&vg.splice(e,1),a.cleanup&&a.cleanup(),document.body.removeChild(a),a=null}}else{s=!0,a&&!a.classList.contains("pinned-tooltip")&&(a.cleanup&&a.cleanup(),document.body.removeChild(a),a=null);const n=c(),i=e.getLatLng?e.getLatLng():e._latlng||e.latlng||{lat:0,lng:0};if(!i||"number"!=typeof i.lat||"number"!=typeof i.lng)return;try{const e=Yp.getCenter(),r=Yp.getZoom();l=L.popup({closeButton:!0,autoClose:!1,closeOnClick:!1,className:"product-popup",offset:[10,-10]}).setLatLng(i).setContent(n),l.addTo(Yp),setTimeout(()=>{Yp&&e&&"number"==typeof r&&Yp.setView(e,r,{animate:!1})},10);const o=l._animateZoom;l._animateZoom=function(e){try{if(this._latlng&&this._latlng.lat&&this._latlng.lng)return o.call(this,e)}catch(t){}}}catch(t){return}l.on("remove",()=>{s=!1,l=null})}})}(e,n,o,i)}else!function(e,n,i){var r;const o=()=>`\n            <div class="product-tooltip">\n                <div class="tooltip-header">\n                    <h4>${n}</h4>\n                    <span class="tooltip-close">×</span>\n                </div>\n                <div class="tooltip-content">\n                    <div class="no-product-info">\n                        <div class="warning-icon">\n                            <i class="fas fa-exclamation-triangle" style="color: #ff9900; font-size: 2rem; margin-bottom: 12px;"></i>\n                        </div>\n                        <h5>${Fg("products.contactAdvice")}</h5>\n                        <p><strong>${Fg("products.requiredSpeed")}:</strong> ${i} km/h</p>\n                        <div class="contact-message">\n                            <p style="text-align: center; font-weight: 500; line-height: 1.5; margin: 16px 0;">\n                                ${Fg("products.noSuitableProduct")}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div class="tooltip-pin-indicator">\n                    <i class="fas fa-info-circle"></i> ${s?Fg("products.pinned")||"Angepinnt":Fg("products.clickToPin")||"Klicken zum Anpinnen"}\n                </div>\n            </div>\n        `;let a=null,s=!1;const l=null==(r=e.getElement)?void 0:r.call(e);l&&l.classList.add("has-tooltip","no-product-marker");e.on("click",n=>{if(n.originalEvent.stopPropagation(),s)s=!1,a&&(Yp.closePopup(a),a=null);else{s=!0;const n=o(),i=e.getLatLng?e.getLatLng():e._latlng||e.latlng||{lat:0,lng:0};if(!i||"number"!=typeof i.lat||"number"!=typeof i.lng)return;try{const e=Yp.getCenter(),r=Yp.getZoom();a=L.popup({closeButton:!0,autoClose:!1,closeOnClick:!1,className:"product-popup no-product-popup",offset:[10,-10]}).setLatLng(i).setContent(n),a.addTo(Yp),setTimeout(()=>{Yp&&e&&"number"==typeof r&&Yp.setView(e,r,{animate:!1})},10);const o=a._animateZoom;a._animateZoom=function(e){try{if(this._latlng&&this._latlng.lat&&this._latlng.lng)return o.call(this,e)}catch(t){}}}catch(t){return}a.on("remove",()=>{s=!1,a=null})}})}(e,n,o)})})}()}()}function fm(e){if(!e||!e.tags)return!1;const t=e.tags,n=["access=private","access=permissive","access=delivery","access=emergency","access=customers","access=residents","service=driveway","service=parking_aisle","service=alley"];if(t.highway&&["residential","service","unclassified","track","path","footway","cycleway","pedestrian"].includes(t.highway))return!0;for(const i of n){const[e,n]=i.split("=");if(t[e]===n)return!0}return"residential"===t.landuse||"commercial"===t.landuse}function pm(){const e=window.entryDetectionManager;if(!e||!e.candidates||0===e.candidates.length)return;Xp||(Xp=L.layerGroup().addTo(Yp));const t=window.currentOsmData,n=new Map;t&&t.ways&&t.ways.forEach(e=>{n.set(e.id,e)}),e.candidates.forEach((e,t)=>{let i,r,o=!1;if(e.wayIds&&e.wayIds.length>0)for(const u of e.wayIds){const e=n.get(u);if(e&&fm(e)){o=!0;break}}o?(i="#FFD700",r="#FFD700"):(i="#DC143C",r="#FF6347");const a=L.circle([e.intersectionPoint[1],e.intersectionPoint[0]],{radius:8,color:i,fillColor:r,fillOpacity:.8,weight:3});a.on("contextmenu",t=>{t.originalEvent.preventDefault(),"nav-threat-analysis"===Jp&&Gg(a,e)}),a.on("click",e=>{});const s=`\n            <div style="min-width: 200px;">\n                <b>🚪 Zufahrtspunkt ${t+1}</b><br>\n                <b>Typ:</b> ${o?"Erschließungsstraße":"Hauptzufahrt"}<br>\n                <b>Confidence:</b> ${Math.round(100*e.confidence)}%<br>\n                <b>Distanz:</b> ${Math.round(e.distanceMeters)}m<br>\n                <b>Geradheit:</b> ${Math.round(100*e.straightness)}%<br>\n                <b>Kontinuität:</b> ${Math.round(100*e.continuity)}%<br>\n                <b>Ways:</b> ${e.wayIds.length}\n            </div>\n        `;a.bindPopup(s),null==Xp||Xp.addLayer(a),rg.has("entry-detection")||rg.set("entry-detection",[]);const l=rg.get("entry-detection");l&&l.push(a)})}function gm(e,t,n,i){let r=`Basierend auf dem zu schützenden Objekt "${t}", dem Standortkontext "${n}" und dem durchschnittlichen Bedrohungslevel von ${i.toFixed(1)}/10 werden folgende Produkttypen empfohlen:\n\n`;return e.forEach(e=>{switch(e){case"Tor":r+="• Tor: Geeignet für kontrollierte Zufahrten mit hohem Sicherheitsbedarf. Ermöglicht selektiven Zugang für autorisierte Fahrzeuge.\n";break;case"Schranke":r+="• Schranke: Ideal für industrielle Bereiche mit häufigem, aber kontrolliertem Fahrzeugverkehr. Bietet schnelle Durchfahrtskontrolle.\n";break;case"Zaun":r+="• Zaun: Permanente Perimetersicherung für Bereiche mit erhöhtem Sicherheitsbedarf. Verhindert unbefugtes Eindringen.\n";break;case"Poller":r+="• Poller: Diskrete Lösung für öffentliche Bereiche. Ermöglicht Fußgängerverkehr bei gleichzeitigem Fahrzeugschutz.\n";break;case"Durchfahrtsperre":r+="• Durchfahrtsperre: Flexible temporäre Lösung für Events oder veränderliche Sicherheitsanforderungen.\n"}}),r}function mm(){const e=Array.from(og.entries());if(0===e.length)return"Keine Bedrohungen erkannt.";const t=e.filter(([,e])=>(e.threatLevel||5)>=9),n=e.filter(([,e])=>(e.threatLevel||5)>=7&&(e.threatLevel||5)<9),i=e.filter(([,e])=>(e.threatLevel||5)>=5&&(e.threatLevel||5)<7),r=e.filter(([,e])=>(e.threatLevel||5)<5);let o=`Gesamtanzahl identifizierter Zufahrten: ${e.length}\n`;return o+=`Kritische Bedrohungen (Level 9-10): ${t.length}\n`,o+=`Hohe Bedrohungen (Level 7-8): ${n.length}\n`,o+=`Mittlere Bedrohungen (Level 5-6): ${i.length}\n`,o+=`Niedrige Bedrohungen (Level 1-4): ${r.length}\n`,o}function ym(){const e=Array.from(og.entries()).filter(([,e])=>e.threatLevel&&e.threatLevel>=7).sort((e,t)=>(t[1].threatLevel||0)-(e[1].threatLevel||0)).slice(0,5);return 0===e.length?"Keine Hochrisiko-Zufahrten identifiziert.":e.map(([e,t])=>`${e}: Level ${t.threatLevel}/10 (${t.roadType}, ${t.maxSpeed} km/h, ${Math.round(t.totalLength)}m Beschleunigungsstrecke)`).join("\n")}function vm(){const e=Array.from(og.values());if(0===e.length)return"Keine Daten verfügbar.";const t={},n={unter_30:0,"30_50":0,"50_80":0,"über_80":0};e.forEach(e=>{const i=e.roadType||"unbekannt";t[i]=(t[i]||0)+1;const r=e.maxSpeed||50;r<30?n.unter_30++:r<=50?n["30_50"]++:r<=80?n["50_80"]++:n.über_80++});let i="Straßentyp-Verteilung:\n";return Object.entries(t).forEach(([e,t])=>{i+=`- ${e}: ${t}\n`}),i+="\nGeschwindigkeits-Verteilung:\n",i+=`- Unter 30 km/h: ${n.unter_30}\n`,i+=`- 30-50 km/h: ${n["30_50"]}\n`,i+=`- 50-80 km/h: ${n["50_80"]}\n`,i+=`- Über 80 km/h: ${n.über_80}\n`,i}function bm(){Yp&&Yp.eachLayer(e=>{e instanceof L.Popup&&("product-popup"===e.options.className||"product-popup no-product-popup"===e.options.className)&&Yp.closePopup(e)});document.querySelectorAll(".pinned-tooltip").forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)});document.querySelectorAll(".leaflet-tooltip-pane:not(.pinned-tooltip)").forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),vg=[]}function _m(){Yp&&Yp.latLngToContainerPoint&&vg.forEach((e,t)=>{try{const{element:t,marker:n,latLng:i}=e;if(!i||"number"!=typeof i.lat||"number"!=typeof i.lng)return;const r=Yp.latLngToContainerPoint(i),o=Yp.getContainer().getBoundingClientRect(),a=`${o.left+r.x+10}px`,s=o.top+r.y-10+"px";t.style.left=a,t.style.top=s}catch(n){}})}function Em(e){return Fg(e<33?"sidebar.low":e<66?"products.resistanceMedium":"sidebar.high")}async function km(){var e;const t=document.getElementById("report-iframe"),n=document.querySelector(".report-loading-overlay"),i=document.getElementById("download-report-btn"),r=document.getElementById("map"),o=document.getElementById("report-preview-area");n.classList.remove("view-hidden"),i.disabled=!0;let a=null;try{if(ng){if(!ng.getLatLngs||"function"!=typeof ng.getLatLngs)throw new Error("Invalid polygon data for map capture");const e=ng.getLatLngs();if(!e||0===e.length)throw new Error("Polygon has no valid coordinates");o.classList.add("view-hidden"),r.classList.remove("view-hidden"),await new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("Map rendering timeout"))},1e4),i=()=>{clearTimeout(n);const t="de"===bg?1e3:500;requestAnimationFrame(()=>setTimeout(e,t))};let r;Yp.invalidateSize(),Wp.once("load",()=>{clearTimeout(r),i()}),Yp.once("moveend",()=>{r=window.setTimeout(i,1e3)});try{const e=ng.getBounds();e&&e.isValid()?Yp.fitBounds(e,{animate:!1,padding:[20,20]}):Yp.setView(Yp.getCenter(),Yp.getZoom())}catch(o){}}),await new Promise(e=>setTimeout(e,500)),a=await html2canvas(r,{useCORS:!0,logging:!0,allowTaint:!0,backgroundColor:"#ffffff",scale:2,width:r.offsetWidth,height:r.offsetHeight,onclone:e=>{e.querySelectorAll(".leaflet-popup-pane > *").forEach(e=>{e.style.display="none"});const t=e.getElementById("map");t&&(t.style.visibility="visible",t.style.opacity="1",t.style.display="block");const n=e.querySelector(".leaflet-container");n&&(n.style.visibility="visible",n.style.opacity="1")}})}a&&a.width>0&&a.height>0||(a=null);const n=ng?await async function(e){const t=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e.lat}&lon=${e.lng}&zoom=18&addressdetails=1`;try{const e=await fetch(t,{headers:{"Accept-Language":bg}});return e.ok&&(await e.json()).display_name||"Unknown Location"}catch(n){return"Could not determine location"}}(ng.getBounds().getCenter()):Fg("report.undefinedLocation"),l=window.planningState||{},u=l.schutzgüter||l.schutzgueter||Fg("report.undefinedAsset");let c=Fg("report.noThreatAnalysis");if(og.size>0){const e=document.getElementById("vehicle-select"),t=Zg(e.value),n=Array.from(og.entries()).map(([e,n])=>{const i=Math.round(n.totalLength);let r=0;if(t&&i>0){const[,e]=t;r=Math.round(Pm(e,i))}return{name:e,lengthInMeters:i,maxSpeed:r}});n.sort((e,t)=>t.maxSpeed-e.maxSpeed),c=`\n                <table style="width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 12px;">\n                    <thead>\n                        <tr style="background-color: #f0f0f0; font-weight: bold;">\n                            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">${Fg("report.threatsTable.street")}</th>\n                            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">${Fg("report.threatsTable.distance")}</th>\n                            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">${Fg("report.threatsTable.maxSpeed")}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${n.map(e=>`\n                            <tr>\n                                <td style="border: 1px solid #ddd; padding: 8px;">${e.name}</td>\n                                <td style="border: 1px solid #ddd; padding: 8px;">${e.lengthInMeters} m</td>\n                                <td style="border: 1px solid #ddd; padding: 8px;">${e.maxSpeed} km/h</td>\n                            </tr>\n                        `).join("")}\n                    </tbody>\n                </table>\n            `}const d=document.getElementById("security-risk-slider"),h=document.getElementById("product-class-slider"),f=document.getElementById("protection-period-select"),p=document.getElementById("protection-product-select"),g=function(){const e=document.getElementById("vehicle-select"),t=parseInt(e.value,10);if(isNaN(t))return null;let n=null,i=1/0;for(const r of yg){const e=parseInt(r.vehicleWeight,10),o=parseFloat(r.penetration);!isNaN(e)&&!isNaN(o)&&e>=t&&o<i&&(i=o,n=r)}return n}(),m={locationName:n,assetToProtect:u,securityLevel:Em(parseInt(d.value)),protectionGrade:Em(parseInt(h.value)),threatList:c,protectionPeriod:f.options[f.selectedIndex].text,productType:p.options[p.selectedIndex].text,penetration:g?g.penetration:Fg("report.undefinedValue"),debrisDistance:g&&g.debrisDistance||Fg("report.undefinedValue")},y=await cm(m);if(!y)throw new Error("AI did not return report sections.");const{jsPDF:v}=window.jspdf,b=new v({orientation:"p",unit:"mm",format:"a4"}),_=()=>{const e=b.internal.pageSize.getWidth(),t=b.internal.pageSize.getHeight();if(b.saveGraphicsState(),b.setFont("helvetica","bold"),b.setFontSize(120),b.setTextColor(200,200,200),v.GState){const e=new v.GState({opacity:.2});b.setGState(e)}b.text(Fg("report.watermark"),e/2+50,t/2+50,{align:"center",angle:45}),b.restoreGraphicsState()},E=20,k=b.internal.pageSize.getWidth(),w=k-2*E;let S=25;const x=(e,t)=>{S>250&&(b.addPage(),_(),S=25),b.setFont("helvetica","bold").setFontSize(14).text(Fg(e),E,S),S+=7;const n=b.setFont("helvetica","normal").setFontSize(11).splitTextToSize(t,w);S+5*n.length>280&&(b.addPage(),_(),S=25),b.text(n,E,S),S+=5*n.length+10};_();const T=Fg("report.mainTitle",{locationName:n});b.setFont("helvetica","bold").setFontSize(18);const I=b.splitTextToSize(T,w),C=8;if(S+I.length*C>280&&(b.addPage(),_(),S=25),b.text(I,E,S),S+=I.length*C+5,b.setDrawColor(30,144,255).setLineWidth(.5).line(E,S,k-E,S),S+=15,x("report.sections.purpose.title",y.purpose),x("report.sections.threatAnalysis.title",y.threatAnalysis),og.size>0){S-=5,b.setFont("helvetica","normal").setFontSize(11);const e=document.getElementById("vehicle-select"),t=Zg(e.value);og.forEach((e,n)=>{let i=`• ${n} (${Math.round(e.totalLength)} m)`;if(t&&e.totalLength>0){const[n,r]=t,o=Math.round(Pm(n,e.totalLength)),a=Math.round(Pm(r,e.totalLength));i+=` | ${Fg("threats.speed")}: ${o}-${a} km/h`}const r=b.splitTextToSize(i,w-5);S+7*r.length>280&&(b.addPage(),_(),S=25),b.text(r,E+5,S),S+=6*r.length}),S+=10}if(x("report.sections.vulnerabilities.title",y.vulnerabilities),x("report.sections.hvmMeasures.title",y.hvmMeasures),x("report.sections.siteConsiderations.title",y.siteConsiderations),a){const e=a.height/a.width,t=w*e;S+t>280&&(b.addPage(),_(),S=25),b.addImage(a,"PNG",E,S,w,t),S+=t+10}else{const e=Fg("report.noMapAvailable"),t=b.setFont("helvetica","italic").setFontSize(10).splitTextToSize(e,w);S+5*t.length>280&&(b.addPage(),_(),S=25),b.text(t,E,S),S+=5*t.length+10}x("report.sections.operationalImpact.title",y.operationalImpact);try{const t=b.getNumberOfPages||(null==(e=b.internal)?void 0:e.getNumberOfPages),n="function"==typeof t?t.call(b):1;for(let e=1;e<=n;e++)b.setPage(e),_()}catch(s){_()}o.classList.remove("view-hidden"),r.classList.add("view-hidden"),await new Promise(requestAnimationFrame);try{const e=b.output("blob");dg&&URL.revokeObjectURL(dg),dg=URL.createObjectURL(e),t.src=dg}catch(s){t.src=b.output("datauristring")}cg=b,i.disabled=!1}catch(l){alert(Fg("alerts.reportCreationError")),r.classList.add("view-hidden"),o.classList.remove("view-hidden")}finally{n.classList.add("view-hidden")}}function wm(){cg?cg.save(Fg("report.reportFilename")):alert(Fg("alerts.noReportToDownload"))}function Sm(){var e;const t=document.getElementById("toggle-parameter-bubble"),n=document.getElementById("parameter-bubble"),i=document.getElementById("parameter-strip"),r=document.getElementById("nav-param-input"),o=document.getElementById("tab-param-input");if(!n||!i)return void setTimeout(()=>Sm(),1e3);const a=()=>{n.style.transform="translateX(-100%)",n.style.opacity="0",i.style.display="block"},s=()=>{n.style.transform="translateX(0)",n.style.opacity="1",i.style.display="none"},l=t.cloneNode(!0);null==(e=t.parentNode)||e.replaceChild(l,t),l.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t="translateX(-100%)"===n.style.transform,i=l.querySelector("i");t?(s(),i&&(i.className="fas fa-chevron-left")):(a(),i&&(i.className="fas fa-chevron-right"))}),i.addEventListener("click",()=>{s();const e=l.querySelector("i");e&&(e.className="fas fa-chevron-left")});const u=e=>{e.preventDefault(),s();const t=l.querySelector("i");t&&(t.className="fas fa-chevron-left")};r&&r.addEventListener("click",u),o&&o.addEventListener("click",u),a();const c=()=>{n.style.setProperty("transform","translateX(0px)","important"),n.style.setProperty("opacity","1","important"),n.style.setProperty("visibility","visible","important"),i.style.display="none",n.classList.add("parameter-expanded"),n.classList.remove("parameter-collapsed")};window.expandParameterMenu=c,window.debugParameterMenu=()=>{c()},function(e){const t=e.querySelector('div[style*="cursor: move"]');if(!t)return;let n,i,r,o,a=!1,s=0,l=0;function u(e){r=e.clientX-s,o=e.clientY-l,(e.target===t||t.contains(e.target))&&(a=!0,t.style.cursor="grabbing")}function c(t){if(a){t.preventDefault(),n=t.clientX-r,i=t.clientY-o,s=n,l=i;const a=e.getBoundingClientRect(),u=window.innerWidth-a.width,c=window.innerHeight-a.height;s=Math.max(0,Math.min(u,s)),l=Math.max(0,Math.min(c,l)),e.style.transform=`translate(${s}px, ${l}px)`}}function d(){r=n,o=i,a=!1,t.style.cursor="move"}t.addEventListener("mousedown",u),document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}(n)}function xm(){const e=document.getElementById("parameter-bubble"),t=document.getElementById("parameter-strip"),n=document.getElementById("nav-param-input"),i=document.getElementById("tab-param-input");if(!(e&&t&&n&&i))return void setTimeout(()=>xm(),2e3);const r=()=>{e.style.setProperty("transform","translateX(0px)","important"),e.style.setProperty("opacity","1","important"),e.style.setProperty("visibility","visible","important"),t.style.display="none"},o=()=>{e.style.setProperty("transform","translateX(-100%)","important"),e.style.setProperty("opacity","0","important"),t.style.display="block"},a=n.cloneNode(!0),s=i.cloneNode(!0),l=t.cloneNode(!0);n.parentNode&&n.parentNode.replaceChild(a,n),i.parentNode&&i.parentNode.replaceChild(s,i),t.parentNode&&t.parentNode.replaceChild(l,t),a.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),r()}),s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),r()}),l.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),r()}),window.emergencyExpandMenu=r,window.emergencyCollapseMenu=o,window.emergencyParameterMenuActive=!0,o()}function Tm(){var e,t,n;const i=document.getElementById("parameter-bubble"),r=document.getElementById("parameter-strip"),o=document.getElementById("nav-param-input"),a=document.getElementById("tab-param-input");if(!(i&&r&&o&&a))return void setTimeout(()=>Tm(),3e3);const s=o.cloneNode(!0),l=a.cloneNode(!0),u=r.cloneNode(!0);null==(e=o.parentNode)||e.replaceChild(s,o),null==(t=a.parentNode)||t.replaceChild(l,a),null==(n=r.parentNode)||n.replaceChild(u,r);const c=document.getElementById("nav-param-input"),d=document.getElementById("tab-param-input"),h=document.getElementById("parameter-strip"),f=()=>{const e=document.getElementById("parameter-bubble"),t=document.getElementById("parameter-strip");e&&(e.removeAttribute("style"),e.setAttribute("style","position: fixed !important;top: 130px !important;left: 8px !important;width: 320px !important;max-width: calc(100vw - 32px) !important;background: rgba(12, 47, 77, 0.95) !important;backdrop-filter: blur(10px) !important;border: 1px solid rgba(255, 255, 255, 0.2) !important;border-radius: 16px !important;box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;z-index: 9999 !important;color: white !important;max-height: calc(100vh - 140px) !important;overflow-y: auto !important;display: block !important;visibility: visible !important;opacity: 1 !important;transform: translateX(0px) !important;transition: all 0.3s ease !important;")),t&&(t.style.display="none")};c&&(c.onclick=function(e){return e.preventDefault(),e.stopPropagation(),f(),!1}),d&&(d.onclick=function(e){return e.preventDefault(),e.stopPropagation(),f(),!1}),h&&(h.onclick=function(e){return e.preventDefault(),e.stopPropagation(),f(),!1}),window.forceExpandMenu=f,window.ultimateParameterMenuActive=!0}function Im(){if(!ag)return;const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface"),i=document.getElementById("weather-select"),r={useMaxspeed:(null==e?void 0:e.checked)??!0,useTrafficCalming:(null==t?void 0:t.checked)??!0,useSurface:(null==n?void 0:n.checked)??!1,weather:(null==i?void 0:i.value)??"dry"};ag.updateConfig(r)}function Cm(){const e=document.getElementById("osm-maxspeed"),t=document.getElementById("osm-traffic-calming"),n=document.getElementById("osm-surface");return(null==e?void 0:e.checked)||(null==t?void 0:t.checked)||(null==n?void 0:n.checked)}function Nm(){ug&&clearTimeout(ug),ug=window.setTimeout(()=>{!async function(){var e,t,n;if(!ng||!ag||!Cm())return;try{const r=ng.getLatLngs()[0].map(e=>({lat:e.lat,lng:e.lng}));if(r.length<3)return void Am("error","Polygon zu klein");const o=`${(null==(e=document.getElementById("osm-maxspeed"))?void 0:e.checked)?"M":""}${(null==(t=document.getElementById("osm-traffic-calming"))?void 0:t.checked)?"C":""}${(null==(n=document.getElementById("osm-surface"))?void 0:n.checked)?"S":""}`,a=Jd.getKey(r,o),s=Jd.get(a);if(s)return sg=s,ag.setOsmData(s),void Am("success",`${s.ways.length} Straßen, ${s.calming.length} Verkehrsberuhiger`);Am("loading","Lade OSM-Daten..."),lg&&lg.abort(),lg=new AbortController;try{const e=await async function(e,t){var n;if(e.length<3)throw new Error("Polygon must have at least 3 points");const i=e.map(e=>`${e.lat} ${e.lng}`).join(" "),r=`\n    [out:json][timeout:15];\n    (\n      way["highway"](poly:"${i}");\n      node["traffic_calming"](poly:"${i}");\n    );\n    (._;>;);\n    out body;\n  `;try{const e=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:r,headers:{"Content-Type":"text/plain"},signal:t});if(!e.ok){const t=await e.text().catch(()=>"Unknown error");throw 504===e.status?new Error("Overpass API timeout - Server ist überlastet. Bitte versuchen Sie es später erneut."):429===e.status?new Error("Overpass API rate limit - Zu viele Anfragen. Bitte warten Sie einen Moment."):new Error(`Overpass API Fehler ${e.status}: ${t}`)}const i=await e.json(),o={};for(const t of i.elements)"node"===t.type&&(o[t.id]={lat:t.lat,lon:t.lon});const a=[],s=[];for(const t of i.elements)if("way"===t.type)a.push({id:t.id,nodes:(t.nodes||[]).map(e=>o[e]).filter(Boolean),tags:t.tags||{}});else if("node"===t.type&&(null==(n=t.tags)?void 0:n.traffic_calming)){const e=String(t.tags.traffic_calming);["hump","table","chicane","cushion","rumble_strip","island"].includes(e)&&s.push({id:t.id,lat:t.lat,lon:t.lon,kind:e})}return{ways:a,calming:s}}catch(o){if(o instanceof Error)throw"AbortError"===o.name?new Error("OSM-Abfrage wurde abgebrochen"):o.message.includes("Failed to fetch")?new Error("Netzwerkfehler - Überprüfen Sie Ihre Internetverbindung"):o;throw new Error("Unbekannter Fehler beim Laden der OSM-Daten")}}(r,lg.signal);Jd.set(a,e),sg=e,ag.setOsmData(e)}catch(i){return void Am("error",i instanceof Error?i.message:"Fehler beim Laden der OSM-Daten")}sg.ways.filter(e=>e.tags.maxspeed).length;Am("success",`${sg.ways.length} Straßen, ${sg.calming.length} Verkehrsberuhiger`)}catch(i){if("AbortError"===i.name)return;Am("error","OSM-Daten nicht verfügbar")}}()},300)}function Am(e,t){const n=document.getElementById("osm-status"),i=null==n?void 0:n.querySelector(".status-text");n&&i&&(n.className=`osm-status ${e}`,n.style.display="flex",i.textContent=t,"loading"!==e&&setTimeout(()=>{n.classList.contains(e)&&(n.style.display="none")},5e3))}function Pm(e,t,n){const i=Jg(e,t);if(ag&&sg&&n&&n.length>0){let e=i;const t=Math.min(10,n.length),r=Math.max(1,Math.floor(n.length/t));for(let o=0;o<n.length;o+=r){const t=n[o],r=ag.getConstraintsAt(t);let a;if(o>0&&o<n.length-1){const e=n[o-1],i=n[o+1],r=Math.atan2(t.lat-e.lat,t.lng-e.lng),s=Math.atan2(i.lat-t.lat,i.lng-t.lng),l=Math.abs(s-r);l>.01&&(a=1/l*1e3)}const s=ag.applyConstraints(i,r,a);e=Math.min(e,s)}return e}return i}function Lm(e){const t=window.entryDetectionManager;if(!t||!t.candidates||0===t.candidates.length)return;const n=document.createElement("li");n.className="entry-detection-header",n.style.cssText="\n        background: linear-gradient(135deg, rgba(74, 222, 128, 0.1), rgba(74, 222, 128, 0.05));\n        border-left: 4px solid #4ade80;\n        font-weight: 600;\n        color: #4ade80;\n        margin-top: 16px;\n        padding: 12px 16px;\n        border-radius: 8px;\n        cursor: default;\n    ",n.innerHTML=`\n        <i class="fas fa-door-open" style="margin-right: 8px;"></i>\n        Zufahrtserkennung (${t.candidates.length} gefunden)\n    `,e.appendChild(n);const i=window.currentOsmData,r=new Map;i&&i.ways&&i.ways.forEach(e=>{r.set(e.id,e)}),t.candidates.forEach((t,n)=>{let i=!1;if(t.wayIds&&t.wayIds.length>0)for(const e of t.wayIds){const t=r.get(e);if(t&&fm(t)){i=!0;break}}const o=document.createElement("li");o.className="entry-candidate-item";const a=t.confidence>=.7?"#4ade80":t.confidence>=.4?"#fbbf24":"#f87171",s=i?"#FFD700":a;o.style.cssText=`\n            background: rgba(255, 255, 255, 0.05);\n            border-left: 3px solid ${s};\n            margin: 4px 0;\n            padding: 12px 16px;\n            border-radius: 6px;\n            cursor: pointer;\n            transition: all 0.2s ease;\n        `,o.innerHTML=`\n            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">\n                <span style="font-weight: 600; color: white;">\n                    ${i?"🏠":"🚗"} Zufahrt ${n+1} ${i?"(Erschließung)":""}\n                </span>\n                <span style="background: rgba(255, 255, 255, 0.2); padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; color: ${a};">\n                    ${Math.round(100*t.confidence)}% Confidence\n                </span>\n            </div>\n            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; font-size: 11px; color: #ccc;">\n                <div>\n                    <div style="color: #aaa; font-size: 10px; margin-bottom: 2px;">Distanz:</div>\n                    <div style="font-weight: 600; color: white;">${Math.round(t.distanceMeters)}m</div>\n                </div>\n                <div>\n                    <div style="color: #aaa; font-size: 10px; margin-bottom: 2px;">Geradheit:</div>\n                    <div style="font-weight: 600; color: white;">${Math.round(100*t.straightness)}%</div>\n                </div>\n                <div>\n                    <div style="color: #aaa; font-size: 10px; margin-bottom: 2px;">Kontinuität:</div>\n                    <div style="font-weight: 600; color: white;">${Math.round(100*t.continuity)}%</div>\n                </div>\n            </div>\n        `,o.addEventListener("mouseenter",()=>{o.style.background="rgba(255, 255, 255, 0.1)",o.style.transform="translateX(4px)"}),o.addEventListener("mouseleave",()=>{o.style.background="rgba(255, 255, 255, 0.05)",o.style.transform="translateX(0)"}),o.addEventListener("click",()=>{}),e.appendChild(o)})}function Om(){const e=document.querySelector("#chatbot-react-root h2");e&&(e.textContent=Fg("ai.chatbot.title"));const t=document.querySelector("#chatbot-react-root .message:first-child .message-content");t&&(t.textContent=Fg("ai.chatbot.welcome"));const n=document.querySelector("#chatbot-react-root .message:nth-child(2) .message-content");n&&(n.textContent=Fg("ai.chatbot.assetQuestion"));const i=document.querySelector('#chatbot-react-root input[type="text"]');i&&(i.placeholder=Fg("ai.chatbot.inputPlaceholder"));const r=document.querySelector('#chatbot-react-root button[type="submit"]');r&&(r.textContent=Fg("ai.chatbot.sendButton"))}function Mm(e){const t=document.getElementById(e);if(!t)return[];const n=t.querySelectorAll('input[type="checkbox"]:checked');return Array.from(n).map(e=>e.value)}function Rm(){const e={vehicleMass:Mm("vehicle-mass-content"),impactSpeed:{min:parseInt((null==(t=document.getElementById("min-speed"))?void 0:t.value)||"16"),max:parseInt((null==(n=document.getElementById("max-speed"))?void 0:n.value)||"112")},impactAngle:{min:parseInt((null==(i=document.getElementById("min-angle"))?void 0:i.value)||"15"),max:parseInt((null==(r=document.getElementById("max-angle"))?void 0:r.value)||"90")},penetrationDistance:{min:parseFloat((null==(o=document.getElementById("min-distance"))?void 0:o.value)||"0"),max:parseFloat((null==(a=document.getElementById("max-distance"))?void 0:a.value)||"60")},standard:Mm("standards-content"),foundation:Mm("foundation-content"),operation:Mm("operation-content"),deployment:Mm("deployment-content"),category:Mm("categories-content"),manufacturer:(null==(s=document.getElementById("manufacturer-select"))?void 0:s.value)||""};var t,n,i,r,o,a,s;const l=function(e,t){return e.filter(e=>{const n=e.technical_data;if(!n)return!1;if(t.vehicleMass.length>0){const e=n.pr_mass_kg,i=n.pr_veh;if(!e||!i)return!1;if(!t.vehicleMass.some(t=>{const[n,r]=t.split(" "),o=parseInt(n);return e===o&&i===r.replace(/[\[\]]/g,"")}))return!1}const i=n.pr_speed_kph;if(i&&(i<t.impactSpeed.min||i>t.impactSpeed.max))return!1;const r=n.pr_angle_deg;if(r&&(r<t.impactAngle.min||r>t.impactAngle.max))return!1;const o=n.pr_pen_m;if(o&&(o<t.penetrationDistance.min||o>t.penetrationDistance.max))return!1;if(t.standard.length>0){const e=n.standard;if(!e||!t.standard.includes(e))return!1}if(t.foundation.length>0){const e=n.foundation_depth;if(!e||!t.foundation.includes(e))return!1}if(t.operation.length,t.deployment.length>0){const e=t.deployment.includes("temporary"),i=t.deployment.includes("permanent"),r="A - Free standing (no ground fixings)"===n.foundation_depth;let o=!1;if(e&&r&&(o=!0),i&&(o=!0),e&&i&&(o=!0),!o&&e&&!r)return!1;if(!o)return!1}return t.category.length,!t.manufacturer||""===t.manufacturer||e.manufacturer===t.manufacturer})}(window.productDatabase||[],e);xg(l)}window.toggleRangeInput=function(e){const t=document.getElementById(`${e}-content`),n=document.getElementById(`${e}-icon`);if(t&&n){"none"!==t.style.display?(t.style.display="none",n.classList.remove("expanded")):(t.style.display="block",n.classList.add("expanded"))}},window.toggleDropdown=function(e){const t=document.getElementById(`${e}-content`),n=document.getElementById(`${e}-icon`);if(t&&n){"none"!==t.style.display?(t.style.display="none",n.classList.remove("expanded")):(t.style.display="block",n.classList.add("expanded"))}},document.addEventListener("DOMContentLoaded",()=>{Vp(),jp(),document.querySelectorAll(".logo-img, .welcome-logo").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),Hp()}),e.style.cursor="pointer"}),function(){const e=document.getElementById("edit-threats-btn"),t=document.getElementById("minimize-threats-btn"),n=document.getElementById("close-threats-btn"),i=document.getElementById("floating-threats");e&&e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),nm()}),t&&i&&t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),i.classList.toggle("minimized");const n=i.classList.contains("minimized"),r=i.querySelector(".threat-panel-content");r&&(n?(r.style.maxHeight="0",r.style.opacity="0",r.style.padding="0",r.style.margin="0",r.style.overflow="hidden"):(r.style.maxHeight="",r.style.opacity="",r.style.padding="",r.style.margin="",r.style.overflow="")),t.title=Fg(n?"threats.maximize":"threats.minimize");const o=t.querySelector("i");o&&(o.className=n?"fas fa-plus":"fas fa-minus")}),n&&i&&n.addEventListener("click",()=>{i.classList.add("view-hidden"),Hg()})}()});
